{"version":3,"file":"main.js","mappings":"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ACA,CAAC;;AAED;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA,2DAA2D;AAC3D;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA,GAAG;;AAEH;AACA;;AAEA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,UAAU;AACV;AACA;;AAEA;AACA;AACA,uBAAuB;AACvB,GAAG;AACH;AACA,uBAAuB;AACvB,GAAG;AACH,EAAE;AACF;AACA;AACA;;AAEA;AACA;AACA,uCAAuC,UAAU,+BAA+B;AAChF;AACA,mDAAmD;AACnD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;;AC/Ka;AACb;AACA,6BAA6B,YAAY,IAAI,IAAI,MAAM,IAAI;AAC3D;;;;;;;;;;;;ACHA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,sBAAsB;AACxC;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA,eAAe;AACf;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA,oBAAoB,SAAS;AAC7B;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;;AAEA,kCAAkC,QAAQ;AAC1C;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,oBAAoB,iBAAiB;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAQ;AACR;AACA,uCAAuC,QAAQ;AAC/C;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,OAAO;AACzB;AACA;AACA;;AAEA;AACA,SAAS,yBAAyB;AAClC;AACA;AACA;;AAEA;AACA;AACA,kBAAkB,gBAAgB;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,8DAA8D,YAAY;AAC1E;AACA,8DAA8D,YAAY;AAC1E;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,qCAAqC,YAAY;AACjD;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,IAAI;AACJ;AACA;AACA;;;;;;;;;;;;;;;;;;;;;AChfA;AACA;AACA;AACA;AACA;AACO;AACA;AACA;AACP;AACA;AACA;AACA,WAAW,4CAA4C;AACvD;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACjDwC;AACN;AACE;AACF;AACA;AACA;AACE;AACF;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACTM;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA,iBAAiB;;AAEjB;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AAC7S;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/aiC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AACvd;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACreiC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,eAAe;AAC1B,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AACttB;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzwBiC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;;AAEnC;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,YAAY,+CAAgB;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uBAAuB;;AAEvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA,YAAY,+CAAgB;AAC5B;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,eAAe;AAC1B,aAAa,MAAM;AACnB;;AAEO;AACP,wBAAwB,kDAAmB;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yDAAyD;;AAEzD;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,cAAc;AAC1B,YAAY,MAAM;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,cAAc;AAC1B,YAAY,MAAM;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,YAAY,MAAM;AAClB;;AAEO;AACP,oBAAoB,kDAAmB;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB;AACA,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,iCAAiC,+CAAgB,+BAA+B,+CAAgB,+BAA+B,+CAAgB;AAC/I;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,uEAAuE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB,yEAAyE,+CAAgB;AAC/zC;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACr3DiC;AACN;AACA;AACA;AAClC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,cAAc;AAC1B,YAAY,YAAY;AACxB;;AAEO;AACP;AACA;;AAEA,UAAU,+CAAgB;AAC1B;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,cAAc;AAC1B,YAAY,cAAc;AAC1B,YAAY,YAAY;AACxB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;;AAE3C,iDAAiD;;AAEjD;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ,oBAAoB,+CAAgB;AACpC;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA,WAAW,8CAAe;AAC1B,WAAW,8CAAe;AAC1B,WAAW,8CAAe;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,oCAAoC;;AAEpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA,qCAAqC;;AAErC;AACA,yBAAyB;;AAEzB;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,GAAG;AACd,WAAW,GAAG;AACd,WAAW,GAAG;AACd,aAAa,MAAM;AACnB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO,YAAY,2CAAU;AAC7B;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;;AAEO,iBAAiB,gDAAe;AACvC;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO,WAAW,0CAAS;AAC3B;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;;AAEO,UAAU,yCAAQ;AACzB;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO,UAAU,yCAAQ;AACzB;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;;AAEO,YAAY,2CAAU;AAC7B;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;;AAEO,UAAU,yCAAQ;AACzB;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;AACA;;AAEO,WAAW,0CAAS;AAC3B;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO,aAAa,4CAAW;AAC/B;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;AACA;;AAEO,oBAAoB,mDAAkB;AAC7C;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;AACA;;AAEO,gBAAgB,+CAAc;AACrC;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO,kBAAkB,iDAAgB;AACzC;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO,aAAa,4CAAW;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,4CAAW;AAC3B,kBAAkB,gDAAe;AACjC,kBAAkB,gDAAe;AACjC;AACA,cAAc,yCAAQ;;AAEtB;AACA,MAAM,2CAAU;AAChB,UAAU,yCAAQ,sBAAsB,2CAAU;AAClD,MAAM,+CAAc;AACpB;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA,MAAM;AACN,MAAM,2CAAU;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,aAAa,4CAAW;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACrsBuC;AACN;AACA;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,OAAO;AACpB;;AAEO;AACP,eAAe,kDAAmB;;AAElC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;;AAEO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP,eAAe,kDAAmB;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA,cAAc,4CAAW;AACzB,EAAE,iDAAgB;AAClB,cAAc,kDAAmB;AACjC,EAAE,oDAAmB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,eAAe;AAC3B,YAAY,MAAM;AAClB;;AAEO,cAAc,0CAAS;AAC9B;AACA;AACA,YAAY,MAAM;AAClB,YAAY,eAAe;AAC3B,YAAY,MAAM;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO,cAAc,0CAAS;AAC9B;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,MAAM;AAClB,YAAY,eAAe;AAC3B,YAAY,MAAM;AAClB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,6CAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,6CAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE,6CAAY;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,cAAc;AACzB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA,sBAAsB,+CAAgB;AACtC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;;AAEO,UAAU,yCAAQ;AACzB;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;;AAEO,aAAa,4CAAW;AAC/B;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;;AAEO,oBAAoB,mDAAkB;AAC7C;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,eAAe;AAC1B,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,eAAe;AAC1B,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AACjoB;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACl0BwC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,UAAU,8CAAe;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,eAAe;AAC1B,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA,4BAA4B;;AAE5B;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C;;AAE7C;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB;AACnI;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AC/mBuC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,UAAU,8CAAe;AACzB,UAAU,8CAAe;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA,6BAA6B;;AAE7B;AACA;AACA,kCAAkC;;AAElC;AACA;AACA;AACA,aAAa;;AAEb;AACA;AACA,aAAa;;AAEb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,cAAc;;AAEd;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA,sDAAsD;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,cAAc;;AAEd;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA,sDAAsD;;AAEtD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA,cAAc;;AAEd;AACA;AACA,sBAAsB;;AAEtB;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AACxN;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AClxBuC;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;;AAEnC,MAAM,kDAAmB;AACzB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,gBAAgB,kDAAmB;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,QAAQ;AACnB,aAAa,MAAM;AACnB;;AAEO;AACP,wBAAwB;AACxB;AACA;;AAEA;AACA;;AAEA;AACA,SAAS,8CAAe;AACxB,SAAS,8CAAe;AACxB;AACA,IAAI;;AAEJ;AACA,SAAS,8CAAe;AACxB,SAAS,8CAAe;AACxB;AACA,IAAI;;AAEJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;;AAEjB;AACA;AACA;AACA,sCAAsC;;AAEtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,MAAM;AACjB,aAAa,MAAM;AACnB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,aAAa,QAAQ;AACrB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA,WAAW,cAAc;AACzB,WAAW,cAAc;AACzB,aAAa,SAAS;AACtB;;AAEO;AACP;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB,qEAAqE,+CAAgB;AAC7S;AACA;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA,cAAc;AACd;AACA;;AAEO;AACP;AACA;AACA;AACA,WAAW,OAAO;AAClB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,WAAW,UAAU;AACrB,WAAW,QAAQ;AACnB,aAAa,OAAO;AACpB;AACA;;AAEO;AACP;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;;AAEA,qBAAqB,OAAO;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,CAAC;;;;;;;;;;;ACtpBY;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,mBAAO,CAAC,mGAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;;;;;;;;;;;;AC/HR;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,mBAAO,CAAC,mGAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;ACtKa;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB,mBAAO,CAAC,6FAAgB;AAC7C,mBAAmB;AACnB,uBAAuB,mBAAO,CAAC,iGAAkB;AACjD,qBAAqB;AACrB,uBAAuB,mBAAO,CAAC,iGAAkB;AACjD,qBAAqB;AACrB,uBAAuB;;;;;;;;;;;;ACRV;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,qBAAqB;AACrB;AACA;AACA,oBAAoB;AACpB;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,yBAAyB;AACzB,uBAAuB;;;;;;;;;;;;ACdV;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB,mBAAO,CAAC,mGAAmB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,SAAS;AACT,WAAW;AACX,WAAW;AACX,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd,cAAc;AACd,gBAAgB;AAChB,iBAAiB;AACjB,eAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C;AAC5C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4EAA4E;AAC5E;AACA;AACA;AACA,uCAAuC;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,mBAAmB;;;;;;;;;;;ACnInB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ,IAA0C;AAClD,QAAQ,oCAAO,UAAU;AAAA;AAAA;AAAA;AAAA,kGAAC;AAC1B,MAAM,KAAK,EAIN;AACL,CAAC;AACD;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,0BAA0B;AAC1B,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA,UAAU;AACV;AACA;AACA;;AAEA;;AAEA;AACA;AACA,wBAAwB,uBAAuB;AAC/C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA,qEAAqE;AACrE,YAAY;AACZ;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C;AAC1C;AACA,gBAAgB;AAChB;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY;;AAEZ;AACA;AACA;AACA,qDAAqD;AACrD,YAAY;AACZ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,sBAAsB;AACtB;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,CAAC;;;;;;;;;;;;ACxSD;AACA,CAAC;;AAED;AACA,mBAAmB,KAA0B;AAC7C;AACA,kBAAkB,KAAyB;AAC3C;AACA,yBAAyB,qBAAM,gBAAgB,qBAAM;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;;AAEF;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,cAAc,OAAO;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,OAAO;AACnB,YAAY,UAAU;AACtB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,YAAY,UAAU;AACtB;AACA,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,cAAc,OAAO;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sCAAsC;AACtC;AACA,MAAM;AACN,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,cAAc,QAAQ;AACtB;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,mCAAmC;AACnE;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,yBAAyB;;AAEzB,0CAA0C,qBAAqB;;AAE/D;AACA;AACA;AACA;AACA;AACA,mCAAmC,oBAAoB;;AAEvD;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA,cAAc,iBAAiB;AAC/B;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,2BAA2B,iBAAiB;AAC5C;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,eAAe,iBAAiB;AAChC;;AAEA;AACA;AACA;;AAEA;AACA;AACA,+BAA+B,oBAAoB;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA,cAAc,QAAQ;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,EAAE,IAEU;AACZ;AACA,EAAE,mCAAmB;AACrB;AACA,GAAG;AAAA,kGAAC;AACJ,GAAG,KAAK,EAUN;;AAEF,CAAC;;;;;;;;;;;;ACjhBD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,kBAAkB,SAAS;AAC3B;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;;;;;;;;;;;;AC/EA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA,KAAK;;AAEL;;AAEA;AACA;AACA;AACA;;;;;;;;;;;;AC/Da;;AAEb,cAAc,GAAG,8GAAmC;AACpD,cAAc,GAAG,kHAAuC;;;;;;;;;;;ACHxD,cAAc,iFAAiF,gBAAgB,aAAa,oGAAoG,KAAK,kBAAkB,cAAc,wHAAwH,SAAS,OAAO,+BAA+B,gFAAgF,mBAAmB,0CAA0C,+BAA+B,SAAS,iBAAiB,oBAAoB,SAAS,iBAAiB,MAAM,YAAY,+DAA+D,gBAAgB,kBAAkB,4BAA4B,iBAAiB,EAAE,kVAAkV,gCAAgC,iHAAiH,QAAQ,aAAa,uBAAuB,IAAI,MAAM,cAAc,YAAY,+CAA+C,wBAAwB,6BAA6B,YAAY,IAAI,KAAK,aAAa,iBAAiB,KAAK,iDAAiD,uTAAuT,8CAA8C,oGAAoG,4CAA4C,uCAAuC,OAAO,qEAAqE,uCAAuC,qCAAqC,KAAK,oCAAoC,EAAE,mBAAmB,sBAAsB,WAAW,8EAA8E,eAAe,yBAAyB,kFAAkF,QAAQ,iFAAiF,EAAE,aAAa,eAAe,EAAE,sCAAsC,sBAAsB,4CAA4C,QAAQ,iCAAiC,YAAY,IAAI,4CAA4C,iBAAiB,EAAE,qBAAqB,6CAA6C,eAAe,EAAE,KAAK,SAAS,KAAK,+BAA+B,SAAS,eAAe,gBAAgB,KAAK,0BAA0B,oCAAoC,wBAAwB,sBAAsB,YAAY,kBAAkB,8DAA8D,sCAAsC,8PAA8P,QAAQ,iBAAiB,0CAA0C,KAAK,MAAM,MAAM,IAAI,UAAU,SAAS,uFAAuF,gBAAgB,kCAAkC,KAAK,WAAW,EAAE,gBAAgB,MAAM,sJAAsJ,mDAAmD,SAAS,KAAK,QAAQ,yGAAyG,QAAQ,qBAAqB,oEAAoE,gBAAgB,MAAM,8CAA8C,iBAAiB,yBAAyB,gBAAgB,cAAc,cAAc,cAAc,YAAY,0KAA0K,MAAM,oFAAoF,yBAAyB,cAAc,2CAA2C,KAAK,wCAAwC,KAAK,2BAA2B,wIAAwI,KAAK,MAAM,MAAM,sBAAsB,8FAA8F,8DAA8D,KAAK,0CAA0C,2BAA2B,KAAK,uBAAuB,iDAAiD,KAAK,gCAAgC,eAAe,UAAU,2GAA2G,sDAAsD,0BAA0B,MAAM,wDAAwD,cAAc,EAAE,sBAAsB,iBAAiB,QAAQ,uBAAuB,gMAAgM,cAAc,4BAA4B,gBAAgB,qBAAqB,SAAS,uEAAuE,KAAK,UAAU,QAAQ,eAAe,aAAa,kIAAkI,iBAAiB,KAAK,iGAAiG,kBAAkB,cAAc,gCAAgC,KAAK,wCAAwC,kBAAkB,cAAc,gCAAgC,KAAK,0FAA0F,kBAAkB,cAAc,gCAAgC,YAAY,MAAM,2DAA2D,iHAAiH,kHAAkH,eAAe,QAAQ,wJAAwJ,QAAQ,mBAAmB,+EAA+E,KAAK,WAAW,8KAA8K,+KAA+K,QAAQ,iBAAiB,0FAA0F,eAAe,iBAAiB,8FAA8F,WAAW,qBAAqB,sBAAsB,eAAe,2CAA2C,cAAc,oDAAoD,mCAAmC,+BAA+B,yKAAyK,mBAAmB,YAAY,WAAW,4FAA4F,wCAAwC,yCAAyC,GAAG,6CAA6C,SAAS,uCAAuC,2CAA2C,OAAO,YAAY,SAAS,iBAAiB,UAAU,yBAAyB,MAAM,qDAAqD,SAAS,oBAAoB,QAAQ,UAAU,wBAAwB,MAAM,sCAAsC,MAAM,2BAA2B,gBAAgB,SAAS,QAAQ,UAAU,iCAAiC,8DAA8D,4BAA4B,cAAc,uHAAuH,yBAAyB,MAAM,0DAA0D,gCAAgC,gBAAgB,WAAW,+CAA+C,qBAAqB,yCAAyC,KAAK,6BAA6B,+HAA+H,+EAA+E,uDAAuD,oCAAoC,OAAO,MAAM,eAAe,QAAQ,gBAAgB,oCAAoC,gCAAgC,6BAA6B,wCAAwC,kBAAkB,6CAA6C,kBAAkB,oCAAoC,uHAAuH,gGAAgG,6CAA6C,8DAA8D,yBAAyB,WAAW,qBAAqB,uCAAuC,iCAAiC,8BAA8B,SAAS,gBAAgB,oBAAoB,mFAAmF,IAAI,MAAM,iKAAiK,iBAAiB,QAAQ,sJAAsJ,oBAAoB,MAAM,mEAAmE,OAAO,oDAAoD,gEAAgE,GAAG,mBAAmB,MAAM,uGAAuG,6CAA6C,oBAAoB,MAAM,2IAA2I,MAAM,+DAA+D,+CAA+C,mBAAmB,uBAAuB,MAAM,+CAA+C,MAAM,kEAAkE,uCAAuC,gCAAgC,YAAY,cAAc,QAAQ,iCAAiC,+BAA+B,mHAAmH,+EAA+E,OAAO,UAAU,uCAAuC,4BAA4B,8LAA8L,4CAA4C,qBAAqB,SAAS,+PAA+P,YAAY,wBAAwB,IAAI,kBAAkB,QAAQ,eAAe,SAAS,kBAAkB,6BAA6B,8CAA8C,gBAAgB,MAAM,gCAAgC,8EAA8E,SAAS,eAAe,IAAI,4FAA4F,MAAM,4DAA4D,6BAA6B,SAAS,uBAAuB,aAAa,eAAe,KAAK,MAAM,+CAA+C,MAAM,6DAA6D,8EAA8E,OAAO,uCAAuC,qBAAqB,gCAAgC,oBAAoB,eAAe,gBAAgB,SAAS,UAAU,4FAA4F,YAAY,kBAAkB,oBAAoB,mFAAmF,YAAY,iFAAiF,kBAAkB,8NAA8N,mBAAmB,cAAc,wCAAwC,UAAU,gBAAgB,mBAAmB,QAAQ,iCAAiC,mGAAmG,UAAU,sBAAsB,mCAAmC,QAAQ,iEAAiE,mBAAmB,eAAe,oEAAoE,uDAAuD,gBAAgB,wCAAwC,oBAAoB,MAAM,6EAA6E,uBAAuB,MAAM,gFAAgF,SAAS,UAAU,iHAAiH,cAAc,kFAAkF,cAAc,EAAE,mHAAmH,MAAM,kBAAkB,GAAG,OAAO,8BAA8B,oCAAoC,6EAA6E,iBAAiB,2BAA2B,EAAE,uDAAuD,iCAAiC,yEAAyE,aAAa,4BAA4B,eAAe,mCAAmC,kCAAkC,iBAAiB,mCAAmC,KAAK,0EAA0E,sBAAsB,kBAAkB,QAAQ,SAAS,aAAa,eAAe,OAAO,kBAAkB,QAAQ,MAAM,+BAA+B,aAAa,gDAAgD,aAAa,0CAA0C,yCAAyC,sBAAsB,WAAW,cAAc,YAAY,gBAAgB,wBAAwB,2BAA2B,WAAW,qBAAqB,mBAAmB,aAAa,yBAAyB,OAAO,wBAAwB,qBAAqB,gBAAgB,kBAAkB,UAAU,iBAAiB,UAAU,cAAc,mBAAmB,8CAA8C,uCAAuC,8DAA8D,sBAAsB,wBAAwB,eAAe,aAAa,uCAAuC,gCAAgC,mCAAmC,qCAAqC,8BAA8B,8BAA8B,WAAW,UAAU,yDAAyD,OAAO,WAAW,UAAU,0CAA0C,uCAAuC,8DAA8D,aAAa,sBAAsB,4BAA4B,8BAA8B,mIAAmI,kBAAkB,kBAAkB,8DAA8D,+CAA+C,kCAAkC,kBAAkB,aAAa,YAAY,UAAU,0DAA0D,oCAAoC,eAAe,gBAAgB,0DAA0D,uCAAuC,iCAAiC,aAAa,QAAQ,8BAA8B,gBAAgB,wBAAwB,aAAa,eAAe,QAAQ,wBAAwB,aAAa,iBAAiB,qBAAqB,YAAY,kBAAkB,WAAW,eAAe,mBAAmB,8CAA8C,sBAAsB,wBAAwB,eAAe,aAAa,uCAAuC,gCAAgC,mCAAmC,iCAAiC,iCAAiC,2BAA2B,8BAA8B,WAAW,yEAAyE,uDAAuD,8BAA8B,UAAU,0DAA0D,iCAAiC,UAAU,0DAA0D,iCAAiC,eAAe,EAAE,yBAAyB,mFAAmF,6FAA6F,0BAA0B,KAAK,oDAAoD,+CAA+C,wBAAwB,cAAc,0IAA0I,oBAAoB,UAAU,oBAAoB,4RAA4R,YAAY,OAAO,mKAAmK,SAAS,oDAAoD,WAAW,oDAAoD,wBAAwB,kCAAkC,uBAAuB,gBAAgB,SAAS,mBAAmB,+FAA+F,YAAY,YAAY,0BAA0B,cAAc,gCAAgC,cAAc,+BAA+B,8BAA8B,0BAA0B,WAAW,oBAAoB,QAAQ,uBAAuB,uIAAuI,sBAAsB,8DAA8D,wBAAwB,qFAAqF,8BAA8B,2CAA2C,wcAAwc,yBAAyB,mFAAmF,6FAA6F,0BAA0B,KAAK,oDAAoD,+CAA+C,wBAAwB,cAAc,iTAAiT,oBAAoB,UAAU,oBAAoB,+SAA+S,OAAO,mHAAmH,SAAS,0EAA0E,SAAS,iBAAiB,UAAU,iBAAiB,oBAAoB,MAAM,uEAAuE,qBAAqB,4DAA4D,sBAAsB,MAAM,yEAAyE,SAAS,kBAAkB,0HAA0H,8BAA8B,eAAe,cAAc,eAAe,sBAAsB,UAAU,sBAAsB,QAAQ,oBAAoB,aAAa,4BAA4B,2CAA2C,YAAY,YAAY,kCAAkC,cAAc,sCAAsC,iBAAiB,yBAAyB,4BAA4B,2BAA2B,uBAAuB,sBAAsB,6BAA6B,2BAA2B,MAAM,mFAAmF,uBAAuB,wDAAwD,2BAA2B,oCAAoC,EAAE,0BAA0B,EAAE,eAAe,yBAAyB,aAAa,EAAE,eAAe,EAAE,IAAI,EAAE,WAAW,oBAAoB,oCAAoC,0FAA0F,oCAAoC,oCAAoC,oBAAoB,uIAAuI,0BAA0B,+CAA+C,iEAAiE,QAAQ,kCAAkC,gBAAgB,EAAE,wCAAwC,GAAG,8BAA8B,kCAAkC,kBAAkB,0BAA0B,gDAAgD,mBAAmB,0GAA0G,sBAAsB,6CAA6C,wCAAwC,YAAY,WAAW,wCAAwC,oCAAoC,yHAAyH,4BAA4B,wJAAwJ,uBAAuB,sDAAsD,iCAAiC,2PAA2P,qBAAqB,YAAY,sBAAsB,+BAA+B,uBAAuB,6BAA6B,QAAQ,WAAW,0BAA0B,kBAAkB,yIAAyI,sBAAsB,wCAAwC,uBAAuB,yCAAyC,0KAA0K,wBAAwB,2FAA2F,0BAA0B,wCAAwC,8EAA8E,4BAA4B,WAAW,EAAE,oCAAoC,+kBAA+kB,SAAS,wBAAwB,WAAW,MAAM,eAAe,gEAAgE,8DAA8D,EAAE,YAAY,wCAAwC,OAAO,KAAK,sBAAsB,6DAA6D,GAAG,eAAe,SAAS,MAAM,MAAM,wEAAwE,gCAAgC,MAAM,2CAA2C,iBAAiB,MAAM,6GAA6G,UAAU,EAAE;;;;;;;;;;;ACA103B;AACA,aAAa,GAAG,IAAsD,EAAE,mBAAmB,KAAK,UAA+N,CAAC,aAAa,0BAA0B,mBAAmB,kBAAkB,gBAAgB,UAAU,UAAU,MAAM,SAAmC,CAAC,gBAAgB,OAAC,OAAO,oBAAoB,8CAA8C,kCAAkC,YAAY,YAAY,mCAAmC,iBAAiB,eAAe,sBAAsB,oBAAoB,UAAU,SAAmC,KAAK,WAAW,YAAY,SAAS,SAAS,KAAK;AAC3zB;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,EAAE,kCAAkC;AACrC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC,EAAE,0BAA0B;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB,QAAQ;AAC3B;AACA;AACA,kBAAkB,sBAAsB;AACxC;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC,EAAE,gCAAgC;AACnC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,CAAC,GAAG;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,sBAAsB;AAC1C;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,GAAG;AACJ;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC,EAAE,0BAA0B;AAC7B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,EAAE,+BAA+B;AAClC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,uIAAuI;AAC1I;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,mEAAmE;AACtE;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,EAAE,sFAAsF;AACzF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA,KAAK;AACL;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,sHAAsH;AACzH;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,wNAAwN;AAC3N;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,GAAG;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,iDAAiD,WAAW;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA,oBAAoB;AACpB;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,8XAA8X;AACjY;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA,MAAM,YAAY;AAClB;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,EAAE;AACF;AACA,gDAAgD;AAChD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB;AACnB;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,uFAAuF,uCAAuC;;AAE9H;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,qDAAqD;AACrD,qEAAqE;AACrE;AACA;AACA,wDAAwD;AACxD,8EAA8E;AAC9E;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,0BAA0B,kBAAkB;;;AAG5C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C,SAAS;;AAET;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mCAAmC;AACnC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,eAAe,YAAY;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+DAA+D;;AAE/D;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8DAA8D;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,0BAA0B;AACtE;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;AAC3C;AACA;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA,mDAAmD;AACnD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;;AAED,CAAC,GAAG;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,0QAA0Q;AAC7Q;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA;;AAEA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,gFAAgF;AACnF;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,GAAG;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,GAAG;AACJ;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC,EAAE,wGAAwG;AAC3G;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC,EAAE,qFAAqF;AACxF;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,+IAA+I;AAClJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,EAAE,mFAAmF;AACtF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,qEAAqE;AACxE;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA,KAAK;AACL;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,oCAAoC;AACvC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA,0CAA0C;AAC1C;AACA;AACA;;AAEA;AACA;AACA,0FAA0F;;AAE1F;;AAEA;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,EAAE,qDAAqD;AACxD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;;AAEH;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,oCAAoC;AACvC;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,oFAAoF;AACvF;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,qDAAqD;AACxD;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,yGAAyG;AAC5G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;AACA,gBAAgB;;AAEhB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,0BAA0B,sDAAsD,kBAAkB,WAAW;AAC7G;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,kIAAkI;AACrI;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,oCAAoC;AACvC;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,wDAAwD;AAC3D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,yGAAyG;AAC5G;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;;AAEA,CAAC,EAAE,iCAAiC;AACpC;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gCAAgC;AAChC,GAAG;AACH;;AAEA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA,CAAC,EAAE,yBAAyB;AAC5B;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;AAEA;;AAEA;;AAEA,CAAC,EAAE,iCAAiC;AACpC;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,kGAAkG;AACrG;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,oCAAoC;;AAEpC;;AAEA,CAAC,EAAE,+FAA+F;AAClG;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,sCAAsC;;AAEtC;;AAEA,CAAC,EAAE,0EAA0E;AAC7E;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA,oCAAoC;;AAEpC;;AAEA,CAAC,EAAE,uGAAuG;AAC1G;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,sCAAsC;;AAEtC;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,EAAE,6HAA6H;AAChI;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,GAAG;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,GAAG;AACJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,WAAW;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,KAAK;AACL;AACA;;AAEA,CAAC,EAAE,WAAW;AACd;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,EAAE,cAAc;AACjB;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA,gEAAgE;AAChE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,cAAc,SAAS,QAAQ,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAElJ,CAAC,EAAE,kDAAkD;AACrD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA,IAAI,oCAAoC;AACxC,CAAC;;AAED;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,GAAG;AACJ;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,+CAA+C,YAAY;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,GAAG;AACJ;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,YAAY;AAChC;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,EAAE,YAAY;AACf;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,OAAO;AACP;AACA;AACA;AACA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,WAAW;AACd;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yBAAyB,IAAI,UAAU,IAAI,UAAU,IAAI;AACzD;AACA;;AAEA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,0BAA0B;AAC7B;;AAEA,CAAC,GAAG;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,YAAY,OAAO;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY;AACZ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA,CAAC,GAAG;AACJ;AACA;;AAEA,wBAAwB,2EAA2E,kCAAkC,wBAAwB,OAAO,kCAAkC,mIAAmI;;AAEzU;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA,IAAI;AACJ;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,0CAA0C;AAC1C;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;;;AAGA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI,eAAe;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;;;AAGA;AACA;;AAEA;AACA;AACA,IAAI,iBAAiB;AACrB;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA,IAAI,eAAe;AACnB;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;AAGA,CAAC,cAAc,SAAS;;AAExB,CAAC,EAAE,cAAc;AACjB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,aAAa,eAAe;AAC5B;AACA;;AAEA;AACA;;AAEA,oBAAoB,sBAAsB;AAC1C;AACA,iBAAiB;AACjB;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,aAAa;AACb;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,0EAA0E,aAAa;AACvF;AACA;;AAEA,wBAAwB;;AAExB;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;;;AAGR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,6CAA6C;;AAE7C;AACA;AACA;;AAEA;AACA,OAAO,GAAG;;AAEV;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,2BAA2B;AAC3B;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,gBAAgB,SAAS;AACzB;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA,gBAAgB,kCAAkC;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,QAAQ;AACpB,aAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;;AAEA,gDAAgD,SAAS;AACzD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY,OAAO;AACnB,aAAa;AACb;AACA;;;AAGA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA,CAAC,EAAE,QAAQ;AACX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;AACA,EAAE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,CAAC,GAAG;AACJ;AACA;AACA,CAAC;AACD;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW;AACX;AACA,QAAQ;AACR,kCAAkC,iDAAiD;AACnF;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,mDAAmD;AAC/E;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,SAAS;;AAET;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA,4CAA4C,+BAA+B;AAC3E;AACA;AACA;AACA;AACA;AACA,UAAU;AACV,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6DAA6D,6BAA6B;AAC1F,oEAAoE,iCAAiC;AACrG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE;AACA,0CAA0C,SAAS;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uDAAuD,gBAAgB;AACvE;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA;AACA,uEAAuE;AACvE,8DAA8D;AAC9D;AACA;AACA,mDAAmD,OAAO;AAC1D;AACA;AACA;AACA,iBAAiB;AACjB,0DAA0D,0EAA0E,OAAO,0BAA0B,SAAS;AAC9K;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,mEAAmE,eAAe;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC,0BAA0B;AAClE;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA;AACA;AACA;AACA,iCAAiC,MAAM;AACvC,4CAA4C;AAC5C;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+CAA+C,KAAK;AACpD;AACA;AACA;AACA;AACA;AACA,+CAA+C;AAC/C;AACA;AACA;AACA,2CAA2C,eAAe;AAC1D;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,kBAAkB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,6FAA6F;AACtH,oEAAoE;AACpE;AACA;AACA;AACA;AACA,2BAA2B,mBAAmB;AAC9C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C,mBAAmB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,cAAc,oBAAoB;AAClC;AACA;AACA,qBAAqB;AACrB;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mCAAmC;AACnC;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,SAAS;AACnD;AACA;AACA,cAAc;AACd;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wFAAwF;AACxF;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;;AAEL;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,CAAC;;AAED,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,GAAG;AACJ;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa,aAAa;AAC1B;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,aAAa;AACb;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,CAAC,GAAG;AACJ;;AAEA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,WAAW,QAAQ;AACnB,aAAa,SAAS;AACtB;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,CAAC,GAAG;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,eAAe;;AAEf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,eAAe;AAC1B,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,yDAAyD;AACzD,IAAI;AACJ,sCAAsC;AACtC;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,YAAY,SAAS;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,cAAc,QAAQ;AACtB,cAAc,SAAS;AACvB,cAAc,QAAQ;AACtB;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,iBAAiB;AAC7B;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,QAAQ;AACnB,YAAY,QAAQ;AACpB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,eAAe;AAC1B,WAAW,kBAAkB;AAC7B;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,SAAS,yBAAyB;AAClC;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,WAAW,QAAQ;AACnB,WAAW,OAAO;AAClB,WAAW,kBAAkB;AAC7B;AACA;AACA;AACA,aAAa,KAAK;AAClB;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,QAAQ;AACR;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;;AAEA;AACA;AACA;;AAEA,kBAAkB,kBAAkB;AACpC;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,WAAW,UAAU;AACrB,aAAa,QAAQ;AACrB;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,kBAAkB;;AAElB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA,CAAC,mBAAmB,qBAAM,mBAAmB,qBAAM,mFAAmF;;AAEtI,CAAC,EAAE,uCAAuC,EAAE,GAAG;AAC/C,CAAC;;;AAGD;;;;;;;;;;;;ACv3La;AACb,gBAAgB,mBAAO,CAAC,wEAAY;;AAEpC;AACA;AACA;;;;;;;;;;;;ACLa;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA,kDAAkD,QAAQ;AAC1D,yCAAyC,QAAQ;AACjD,yDAAyD,QAAQ;AACjE;AACA;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,mBAAO,CAAC,sGAA2B;AACnC,QAAQ,mBAAO,CAAC,oCAAc;AAC9B,gBAAgB,mBAAO,CAAC,oCAAW;AACnC;AACA;AACA;AACA,gGAAgG,QAAQ,YAAY;AACpH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,wEAAwE,0BAA0B,IAAI,wCAAwC;AAC9I;AACA;AACA,qDAAqD,6EAA6E;AAClI;AACA;AACA;AACA,qDAAqD,kDAAkD;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,oDAAoD;AACtF,kCAAkC,sDAAsD;AACxF,kCAAkC,4CAA4C;AAC9E,kCAAkC;AAClC;AACA,4CAA4C;AAC5C,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uCAAuC,sCAAsC;AAC7E,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA,2CAA2C,sCAAsC;AACjF,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,2CAA2C,sCAAsC;AACjF,6BAA6B;AAC7B;AACA;AACA;AACA;AACA,2CAA2C,sCAAsC;AACjF,6BAA6B;AAC7B;AACA,uGAAuG,yEAAyE,eAAe,gBAAgB;AAC/M,yGAAyG,yEAAyE;AAClL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,uGAAuG,uBAAuB;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,oEAAoE,6DAA6D,wBAAwB,aAAa;AACtK;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC/P9B;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,oBAAoB,GAAG,sBAAsB,GAAG,uBAAuB,GAAG,gBAAgB,GAAG,iBAAiB;AAC9G,QAAQ,mBAAO,CAAC,8BAAQ;AACxB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,iCAAiC;AACjC;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yCAAyC;AACzC,iCAAiC;AACjC;AACA;AACA;AACA,6EAA6E,sCAAsC,eAAe,sEAAsE;AACxM;AACA;AACA,qCAAqC,wBAAwB;AAC7D;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA,gCAAgC,kCAAkC;AAClE,oCAAoC,kCAAkC;AACtE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gBAAgB;AAChB;AACA;AACA,sCAAsC,6CAA6C;AACnF;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD,+BAA+B;AAChF,kCAAkC,sIAAsI,GAAG,mBAAmB;AAC9L;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB;AACpB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,qBAAqB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;;;;;;;;;;;AC9X9B;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,QAAQ,mBAAO,CAAC,oCAAc;AAC9B,sBAAsB,mBAAO,CAAC,gDAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA,2CAA2C;;;;;;;;;;;ACrG9B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,kBAAkB,mBAAO,CAAC,yEAAW;AACrC,eAAe,mBAAO,CAAC,4CAAgB;AACvC,eAAe,mBAAO,CAAC,4CAAgB;AACvC,iBAAiB,mBAAO,CAAC,6CAAY;AACrC;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,YAAY,mBAAO,CAAC,oFAAiC;AACrD,YAAY,mBAAO,CAAC,oFAAiC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,oFAAiC;AACrD,YAAY,mBAAO,CAAC,oFAAiC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,oFAAiC;AACrD,YAAY,mBAAO,CAAC,oFAAiC;AACrD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT,gCAAgC,kBAAkB,yCAAyC;AAC3F,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,sFAAkC;AACtD,YAAY,mBAAO,CAAC,sFAAkC;AACtD;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,oGAAyC;AAC7D,YAAY,mBAAO,CAAC,oGAAyC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,oFAAiC;AACrD,YAAY,mBAAO,CAAC,8GAA8C;AAClE;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,SAAS;AACT;AACA,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,8FAAsC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,oCAAoC,6CAA6C,yBAAyB,sBAAsB,sBAAsB,mBAAmB,0BAA0B,uBAAuB,sBAAsB,IAAI,gCAAgC,0BAA0B,IAAI;AAClT,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,iBAAiB;AACjB;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT,kBAAkB;AAClB,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,gHAA+C;AACnE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA;AACA,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,8GAA8C;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT,kBAAkB;AAClB,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,oFAAiC;AACrD,YAAY,mBAAO,CAAC,gGAAuC;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT,kBAAkB;AAClB,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,oFAAiC;AACrD,YAAY,mBAAO,CAAC,kFAAgC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT,kBAAkB;AAClB,KAAK;AACL;AACA,YAAY,mBAAO,CAAC,oFAAiC;AACrD,YAAY,mBAAO,CAAC,kFAAgC;AACpD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC;AACA;AACA,SAAS;AACT,kBAAkB;AAClB,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,gBAAgB,mBAAO,CAAC,sFAAkC;AAC1D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC;AACA;AACA,aAAa;AACb,sBAAsB;AACtB,SAAS;AACT;AACA;AACA,YAAY;AACZ,2CAA2C;;;;;;;;;;;AC7iB9B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,iBAAiB,mBAAO,CAAC,gDAAkB;AAC3C;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,YAAY;AACZ;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,iBAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,2CAA2C;;;;;;;;;;;ACxF9B;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY,GAAG,0BAA0B,GAAG,sBAAsB,GAAG,yBAAyB,GAAG,uBAAuB;AACxH,iBAAiB,mBAAO,CAAC,6CAAY;AACrC,uBAAuB;AACvB,mBAAmB,mBAAO,CAAC,iDAAc;AACzC,yBAAyB;AACzB,gBAAgB,mBAAO,CAAC,2CAAW;AACnC,sBAAsB;AACtB,oBAAoB,mBAAO,CAAC,mDAAe;AAC3C,0BAA0B;AAC1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,YAAY;AACZ,2CAA2C;;;;;;;;;;;AC/D9B;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,oBAAoB,mBAAO,CAAC,sDAAqB;AACjD,eAAe,mBAAO,CAAC,4CAAgB;AACvC,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qEAAqE;AACrE;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,yBAAyB,IAAI;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,KAAK;AACL;AACA,YAAY;AACZ,2CAA2C;;;;;;;;;;;ACrH9B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,YAAY;AACZ,kBAAkB,mBAAO,CAAC,yEAAW;AACrC,mBAAmB,mBAAO,CAAC,oDAAoB;AAC/C,iBAAiB,mBAAO,CAAC,6CAAY;AACrC;AACA,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,+CAA+C,mBAAmB,kBAAkB,wBAAwB,qBAAqB,gCAAgC,uCAAuC,IAAI;AAC5M,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA,KAAK;AACL;AACA,YAAY;AACZ,2CAA2C;;;;;;;;;;;ACjF9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,mBAAO,CAAC,yEAAW;AACrC,gBAAgB,mBAAO,CAAC,0CAAY;AACpC,aAAa,mBAAO,CAAC,kCAAQ;AAC7B,aAAa,mBAAO,CAAC,kCAAQ;AAC7B,kBAAkB,mBAAO,CAAC,4CAAa;AACvC;AACA;AACA;AACA,sCAAsC;AACtC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA,+DAA+D;AAC/D;AACA,qCAAqC,yBAAyB;AAC9D;AACA,aAAa,IAAI;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAA4C,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACrO9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,iBAAiB,mBAAO,CAAC,0CAAY;AACrC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,kDAAkD;AAClD;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC9E9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,uDAAuD;AAC3E;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,0EAA0E,aAAa,IAAI,sCAAsC,wBAAwB,IAAI,mEAAmE;AAChO,SAAS;AACT;AACA;AACA;AACA;AACA,4DAA4D,sCAAsC,wBAAwB,SAAS,IAAI,mEAAmE;AAC1M,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACxE9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,6BAA6B;AAC7B,eAAe,mBAAO,CAAC,sCAAU;AACjC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,mBAAmB,mBAAO,CAAC,8CAAc;AACzC,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,0DAA0D;AACxG;AACA;AACA;AACA;AACA;AACA,4DAA4D,cAAc;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD,mCAAmC;AACrF,kDAAkD,mBAAmB;AACrE,kDAAkD,mBAAmB;AACrE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACtJ9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,mBAAO,CAAC,yEAAW;AACrC,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,eAAe,mBAAO,CAAC,sCAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C;AAC9C;AACA;AACA;AACA;AACA;AACA,kJAAkJ;AAClJ;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT,mCAAmC;AACnC;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,WAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,QAAQ;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0BAA0B;AAC1B;AACA;AACA;AACA,0DAA0D,kCAAkC;AAC5F,wDAAwD,4BAA4B;AACpF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACxO9B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AChC9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kDAAkD;AAClD;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACxE9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,sBAAsB,GAAG,kBAAkB;AAC3C,kBAAkB,mBAAO,CAAC,yEAAW;AACrC,mBAAmB,mBAAO,CAAC,0DAAuB;AAClD,aAAa,mBAAO,CAAC,kCAAQ;AAC7B,aAAa,mBAAO,CAAC,kCAAQ;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,sCAAsC,kBAAkB,KAAK;AAC9D;AACA;AACA;AACA;AACA,CAAC,8CAA8C,sBAAsB,KAAK;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC9F9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,wCAAW;AACnC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,8CAA8C;AACxG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC/G9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,aAAa,mBAAO,CAAC,kCAAQ;AAC7B,kBAAkB,mBAAO,CAAC,4CAAa;AACvC,gBAAgB,mBAAO,CAAC,0CAAY;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,kDAAkD;AAClD;AACA;AACA;AACA,mBAAmB;AACnB;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,iEAAiE;AACjE;AACA;AACA;AACA;AACA,sBAAsB;AACtB,iBAAiB,IAAI;AACrB;AACA,aAAa;AACb;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC9H9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,kBAAkB,mBAAO,CAAC,yEAAW;AACrC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,yBAAyB;AACrD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC9G9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC,eAAe,mBAAO,CAAC,sCAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wBAAwB,8BAA8B;AACtD;AACA;AACA,aAAa;AACb,0DAA0D,oBAAoB;AAC9E;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,wBAAwB,8BAA8B;AACtD;AACA;AACA,aAAa;AACb,uEAAuE,8BAA8B;AACrG;AACA,qFAAqF,kBAAkB;AACvG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACtI9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,0CAAY;AACpC,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC,cAAc,mBAAO,CAAC,oCAAS;AAC/B,iBAAiB,mBAAO,CAAC,0CAAY;AACrC,aAAa,mBAAO,CAAC,kCAAQ;AAC7B,kBAAkB,mBAAO,CAAC,4CAAa;AACvC,sBAAsB,mBAAO,CAAC,oDAAiB;AAC/C;AACA;AACA;AACA;AACA;AACA,4EAA4E,iFAAiF,mBAAmB,qBAAqB;AACrM,uGAAuG,0BAA0B;AACjI;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT,sCAAsC,2BAA2B;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA,yCAAyC,yBAAyB;AAClE;AACA,iBAAiB;AACjB;AACA;AACA;AACA,4CAA4C,sBAAsB;AAClE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0CAA0C,qBAAqB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC,wBAAwB;AACzD;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACrJ9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC,eAAe,mBAAO,CAAC,sCAAU;AACjC;AACA;AACA;AACA,kCAAkC;AAClC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mFAAmF;AACvG;AACA;AACA,SAAS;AACT;AACA,iDAAiD,iCAAiC;AAClF,mEAAmE,2DAA2D;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sEAAsE,aAAa,IAAI,qDAAqD,uBAAuB,aAAa,IAAI,iEAAiE;AACrP;AACA;AACA,wDAAwD,qDAAqD,uBAAuB,aAAa,YAAY,8BAA8B,IAAI,iEAAiE;AAChQ;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC5H9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,eAAe,mBAAO,CAAC,sCAAU;AACjC,kBAAkB,mBAAO,CAAC,4CAAa;AACvC,sBAAsB,mBAAO,CAAC,oDAAiB;AAC/C,gBAAgB,mBAAO,CAAC,wCAAW;AACnC,oBAAoB,mBAAO,CAAC,gDAAe;AAC3C;AACA;AACA;AACA;AACA;AACA,CAAC,kCAAkC,gBAAgB,KAAK;AACxD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,uEAAuE;AACvE;AACA;AACA;AACA,0BAA0B;AAC1B,aAAa;AACb;AACA;AACA;AACA,iDAAiD;AACjD;AACA;AACA;AACA;AACA,yFAAyF;AACzF;AACA;AACA,4IAA4I;AAC5I;AACA;AACA,aAAa;AACb;AACA,sCAAsC,wFAAwF;AAC9H;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA,iBAAiB;AACjB,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mOAAmO;AACnO;AACA;AACA,qJAAqJ;AACrJ;AACA;AACA,yJAAyJ;AACzJ;AACA;AACA,mJAAmJ;AACnJ;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,2BAA2B;AAC3B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,yHAAyH;AACzH;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,8BAA8B;AAC9B,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iDAAiD;AACjD,0LAA0L;AAC1L;AACA;AACA,aAAa;AACb;AACA,qCAAqC;AACrC;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,gCAAgC;AACpF;AACA;AACA,oDAAoD,8CAA8C;AAClG;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA,gCAAgC;AAChC;AACA;AACA,4BAA4B;AAC5B,aAAa;AACb,SAAS;AACT,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC,cAAc;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC/W9B;AACb;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,iBAAiB;AACjB;AACA,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACzK9B;AACb,8CAA6C,EAAE,aAAa,EAAC;AAC7D,uBAAuB,GAAG,kBAAkB,GAAG,iBAAiB,GAAG,iBAAiB,GAAG,gBAAgB,GAAG,6BAA6B,GAAG,uBAAuB,GAAG,sBAAsB,GAAG,uBAAuB,GAAG,eAAe,GAAG,4BAA4B;AACrQ,kBAAkB,mBAAO,CAAC,4CAAa;AACvC;AACA;AACA;AACA,4BAA4B;AAC5B;AACA;AACA;AACA,eAAe;AACf;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA,wBAAwB,cAAc;AACtC;AACA;AACA;AACA,sBAAsB;AACtB;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,6BAA6B;AAC7B,gBAAgB,kBAAkB,4CAA4C,sCAAsC,eAAe;AACnI;AACA;AACA;AACA,wCAAwC,mDAAmD,+BAA+B,8BAA8B,mDAAmD,8BAA8B,mBAAmB;AAC5P;AACA,iBAAiB;AACjB;AACA,2BAA2B;AAC3B,4BAA4B;AAC5B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA,2BAA2B;AAC3B,4BAA4B;AAC5B,wBAAwB;AACxB,uBAAuB,QAAQ;AAC/B;AACA;AACA,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kBAAkB;AAClB;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oBAAoB,mBAAmB;AACvC;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB,2CAA2C;;;;;;;;;;;AC3G9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,cAAc;AACd,gBAAgB,mBAAO,CAAC,0CAAY;AACpC,iBAAiB,mBAAO,CAAC,gDAAkB;AAC3C,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC,iBAAiB,mBAAO,CAAC,gDAAkB;AAC3C,aAAa,mBAAO,CAAC,wCAAc;AACnC,eAAe,mBAAO,CAAC,4CAAgB;AACvC;AACA;AACA;AACA;AACA;AACA,CAAC,sBAAsB;AACvB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,WAAW;AACvC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,OAAO;AACnC;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,0DAA0D,gCAAgC;AAC1F,wDAAwD,0BAA0B;AAClF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,oBAAoB;AAChD;AACA;AACA;AACA;AACA;AACA,0CAA0C,gCAAgC;AAC1E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,cAAc;AAC1C,iCAAiC,QAAQ;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oCAAoC;AACpC,2CAA2C;AAC3C,yCAAyC;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6CAA6C,kBAAkB;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,4BAA4B,SAAS;AACrC;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,gCAAgC,SAAS;AACzC;AACA;AACA;AACA;AACA;AACA,oEAAoE,yDAAyD;AAC7H;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA,gCAAgC,QAAQ;AACxC,qCAAqC,4CAA4C;AACjF;AACA,oCAAoC,SAAS;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,0BAA0B;AAC1D;AACA;AACA;AACA;AACA,oCAAoC,QAAQ;AAC5C;AACA;AACA;AACA,wCAAwC,sBAAsB;AAC9D;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,iBAAiB;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B,SAAS;AACtC;AACA;AACA,uDAAuD,oBAAoB;AAC3E;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA,iBAAiB;AACjB;AACA;AACA,+FAA+F,0CAA0C;AACzI;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,2CAA2C;;;;;;;;;;;AC3d9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,kBAAkB,mBAAO,CAAC,yEAAW;AACrC,kBAAkB,mBAAO,CAAC,kDAAmB;AAC7C,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC;AAChC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B,gCAAgC;AAC5D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACvI9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD,8CAA6C,EAAE,aAAa,EAAC;AAC7D,wBAAwB;AACxB,kBAAkB,mBAAO,CAAC,yEAAW;AACrC,gBAAgB,mBAAO,CAAC,0CAAY;AACpC,oBAAoB,mBAAO,CAAC,sDAAqB;AACjD,iBAAiB,mBAAO,CAAC,gDAAkB;AAC3C,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC,iBAAiB,mBAAO,CAAC,gDAAkB;AAC3C,aAAa,mBAAO,CAAC,wCAAc;AACnC,kBAAkB,mBAAO,CAAC,kDAAmB;AAC7C,eAAe,mBAAO,CAAC,4CAAgB;AACvC,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC,YAAY,mBAAO,CAAC,qCAAO;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,CAAC,kDAAkD,wBAAwB,KAAK;AAChF;AACA;AACA;AACA;AACA,mDAAmD;AACnD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA,oCAAoC,2BAA2B;AAC/D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iBAAiB;AACjB;AACA;AACA;AACA,oCAAoC,uBAAuB;AAC3D;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B,qBAAqB;AACrB;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb;AACA;AACA;AACA;AACA;AACA,wFAAwF,6FAA6F;AACrL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa,IAAI,gCAAgC;AACjD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA,SAAS;AACT;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,SAAS;AACT;AACA;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC/S9B;AACb;AACA;AACA,mCAAmC,oCAAoC,gBAAgB;AACvF,CAAC;AACD;AACA;AACA,CAAC;AACD;AACA;AACA;AACA;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAo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A;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,0DAA0D,2BAA2B;AACrF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA,oDAAoD,oBAAoB;AACxE;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4DAA4D,4BAA4B;AACxF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,wDAAwD,0BAA0B;AAClF;AACA;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA,wDAAwD;AACxD;AACA;AACA;AACA;AACA;AACA,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,6BAA6B;AAC7B;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oKAAoK,uBAAuB,+BAA+B,IAAI,+FAA+F;AAC7T;AACA;AACA;AACA,0DAA0D,yBAAyB;AACnF;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA,oDAAoD,wBAAwB;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,8CAA8C,qBAAqB;AACnE;AACA;AACA;AACA,4DAA4D,wBAAwB;AACpF;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,gBAAgB;AACnE;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC,kDAAkD;AACpF;AACA,qBAAqB;AACrB;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,mDAAmD,+BAA+B;AAClF,iDAAiD,2BAA2B;AAC5E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACliB9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACpG9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC,eAAe,mBAAO,CAAC,0CAAU;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA,CAAC;AACD,kBAAe;AACf,2CAA2C;;;;;;;;;;;ACpF9B;AACb;AACA;AACA;AACA,eAAe,gBAAgB,sCAAsC,kBAAkB;AACvF,8BAA8B;AAC9B;AACA;AACA;AACA;AACA,wBAAwB;AACxB;AACA;AACA,CAAC;AACD;AACA,4BAA4B,+DAA+D,iBAAiB;AAC5G;AACA,oCAAoC,MAAM,+BAA+B,YAAY;AACrF,mCAAmC,MAAM,mCAAmC,YAAY;AACxF,gCAAgC;AAChC;AACA,KAAK;AACL;AACA;AACA,cAAc,6BAA6B,0BAA0B,cAAc,qBAAqB;AACxG,iBAAiB,oDAAoD,qEAAqE,cAAc;AACxJ,uBAAuB,sBAAsB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,mCAAmC,SAAS;AAC5C,mCAAmC,WAAW,UAAU;AACxD,0CAA0C,cAAc;AACxD;AACA,8GAA8G,OAAO;AACrH,iFAAiF,iBAAiB;AAClG,yDAAyD,gBAAgB,QAAQ;AACjF,+CAA+C,gBAAgB,gBAAgB;AAC/E;AACA,kCAAkC;AAClC;AACA;AACA,UAAU,YAAY,aAAa,SAAS,UAAU;AACtD,oCAAoC,SAAS;AAC7C;AACA;AACA,8CAA6C,EAAE,aAAa,EAAC;AAC7D,gBAAgB;AAChB,gBAAgB,mBAAO,CAAC,8CAAiB;AACzC,sBAAsB,mBAAO,CAAC,wDAAiB;AAC/C,mBAAmB,mBAAO,CAAC,kDAAc;AACzC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gFAAgF;AAChF;AACA;AACA;AACA,qBAAqB;AACrB,aAAa;AACb,SAAS;AACT;AACA;AACA;AACA;AACA;AACA;AACA,CAAC;AACD,gBAAgB;AAChB;AACA;AACA;AACA,kBAAe;AACf,2CAA2C;;;;;;;;;;;AC7F3C;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEa;;AAEb,eAAe,mBAAO,CAAC,qEAAU;AACjC,WAAW,mBAAO,CAAC,sDAAQ;;AAE3B,aAAa;AACb,eAAe;AACf,qBAAqB;AACrB,cAAc;;AAEd,WAAW;;AAEX;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA,gBAAgB,KAAK;;AAErB;AACA;AACA;AACA;AACA;AACA;AACA,qCAAqC;AACrC;AACA;AACA,2CAA2C,KAAK;AAChD,0CAA0C,KAAK;AAC/C;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,kBAAkB,mBAAO,CAAC,2EAAa;;AAEvC;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,UAAU;AACV;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA,oCAAoC;AACpC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA,oBAAoB,4BAA4B;AAChD;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,oBAAoB,yBAAyB;AAC7C;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,4CAA4C,OAAO;AACnD;AACA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA,cAAc;AACd;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,MAAM;AACN;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,2CAA2C,OAAO;AAClD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;;AAEA;AACA;AACA,GAAG;AACH;;AAEA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,mBAAmB,mBAAmB;AACtC;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,qBAAqB,mBAAmB;AACxC;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,sBAAsB,iBAAiB;AACvC;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA,+BAA+B,QAAQ;AACvC;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,MAAM;AACN;AACA;AACA;AACA;;AAEA;AACA;AACA,WAAW,MAAM;AACjB;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;AC3tBa;;AAEb;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;;;;;;;;;;;ACfa;AACb;AACA;AACA;;AAEA,kDAAkD,0CAA0C;;AAE5F,4CAA4C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD;;AAE/P,8DAA8D,sEAAsE,8DAA8D;;AAElM;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;;AAEH;AACA,CAAC;;;;;;;;;;;ACxBY;AACb;AACA;AACA;;AAEA,wBAAwB,2BAA2B,2EAA2E,kCAAkC,wBAAwB,OAAO,kCAAkC,mIAAmI;;AAEpW,kDAAkD,0CAA0C;;AAE5F,4CAA4C,gBAAgB,kBAAkB,OAAO,2BAA2B,wDAAwD,gCAAgC,uDAAuD;;AAE/P,8DAA8D,sEAAsE,8DAA8D;;AAElM,2CAA2C,+DAA+D,6EAA6E,yEAAyE,eAAe,uDAAuD,GAAG;;AAEzU,iCAAiC,4EAA4E,iBAAiB,aAAa;;AAE3I,iCAAiC,6DAA6D,yCAAyC,8CAA8C,iCAAiC,mDAAmD,2DAA2D,OAAO,yCAAyC;;AAEpX,kDAAkD,0EAA0E,eAAe;;AAE3I,wCAAwC,uBAAuB,yFAAyF;;AAExJ,uCAAuC,wEAAwE,0CAA0C,8CAA8C,MAAM,uEAAuE,IAAI,eAAe,YAAY;;AAEnT,8BAA8B,gGAAgG,mDAAmD;;AAEjL,aAAa,mBAAO,CAAC,mGAA2B;;AAEhD,iBAAiB,mBAAO,CAAC,+GAAc;;AAEvC;AACA;;AAEA;;AAEA;AACA;;AAEA;;AAEA;AACA;;AAEA,yCAAyC;AACzC;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;;AAEN,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA,aAAa,mBAAe,CAAC,mHAAgB;AAC7C;AACA,GAAG;;AAEH;AACA,CAAC;;;;;;;;;;;;AC7EY;AACb;;AAEA;;AAEA,gBAAgB,mBAAO,CAAC,wEAAY;;AAEpC,aAAa,mBAAO,CAAC,+FAAU;;AAE/B,cAAc,mBAAO,CAAC,iGAAW;;AAEjC,eAAe,mBAAO,CAAC,qGAAa;AACpC;AACA;;AAEA,kBAAkB,mBAAO,CAAC,qHAAqB;;AAE/C,gBAAgB,mBAAO,CAAC,iHAAmB;;AAE3C,sBAAsB,mBAAO,CAAC,6HAAyB;;AAEvD;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,gCAAgC,eAAe;AAC/C;AACA;AACA,CAAC;;AAED;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA,mDAAmD;;AAEnD;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA,iBAAiB,kEAAkD;;AAEnE;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA,QAAQ;AACR;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;;;AAGN;AACA,GAAG;AACH;AACA;AACA;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA,oBAAoB,6BAA6B;AACjD;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA,MAAM;;;AAGN;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA,KAAK;;AAEL;;AAEA,oBAAoB,2BAA2B;AAC/C;AACA;;AAEA;AACA;AACA;;AAEA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC/Ka,CAAC;AACd;;AAEA,eAAe,mBAAO,CAAC,mGAAqB;;AAE5C,eAAe,mBAAO,CAAC,qFAAe;AACtC;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;;;AAGA;;AAEA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA,iDAAiD;;AAEjD;AACA,GAAG,GAAG;AACN;AACA;;AAEA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA;AACA;AACA,EAAE;;;AAGF;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA;AACA;;;;;;;;;;;ACvHa;AACb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA,mBAAO,CAAC,2HAAwB;AAChC;AACA;;AAEA;AACA;AACA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA,MAAM;;;AAGN,mBAAmB;;AAEnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;AACA,GAAG;AACH;AACA;;AAEA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;;;;ACnDa;AACb;;AAEA,UAAU,mBAAO,CAAC,kDAAK;;AAEvB,6BAA6B,mBAAO,CAAC,qIAA0B;;AAE/D;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;AACA,IAAI;AACJ;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;AACA;;;AAGA;AACA;AACA,IAAI;AACJ;AACA;;;AAGA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;;;;;;;;;;;ACvFa;;AAEb;AACA;AACA;AACA;AACA;AACA,IAAI;;;AAGJ;AACA;;AAEA;AACA;AACA,IAAI;;;AAGJ;AACA;;AAEA;;;;;;;;;;;ACrBa;;AAEb,UAAU,0GAA6B;;AAEvC;AACA;AACA;AACA;AACA;AACA,uBAAuB;AACvB;AACA;;AAEA;AACA,mBAAmB;;AAEnB;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;;;;;;;;;AChDa;AACb;;AAEA,eAAe,mBAAO,CAAC,+FAAO;AAC9B;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;AACA;;AAEA,qBAAqB,mBAAO,CAAC,kFAAqB;;AAElD;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,6BAA6B;;AAE7B;AACA;AACA;AACA;AACA,UAAU;AACV;;AAEA;AACA;AACA;AACA;AACA;AACA,OAAO;AACP;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;;;;;;;;;;ACtDa;AACb;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;;AAEA;;;;;;;;;;ACbA;AACA;AACA;AACA;AACA;AACA,IAAI,IAAU;AACd;AACA;AACA,0BAA0B,uBAAgB;AAC1C;AACA,WAAW,mBAAO,CAAC,gEAAO;AAC1B;AACA,EAAE,UAAU;AACZ;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA,IAAI,mBAAO,CAAC,0FAAoB;;AAEhC;AACA;AACA;AACA,IAAI;AACJ;AACA,iBAAiB,UAAU;AAC3B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAM;AACN;AACA;AACA,IAAI;AACJ;AACA,kBAAkB,mBAAO,CAAC,wEAAW;AACrC;AACA;AACA,qBAAqB,UAAU;AAC/B;AACA;AACA;AACA,EAAE;AACF;AACA,EAAE,KAAK,EAEN;;;;;;;;;;;AC5DD,mBAAmB,mBAAO,CAAC,6DAAQ;AACnC;;;;;;;;;;;ACDA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,EAAE;AACF,WAAW,mBAAO,CAAC,gEAAO;;AAE1B;AACA;AACA;AACA;AACA;AACA;AACA;AACA,GAAG;AACH;;AAEA;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA;AACA,GAAG;AACH;AACA;AACA,GAAG;AACH;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;AC3CA;;AAEA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA,IAAI;AACJ;AACA,IAAI;AACJ;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA,oBAAoB;;AAEpB,6BAA6B;;AAE7B,uBAAuB;;AAEvB,0BAA0B;AAC1B;AACA;;AAEA,0BAA0B;AAC1B;AACA;AACA;AACA;AACA,GAAG;AACH;AACA,GAAG;AACH;AACA;AACA;;;;;;;;;;;AC1DA;AACA;AACA;;;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;UCtBA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;UACA,sBAAsB;UACtB,oDAAoD,uBAAuB;UAC3E;UACA;UACA,GAAG;UACH;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;;UAEA;UACA;;;;;WC3CA;WACA;WACA;WACA;WACA,yCAAyC,wCAAwC;WACjF;WACA;WACA;;;;;WCPA;WACA;WACA;WACA;WACA;;;;;WCJA;;;;;WCAA;;;;;WCAA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,CAAC;;;;;WCPD;;;;;WCAA;WACA;WACA;WACA;WACA,uBAAuB,4BAA4B;WACnD;WACA;WACA;WACA,iBAAiB,oBAAoB;WACrC;WACA,mGAAmG,YAAY;WAC/G;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mEAAmE,iCAAiC;WACpG;WACA;WACA;WACA;;;;;WCzCA;WACA;WACA;WACA,uDAAuD,iBAAiB;WACxE;WACA,gDAAgD,aAAa;WAC7D;;;;;WCNA;WACA;WACA;WACA;WACA;;;;;WCJA;WACA;;WAEA;WACA;WACA;;WAEA;WACA;WACA;;WAEA;WACA;;WAEA;WACA;WACA;;WAEA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,CAAC;;WAED;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA,2BAA2B;WAC3B,4BAA4B;WAC5B,2BAA2B;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,GAAG;;WAEH;WACA;WACA;WACA;WACA;WACA;WACA,oBAAoB,gBAAgB;WACpC;WACA;WACA;WACA,KAAK;WACL;WACA;WACA;WACA,GAAG;WACH;WACA;WACA;WACA,oBAAoB,gBAAgB;WACpC;WACA;WACA,GAAG;WACH;WACA;WACA,GAAG;WACH;WACA;WACA,GAAG;WACH;WACA;WACA;WACA,GAAG;WACH;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,GAAG;;WAEH;WACA;WACA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA,GAAG;WACH;WACA;WACA;WACA,GAAG;;WAEH;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;;WAEA,iBAAiB,qCAAqC;WACtD;;WAEA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;WACA;WACA;WACA,QAAQ;WACR;WACA;WACA,QAAQ;WACR;WACA,MAAM;WACN,KAAK;WACL,IAAI;WACJ,GAAG;WACH;;WAEA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA;;WAEA;WACA;;WAEA;;WAEA;WACA;WACA,EAAE;WACF;;WAEA;WACA;WACA;WACA,GAAG;WACH;;WAEA;WACA;WACA;WACA,GAAG;WACH;;WAEA;WACA;;WAEA;WACA;WACA,EAAE;;WAEF;WACA;;WAEA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA,oBAAoB,oBAAoB;WACxC;WACA;WACA;WACA;WACA,EAAE;;WAEF;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;;WAEA;WACA;WACA;WACA;WACA,KAAK;WACL;WACA,IAAI;WACJ;;WAEA;WACA;WACA,GAAG;WACH,EAAE;WACF;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ,GAAG;WACH;WACA;WACA;WACA;;;;;WCtXA;;;;;WCAA;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;;WAEA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,mBAAmB,2BAA2B;WAC9C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,KAAK;WACL;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA,kBAAkB,cAAc;WAChC;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,cAAc,MAAM;WACpB;WACA;WACA;WACA,KAAK;WACL;WACA;WACA;WACA;WACA;WACA,cAAc,aAAa;WAC3B;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA,iBAAiB,4BAA4B;WAC7C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,IAAI;WACJ;WACA;;WAEA;;WAEA;WACA;WACA;WACA;WACA,IAAI;WACJ;;WAEA;WACA;WACA;WACA;WACA;WACA;;WAEA;;WAEA;WACA;WACA,gBAAgB,4BAA4B;WAC5C;WACA;WACA;;WAEA;WACA;;WAEA;WACA;;WAEA;WACA;;WAEA;WACA,gBAAgB,4BAA4B;WAC5C;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,kBAAkB,uCAAuC;WACzD;WACA;WACA;WACA;WACA;WACA;WACA;WACA,GAAG;WACH;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA,mBAAmB,iCAAiC;WACpD;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,sBAAsB,uCAAuC;WAC7D;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,sBAAsB,sBAAsB;WAC5C;WACA;WACA,SAAS;WACT;WACA;WACA;WACA;WACA;WACA,WAAW;WACX,WAAW;WACX;WACA;WACA;WACA;WACA;WACA;WACA;WACA,YAAY;WACZ;WACA;WACA;WACA;WACA;WACA;WACA,UAAU;WACV;WACA;WACA;WACA;WACA;WACA;WACA,WAAW;WACX;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA,mBAAmB,wCAAwC;WAC3D;WACA;WACA;WACA;WACA,MAAM;WACN;WACA;WACA;WACA;WACA;WACA,QAAQ;WACR,QAAQ;WACR;WACA;WACA;WACA;WACA;WACA;WACA,SAAS;WACT;WACA;WACA;WACA;WACA;WACA;WACA,OAAO;WACP;WACA;WACA;WACA;WACA;WACA,QAAQ;WACR;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE,IAAI;WACN;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA,EAAE;WACF;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;WACA;;WAEA;WACA;WACA;WACA,sCAAsC;WACtC;WACA;WACA,EAAE;WACF;;WAEA;;WAEA;;;;;UE5fA;UACA;UACA;UACA;UACA;UACA","sources":["webpack://ray-tracing-webgpu/./src/buildin/shaders/basic/color.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/basic/model.vert.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/basic/skybox.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/basic/skybox.vert.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/basic/unlit.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/compute/blur.comp.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/image/blit.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/image/image.vert.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/image/tone.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/ray-tracing/denoiseSpace.comp.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/ray-tracing/denoiseTempor.comp.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/ray-tracing/gbuffer.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/ray-tracing/gbuffer.vert.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/ray-tracing/gbufferLight.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/ray-tracing/gshow.frag.wgsl","webpack://ray-tracing-webgpu/./src/buildin/shaders/ray-tracing/rtss.comp.wgsl","webpack://ray-tracing-webgpu/./node_modules/_ansi-html-community@0.0.8@ansi-html-community/index.js","webpack://ray-tracing-webgpu/./node_modules/_ansi-regex@2.1.1@ansi-regex/index.js","webpack://ray-tracing-webgpu/./node_modules/_events@3.3.0@events/events.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/common.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/index.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/mat2.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/mat2d.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/mat3.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/mat4.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/quat.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/quat2.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/vec2.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/vec3.js","webpack://ray-tracing-webgpu/./node_modules/_gl-matrix@3.4.3@gl-matrix/esm/vec4.js","webpack://ray-tracing-webgpu/./node_modules/_html-entities@1.4.0@html-entities/lib/html4-entities.js","webpack://ray-tracing-webgpu/./node_modules/_html-entities@1.4.0@html-entities/lib/html5-entities.js","webpack://ray-tracing-webgpu/./node_modules/_html-entities@1.4.0@html-entities/lib/index.js","webpack://ray-tracing-webgpu/./node_modules/_html-entities@1.4.0@html-entities/lib/surrogate-pairs.js","webpack://ray-tracing-webgpu/./node_modules/_html-entities@1.4.0@html-entities/lib/xml-entities.js","webpack://ray-tracing-webgpu/./node_modules/_loglevel@1.8.0@loglevel/lib/loglevel.js","webpack://ray-tracing-webgpu/./node_modules/_punycode@1.3.2@punycode/punycode.js","webpack://ray-tracing-webgpu/./node_modules/_querystring@0.2.0@querystring/decode.js","webpack://ray-tracing-webgpu/./node_modules/_querystring@0.2.0@querystring/encode.js","webpack://ray-tracing-webgpu/./node_modules/_querystring@0.2.0@querystring/index.js","webpack://ray-tracing-webgpu/./node_modules/_select-pure@2.1.1-alpha.1@select-pure/dist/index.js","webpack://ray-tracing-webgpu/./node_modules/_sockjs-client@1.5.2@sockjs-client/dist/sockjs.js","webpack://ray-tracing-webgpu/./node_modules/_strip-ansi@3.0.1@strip-ansi/index.js","webpack://ray-tracing-webgpu/./demo/RayTracingApp.ts","webpack://ray-tracing-webgpu/./demo/debugCs.ts","webpack://ray-tracing-webgpu/./demo/index.ts","webpack://ray-tracing-webgpu/./src/buildin/effects.ts","webpack://ray-tracing-webgpu/./src/buildin/geometries.ts","webpack://ray-tracing-webgpu/./src/buildin/index.ts","webpack://ray-tracing-webgpu/./src/buildin/textures.ts","webpack://ray-tracing-webgpu/./src/buildin/ubTemplates.ts","webpack://ray-tracing-webgpu/./src/core/Camera.ts","webpack://ray-tracing-webgpu/./src/core/ComputeUnit.ts","webpack://ray-tracing-webgpu/./src/core/CubeTexture.ts","webpack://ray-tracing-webgpu/./src/core/Effect.ts","webpack://ray-tracing-webgpu/./src/core/Geometry.ts","webpack://ray-tracing-webgpu/./src/core/HObject.ts","webpack://ray-tracing-webgpu/./src/core/ImageMesh.ts","webpack://ray-tracing-webgpu/./src/core/Light.ts","webpack://ray-tracing-webgpu/./src/core/Material.ts","webpack://ray-tracing-webgpu/./src/core/Mesh.ts","webpack://ray-tracing-webgpu/./src/core/Node.ts","webpack://ray-tracing-webgpu/./src/core/RenderTexture.ts","webpack://ray-tracing-webgpu/./src/core/Scene.ts","webpack://ray-tracing-webgpu/./src/core/Texture.ts","webpack://ray-tracing-webgpu/./src/core/UBTemplate.ts","webpack://ray-tracing-webgpu/./src/core/renderEnv.ts","webpack://ray-tracing-webgpu/./src/core/shared.ts","webpack://ray-tracing-webgpu/./src/extension/BVH.ts","webpack://ray-tracing-webgpu/./src/extension/NodeControl.ts","webpack://ray-tracing-webgpu/./src/extension/RayTracingManager.ts","webpack://ray-tracing-webgpu/./src/index.ts","webpack://ray-tracing-webgpu/./src/resource/GlTFLoader.ts","webpack://ray-tracing-webgpu/./src/resource/Loader.ts","webpack://ray-tracing-webgpu/./src/resource/TextureLoader.ts","webpack://ray-tracing-webgpu/./src/resource/index.ts","webpack://ray-tracing-webgpu/./node_modules/_url@0.11.0@url/url.js","webpack://ray-tracing-webgpu/./node_modules/_url@0.11.0@url/util.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/clients/BaseClient.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/clients/SockJSClient.js","webpack://ray-tracing-webgpu//Users/indeex/Downloads/webgpu-renderer-main/node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/index.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/overlay.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/socket.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/utils/createSocketUrl.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/utils/getCurrentScriptSource.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/utils/log.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/utils/reloadApp.js","webpack://ray-tracing-webgpu/./node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/utils/sendMessage.js","webpack://ray-tracing-webgpu/./node_modules/_webpack@5.64.3@webpack/hot/dev-server.js","webpack://ray-tracing-webgpu/./node_modules/_webpack@5.64.3@webpack/hot/emitter.js","webpack://ray-tracing-webgpu/./node_modules/_webpack@5.64.3@webpack/hot/log-apply-result.js","webpack://ray-tracing-webgpu/./node_modules/_webpack@5.64.3@webpack/hot/log.js","webpack://ray-tracing-webgpu//Users/indeex/Downloads/webgpu-renderer-main/node_modules/webpack/hot|sync|nonrecursive|/^\\.\\/log$/","webpack://ray-tracing-webgpu/webpack/bootstrap","webpack://ray-tracing-webgpu/webpack/runtime/define property getters","webpack://ray-tracing-webgpu/webpack/runtime/get javascript update chunk filename","webpack://ray-tracing-webgpu/webpack/runtime/get update manifest filename","webpack://ray-tracing-webgpu/webpack/runtime/getFullHash","webpack://ray-tracing-webgpu/webpack/runtime/global","webpack://ray-tracing-webgpu/webpack/runtime/hasOwnProperty shorthand","webpack://ray-tracing-webgpu/webpack/runtime/load script","webpack://ray-tracing-webgpu/webpack/runtime/make namespace object","webpack://ray-tracing-webgpu/webpack/runtime/node module decorator","webpack://ray-tracing-webgpu/webpack/runtime/hot module replacement","webpack://ray-tracing-webgpu/webpack/runtime/publicPath","webpack://ray-tracing-webgpu/webpack/runtime/jsonp chunk loading","webpack://ray-tracing-webgpu/webpack/before-startup","webpack://ray-tracing-webgpu/webpack/startup","webpack://ray-tracing-webgpu/webpack/after-startup"],"sourcesContent":["module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] Position: vec4<f32>;\\n  [[location(0)]] texcoord_0: vec2<f32>;\\n  [[location(1)]] normal: vec3<f32>;\\n  [[location(2)]] tangent: vec4<f32>;\\n  [[location(3)]] color_0: vec3<f32>;\\n  [[location(4)]] texcoord_1: vec2<f32>;\\n};\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> [[location(0)]] vec4<f32> {\\n  var color: vec4<f32> = material.u_color;\\n\\n  #if defined(USE_COLOR_0)\\n    color = color * vec4<f32>(vo.color_0, 1.);\\n  #endif\\n\\n  return color;\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] Position: vec4<f32>;\\n  [[location(0)]] texcoord_0: vec2<f32>;\\n  [[location(1)]] normal: vec3<f32>;\\n  [[location(2)]] tangent: vec4<f32>;\\n  [[location(3)]] color_0: vec3<f32>;\\n  [[location(4)]] texcoord_1: vec2<f32>;\\n};\\n\\n[[stage(vertex)]]\\nfn main(attrs: Attrs) -> VertexOutput {\\n  var output: VertexOutput;\\n\\n  output.Position = global.u_vp * mesh.u_world * vec4<f32>(attrs.position, 1.);\\n\\n  #if defined(USE_TEXCOORD_0)\\n    output.texcoord_0 = attrs.texcoord_0;\\n  #endif\\n\\n  #if defined(USE_NORMAL)\\n    output.normal = attrs.normal;\\n  #endif\\n\\n  #if defined(USE_TANGENT)\\n    output.tangent = attrs.tangent;\\n  #endif\\n\\n  #if defined(USE_COLOR_0)\\n    output.color_0 = attrs.color_0;\\n  #endif\\n\\n  #if defined(USE_TEXCOORD_1)\\n    output.texcoord_1 = attrs.texcoord_1;\\n  #endif\\n\\n  return output;\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] cubeUV: vec3<f32>;\\n};\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> [[location(0)]] vec4<f32> {\\n  let tex: vec4<f32> = textureSample(u_cubeTexture, u_sampler, vo.cubeUV);\\n  return vec4<f32>(tex.rgb * material.u_color.rgb * material.u_exposure * material.u_factor, tex.a);\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] cubeUV: vec3<f32>;\\n};\\n\\n[[stage(vertex)]]\\nfn main(attrs: Attrs) -> VertexOutput {\\n  var output: VertexOutput;\\n\\n  let pos: vec4<f32> = vec4<f32>(attrs.position, 1., 1.);\\n  output.position = pos;\\n  let t: vec4<f32> = global.u_skyVP * pos;\\n  output.cubeUV = normalize(t.xyz / t.w);\\n\\n  return output;\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] Position: vec4<f32>;\\n  [[location(0)]] texcoord_0: vec2<f32>;\\n  [[location(1)]] normal: vec3<f32>;\\n  [[location(2)]] tangent: vec4<f32>;\\n  [[location(3)]] color_0: vec3<f32>;\\n  [[location(4)]] texcoord_1: vec2<f32>;\\n};\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> [[location(0)]] vec4<f32> {\\n  return material.u_baseColorFactor * textureSample(u_baseColorTexture, u_sampler, vo.texcoord_0);\\n}\\n\"","module.exports = \"let c_radius: i32 = ${RADIUS};\\nlet c_windowSize: i32 = ${WINDOW_SIZE};\\n\\n[[stage(compute), workgroup_size(c_windowSize, c_windowSize, 1)]]\\nfn main(\\n  [[builtin(workgroup_id)]] workGroupID : vec3<u32>,\\n  [[builtin(local_invocation_id)]] localInvocationID : vec3<u32>\\n) {\\n  let size: vec2<i32> = textureDimensions(u_input, 0);\\n  let windowSize: vec2<i32> = vec2<i32>(c_windowSize, c_windowSize);\\n  let groupOffset: vec2<i32> = vec2<i32>(workGroupID.xy) * windowSize;\\n  let baseIndex: vec2<i32> = groupOffset + vec2<i32>(localInvocationID.xy);\\n  let baseUV: vec2<f32> = vec2<f32>(baseIndex) / vec2<f32>(size);\\n\\n  var weightsSum: f32 = 0.;\\n  var res: vec4<f32> = vec4<f32>(0., 0., 0., 1.);\\n  for (var r: i32 = -c_radius; r <= c_radius; r = r + 1) {\\n    for (var c: i32 = -c_radius; c <= c_radius; c = c + 1) {\\n      let iuv: vec2<i32> = baseIndex + vec2<i32>(r, c);\\n\\n      if (any(iuv < vec2<i32>(0)) || any(iuv >= size)) {\\n        continue;\\n      }\\n\\n      let weightIndex: i32 = (r + c_radius) * c_windowSize + (c + c_radius);\\n      let weight: f32 = material.u_kernel[weightIndex / 4][weightIndex % 4];\\n      weightsSum = weightsSum + weight;\\n      res = res + weight * textureLoad(u_input, iuv, 0);\\n    }\\n  }\\n  res = res / f32(weightsSum);\\n\\n  textureStore(u_output, baseIndex, res);\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] uv: vec2<f32>;\\n};\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> [[location(0)]] vec4<f32> {\\n  return textureSample(u_texture, u_sampler, vo.uv);\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] uv: vec2<f32>;\\n};\\n\\nvar<private> pos: array<vec2<f32>, 6> = array<vec2<f32>, 6>(\\n  vec2<f32>(-1.0, -1.0),\\n  vec2<f32>(1.0, -1.0),\\n  vec2<f32>(-1.0, 1.0),\\n  vec2<f32>(-1.0, 1.0),\\n  vec2<f32>(1.0, -1.0),\\n  vec2<f32>(1.0, 1.0)\\n);\\nvar<private> uv: array<vec2<f32>, 6> = array<vec2<f32>, 6>(\\n  vec2<f32>(0.0, 1.0),\\n  vec2<f32>(1.0, 1.0),\\n  vec2<f32>(0.0, 0.0),\\n  vec2<f32>(0.0, 0.0),\\n  vec2<f32>(1.0, 1.0),\\n  vec2<f32>(1.0, 0.0)\\n);\\n\\n[[stage(vertex)]]\\nfn main([[builtin(vertex_index)]] VertexIndex : u32) -> VertexOutput {\\n  var output: VertexOutput;\\n\\n  output.position = vec4<f32>(pos[VertexIndex], 0.0, 1.0);\\n  output.uv = uv[VertexIndex];\\n\\n  #if defined(FLIP)\\n    output.uv.y = 1. - output.uv.y;\\n  #endif\\n\\n  return output;\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] uv: vec2<f32>;\\n};\\n\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/basic/tone.chunk.wgsl\\nlet A: f32 = 2.51;\\nlet B: f32 = 0.03;\\nlet C: f32 = 2.43;\\nlet D: f32 = 0.59;\\nlet E: f32 = 0.14;\\t\\n\\nfn acesToneMapping(color: vec3<f32>) -> vec3<f32> {\\n  return (color * (A * color + B)) / (color * (C * color + D) + E); \\n}\\n\\nfn gammaCorrect(color: vec3<f32>, gamma: f32) -> vec3<f32> {\\n  return pow(color, vec3<f32>(1. / gamma));\\n}\\n\\n//require end\\n;\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> [[location(0)]] vec4<f32> {\\n  let hdrColor: vec4<f32> = textureSample(u_texture, u_sampler, vo.uv);\\n  var color = acesToneMapping(hdrColor.rgb);\\n\\n  return vec4<f32>(color, hdrColor.a);\\n}\\n\"","module.exports = \"let WINDOW_SIZE: i32 = ${WINDOW_SIZE};\\n\\nfn calcWeightNumber(factor: f32, a: f32, b: f32) -> f32 {\\n  return exp(factor * (a - b) * (a - b));\\n}\\n\\nfn calcWeightVec2(factor: f32, a: vec2<i32>, b: vec2<i32>) -> f32 {\\n  let diff: vec2<f32> = vec2<f32>(a - b);\\n  return exp(factor * dot(diff, diff));\\n}\\n\\nfn calcWeightVec3(factor: f32, a: vec3<f32>, b: vec3<f32>) -> f32 {\\n  let diff: vec3<f32> = a - b;\\n  return exp(factor * dot(diff, diff));\\n}\\n\\nfn calcLum(color: vec3<f32>) -> f32 {\\n  return dot(color, vec3<f32>(0.2125, 0.7154, 0.0721));\\n}\\n\\nfn blur(center: vec2<i32>, size: vec2<i32>) -> vec4<f32> {\\n  let radius: i32 = WINDOW_SIZE / 2;\\n  let sigmaD: f32 = material.u_filterFactors.x;\\n  let sigmaC: f32 = material.u_filterFactors.y;\\n  let sigmaZ: f32 = material.u_filterFactors.z;\\n  let sigmaN: f32 = material.u_filterFactors.w;\\n  var centerColor: vec4<f32> = textureLoad(u_preFilter, center, 0);\\n  let alpha: f32 = centerColor.a;\\n  let centerPosition = textureLoad(u_gbPositionMetalOrSpec, center, 0).xyz;\\n  let centerNormal = textureLoad(u_gbNormalGlass, center, 0).xyz;\\n  var colors: array<array<vec3<f32>, ${WINDOW_SIZE}>, ${WINDOW_SIZE}>;\\n  var lums: array<array<f32, ${WINDOW_SIZE}>, ${WINDOW_SIZE}>;\\n\\n  var minUV: vec2<i32> = max(center - vec2<i32>(radius, radius), vec2<i32>(0));\\n  var maxUV: vec2<i32> = min(center + vec2<i32>(radius, radius), size);\\n  var localUV: vec2<i32> = vec2<i32>(0, 0);\\n  var sumLum: f32 = 0.;\\n  var count: f32 = 0.;\\n\\n  for (var r: i32 = minUV.x; r <= maxUV.x; r = r + 1) {\\n    localUV.y = 0;\\n    for (var c: i32 = minUV.y; c <= maxUV.y; c = c + 1) {\\n      let iuv: vec2<i32> = vec2<i32>(r, c);\\n      let color: vec3<f32> = textureLoad(u_preFilter, iuv, 0).rgb;\\n      let lum: f32 = calcLum(color);\\n      colors[localUV.x][localUV.y] = color;\\n      lums[localUV.x][localUV.y] = lum;\\n\\n      sumLum = sumLum + lum;\\n      count = count + 1.;\\n      localUV.y = localUV.y + 1;\\n    }\\n    localUV.x = localUV.x + 1;\\n  }\\n\\n  let meanLum: f32 = sumLum / count;\\n\\n  var std: f32 = 0.;\\n  for (var r: i32 = 0; r < localUV.x; r = r + 1) {\\n    for (var c: i32 = 0; c < localUV.y; c = c + 1) {\\n      let lum: f32 = lums[r][c];\\n      std = std + (lum - meanLum) * (lum - meanLum);\\n    }\\n  }\\n  std = sqrt(std / (count - 1.));\\n\\n  let largestLum: f32 = max(meanLum + std * 2., 1.);\\n\\n  var lum: f32 = calcLum(centerColor.rgb);\\n  if (lum > largestLum) {\\n    centerColor = centerColor * largestLum / lum;\\n  }\\n\\n  localUV = vec2<i32>(0, 0);\\n  var weightsSum: f32 = 0.;\\n  var res: vec3<f32> = vec3<f32>(0., 0., 0.);\\n\\n  for (var r: i32 = minUV.x; r <= maxUV.x; r = r + 1) {\\n    localUV.y = 0;\\n    for (var c: i32 = minUV.y; c <= maxUV.y; c = c + 1) {\\n      var color: vec3<f32> = colors[localUV.x][localUV.y];\\n      lum = lums[localUV.x][localUV.y];\\n\\n      if (lum > largestLum) {\\n        color = color * largestLum / lum;\\n      }\\n\\n      let iuv: vec2<i32> = vec2<i32>(r, c);\\n      let position: vec4<f32> = textureLoad(u_gbPositionMetalOrSpec, iuv, 0);\\n      let normal: vec4<f32> = textureLoad(u_gbNormalGlass, iuv, 0);\\n      let weight: f32 = calcWeightVec2(sigmaD, iuv, center)\\n        * calcWeightVec3(sigmaC, color.rgb, centerColor.rgb)\\n        * calcWeightVec3(sigmaN, normal.xyz, centerNormal.xyz)\\n        * calcWeightNumber(sigmaZ, position.z, centerPosition.z);\\n      weightsSum = weightsSum + weight;\\n      res = res + weight * color;\\n\\n      localUV.y = localUV.y + 1;\\n    }\\n    localUV.x = localUV.x + 1;\\n  }\\n\\n  res = res / weightsSum;\\n\\n  return vec4<f32>(res, alpha);\\n}\\n\\n[[stage(compute), workgroup_size(16, 16, 1)]]\\nfn main(\\n  [[builtin(workgroup_id)]] workGroupID : vec3<u32>,\\n  [[builtin(local_invocation_id)]] localInvocationID : vec3<u32>\\n) {\\n  let size: vec2<i32> = textureDimensions(u_preFilter);\\n  let groupOffset: vec2<i32> = vec2<i32>(workGroupID.xy) * 16;\\n  let baseIndex: vec2<i32> = groupOffset + vec2<i32>(localInvocationID.xy);\\n  let result: vec4<f32> = blur(baseIndex, size);\\n\\n  textureStore(u_output, baseIndex, result);\\n}\\n\"","module.exports = \"[[stage(compute), workgroup_size(16, 16, 1)]]\\nfn main(\\n  [[builtin(workgroup_id)]] workGroupID : vec3<u32>,\\n  [[builtin(local_invocation_id)]] localInvocationID : vec3<u32>\\n) {\\n  let size: vec2<i32> = textureDimensions(u_current);\\n  let groupOffset: vec2<i32> = vec2<i32>(workGroupID.xy) * 16;\\n  let baseIndex: vec2<i32> = groupOffset + vec2<i32>(localInvocationID.xy);\\n\\n  let pre: vec4<f32> = textureLoad(u_pre, baseIndex, 0);\\n  let current: vec4<f32> = textureLoad(u_current, baseIndex, 0);\\n  let mixed: vec4<f32> = vec4<f32>(mix(current.rgb, pre.rgb, vec3<f32>(material.u_preWeight)), current.a);\\n\\n  textureStore(u_output, baseIndex, mixed);\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] wPosition: vec4<f32>;\\n  [[location(1)]] texcoord_0: vec2<f32>;\\n  [[location(2)]] normal: vec3<f32>;\\n  [[location(3)]] meshMatIndex: vec2<u32>;\\n};\\n\\nstruct FragmentOutput {\\n  [[location(0)]] positionMetalOrSpec: vec4<f32>;\\n  [[location(1)]] baseColorRoughOrGloss: vec4<f32>;\\n  [[location(2)]] normalGlass: vec4<f32>;\\n  [[location(3)]] meshIndexMatIndexMatType: vec4<u32>;\\n};\\n\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/ray-tracing/common.chunk.wgsl\\nlet MAT_TYPE_METAL_ROUGH: u32 = 0u;\\nlet MAT_TYPE_SPEC_GLOSS: u32 = 1u;\\nlet MAT_TYPE_GLASS_METAL_ROUGH: u32 = 2u;\\nlet MAT_TYPE_GLASS_SPEC_GLOSS: u32 = 3u;\\nlet MAT_TYPE_LIGHT: u32 = 4u;\\n\\nfn isMatSpecGloss(matType: u32) -> bool {\\n  return matType == MAT_TYPE_SPEC_GLOSS || matType == MAT_TYPE_GLASS_SPEC_GLOSS;\\n}\\n\\nfn isMatGlass(matType: u32) -> bool {\\n  return matType == MAT_TYPE_GLASS_METAL_ROUGH || matType == MAT_TYPE_GLASS_SPEC_GLOSS;\\n}\\n\\nfn isMatLight(matType: u32) -> bool {\\n  return matType == MAT_TYPE_LIGHT;\\n}\\n\\nfn getRoughness(factor: f32, textureId: i32, uv: vec2<f32>) -> f32 {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).g;\\n}\\n\\nfn getMetallic(factor: f32, textureId: i32, uv: vec2<f32>) -> f32 {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).b;\\n}\\n\\nfn getSpecular(factor: vec3<f32>, textureId: i32, uv: vec2<f32>) -> vec3<f32> {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).rgb;\\n}\\n\\nfn getGlossiness(factor: f32, textureId: i32, uv: vec2<f32>) -> f32 {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).a;\\n}\\n\\nfn getBaseColor(factor: vec4<f32>, textureId: i32, uv: vec2<f32>) -> vec4<f32> {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_baseColorTextures, u_sampler, uv, textureId, 0.);\\n}\\n\\n//require end\\n;\\n\\nfn getFaceNormal(position: vec3<f32>) -> vec3<f32> {\\n  return normalize(cross(dpdy(position), dpdx(position)));\\n}\\n\\nfn getNormal(\\n  vNormal: vec3<f32>, position: vec3<f32>, faceNormal: vec3<f32>,\\n  textureId: i32, uv: vec2<f32>, normalScale: f32\\n) -> vec3<f32> {\\n  var normal: vec3<f32> = normalize(vNormal);\\n  normal = normal * sign(dot(normal, faceNormal));\\n\\n  if (textureId == -1) {\\n    return normal;\\n  }\\n\\n  // http://www.thetenthplanet.de/archives/1180\\n  let dp1: vec3<f32> = dpdx(position);\\n  let dp2: vec3<f32> = dpdy(position);\\n  let duv1: vec2<f32> = dpdx(uv);\\n  let duv2: vec2<f32> = dpdy(uv);\\n  let dp2perp: vec3<f32> = cross(dp2, normal);\\n  let dp1perp: vec3<f32> = cross(normal, dp1);\\n  var dpdu: vec3<f32> = dp2perp * duv1.x + dp1perp * duv2.x;\\n  var dpdv: vec3<f32> = dp2perp * duv1.y + dp1perp * duv2.y;\\n  let invmax: f32 = inverseSqrt(max(dot(dpdu, dpdu), dot(dpdv, dpdv)));\\n  dpdu = dpdu * invmax;\\n  dpdv = dpdv * invmax;\\n  let tbn: mat3x3<f32> = mat3x3<f32>(dpdu, dpdv, normal);\\n  var tNormal: vec3<f32> = 2. * textureSample(u_normalTextures, u_sampler, uv, textureId).xyz - 1.;\\n  tNormal = tNormal * vec3<f32>(normalScale, normalScale, 1.);\\n\\n  return normalize(tbn * tNormal);\\n}\\n\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> FragmentOutput {\\n  var fo: FragmentOutput;\\n\\n  let meshId: u32 = vo.meshMatIndex[0];\\n  let matId: u32 = vo.meshMatIndex[1];\\n  let metallicRoughnessFactorNormalScaleMaterialType: vec4<f32> = material.u_metallicRoughnessFactorNormalScaleMaterialTypes[matId];\\n  let specularGlossinessFactor: vec4<f32> = material.u_specularGlossinessFactors[matId];\\n  let textureIds: vec4<i32> = material.u_matId2TexturesId[matId];\\n  let matType = u32(metallicRoughnessFactorNormalScaleMaterialType[3]);\\n  let isSpecGloss: bool = isMatSpecGloss(matType);\\n\\n  fo.positionMetalOrSpec = vec4<f32>(vo.wPosition.xyz, 0.);\\n\\n  let baseColor: vec4<f32> = getBaseColor(material.u_baseColorFactors[matId], textureIds[0], vo.texcoord_0);\\n  fo.baseColorRoughOrGloss = vec4<f32>(baseColor.rgb, 0.);\\n\\n  if (isSpecGloss) {\\n    fo.positionMetalOrSpec.w = getSpecular(specularGlossinessFactor.xyz, textureIds[2], vo.texcoord_0).r;\\n    fo.baseColorRoughOrGloss.w = getGlossiness(specularGlossinessFactor[3], textureIds[2], vo.texcoord_0);\\n  } else {\\n    fo.positionMetalOrSpec.w = getMetallic(metallicRoughnessFactorNormalScaleMaterialType[0], textureIds[2], vo.texcoord_0);\\n    fo.baseColorRoughOrGloss.w = getRoughness(metallicRoughnessFactorNormalScaleMaterialType[1], textureIds[2], vo.texcoord_0);\\n  }\\n\\n  let faceNormal: vec3<f32> = getFaceNormal(vo.wPosition.xyz);\\n  fo.normalGlass = vec4<f32>(\\n    getNormal(vo.normal, vo.wPosition.xyz, faceNormal, textureIds[1], vo.texcoord_0, metallicRoughnessFactorNormalScaleMaterialType[2]),\\n    baseColor.a\\n  );\\n\\n  // alpha is used for judge hited\\n  fo.meshIndexMatIndexMatType = vec4<u32>(meshId, matId, matType, 2u);\\n\\n  return fo;\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] wPosition: vec4<f32>;\\n  [[location(1)]] texcoord_0: vec2<f32>;\\n  [[location(2)]] normal: vec3<f32>;\\n  [[location(3)]] meshMatIndex: vec2<u32>;\\n};\\n\\n[[stage(vertex)]]\\nfn main(attrs: Attrs) -> VertexOutput {\\n  var output: VertexOutput;\\n  \\n  let wPosition: vec4<f32> = vec4<f32>(attrs.position, 1.);\\n  \\n  output.position = global.u_vp * wPosition;\\n  output.wPosition = wPosition;\\n  output.texcoord_0 = attrs.texcoord_0;\\n  output.normal = attrs.normal;\\n  output.meshMatIndex.x = attrs.meshMatIndex.x;\\n  output.meshMatIndex.y = attrs.meshMatIndex.y;\\n\\n  return output;\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] Position: vec4<f32>;\\n  [[location(0)]] texcoord_0: vec2<f32>;\\n  [[location(1)]] normal: vec3<f32>;\\n  [[location(2)]] tangent: vec4<f32>;\\n  [[location(3)]] color_0: vec3<f32>;\\n  [[location(4)]] texcoord_1: vec2<f32>;\\n};\\n\\nstruct FragmentOutput {\\n  [[location(0)]] positionMetalOrSpec: vec4<f32>;\\n  [[location(1)]] baseColorRoughOrGloss: vec4<f32>;\\n  [[location(2)]] normalGlass: vec4<f32>;\\n  [[location(3)]] meshIndexMatIndexMatType: vec4<u32>;\\n};\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> FragmentOutput {\\n  var fo: FragmentOutput;\\n\\n  fo.baseColorRoughOrGloss = vec4<f32>(material.u_lightColor.rgb, 0.);\\n  fo.meshIndexMatIndexMatType = vec4<u32>(0u, 0u, 4u, 2u);\\n\\n  return fo;\\n}\\n\"","module.exports = \"struct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] uv: vec2<f32>;\\n};\\n\\n[[stage(fragment)]]\\nfn main(vo: VertexOutput) -> [[location(0)]] vec4<f32> {\\n  let uv: vec2<f32> = vo.uv;\\n\\n  if (uv.x < .33) {\\n    return vec4<f32>(textureSample(u_gbPositionMetalOrSpec, u_sampler, uv).rgb, 1.);\\n  }\\n  \\n  if (uv.x < .66) {\\n    return vec4<f32>(textureSample(u_gbBaseColorRoughOrGloss, u_sampler, uv).rgb, 1.);\\n  }\\n  \\n  return vec4<f32>(textureSample(u_gbNormalGlass, u_sampler, uv).rgb, 1.);\\n}\\n\"","module.exports = \"let PI: f32 = 3.14159265358979;\\nlet MAX_LIGHTS_COUNT: u32 = 4u;\\nlet MAX_RAY_LENGTH: f32 = 9999.;\\nlet BVH_DEPTH: i32 = ${BVH_DEPTH};\\nlet EPS: f32 = 0.005;\\nlet RAY_DIR_OFFSET: f32 = .01;\\nlet RAY_NORMAL_OFFSET: f32 = .01;\\n\\nstruct VertexOutput {\\n  [[builtin(position)]] position: vec4<f32>;\\n  [[location(0)]] uv: vec2<f32>;\\n};\\n\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/basic/common.chunk.wgsl\\nlet LIGHT_TYPE_INVALID: u32 = 0u;\\nlet LIGHT_TYPE_AREA: u32 = 1u;\\nlet LIGHT_TYPE_DIRECTIONAL: u32 = 2u;\\nlet LIGHT_TYPE_POINT: u32 = 3u;\\nlet LIGHT_TYPE_SPOT: u32 = 4u;\\n\\nlet LIGHT_AREA_RRCT: u32 = 0u;\\nlet LIGHT_AREA_DISC: u32 = 1u;\\n\\n//require end\\n;\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/ray-tracing/common.chunk.wgsl\\nlet MAT_TYPE_METAL_ROUGH: u32 = 0u;\\nlet MAT_TYPE_SPEC_GLOSS: u32 = 1u;\\nlet MAT_TYPE_GLASS_METAL_ROUGH: u32 = 2u;\\nlet MAT_TYPE_GLASS_SPEC_GLOSS: u32 = 3u;\\nlet MAT_TYPE_LIGHT: u32 = 4u;\\n\\nfn isMatSpecGloss(matType: u32) -> bool {\\n  return matType == MAT_TYPE_SPEC_GLOSS || matType == MAT_TYPE_GLASS_SPEC_GLOSS;\\n}\\n\\nfn isMatGlass(matType: u32) -> bool {\\n  return matType == MAT_TYPE_GLASS_METAL_ROUGH || matType == MAT_TYPE_GLASS_SPEC_GLOSS;\\n}\\n\\nfn isMatLight(matType: u32) -> bool {\\n  return matType == MAT_TYPE_LIGHT;\\n}\\n\\nfn getRoughness(factor: f32, textureId: i32, uv: vec2<f32>) -> f32 {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).g;\\n}\\n\\nfn getMetallic(factor: f32, textureId: i32, uv: vec2<f32>) -> f32 {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).b;\\n}\\n\\nfn getSpecular(factor: vec3<f32>, textureId: i32, uv: vec2<f32>) -> vec3<f32> {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).rgb;\\n}\\n\\nfn getGlossiness(factor: f32, textureId: i32, uv: vec2<f32>) -> f32 {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_metalRoughOrSpecGlossTextures, u_sampler, uv, textureId, 0.).a;\\n}\\n\\nfn getBaseColor(factor: vec4<f32>, textureId: i32, uv: vec2<f32>) -> vec4<f32> {\\n  if (textureId == -1) {\\n    return factor;\\n  }\\n\\n  return factor * textureSampleLevel(u_baseColorTextures, u_sampler, uv, textureId, 0.);\\n}\\n\\n//require end\\n;\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/pbr/common.chunk.wgsl\\nstruct PBRData {\\n  reflectance0: vec3<f32>;\\n  reflectance90: vec3<f32>;\\n  alphaRoughness: f32;\\n  diffuseColor: vec3<f32>;\\n  specularColor: vec3<f32>;\\n  baseColor: vec3<f32>;\\n  ao: vec3<f32>;\\n  roughness: f32;\\n};\\n\\nfn pbrSpecularReflection(reflectance0: vec3<f32>, reflectance90: vec3<f32>, VdotH: f32)-> vec3<f32> {\\n  return reflectance0 + (reflectance90 - reflectance0) * pow(clamp(1.0 - VdotH, 0.0, 1.0), 5.0);\\n}\\n\\nfn pbrGeometricOcclusion(NdotL: f32, NdotV: f32, alphaRoughness: f32)-> f32 {\\n  let r: f32 = alphaRoughness * alphaRoughness;\\n\\n  let attenuationL: f32 = 2.0 * NdotL / (NdotL + sqrt(r + (1.0 - r) * (NdotL * NdotL)));\\n  let attenuationV: f32 = 2.0 * NdotV / (NdotV + sqrt(r + (1.0 - r) * (NdotV * NdotV)));\\n  return attenuationL * attenuationV;\\n}\\n\\nfn pbrMicrofacetDistribution(alphaRoughness: f32, NdotH: f32)-> f32 {\\n  let roughnessSq: f32 = alphaRoughness * alphaRoughness;\\n  let f: f32 = NdotH * NdotH * (roughnessSq - NdotH) + 1.0;\\n  return roughnessSq * 0.3183098861837907 / (f * f);\\n}\\n\\nfn pbrPrepareData(\\n  isSpecGloss: bool,\\n  baseColor: vec3<f32>,\\n  metal: f32, rough: f32,\\n  spec: vec3<f32>, gloss: f32\\n) -> PBRData {\\n  var pbr: PBRData;\\n\\n  var specularColor: vec3<f32>;\\n  var roughness: f32;\\n\\n  // metallic roughness\\n  if (!isSpecGloss) {\\n    roughness = clamp(rough, 0.04, 1.0);\\n    let metallic: f32 = clamp(metal, 0.0, 1.0);\\n    let f0: vec3<f32> = vec3<f32>(0.04, 0.04, 0.04);\\n\\n    specularColor = mix(f0, baseColor, vec3<f32>(metallic));\\n    pbr.diffuseColor = (1.0 - metallic) * (baseColor * (vec3<f32>(1.0, 1.0, 1.0) - f0));\\n  }\\n  else {\\n  // specular glossiness\\n    roughness = 1.0 - gloss;\\n    specularColor = spec;\\n    pbr.diffuseColor = baseColor * (1.0 - max(max(specularColor.r, specularColor.g), specularColor.b));\\n  }\\n  \\n  pbr.baseColor = baseColor;\\n  pbr.specularColor = specularColor;\\n  pbr.roughness = roughness;\\n  \\n  let reflectance: f32 = max(max(specularColor.r, specularColor.g), specularColor.b);\\n  pbr.reflectance90 = vec3<f32>(clamp(reflectance * 25.0, 0.0, 1.0));\\n  pbr.reflectance0 = specularColor.rgb;\\n  pbr.alphaRoughness = roughness * roughness;\\n\\n  return pbr;\\n}\\n\\nfn pbrCalculateLo(\\n  pbr: PBRData, normal: vec3<f32>,\\n  viewDir: vec3<f32>, lightDir: vec3<f32>\\n)-> vec3<f32> {\\n  let H: vec3<f32> = normalize(lightDir + viewDir);\\n  let NdotV: f32 = clamp(abs(dot(normal, viewDir)), 0.001, 1.0);\\n  let NdotL: f32 = clamp(dot(normal, lightDir), 0.001, 1.0);\\n  let NdotH: f32 = clamp(dot(normal, H), 0.0, 1.0);\\n  let LdotH: f32 = clamp(abs(dot(lightDir, H)), 0.0, 1.0);\\n  let VdotH: f32 = clamp(dot(viewDir, H), 0.0, 1.0);\\n  // Calculate the shading terms for the microfacet specular shading model\\n  let F: vec3<f32> = pbrSpecularReflection(pbr.reflectance0, pbr.reflectance90, VdotH);\\n  let G: f32 = pbrGeometricOcclusion(NdotL, NdotV, pbr.alphaRoughness);\\n  let D: f32 = pbrMicrofacetDistribution(pbr.alphaRoughness, NdotH);\\n\\n  let specContrib: vec3<f32> = F * G * D / (4.0 * NdotL * NdotV);\\n  // Obtain final intensity as reflectance (BRDF) scaled by the energy of the light (cosine law)\\n  return NdotL * specContrib;\\n}\\n\\n//require end\\n;\\n\\nstruct Ray {\\n  origin: vec3<f32>;\\n  dir: vec3<f32>;\\n  invDir: vec3<f32>;\\n};\\n\\nstruct HitPoint {\\n  hit: bool;\\n  hited: f32;\\n  position: vec3<f32>;\\n  baseColor: vec3<f32>;\\n  metal: f32;\\n  rough: f32;\\n  spec: vec3<f32>;\\n  gloss: f32;\\n  glass: f32;\\n  normal: vec3<f32>;\\n  // sign: if render back, is -1, or 1\\n  sign: f32;\\n  meshIndex: u32;\\n  matIndex: u32;\\n  isSpecGloss: bool;\\n  isGlass: bool;\\n  isLight: bool;\\n  matType: u32;\\n  pbrData: PBRData;\\n};\\n\\nstruct Light {\\n  color: vec3<f32>;\\n  throughEng: vec3<f32>;\\n  next: Ray;\\n};\\n\\nstruct BVHNode {\\n  child0Index: u32;\\n  child1Index: u32;\\n  max: vec3<f32>;\\n  min: vec3<f32>;\\n};\\n\\nstruct BVHLeaf {\\n  primitives: u32;\\n  indexes: vec3<u32>;\\n};\\n\\nstruct FragmentInfo {\\n  hit: bool;\\n  hitPoint: vec3<f32>;\\n  t: f32;\\n  // areal coordinates\\n  weights: vec3<f32>;\\n  p0: vec3<f32>;\\n  p1: vec3<f32>;\\n  p2: vec3<f32>;\\n  uv0: vec2<f32>;\\n  uv1: vec2<f32>;\\n  uv2: vec2<f32>;\\n  n0: vec3<f32>;\\n  n1: vec3<f32>;\\n  n2: vec3<f32>;\\n  meshIndex: u32;\\n  matIndex: u32;\\n  matType: u32;\\n};\\n\\nstruct Child {\\n  isLeaf: bool;\\n  offset: u32;\\n};\\n\\nfn getRandom(uv: vec2<f32>, i: i32) -> vec4<f32> {\\n  let noise: vec4<f32> = textureSampleLevel(u_noise, u_sampler, uv, 0.);\\n\\n  return fract(material.u_randoms[i] + noise);\\n}\\n\\nfn genRay(origin: vec3<f32>, dir: vec3<f32>) -> Ray {\\n  var ray: Ray;\\n  ray.origin = origin;\\n  ray.dir = dir;\\n  ray.invDir = 1. / ray.dir;\\n\\n  return ray;\\n}\\n\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/ray-tracing/gbInfo.chunk.wgsl\\nfn genWorldRayByGBuffer(uv: vec2<f32>, gBInfo: HitPoint) -> Ray {\\n  let pixelSSPos: vec4<f32> = vec4<f32>(uv.x * 2. - 1., 1. - uv.y * 2., 0., 1.);\\n  var pixelWorldPos: vec4<f32> = global.u_viewInverse * global.u_projInverse * pixelSSPos;\\n  pixelWorldPos = pixelWorldPos / pixelWorldPos.w;\\n\\n  return genRay(pixelWorldPos.xyz, normalize(gBInfo.position - pixelWorldPos.xyz));\\n};\\n\\nfn getGBInfo(index: vec2<i32>) -> HitPoint {\\n  var info: HitPoint;\\n\\n  let wPMtlSpec: vec4<f32> = textureLoad(u_gbPositionMetalOrSpec, index, 0);\\n  let dfRghGls: vec4<f32> = textureLoad(u_gbBaseColorRoughOrGloss, index, 0);\\n  let nomGlass: vec4<f32> = textureLoad(u_gbNormalGlass, index, 0);\\n  let meshIdMatIdMatType: vec4<u32> = textureLoad(u_gbMeshIndexMatIndexMatType, index, 0);\\n\\n  info.position = wPMtlSpec.xyz;\\n  info.metal = wPMtlSpec.w;\\n  info.baseColor = dfRghGls.xyz;\\n  info.rough = dfRghGls.w;\\n  info.spec = vec3<f32>(wPMtlSpec.w);\\n  info.gloss = dfRghGls.w;\\n  info.normal = nomGlass.xyz;\\n  info.sign = 1.;\\n  info.glass = nomGlass.w;\\n  info.meshIndex = meshIdMatIdMatType.x;\\n  info.matIndex = meshIdMatIdMatType.y;\\n  let matType: u32 = meshIdMatIdMatType.z;\\n  info.hit = meshIdMatIdMatType.w == 2u;\\n  info.hited = f32(meshIdMatIdMatType.w);\\n  info.isSpecGloss = isMatSpecGloss(matType);\\n  info.isGlass = isMatGlass(matType);\\n  info.isLight = info.hit && isMatLight(matType);\\n  info.matType = matType;\\n  info.pbrData = pbrPrepareData(info.isSpecGloss, info.baseColor, info.metal, info.rough, info.spec, info.gloss);\\n\\n  return info;\\n};\\n\\n//require end\\n;\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/ray-tracing/hitTest.chunk.wgsl\\nfn decodeChild(index: u32) -> Child {\\n  return Child((index >> 31u) != 0u, (index << 1u) >> 1u);\\n}\\n\\nfn getBVHNodeInfo(offset: u32) -> BVHNode {\\n  var node: BVHNode;\\n  let data0: vec4<f32> = u_bvh.value[offset];\\n  let data1: vec4<f32> = u_bvh.value[offset + 1u];\\n  node.child0Index = bitcast<u32>(data0[0]);\\n  node.child1Index = bitcast<u32>(data1[0]);\\n  node.min = data0.yzw;\\n  node.max = data1.yzw;\\n\\n  return node;\\n}\\n\\nfn getBVHLeafInfo(offset: u32) -> BVHLeaf {\\n  var leaf: BVHLeaf;\\n  let data1: vec4<f32> = u_bvh.value[offset];\\n  leaf.primitives = bitcast<u32>(data1.x);\\n  leaf.indexes.x = bitcast<u32>(data1.y);\\n  leaf.indexes.y = bitcast<u32>(data1.z);\\n  leaf.indexes.z = bitcast<u32>(data1.w);\\n\\n  return leaf;\\n}\\n\\nfn getFaceNormal(frag: FragmentInfo) -> vec3<f32> {\\n  return normalize(cross(frag.p1 - frag.p0, frag.p2 - frag.p0));\\n}\\n\\nfn getNormal(\\n  frag: FragmentInfo, uv: vec2<f32>,\\n  textureId: i32, normalScale: f32\\n) -> vec3<f32> {\\n  var normal: vec3<f32> = normalize(\\n    frag.n0 * frag.weights[0] + frag.n0 * frag.weights[1] + frag.n0 * frag.weights[2]\\n  );\\n  normal = normal;\\n\\n  if (textureId == -1) {\\n    return normal;\\n  }\\n\\n  // // http://www.thetenthplanet.de/archives/1180\\n  let dp1: vec3<f32> = frag.p1 - frag.p0;\\n  let dp2: vec3<f32> = frag.p2 - frag.p0;\\n  let duv1: vec2<f32> = frag.uv2 - frag.uv0;\\n  let duv2: vec2<f32> = frag.uv1 - frag.uv0;\\n  let dp2perp: vec3<f32> = cross(dp2, normal);\\n  let dp1perp: vec3<f32> = cross(normal, dp1);\\n  var dpdu: vec3<f32> = dp2perp * duv1.x + dp1perp * duv2.x;\\n  var dpdv: vec3<f32> = dp2perp * duv1.y + dp1perp * duv2.y;\\n  let invmax: f32 = inverseSqrt(max(dot(dpdu, dpdu), dot(dpdv, dpdv)));\\n  dpdu = dpdu * invmax;\\n  dpdv = dpdv * invmax;\\n  let tbn: mat3x3<f32> = mat3x3<f32>(dpdu, dpdv, normal);\\n  var tNormal: vec3<f32> = 2. * textureSampleLevel(u_normalTextures, u_sampler, uv, textureId, 0.).xyz - 1.;\\n  tNormal = tNormal * vec3<f32>(normalScale, normalScale, 1.);\\n\\n  return normalize(tbn * tNormal);\\n}\\n\\n// https://tavianator.com/2011/ray_box.html\\nfn boxHitTest(ray: Ray, max: vec3<f32>, min: vec3<f32>) -> f32 {\\n  let t1: vec3<f32> = (min - ray.origin) * ray.invDir;\\n  let t2: vec3<f32> = (max - ray.origin) * ray.invDir;\\n  let tvmin: vec3<f32> = min(t1, t2);\\n  let tvmax: vec3<f32> = max(t1, t2);\\n  let tmin: f32 = max(tvmin.x, max(tvmin.y, tvmin.z));\\n  let tmax: f32 = min(tvmax.x, min(tvmax.y, tvmax.z));\\n\\n  if (tmax - tmin < 0.) {\\n    return -1.;\\n  }\\n  \\n  if (tmin > 0.) {\\n    return tmin;\\n  }\\n\\n  return tmax;\\n}\\n\\nfn triangleHitTest(ray: Ray, leaf: BVHLeaf) -> FragmentInfo {\\n  var info: FragmentInfo;\\n  let indexes: vec3<u32> = leaf.indexes;\\n  info.p0 = u_positions.value[indexes[0]];\\n  info.p1 = u_positions.value[indexes[1]];\\n  info.p2 = u_positions.value[indexes[2]];\\n\\n  // if ray is very near to its egde, test will be failed, especially when trangle is very small\\n  let e0: vec3<f32> = info.p1 - info.p0;\\n  let e1: vec3<f32> = info.p2 - info.p0;\\n  let p: vec3<f32> = cross(ray.dir, e1);\\n  var det: f32 = dot(e0, p);\\n  var t: vec3<f32> = ray.origin - info.p0;\\n\\n  if (det < 0.) {\\n    t = -t;\\n    det = -det;\\n  }\\n\\n  if (det < 0.0001) {\\n    return info;\\n  }\\n\\n  let u: f32 = dot(t, p);\\n\\n  if (u < 0. || u > det) {\\n    return info;\\n  }\\n\\n  let q: vec3<f32> = cross(t, e0);\\n  let v: f32 = dot(ray.dir, q);\\n\\n  if (v < 0. || v + u - det > 0.) {\\n    return info;\\n  }\\n\\n  let lt: f32 = dot(e1, q);\\n\\n  if (lt < 0.) {\\n    return info;\\n  }\\n\\n  let invDet: f32 = 1. / det;\\n  info.weights = vec3<f32>(0., u, v) * invDet;\\n  info.weights.x = 1. - info.weights.y - info.weights.z;\\n\\n  info.hit = true;\\n  info.t = lt * invDet;\\n  info.hitPoint = ray.origin + ray.dir * info.t;\\n  info.uv0 = u_uvs.value[indexes.x];\\n  info.uv1 = u_uvs.value[indexes.y];\\n  info.uv2 = u_uvs.value[indexes.z];\\n  info.n0 = u_normals.value[indexes.x];\\n  info.n1 = u_normals.value[indexes.y];\\n  info.n2 = u_normals.value[indexes.z];\\n  info.meshIndex = u_meshMatIndexes.value[indexes.x].x;\\n  info.matIndex = u_meshMatIndexes.value[indexes.x].y;\\n  let metallicRoughnessFactorNormalScaleMaterialType: vec4<f32> = material.u_metallicRoughnessFactorNormalScaleMaterialTypes[info.matIndex];\\n  info.matType = u32(metallicRoughnessFactorNormalScaleMaterialType[3]);\\n\\n  return info;\\n}\\n\\nfn leafHitTest(ray: Ray, offset: u32, ignoreGlass: bool) -> FragmentInfo {\\n  var info: FragmentInfo;\\n  info.t = MAX_RAY_LENGTH;\\n  var leaf: BVHLeaf = getBVHLeafInfo(offset);\\n  let primitives: u32 = leaf.primitives;\\n  \\n  for (var i: u32 = 0u; i < primitives; i = i + 1u) {\\n    leaf = getBVHLeafInfo(offset + i);\\n    let cInfo: FragmentInfo = triangleHitTest(ray, leaf);\\n\\n    if (ignoreGlass && isMatGlass(cInfo.matType)) {\\n      continue;\\n    }\\n\\n    if (cInfo.hit && cInfo.t < info.t) {\\n      info = cInfo;\\n    }\\n  }\\n\\n  return info;\\n}\\n\\nfn fillHitPoint(frag: FragmentInfo, ray: Ray) -> HitPoint {\\n  var info: HitPoint;\\n\\n  info.hit = true;\\n  info.hited = frag.t;\\n  info.meshIndex = frag.meshIndex;\\n  info.matIndex = frag.matIndex;\\n  let metallicRoughnessFactorNormalScaleMaterialType: vec4<f32> = material.u_metallicRoughnessFactorNormalScaleMaterialTypes[frag.matIndex];\\n  info.position = frag.p0 * frag.weights[0] + frag.p1 * frag.weights[1] + frag.p2 * frag.weights[2];\\n  let uv: vec2<f32> = frag.uv0 * frag.weights[0] + frag.uv1 * frag.weights[1] + frag.uv2 * frag.weights[2];\\n  let textureIds: vec4<i32> = material.u_matId2TexturesId[frag.matIndex];  \\n  let faceNormal: vec3<f32> = getFaceNormal(frag);\\n  info.sign = sign(dot(faceNormal, -ray.dir));\\n  info.normal = info.sign * getNormal(frag, uv, textureIds[1], metallicRoughnessFactorNormalScaleMaterialType[2]);\\n  let baseColor: vec4<f32> = getBaseColor(material.u_baseColorFactors[frag.matIndex], textureIds[0], uv);\\n  info.baseColor = baseColor.rgb;\\n  info.glass = baseColor.a;\\n  info.matType = frag.matType;\\n  info.isSpecGloss = isMatSpecGloss(frag.matType);\\n  info.isGlass = isMatGlass(frag.matType);\\n\\n  if (info.isSpecGloss) {\\n    let specularGlossinessFactors: vec4<f32> = material.u_specularGlossinessFactors[frag.matIndex];\\n    info.spec = getSpecular(specularGlossinessFactors.xyz, textureIds[2], uv).rgb;\\n    info.gloss = getGlossiness(specularGlossinessFactors[3], textureIds[2], uv);\\n  } else {\\n    info.metal = getMetallic(metallicRoughnessFactorNormalScaleMaterialType[0], textureIds[2], uv);\\n    info.rough = getRoughness(metallicRoughnessFactorNormalScaleMaterialType[1], textureIds[2], uv);\\n  }\\n\\n  info.pbrData = pbrPrepareData(info.isSpecGloss, info.baseColor, info.metal, info.rough, info.spec, info.gloss);\\n\\n  return info;\\n}\\n\\nfn hitTest(ray: Ray) -> HitPoint {\\n  var hit: HitPoint;\\n  var fragInfo: FragmentInfo;\\n  fragInfo.t = MAX_RAY_LENGTH;\\n  var node: BVHNode;\\n  var nodeStack: array<u32, ${BVH_DEPTH}>;\\n  nodeStack[0] = 0u;\\n  var stackDepth: i32 = 0;\\n  \\n  loop {\\n     if (stackDepth < 0) {\\n       break;\\n     }\\n\\n    let child = decodeChild(nodeStack[stackDepth]);\\n    stackDepth = stackDepth - 1;\\n\\n    if (child.isLeaf) {\\n      let info: FragmentInfo = leafHitTest(ray, child.offset, false);\\n\\n      if (info.hit && info.t < fragInfo.t) {\\n        fragInfo = info;\\n      }\\n\\n      continue;\\n    }\\n\\n    node = getBVHNodeInfo(child.offset);\\n    let hited: f32 = boxHitTest(ray, node.max, node.min);\\n\\n    // if ray.origin is in bvh box, the minT may be less than zero, hited will be maxT\\n    // if (hited < 0. || hited > fragInfo.t) {\\n    if (hited < 0.) {\\n      continue;\\n    }\\n\\n    stackDepth = stackDepth + 1;\\n    nodeStack[stackDepth] = node.child0Index;\\n    stackDepth = stackDepth + 1;\\n    nodeStack[stackDepth] = node.child1Index;\\n  }\\n\\n  if (fragInfo.hit) {\\n    hit = fillHitPoint(fragInfo, ray);\\n  }\\n\\n  return hit;\\n}\\n\\nfn hitTestShadow(ray: Ray, maxT: f32) -> FragmentInfo {\\n  var fragInfo: FragmentInfo;\\n  var node: BVHNode;\\n  var nodeStack: array<u32, ${BVH_DEPTH}>;\\n  nodeStack[0] = 0u;\\n  var stackDepth: i32 = 0;\\n  \\n  loop {\\n     if (stackDepth < 0) {\\n       break;\\n     }\\n\\n    let child = decodeChild(nodeStack[stackDepth]);\\n    stackDepth = stackDepth - 1;\\n\\n    if (child.isLeaf) {\\n      let info: FragmentInfo = leafHitTest(ray, child.offset, true);\\n\\n      if (info.hit && info.t < maxT && info.t > EPS) {\\n        return info;\\n      }\\n\\n      continue;\\n    }\\n\\n    node = getBVHNodeInfo(child.offset);\\n    let hited: f32 = boxHitTest(ray, node.max, node.min);\\n\\n    if (hited < 0.) {\\n      continue;\\n    }\\n\\n    stackDepth = stackDepth + 1;\\n    nodeStack[stackDepth] = node.child0Index;\\n    stackDepth = stackDepth + 1;\\n    nodeStack[stackDepth] = node.child1Index;\\n  }\\n\\n  return fragInfo;\\n}\\n\\nfn hitTestXZPlane(ray: Ray, inverseMat: mat4x4<f32>) -> vec3<f32> {\\n  let invDir: vec3<f32> = normalize((inverseMat * vec4<f32>(ray.dir, 0.)).xyz);\\n  let normal: vec3<f32> = vec3<f32>(0., 0., 1.);\\n  let dot: f32 = dot(invDir, normal);\\n\\n  if (abs(dot) < EPS) {\\n    return vec3<f32>(MAX_RAY_LENGTH, MAX_RAY_LENGTH, MAX_RAY_LENGTH);\\n  }\\n  \\n  let invOrigin: vec3<f32> = (inverseMat * vec4<f32>(ray.origin, 1.)).xyz;\\n  let t: f32 = dot(-invOrigin, normal) / dot;\\n\\n  if (t < EPS) {\\n    return vec3<f32>(MAX_RAY_LENGTH, MAX_RAY_LENGTH, MAX_RAY_LENGTH);\\n  }\\n\\n  return vec3<f32>(invOrigin.xy + t * invDir.xy, t);\\n}\\n\\nfn hitTestLights(ray: Ray) -> vec4<f32> {\\n  let areaLight: LightInfo = global.u_lightInfos[0];\\n  var res: vec4<f32> = vec4<f32>(areaLight.color.rgb, MAX_RAY_LENGTH);\\n  // only support one area light now\\n  if (areaLight.lightType != LIGHT_TYPE_AREA) {\\n    return res;\\n  }\\n\\n  let xyt: vec3<f32> = hitTestXZPlane(ray, areaLight.worldTransformInverse);\\n\\n  var hit: bool = false;\\n  if (areaLight.areaMode == LIGHT_AREA_DISC) {\\n    hit = length(xyt.xy) < areaLight.areaSize.x;\\n  } else {\\n    hit = all(abs(xyt.xy) < areaLight.areaSize / 2.);\\n  }\\n\\n  if (hit) {\\n    res.a = xyt.z;\\n  }\\n\\n  return res;\\n}\\n\\n//require end\\n;\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/ray-tracing/sample.chunk.wgsl\\n\\nfn getDiffuseProb(hit: HitPoint) -> f32 {\\n  let lumDiffuse: f32 = max(.01, dot(hit.pbrData.diffuseColor, vec3<f32>(0.2125, 0.7154, 0.0721)));\\n  let lumSpecular: f32 = max(.01, dot(hit.pbrData.specularColor, vec3<f32>(0.2125, 0.7154, 0.0721)));\\n\\n  return lumDiffuse / (lumDiffuse + lumSpecular);\\n}\\n\\n// https://graphics.pixar.com/library/OrthonormalB/paper.pdf\\nfn orthonormalBasis(normal: vec3<f32>) -> mat3x3<f32> {\\n  // sign function return 0 if x is 0\\n  // let zsign: f32 = sign(normal.z) * 1.;\\n  var zsign: f32 = 1.;\\n  if (normal.z < 0.) {\\n    zsign = -1.;\\n  }\\n  let a: f32 = -1.0 / (zsign + normal.z);\\n  let b: f32 = normal.x * normal.y * a;\\n  let s: vec3<f32> = vec3<f32>(1.0 + zsign * normal.x * normal.x * a, zsign * b, -zsign * normal.x);\\n  let t: vec3<f32> = vec3<f32>(b, zsign + normal.y * normal.y * a, -normal.y);\\n\\n  return mat3x3<f32>(s, t, normal);\\n}\\n\\n// http://www.pbr-book.org/3ed-2018/Monte_Carlo_Integration/2D_Sampling_with_Multidimensional_Transformations.html#SamplingaUnitDisk\\nfn sampleCircle(pi: vec2<f32>) -> vec2<f32> {\\n  let p: vec2<f32> = 2.0 * pi - 1.0;\\n  let greater: bool = abs(p.x) > abs(p.y);\\n  var r: f32;\\n  var theta: f32;\\n\\n  if (greater) {\\n    r = p.x;\\n    theta = 0.25 * PI * p.y / p.x;\\n  } else {\\n    r = p.y;\\n    theta = PI * (0.5 - 0.25 * p.x / p.y);\\n  }\\n\\n  return r * vec2<f32>(cos(theta), sin(theta));\\n}\\n\\nfn fresnelSchlickWeight(cosTheta: f32) -> f32 {\\n  let w: f32 = 1.0 - cosTheta;\\n\\n  return (w * w) * (w * w) * w;\\n}\\n\\nfn fresnelSchlickTIR(cosTheta: f32, r0: f32, ni: f32) -> f32 {\\n  // moving from a more dense to a less dense medium\\n  var cos: f32 = cosTheta;\\n  if (cosTheta < 0.0) {\\n    let inv_eta: f32 = ni;\\n    let SinT2: f32 = inv_eta * inv_eta * (1.0 - cosTheta * cosTheta);\\n    if (SinT2 > 1.0) {\\n      return 1.0; // total internal reflection\\n    }\\n\\n    cos = sqrt(1. - SinT2);\\n  }\\n\\n  return mix(fresnelSchlickWeight(cos), 1.0, r0);\\n}\\n\\n// http://www.pbr-book.org/3ed-2018/Monte_Carlo_Integration/2D_Sampling_with_Multidimensional_Transformations.html#Cosine-WeightedHemisphereSampling\\nfn cosineSampleHemisphere(p: vec2<f32>) -> vec3<f32> {\\n  let h: vec2<f32> = sampleCircle(p);\\n  let z: f32 = sqrt(max(0.0, 1.0 - h.x * h.x - h.y * h.y));\\n\\n  return vec3<f32>(h, z);\\n}\\n\\nfn calcDiffuseLightDir(basis: mat3x3<f32>, sign: f32, random: vec2<f32>) -> vec3<f32> {\\n  return basis * sign * cosineSampleHemisphere(random);\\n}\\n\\n// GGX distrubtion\\nfn calcSpecularLightDir(basis: mat3x3<f32>, ray: Ray, hit: HitPoint, random: vec2<f32>) -> vec3<f32> {\\n  let phi: f32 = PI * 2. * random.x;\\n  let alpha: f32 = hit.pbrData.alphaRoughness;\\n  let cosTheta: f32 = sqrt((1.0 - random.y) / (1.0 + (alpha * alpha - 1.0) * random.y));\\n  let sinTheta: f32 = sqrt(1.0 - cosTheta * cosTheta);\\n  let halfVector: vec3<f32> = basis * hit.sign * vec3<f32>(sinTheta * cos(phi), sinTheta * sin(phi), cosTheta);\\n\\n  return reflect(ray.dir, halfVector);\\n}\\n\\nfn calcBrdfDir(ray: Ray, hit: HitPoint, isDiffuse: bool, random: vec2<f32>) -> vec3<f32> {\\n  let basis: mat3x3<f32> = orthonormalBasis(hit.normal);\\n\\n  if (isDiffuse) {\\n    return calcDiffuseLightDir(basis, hit.sign, random);\\n  }\\n\\n  return calcSpecularLightDir(basis, ray, hit, random);\\n}\\n\\nstruct BSDFDirRes {\\n  dir: vec3<f32>;\\n  isBTDF: bool;\\n};\\n\\n// dir and (0. is brdf, 1. is btdf)\\n// we suppose all glass are thick glass\\nfn calcBsdfDir(ray: Ray, hit: HitPoint, reflectProbability: f32) -> BSDFDirRes {\\n  let nAir: f32 = 1.;\\n  let nGlass: f32 = 1. / hit.glass;\\n  var ior: f32 = nGlass; // backface, nGlass / nAir\\n  var res: BSDFDirRes;\\n\\n  if (hit.sign > 0.) {\\n    ior = hit.glass; // nAir / nGlass\\n  }\\n\\n  let cosTheta: f32 = dot(hit.normal, -ray.dir);\\n  var r0: f32 = (nAir - nGlass) / (nAir + nGlass);\\n  r0 = r0 * r0;\\n  let F: f32 = fresnelSchlickTIR(cosTheta, r0, ior);\\n\\n  //@todo: if backface and not full reflection, force refraction\\n  if (F > reflectProbability) {\\n    res.dir = reflect(ray.dir, hit.normal);\\n    res.isBTDF = false;\\n  } else {\\n    res.dir = refract(ray.dir, hit.normal, ior);\\n    res.isBTDF = true;\\n  }\\n\\n  return res;\\n}\\n\\n//require end\\n;\\n//from require /Users/indeex/Downloads/webgpu-renderer-main/src/buildin/shaders/ray-tracing/lighting.chunk.wgsl\\nfn calcBrdfDirectOrSpecular(\\n  pbr: PBRData, normal: vec3<f32>,\\n  viewDir: vec3<f32>, lightDir: vec3<f32>,\\n  isDirect: bool, probDiffuse: f32\\n)-> vec3<f32> {\\n  let H: vec3<f32> = normalize(lightDir + viewDir);\\n  let NdotV: f32 = clamp(abs(dot(normal, viewDir)), 0.001, 1.0);\\n  let NdotL: f32 = clamp(abs(dot(normal, lightDir)), 0.001, 1.0);\\n  let NdotH: f32 = clamp(abs(dot(normal, H)), 0.0, 1.0);\\n  let LdotH: f32 = clamp(abs(dot(lightDir, H)), 0.0, 1.0);\\n  let VdotH: f32 = clamp(dot(viewDir, H), 0.0, 1.0);\\n  // Calculate the shading terms for the microfacet specular shading model\\n  let F: vec3<f32> = pbrSpecularReflection(pbr.reflectance0, pbr.reflectance90, VdotH);\\n  let G: f32 = pbrGeometricOcclusion(NdotL, NdotV, pbr.alphaRoughness);\\n  let D: f32 = pbrMicrofacetDistribution(pbr.alphaRoughness, NdotH);\\n\\n  let specular: vec3<f32> = F * G * D / (4.0 * NdotL * NdotV);\\n\\n  if (isDirect) {\\n    let diffuse: vec3<f32> = NdotL * 0.3183098861837907 * pbr.diffuseColor;\\n    return specular + diffuse;\\n  }\\n\\n  let specularPdf: f32 = D * NdotH / (4.0 * LdotH);\\n  return NdotL * specular / (mix(specularPdf, 0., probDiffuse));\\n}\\n\\nfn calcDirectColor(ray: Ray, hit: HitPoint, random: vec2<f32>) -> vec3<f32> {\\n  // sample area lights, get radiance or shadow\\n  let areaLight: LightInfo = global.u_lightInfos[0];\\n\\n  // only support one area light now\\n  if (areaLight.lightType != LIGHT_TYPE_AREA) {\\n    return vec3<f32>(0.);\\n  }\\n\\n  var samplePoint2D: vec2<f32>;\\n  let normal: vec3<f32> = normalize((areaLight.worldTransform * vec4<f32>(0., 0., -1., 0.)).xyz);\\n  var area: f32;\\n  if (areaLight.areaMode == LIGHT_AREA_DISC) {\\n    samplePoint2D = sampleCircle(random) * areaLight.areaSize.x;\\n    area = 2. * PI * areaLight.areaSize.x;\\n  } else {\\n    samplePoint2D = (random) * areaLight.areaSize;\\n    area = samplePoint2D.x * samplePoint2D.y;\\n    samplePoint2D = samplePoint2D * 2. - areaLight.areaSize;\\n  }\\n\\n  let samplePoint: vec4<f32> = areaLight.worldTransform * vec4<f32>(samplePoint2D.x, samplePoint2D.y, 0., 1.);\\n  var sampleDir: vec3<f32> = samplePoint.xyz - hit.position;\\n\\n  let cosine: f32 = dot(normal, sampleDir);\\n  if (cosine > 0.) {\\n    // backface\\n    return vec3<f32>(0.);\\n  }\\n\\n  let maxT: f32 = length(sampleDir);\\n  sampleDir = normalize(sampleDir);\\n  let sampleLight: Ray = genRay(hit.position + RAY_DIR_OFFSET * sampleDir + RAY_NORMAL_OFFSET * hit.normal, sampleDir);\\n  let shadowInfo: FragmentInfo = hitTestShadow(sampleLight, maxT);\\n\\n  if (shadowInfo.hit) {\\n    return vec3<f32>(0.);\\n  }\\n\\n  let pdf: f32 = maxT * maxT / (area * -cosine);\\n  let directLight: vec3<f32> = areaLight.color.rgb / pdf;\\n  let brdf = calcBrdfDirectOrSpecular(hit.pbrData, hit.normal, -ray.dir, sampleDir, true, 0.);\\n\\n  return directLight * brdf;\\n}\\n\\nfn calcDiffuseFactor(ray: Ray, hit: HitPoint, nextDir: vec3<f32>, probDiffuse: f32) -> vec3<f32> {\\n  // let diffusePdf: f32 = NdotL * 0.3183098861837907;\\n  return hit.pbrData.diffuseColor / probDiffuse;\\n}\\n\\nfn calcSpecularFactor(ray: Ray, hit: HitPoint, nextDir: vec3<f32>, probDiffuse: f32) -> vec3<f32> {\\n  return calcBrdfDirectOrSpecular(hit.pbrData, hit.normal, -ray.dir, nextDir.xyz, false, probDiffuse);\\n}\\n\\nfn calcTransmissionFactor(ray: Ray, hit: HitPoint, nextDir: vec3<f32>) -> vec3<f32> {\\n  return hit.baseColor;\\n}\\n\\nfn calcOutColor(ray: Ray, hit: HitPoint) -> vec3<f32> {\\n  // rgbd\\n  let bgColor: vec4<f32> = textureSampleLevel(u_envTexture, u_sampler, ray.dir, 0.);\\n  return bgColor.rgb / bgColor.a * global.u_envColor.rgb;\\n}\\n\\n//require end\\n;\\n\\nfn calcLight(ray: Ray, hit: HitPoint, baseUV: vec2<f32>, bounce: i32, isLast: bool, isOut: bool, debugIndex: i32) -> Light {\\n  var light: Light;\\n  let random = getRandom(baseUV, bounce);\\n\\n  if (isOut) {\\n    // rgbd\\n    light.color = calcOutColor(ray, hit);\\n    return light;\\n  }\\n\\n  var nextDir: vec3<f32>;\\n  var isBTDF: bool = false;\\n  if (hit.isGlass) {\\n    // bsdf\\n    if (isLast) {\\n      return light;\\n    }\\n    \\n    let next: BSDFDirRes = calcBsdfDir(ray, hit, random.x);\\n    nextDir = next.dir;\\n    isBTDF = next.isBTDF;\\n\\n    if (isBTDF) {\\n      light.throughEng = calcTransmissionFactor(ray, hit, nextDir.xyz);\\n    } else {\\n      light.throughEng = calcSpecularFactor(ray, hit, nextDir.xyz, 0.);\\n    }\\n  } else {\\n    // brdf\\n    light.color = calcDirectColor(ray, hit, random.zw);\\n\\n    if (isLast) {\\n      return light;\\n    }\\n\\n    let probDiffuse: f32 = getDiffuseProb(hit);\\n    let isDiffuse: bool = random.z < probDiffuse;\\n    nextDir = calcBrdfDir(ray, hit, isDiffuse, random.xy);\\n\\n    if (isDiffuse) {\\n      light.throughEng = calcDiffuseFactor(ray, hit, nextDir.xyz, probDiffuse);\\n    } else {\\n      light.throughEng = calcSpecularFactor(ray, hit, nextDir.xyz, probDiffuse);\\n    }\\n  }\\n\\n  // avoid self intersection\\n  if (isBTDF) {\\n    // transmission\\n    light.next = genRay(hit.position + light.next.dir * RAY_DIR_OFFSET - RAY_NORMAL_OFFSET * hit.normal, nextDir.xyz);\\n  } else {\\n    light.next = genRay(hit.position + light.next.dir * RAY_DIR_OFFSET + RAY_NORMAL_OFFSET * hit.normal, nextDir.xyz);\\n  }\\n\\n  return light;\\n}\\n\\nfn traceLight(startRay: Ray, gBInfo: HitPoint, baseUV: vec2<f32>, debugIndex: i32) -> vec3<f32> {\\n  var light: Light = calcLight(startRay, gBInfo, baseUV, 0, false, false, debugIndex);\\n  var lightColor: vec3<f32> = light.color;\\n  var throughEng: vec3<f32> = light.throughEng;\\n  var hit: HitPoint;\\n  var ray: Ray = light.next;\\n  var lightHited: vec4<f32>;\\n  var bounce: i32 = 0;\\n\\n  loop {\\n    let preIsGlass = hit.isGlass;\\n    lightHited = hitTestLights(ray);\\n    hit = hitTest(ray);\\n    let isHitLight: bool = lightHited.a <= hit.hited;\\n    let isOut: bool = !hit.hit || isHitLight;\\n    // if hit none-glass material, finish tracing\\n    let isLast: bool = !hit.isGlass;\\n\\n    if (preIsGlass && isHitLight) {\\n      light.color = lightHited.rgb;\\n    } else {\\n      light = calcLight(ray, hit, baseUV, bounce, isLast, isOut, debugIndex);\\n      ray = light.next;\\n    }\\n\\n    lightColor = lightColor + light.color * throughEng;\\n    throughEng = throughEng * light.throughEng;\\n    bounce = bounce + 1;\\n\\n    if (max(throughEng.x, max(throughEng.y, throughEng.z)) < 0.01 || isOut) {\\n      break;\\n    }\\n  }\\n\\n  // var hited: f32 = 0.;\\n  // if (hit.hit) {\\n  //   hited = 1.;\\n  // }\\n  // ray = startRay;\\n  // hit = gBInfo;\\n  // light = calcLight(ray, hit, baseUV, 0, false, false, debugIndex);\\n  // u_debugInfo.rays[debugIndex].preOrigin = vec4<f32>(ray.origin, hit.sign);\\n  // u_debugInfo.rays[debugIndex].preDir = vec4<f32>(ray.dir, f32(hit.matType));\\n  // ray = light.next;\\n  // hit = hitTest(ray);\\n  // light = calcLight(ray, hit, baseUV, 1, false, false, debugIndex);\\n  // u_debugInfo.rays[debugIndex].origin = vec4<f32>(ray.origin, hit.sign);\\n  // u_debugInfo.rays[debugIndex].dir = vec4<f32>(ray.dir, f32(hit.matType));\\n  // u_debugInfo.rays[debugIndex].normal = vec4<f32>(hit.normal, hit.glass);\\n  // ray = light.next;\\n  // hit = hitTest(ray);\\n  // light = calcLight(ray, hit, baseUV, 2, false, false, debugIndex);\\n  // u_debugInfo.rays[debugIndex].nextOrigin = vec4<f32>(ray.origin, hit.sign);\\n  // u_debugInfo.rays[debugIndex].nextDir = vec4<f32>(ray.dir, f32(bounce));\\n\\n  return lightColor;\\n}\\n\\n[[stage(compute), workgroup_size(16, 16, 1)]]\\nfn main(\\n  [[builtin(workgroup_id)]] workGroupID : vec3<u32>,\\n  [[builtin(local_invocation_id)]] localInvocationID : vec3<u32>\\n) {\\n  let screenSize: vec2<i32> = textureDimensions(u_gbPositionMetalOrSpec, 0);\\n  let groupOffset: vec2<i32> = vec2<i32>(workGroupID.xy) * 16;\\n  let baseIndex: vec2<i32> = groupOffset + vec2<i32>(localInvocationID.xy);\\n  let baseUV: vec2<f32> = vec2<f32>(baseIndex) / vec2<f32>(screenSize);\\n  let gBInfo: HitPoint = getGBInfo(baseIndex);\\n  let debugIndex: i32 = baseIndex.x + baseIndex.y * screenSize.x;\\n\\n  if (gBInfo.isLight) {\\n    textureStore(u_output, baseIndex, vec4<f32>(gBInfo.baseColor, 1.));\\n    return;\\n  }\\n\\n  if (!gBInfo.hit) {\\n    let t: vec4<f32> = global.u_skyVP * vec4<f32>(baseUV.x * 2. - 1., 1. - baseUV.y * 2., 1., 1.);\\n    let cubeUV: vec3<f32> = normalize(t.xyz / t.w);\\n    let bgColor: vec4<f32> = textureSampleLevel(u_envTexture, u_sampler, cubeUV, 0.);\\n    // rgbd\\n    textureStore(u_output, baseIndex, vec4<f32>(bgColor.rgb / bgColor.a * global.u_envColor.rgb, 1.));\\n    return;\\n  }\\n\\n  let worldRay: Ray = genWorldRayByGBuffer(baseUV, gBInfo);\\n  let light: vec3<f32> = traceLight(worldRay, gBInfo, baseUV, debugIndex);\\n  textureStore(u_output, baseIndex, vec4<f32>(light, 1.));\\n}\\n\"","'use strict'\n\nmodule.exports = ansiHTML\n\n// Reference to https://github.com/sindresorhus/ansi-regex\nvar _regANSI = /(?:(?:\\u001b\\[)|\\u009b)(?:(?:[0-9]{1,3})?(?:(?:;[0-9]{0,3})*)?[A-M|f-m])|\\u001b[A-M]/\n\nvar _defColors = {\n  reset: ['fff', '000'], // [FOREGROUD_COLOR, BACKGROUND_COLOR]\n  black: '000',\n  red: 'ff0000',\n  green: '209805',\n  yellow: 'e8bf03',\n  blue: '0000ff',\n  magenta: 'ff00ff',\n  cyan: '00ffee',\n  lightgrey: 'f0f0f0',\n  darkgrey: '888'\n}\nvar _styles = {\n  30: 'black',\n  31: 'red',\n  32: 'green',\n  33: 'yellow',\n  34: 'blue',\n  35: 'magenta',\n  36: 'cyan',\n  37: 'lightgrey'\n}\nvar _openTags = {\n  '1': 'font-weight:bold', // bold\n  '2': 'opacity:0.5', // dim\n  '3': '<i>', // italic\n  '4': '<u>', // underscore\n  '8': 'display:none', // hidden\n  '9': '<del>' // delete\n}\nvar _closeTags = {\n  '23': '</i>', // reset italic\n  '24': '</u>', // reset underscore\n  '29': '</del>' // reset delete\n}\n\n;[0, 21, 22, 27, 28, 39, 49].forEach(function (n) {\n  _closeTags[n] = '</span>'\n})\n\n/**\n * Converts text with ANSI color codes to HTML markup.\n * @param {String} text\n * @returns {*}\n */\nfunction ansiHTML (text) {\n  // Returns the text if the string has no ANSI escape code.\n  if (!_regANSI.test(text)) {\n    return text\n  }\n\n  // Cache opened sequence.\n  var ansiCodes = []\n  // Replace with markup.\n  var ret = text.replace(/\\033\\[(\\d+)m/g, function (match, seq) {\n    var ot = _openTags[seq]\n    if (ot) {\n      // If current sequence has been opened, close it.\n      if (!!~ansiCodes.indexOf(seq)) { // eslint-disable-line no-extra-boolean-cast\n        ansiCodes.pop()\n        return '</span>'\n      }\n      // Open tag.\n      ansiCodes.push(seq)\n      return ot[0] === '<' ? ot : '<span style=\"' + ot + ';\">'\n    }\n\n    var ct = _closeTags[seq]\n    if (ct) {\n      // Pop sequence\n      ansiCodes.pop()\n      return ct\n    }\n    return ''\n  })\n\n  // Make sure tags are closed.\n  var l = ansiCodes.length\n  ;(l > 0) && (ret += Array(l + 1).join('</span>'))\n\n  return ret\n}\n\n/**\n * Customize colors.\n * @param {Object} colors reference to _defColors\n */\nansiHTML.setColors = function (colors) {\n  if (typeof colors !== 'object') {\n    throw new Error('`colors` parameter must be an Object.')\n  }\n\n  var _finalColors = {}\n  for (var key in _defColors) {\n    var hex = colors.hasOwnProperty(key) ? colors[key] : null\n    if (!hex) {\n      _finalColors[key] = _defColors[key]\n      continue\n    }\n    if ('reset' === key) {\n      if (typeof hex === 'string') {\n        hex = [hex]\n      }\n      if (!Array.isArray(hex) || hex.length === 0 || hex.some(function (h) {\n        return typeof h !== 'string'\n      })) {\n        throw new Error('The value of `' + key + '` property must be an Array and each item could only be a hex string, e.g.: FF0000')\n      }\n      var defHexColor = _defColors[key]\n      if (!hex[0]) {\n        hex[0] = defHexColor[0]\n      }\n      if (hex.length === 1 || !hex[1]) {\n        hex = [hex[0]]\n        hex.push(defHexColor[1])\n      }\n\n      hex = hex.slice(0, 2)\n    } else if (typeof hex !== 'string') {\n      throw new Error('The value of `' + key + '` property must be a hex string, e.g.: FF0000')\n    }\n    _finalColors[key] = hex\n  }\n  _setTags(_finalColors)\n}\n\n/**\n * Reset colors.\n */\nansiHTML.reset = function () {\n  _setTags(_defColors)\n}\n\n/**\n * Expose tags, including open and close.\n * @type {Object}\n */\nansiHTML.tags = {}\n\nif (Object.defineProperty) {\n  Object.defineProperty(ansiHTML.tags, 'open', {\n    get: function () { return _openTags }\n  })\n  Object.defineProperty(ansiHTML.tags, 'close', {\n    get: function () { return _closeTags }\n  })\n} else {\n  ansiHTML.tags.open = _openTags\n  ansiHTML.tags.close = _closeTags\n}\n\nfunction _setTags (colors) {\n  // reset all\n  _openTags['0'] = 'font-weight:normal;opacity:1;color:#' + colors.reset[0] + ';background:#' + colors.reset[1]\n  // inverse\n  _openTags['7'] = 'color:#' + colors.reset[1] + ';background:#' + colors.reset[0]\n  // dark grey\n  _openTags['90'] = 'color:#' + colors.darkgrey\n\n  for (var code in _styles) {\n    var color = _styles[code]\n    var oriColor = colors[color] || '000'\n    _openTags[code] = 'color:#' + oriColor\n    code = parseInt(code)\n    _openTags[(code + 10).toString()] = 'background:#' + oriColor\n  }\n}\n\nansiHTML.reset()\n","'use strict';\nmodule.exports = function () {\n\treturn /[\\u001b\\u009b][[()#;?]*(?:[0-9]{1,4}(?:;[0-9]{0,4})*)?[0-9A-PRZcf-nqry=><]/g;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar R = typeof Reflect === 'object' ? Reflect : null\nvar ReflectApply = R && typeof R.apply === 'function'\n  ? R.apply\n  : function ReflectApply(target, receiver, args) {\n    return Function.prototype.apply.call(target, receiver, args);\n  }\n\nvar ReflectOwnKeys\nif (R && typeof R.ownKeys === 'function') {\n  ReflectOwnKeys = R.ownKeys\n} else if (Object.getOwnPropertySymbols) {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target)\n      .concat(Object.getOwnPropertySymbols(target));\n  };\n} else {\n  ReflectOwnKeys = function ReflectOwnKeys(target) {\n    return Object.getOwnPropertyNames(target);\n  };\n}\n\nfunction ProcessEmitWarning(warning) {\n  if (console && console.warn) console.warn(warning);\n}\n\nvar NumberIsNaN = Number.isNaN || function NumberIsNaN(value) {\n  return value !== value;\n}\n\nfunction EventEmitter() {\n  EventEmitter.init.call(this);\n}\nmodule.exports = EventEmitter;\nmodule.exports.once = once;\n\n// Backwards-compat with node 0.10.x\nEventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._eventsCount = 0;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nvar defaultMaxListeners = 10;\n\nfunction checkListener(listener) {\n  if (typeof listener !== 'function') {\n    throw new TypeError('The \"listener\" argument must be of type Function. Received type ' + typeof listener);\n  }\n}\n\nObject.defineProperty(EventEmitter, 'defaultMaxListeners', {\n  enumerable: true,\n  get: function() {\n    return defaultMaxListeners;\n  },\n  set: function(arg) {\n    if (typeof arg !== 'number' || arg < 0 || NumberIsNaN(arg)) {\n      throw new RangeError('The value of \"defaultMaxListeners\" is out of range. It must be a non-negative number. Received ' + arg + '.');\n    }\n    defaultMaxListeners = arg;\n  }\n});\n\nEventEmitter.init = function() {\n\n  if (this._events === undefined ||\n      this._events === Object.getPrototypeOf(this)._events) {\n    this._events = Object.create(null);\n    this._eventsCount = 0;\n  }\n\n  this._maxListeners = this._maxListeners || undefined;\n};\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function setMaxListeners(n) {\n  if (typeof n !== 'number' || n < 0 || NumberIsNaN(n)) {\n    throw new RangeError('The value of \"n\" is out of range. It must be a non-negative number. Received ' + n + '.');\n  }\n  this._maxListeners = n;\n  return this;\n};\n\nfunction _getMaxListeners(that) {\n  if (that._maxListeners === undefined)\n    return EventEmitter.defaultMaxListeners;\n  return that._maxListeners;\n}\n\nEventEmitter.prototype.getMaxListeners = function getMaxListeners() {\n  return _getMaxListeners(this);\n};\n\nEventEmitter.prototype.emit = function emit(type) {\n  var args = [];\n  for (var i = 1; i < arguments.length; i++) args.push(arguments[i]);\n  var doError = (type === 'error');\n\n  var events = this._events;\n  if (events !== undefined)\n    doError = (doError && events.error === undefined);\n  else if (!doError)\n    return false;\n\n  // If there is no 'error' event listener then throw.\n  if (doError) {\n    var er;\n    if (args.length > 0)\n      er = args[0];\n    if (er instanceof Error) {\n      // Note: The comments on the `throw` lines are intentional, they show\n      // up in Node's output if this results in an unhandled exception.\n      throw er; // Unhandled 'error' event\n    }\n    // At least give some kind of context to the user\n    var err = new Error('Unhandled error.' + (er ? ' (' + er.message + ')' : ''));\n    err.context = er;\n    throw err; // Unhandled 'error' event\n  }\n\n  var handler = events[type];\n\n  if (handler === undefined)\n    return false;\n\n  if (typeof handler === 'function') {\n    ReflectApply(handler, this, args);\n  } else {\n    var len = handler.length;\n    var listeners = arrayClone(handler, len);\n    for (var i = 0; i < len; ++i)\n      ReflectApply(listeners[i], this, args);\n  }\n\n  return true;\n};\n\nfunction _addListener(target, type, listener, prepend) {\n  var m;\n  var events;\n  var existing;\n\n  checkListener(listener);\n\n  events = target._events;\n  if (events === undefined) {\n    events = target._events = Object.create(null);\n    target._eventsCount = 0;\n  } else {\n    // To avoid recursion in the case that type === \"newListener\"! Before\n    // adding it to the listeners, first emit \"newListener\".\n    if (events.newListener !== undefined) {\n      target.emit('newListener', type,\n                  listener.listener ? listener.listener : listener);\n\n      // Re-assign `events` because a newListener handler could have caused the\n      // this._events to be assigned to a new object\n      events = target._events;\n    }\n    existing = events[type];\n  }\n\n  if (existing === undefined) {\n    // Optimize the case of one listener. Don't need the extra array object.\n    existing = events[type] = listener;\n    ++target._eventsCount;\n  } else {\n    if (typeof existing === 'function') {\n      // Adding the second element, need to change to array.\n      existing = events[type] =\n        prepend ? [listener, existing] : [existing, listener];\n      // If we've already got an array, just append.\n    } else if (prepend) {\n      existing.unshift(listener);\n    } else {\n      existing.push(listener);\n    }\n\n    // Check for listener leak\n    m = _getMaxListeners(target);\n    if (m > 0 && existing.length > m && !existing.warned) {\n      existing.warned = true;\n      // No error code for this since it is a Warning\n      // eslint-disable-next-line no-restricted-syntax\n      var w = new Error('Possible EventEmitter memory leak detected. ' +\n                          existing.length + ' ' + String(type) + ' listeners ' +\n                          'added. Use emitter.setMaxListeners() to ' +\n                          'increase limit');\n      w.name = 'MaxListenersExceededWarning';\n      w.emitter = target;\n      w.type = type;\n      w.count = existing.length;\n      ProcessEmitWarning(w);\n    }\n  }\n\n  return target;\n}\n\nEventEmitter.prototype.addListener = function addListener(type, listener) {\n  return _addListener(this, type, listener, false);\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.prependListener =\n    function prependListener(type, listener) {\n      return _addListener(this, type, listener, true);\n    };\n\nfunction onceWrapper() {\n  if (!this.fired) {\n    this.target.removeListener(this.type, this.wrapFn);\n    this.fired = true;\n    if (arguments.length === 0)\n      return this.listener.call(this.target);\n    return this.listener.apply(this.target, arguments);\n  }\n}\n\nfunction _onceWrap(target, type, listener) {\n  var state = { fired: false, wrapFn: undefined, target: target, type: type, listener: listener };\n  var wrapped = onceWrapper.bind(state);\n  wrapped.listener = listener;\n  state.wrapFn = wrapped;\n  return wrapped;\n}\n\nEventEmitter.prototype.once = function once(type, listener) {\n  checkListener(listener);\n  this.on(type, _onceWrap(this, type, listener));\n  return this;\n};\n\nEventEmitter.prototype.prependOnceListener =\n    function prependOnceListener(type, listener) {\n      checkListener(listener);\n      this.prependListener(type, _onceWrap(this, type, listener));\n      return this;\n    };\n\n// Emits a 'removeListener' event if and only if the listener was removed.\nEventEmitter.prototype.removeListener =\n    function removeListener(type, listener) {\n      var list, events, position, i, originalListener;\n\n      checkListener(listener);\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      list = events[type];\n      if (list === undefined)\n        return this;\n\n      if (list === listener || list.listener === listener) {\n        if (--this._eventsCount === 0)\n          this._events = Object.create(null);\n        else {\n          delete events[type];\n          if (events.removeListener)\n            this.emit('removeListener', type, list.listener || listener);\n        }\n      } else if (typeof list !== 'function') {\n        position = -1;\n\n        for (i = list.length - 1; i >= 0; i--) {\n          if (list[i] === listener || list[i].listener === listener) {\n            originalListener = list[i].listener;\n            position = i;\n            break;\n          }\n        }\n\n        if (position < 0)\n          return this;\n\n        if (position === 0)\n          list.shift();\n        else {\n          spliceOne(list, position);\n        }\n\n        if (list.length === 1)\n          events[type] = list[0];\n\n        if (events.removeListener !== undefined)\n          this.emit('removeListener', type, originalListener || listener);\n      }\n\n      return this;\n    };\n\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\n\nEventEmitter.prototype.removeAllListeners =\n    function removeAllListeners(type) {\n      var listeners, events, i;\n\n      events = this._events;\n      if (events === undefined)\n        return this;\n\n      // not listening for removeListener, no need to emit\n      if (events.removeListener === undefined) {\n        if (arguments.length === 0) {\n          this._events = Object.create(null);\n          this._eventsCount = 0;\n        } else if (events[type] !== undefined) {\n          if (--this._eventsCount === 0)\n            this._events = Object.create(null);\n          else\n            delete events[type];\n        }\n        return this;\n      }\n\n      // emit removeListener for all listeners on all events\n      if (arguments.length === 0) {\n        var keys = Object.keys(events);\n        var key;\n        for (i = 0; i < keys.length; ++i) {\n          key = keys[i];\n          if (key === 'removeListener') continue;\n          this.removeAllListeners(key);\n        }\n        this.removeAllListeners('removeListener');\n        this._events = Object.create(null);\n        this._eventsCount = 0;\n        return this;\n      }\n\n      listeners = events[type];\n\n      if (typeof listeners === 'function') {\n        this.removeListener(type, listeners);\n      } else if (listeners !== undefined) {\n        // LIFO order\n        for (i = listeners.length - 1; i >= 0; i--) {\n          this.removeListener(type, listeners[i]);\n        }\n      }\n\n      return this;\n    };\n\nfunction _listeners(target, type, unwrap) {\n  var events = target._events;\n\n  if (events === undefined)\n    return [];\n\n  var evlistener = events[type];\n  if (evlistener === undefined)\n    return [];\n\n  if (typeof evlistener === 'function')\n    return unwrap ? [evlistener.listener || evlistener] : [evlistener];\n\n  return unwrap ?\n    unwrapListeners(evlistener) : arrayClone(evlistener, evlistener.length);\n}\n\nEventEmitter.prototype.listeners = function listeners(type) {\n  return _listeners(this, type, true);\n};\n\nEventEmitter.prototype.rawListeners = function rawListeners(type) {\n  return _listeners(this, type, false);\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  if (typeof emitter.listenerCount === 'function') {\n    return emitter.listenerCount(type);\n  } else {\n    return listenerCount.call(emitter, type);\n  }\n};\n\nEventEmitter.prototype.listenerCount = listenerCount;\nfunction listenerCount(type) {\n  var events = this._events;\n\n  if (events !== undefined) {\n    var evlistener = events[type];\n\n    if (typeof evlistener === 'function') {\n      return 1;\n    } else if (evlistener !== undefined) {\n      return evlistener.length;\n    }\n  }\n\n  return 0;\n}\n\nEventEmitter.prototype.eventNames = function eventNames() {\n  return this._eventsCount > 0 ? ReflectOwnKeys(this._events) : [];\n};\n\nfunction arrayClone(arr, n) {\n  var copy = new Array(n);\n  for (var i = 0; i < n; ++i)\n    copy[i] = arr[i];\n  return copy;\n}\n\nfunction spliceOne(list, index) {\n  for (; index + 1 < list.length; index++)\n    list[index] = list[index + 1];\n  list.pop();\n}\n\nfunction unwrapListeners(arr) {\n  var ret = new Array(arr.length);\n  for (var i = 0; i < ret.length; ++i) {\n    ret[i] = arr[i].listener || arr[i];\n  }\n  return ret;\n}\n\nfunction once(emitter, name) {\n  return new Promise(function (resolve, reject) {\n    function errorListener(err) {\n      emitter.removeListener(name, resolver);\n      reject(err);\n    }\n\n    function resolver() {\n      if (typeof emitter.removeListener === 'function') {\n        emitter.removeListener('error', errorListener);\n      }\n      resolve([].slice.call(arguments));\n    };\n\n    eventTargetAgnosticAddListener(emitter, name, resolver, { once: true });\n    if (name !== 'error') {\n      addErrorHandlerIfEventEmitter(emitter, errorListener, { once: true });\n    }\n  });\n}\n\nfunction addErrorHandlerIfEventEmitter(emitter, handler, flags) {\n  if (typeof emitter.on === 'function') {\n    eventTargetAgnosticAddListener(emitter, 'error', handler, flags);\n  }\n}\n\nfunction eventTargetAgnosticAddListener(emitter, name, listener, flags) {\n  if (typeof emitter.on === 'function') {\n    if (flags.once) {\n      emitter.once(name, listener);\n    } else {\n      emitter.on(name, listener);\n    }\n  } else if (typeof emitter.addEventListener === 'function') {\n    // EventTarget does not have `error` event semantics like Node\n    // EventEmitters, we do not listen for `error` events here.\n    emitter.addEventListener(name, function wrapListener(arg) {\n      // IE does not have builtin `{ once: true }` support so we\n      // have to do it manually.\n      if (flags.once) {\n        emitter.removeEventListener(name, wrapListener);\n      }\n      listener(arg);\n    });\n  } else {\n    throw new TypeError('The \"emitter\" argument must be of type EventEmitter. Received type ' + typeof emitter);\n  }\n}\n","/**\n * Common utilities\n * @module glMatrix\n */\n// Configuration Constants\nexport var EPSILON = 0.000001;\nexport var ARRAY_TYPE = typeof Float32Array !== 'undefined' ? Float32Array : Array;\nexport var RANDOM = Math.random;\n/**\n * Sets the type of array used when creating new vectors and matrices\n *\n * @param {Float32ArrayConstructor | ArrayConstructor} type Array type, such as Float32Array or Array\n */\n\nexport function setMatrixArrayType(type) {\n  ARRAY_TYPE = type;\n}\nvar degree = Math.PI / 180;\n/**\n * Convert Degree To Radian\n *\n * @param {Number} a Angle in Degrees\n */\n\nexport function toRadian(a) {\n  return a * degree;\n}\n/**\n * Tests whether or not the arguments have approximately the same value, within an absolute\n * or relative tolerance of glMatrix.EPSILON (an absolute tolerance is used for values less\n * than or equal to 1.0, and a relative tolerance is used for larger values)\n *\n * @param {Number} a The first number to test.\n * @param {Number} b The second number to test.\n * @returns {Boolean} True if the numbers are approximately equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  return Math.abs(a - b) <= EPSILON * Math.max(1.0, Math.abs(a), Math.abs(b));\n}\nif (!Math.hypot) Math.hypot = function () {\n  var y = 0,\n      i = arguments.length;\n\n  while (i--) {\n    y += arguments[i] * arguments[i];\n  }\n\n  return Math.sqrt(y);\n};","import * as glMatrix from \"./common.js\";\nimport * as mat2 from \"./mat2.js\";\nimport * as mat2d from \"./mat2d.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as mat4 from \"./mat4.js\";\nimport * as quat from \"./quat.js\";\nimport * as quat2 from \"./quat2.js\";\nimport * as vec2 from \"./vec2.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\nexport { glMatrix, mat2, mat2d, mat3, mat4, quat, quat2, vec2, vec3, vec4 };","import * as glMatrix from \"./common.js\";\n/**\n * 2x2 Matrix\n * @module mat2\n */\n\n/**\n * Creates a new identity mat2\n *\n * @returns {mat2} a new 2x2 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\n * Creates a new mat2 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat2} a matrix to clone\n * @returns {mat2} a new 2x2 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Copy the values from one mat2 to another\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set a mat2 to the identity matrix\n *\n * @param {mat2} out the receiving matrix\n * @returns {mat2} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Create a new mat2 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out A new 2x2 matrix\n */\n\nexport function fromValues(m00, m01, m10, m11) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\n * Set the components of a mat2 to the given values\n *\n * @param {mat2} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m10 Component in column 1, row 0 position (index 2)\n * @param {Number} m11 Component in column 1, row 1 position (index 3)\n * @returns {mat2} out\n */\n\nexport function set(out, m00, m01, m10, m11) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m10;\n  out[3] = m11;\n  return out;\n}\n/**\n * Transpose the values of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache\n  // some values\n  if (out === a) {\n    var a1 = a[1];\n    out[1] = a[2];\n    out[2] = a1;\n  } else {\n    out[0] = a[0];\n    out[1] = a[2];\n    out[2] = a[1];\n    out[3] = a[3];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3]; // Calculate the determinant\n\n  var det = a0 * a3 - a2 * a1;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = a3 * det;\n  out[1] = -a1 * det;\n  out[2] = -a2 * det;\n  out[3] = a0 * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the source matrix\n * @returns {mat2} out\n */\n\nexport function adjoint(out, a) {\n  // Caching this value is nessecary if out == a\n  var a0 = a[0];\n  out[0] = a[3];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a0;\n  return out;\n}\n/**\n * Calculates the determinant of a mat2\n *\n * @param {ReadonlyMat2} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[2] * a[1];\n}\n/**\n * Multiplies two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @returns {mat2} out\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  return out;\n}\n/**\n * Rotates a mat2 by the given angle\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  return out;\n}\n/**\n * Scales the mat2 by the dimensions in the given vec2\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat2} out\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.rotate(dest, dest, rad);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2.identity(dest);\n *     mat2.scale(dest, dest, vec);\n *\n * @param {mat2} out mat2 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat2} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  return out;\n}\n/**\n * Returns a string representation of a mat2\n *\n * @param {ReadonlyMat2} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat2\n *\n * @param {ReadonlyMat2} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3]);\n}\n/**\n * Returns L, D and U matrices (Lower triangular, Diagonal and Upper triangular) by factorizing the input matrix\n * @param {ReadonlyMat2} L the lower triangular matrix\n * @param {ReadonlyMat2} D the diagonal matrix\n * @param {ReadonlyMat2} U the upper triangular matrix\n * @param {ReadonlyMat2} a the input matrix to factorize\n */\n\nexport function LDU(L, D, U, a) {\n  L[2] = a[2] / a[0];\n  U[0] = a[0];\n  U[1] = a[1];\n  U[3] = a[3] - L[2] * U[1];\n  return [L, D, U];\n}\n/**\n * Adds two mat2's\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @returns {mat2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @returns {mat2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat2} a The first matrix.\n * @param {ReadonlyMat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat2} a The first matrix.\n * @param {ReadonlyMat2} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2} out the receiving matrix\n * @param {ReadonlyMat2} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two mat2's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2} out the receiving vector\n * @param {ReadonlyMat2} a the first operand\n * @param {ReadonlyMat2} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Alias for {@link mat2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat2.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 2x3 Matrix\n * @module mat2d\n * @description\n * A mat2d contains six elements defined as:\n * <pre>\n * [a, b,\n *  c, d,\n *  tx, ty]\n * </pre>\n * This is a short form for the 3x3 matrix:\n * <pre>\n * [a, b, 0,\n *  c, d, 0,\n *  tx, ty, 1]\n * </pre>\n * The last column is ignored so the array is shorter and operations are faster.\n */\n\n/**\n * Creates a new identity mat2d\n *\n * @returns {mat2d} a new 2x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(6);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[4] = 0;\n    out[5] = 0;\n  }\n\n  out[0] = 1;\n  out[3] = 1;\n  return out;\n}\n/**\n * Creates a new mat2d initialized with values from an existing matrix\n *\n * @param {ReadonlyMat2d} a matrix to clone\n * @returns {mat2d} a new 2x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\n * Copy the values from one mat2d to another\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the source matrix\n * @returns {mat2d} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  return out;\n}\n/**\n * Set a mat2d to the identity matrix\n *\n * @param {mat2d} out the receiving matrix\n * @returns {mat2d} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * Create a new mat2d with the given values\n *\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} A new mat2d\n */\n\nexport function fromValues(a, b, c, d, tx, ty) {\n  var out = new glMatrix.ARRAY_TYPE(6);\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\n * Set the components of a mat2d to the given values\n *\n * @param {mat2d} out the receiving matrix\n * @param {Number} a Component A (index 0)\n * @param {Number} b Component B (index 1)\n * @param {Number} c Component C (index 2)\n * @param {Number} d Component D (index 3)\n * @param {Number} tx Component TX (index 4)\n * @param {Number} ty Component TY (index 5)\n * @returns {mat2d} out\n */\n\nexport function set(out, a, b, c, d, tx, ty) {\n  out[0] = a;\n  out[1] = b;\n  out[2] = c;\n  out[3] = d;\n  out[4] = tx;\n  out[5] = ty;\n  return out;\n}\n/**\n * Inverts a mat2d\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the source matrix\n * @returns {mat2d} out\n */\n\nexport function invert(out, a) {\n  var aa = a[0],\n      ab = a[1],\n      ac = a[2],\n      ad = a[3];\n  var atx = a[4],\n      aty = a[5];\n  var det = aa * ad - ab * ac;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = ad * det;\n  out[1] = -ab * det;\n  out[2] = -ac * det;\n  out[3] = aa * det;\n  out[4] = (ac * aty - ad * atx) * det;\n  out[5] = (ab * atx - aa * aty) * det;\n  return out;\n}\n/**\n * Calculates the determinant of a mat2d\n *\n * @param {ReadonlyMat2d} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  return a[0] * a[3] - a[1] * a[2];\n}\n/**\n * Multiplies two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @returns {mat2d} out\n */\n\nexport function multiply(out, a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  out[0] = a0 * b0 + a2 * b1;\n  out[1] = a1 * b0 + a3 * b1;\n  out[2] = a0 * b2 + a2 * b3;\n  out[3] = a1 * b2 + a3 * b3;\n  out[4] = a0 * b4 + a2 * b5 + a4;\n  out[5] = a1 * b4 + a3 * b5 + a5;\n  return out;\n}\n/**\n * Rotates a mat2d by the given angle\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\n\nexport function rotate(out, a, rad) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  out[0] = a0 * c + a2 * s;\n  out[1] = a1 * c + a3 * s;\n  out[2] = a0 * -s + a2 * c;\n  out[3] = a1 * -s + a3 * c;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\n * Scales the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to translate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat2d} out\n **/\n\nexport function scale(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0 * v0;\n  out[1] = a1 * v0;\n  out[2] = a2 * v1;\n  out[3] = a3 * v1;\n  out[4] = a4;\n  out[5] = a5;\n  return out;\n}\n/**\n * Translates the mat2d by the dimensions in the given vec2\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to translate\n * @param {ReadonlyVec2} v the vec2 to translate the matrix by\n * @returns {mat2d} out\n **/\n\nexport function translate(out, a, v) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var v0 = v[0],\n      v1 = v[1];\n  out[0] = a0;\n  out[1] = a1;\n  out[2] = a2;\n  out[3] = a3;\n  out[4] = a0 * v0 + a2 * v1 + a4;\n  out[5] = a1 * v0 + a3 * v1 + a5;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.rotate(dest, dest, rad);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat2d} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = -s;\n  out[3] = c;\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.scale(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat2d} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = v[1];\n  out[4] = 0;\n  out[5] = 0;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat2d.identity(dest);\n *     mat2d.translate(dest, dest, vec);\n *\n * @param {mat2d} out mat2d receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat2d} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = v[0];\n  out[5] = v[1];\n  return out;\n}\n/**\n * Returns a string representation of a mat2d\n *\n * @param {ReadonlyMat2d} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat2d(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat2d\n *\n * @param {ReadonlyMat2d} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], 1);\n}\n/**\n * Adds two mat2d's\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @returns {mat2d} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @returns {mat2d} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat2d} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat2d} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  return out;\n}\n/**\n * Adds two mat2d's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat2d} out the receiving vector\n * @param {ReadonlyMat2d} a the first operand\n * @param {ReadonlyMat2d} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat2d} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat2d} a The first matrix.\n * @param {ReadonlyMat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat2d} a The first matrix.\n * @param {ReadonlyMat2d} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5));\n}\n/**\n * Alias for {@link mat2d.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat2d.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 3x3 Matrix\n * @module mat3\n */\n\n/**\n * Creates a new identity mat3\n *\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(9);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[5] = 0;\n    out[6] = 0;\n    out[7] = 0;\n  }\n\n  out[0] = 1;\n  out[4] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the upper-left 3x3 values into the given mat3.\n *\n * @param {mat3} out the receiving 3x3 matrix\n * @param {ReadonlyMat4} a   the source 4x4 matrix\n * @returns {mat3} out\n */\n\nexport function fromMat4(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[4];\n  out[4] = a[5];\n  out[5] = a[6];\n  out[6] = a[8];\n  out[7] = a[9];\n  out[8] = a[10];\n  return out;\n}\n/**\n * Creates a new mat3 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat3} a matrix to clone\n * @returns {mat3} a new 3x3 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Copy the values from one mat3 to another\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Create a new mat3 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} A new mat3\n */\n\nexport function fromValues(m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  var out = new glMatrix.ARRAY_TYPE(9);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set the components of a mat3 to the given values\n *\n * @param {mat3} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m10 Component in column 1, row 0 position (index 3)\n * @param {Number} m11 Component in column 1, row 1 position (index 4)\n * @param {Number} m12 Component in column 1, row 2 position (index 5)\n * @param {Number} m20 Component in column 2, row 0 position (index 6)\n * @param {Number} m21 Component in column 2, row 1 position (index 7)\n * @param {Number} m22 Component in column 2, row 2 position (index 8)\n * @returns {mat3} out\n */\n\nexport function set(out, m00, m01, m02, m10, m11, m12, m20, m21, m22) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m10;\n  out[4] = m11;\n  out[5] = m12;\n  out[6] = m20;\n  out[7] = m21;\n  out[8] = m22;\n  return out;\n}\n/**\n * Set a mat3 to the identity matrix\n *\n * @param {mat3} out the receiving matrix\n * @returns {mat3} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a12 = a[5];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a01;\n    out[5] = a[7];\n    out[6] = a02;\n    out[7] = a12;\n  } else {\n    out[0] = a[0];\n    out[1] = a[3];\n    out[2] = a[6];\n    out[3] = a[1];\n    out[4] = a[4];\n    out[5] = a[7];\n    out[6] = a[2];\n    out[7] = a[5];\n    out[8] = a[8];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b01 = a22 * a11 - a12 * a21;\n  var b11 = -a22 * a10 + a12 * a20;\n  var b21 = a21 * a10 - a11 * a20; // Calculate the determinant\n\n  var det = a00 * b01 + a01 * b11 + a02 * b21;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = b01 * det;\n  out[1] = (-a22 * a01 + a02 * a21) * det;\n  out[2] = (a12 * a01 - a02 * a11) * det;\n  out[3] = b11 * det;\n  out[4] = (a22 * a00 - a02 * a20) * det;\n  out[5] = (-a12 * a00 + a02 * a10) * det;\n  out[6] = b21 * det;\n  out[7] = (-a21 * a00 + a01 * a20) * det;\n  out[8] = (a11 * a00 - a01 * a10) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the source matrix\n * @returns {mat3} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  out[0] = a11 * a22 - a12 * a21;\n  out[1] = a02 * a21 - a01 * a22;\n  out[2] = a01 * a12 - a02 * a11;\n  out[3] = a12 * a20 - a10 * a22;\n  out[4] = a00 * a22 - a02 * a20;\n  out[5] = a02 * a10 - a00 * a12;\n  out[6] = a10 * a21 - a11 * a20;\n  out[7] = a01 * a20 - a00 * a21;\n  out[8] = a00 * a11 - a01 * a10;\n  return out;\n}\n/**\n * Calculates the determinant of a mat3\n *\n * @param {ReadonlyMat3} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  return a00 * (a22 * a11 - a12 * a21) + a01 * (-a22 * a10 + a12 * a20) + a02 * (a21 * a10 - a11 * a20);\n}\n/**\n * Multiplies two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2];\n  var a10 = a[3],\n      a11 = a[4],\n      a12 = a[5];\n  var a20 = a[6],\n      a21 = a[7],\n      a22 = a[8];\n  var b00 = b[0],\n      b01 = b[1],\n      b02 = b[2];\n  var b10 = b[3],\n      b11 = b[4],\n      b12 = b[5];\n  var b20 = b[6],\n      b21 = b[7],\n      b22 = b[8];\n  out[0] = b00 * a00 + b01 * a10 + b02 * a20;\n  out[1] = b00 * a01 + b01 * a11 + b02 * a21;\n  out[2] = b00 * a02 + b01 * a12 + b02 * a22;\n  out[3] = b10 * a00 + b11 * a10 + b12 * a20;\n  out[4] = b10 * a01 + b11 * a11 + b12 * a21;\n  out[5] = b10 * a02 + b11 * a12 + b12 * a22;\n  out[6] = b20 * a00 + b21 * a10 + b22 * a20;\n  out[7] = b20 * a01 + b21 * a11 + b22 * a21;\n  out[8] = b20 * a02 + b21 * a12 + b22 * a22;\n  return out;\n}\n/**\n * Translate a mat3 by the given vector\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to translate\n * @param {ReadonlyVec2} v vector to translate by\n * @returns {mat3} out\n */\n\nexport function translate(out, a, v) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      x = v[0],\n      y = v[1];\n  out[0] = a00;\n  out[1] = a01;\n  out[2] = a02;\n  out[3] = a10;\n  out[4] = a11;\n  out[5] = a12;\n  out[6] = x * a00 + y * a10 + a20;\n  out[7] = x * a01 + y * a11 + a21;\n  out[8] = x * a02 + y * a12 + a22;\n  return out;\n}\n/**\n * Rotates a mat3 by the given angle\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function rotate(out, a, rad) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a10 = a[3],\n      a11 = a[4],\n      a12 = a[5],\n      a20 = a[6],\n      a21 = a[7],\n      a22 = a[8],\n      s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c * a00 + s * a10;\n  out[1] = c * a01 + s * a11;\n  out[2] = c * a02 + s * a12;\n  out[3] = c * a10 - s * a00;\n  out[4] = c * a11 - s * a01;\n  out[5] = c * a12 - s * a02;\n  out[6] = a20;\n  out[7] = a21;\n  out[8] = a22;\n  return out;\n}\n/**\n * Scales the mat3 by the dimensions in the given vec2\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to rotate\n * @param {ReadonlyVec2} v the vec2 to scale the matrix by\n * @returns {mat3} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1];\n  out[0] = x * a[0];\n  out[1] = x * a[1];\n  out[2] = x * a[2];\n  out[3] = y * a[3];\n  out[4] = y * a[4];\n  out[5] = y * a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.translate(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Translation vector\n * @returns {mat3} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 1;\n  out[5] = 0;\n  out[6] = v[0];\n  out[7] = v[1];\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.rotate(dest, dest, rad);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat3} out\n */\n\nexport function fromRotation(out, rad) {\n  var s = Math.sin(rad),\n      c = Math.cos(rad);\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = -s;\n  out[4] = c;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat3.identity(dest);\n *     mat3.scale(dest, dest, vec);\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyVec2} v Scaling vector\n * @returns {mat3} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = v[1];\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 1;\n  return out;\n}\n/**\n * Copies the values from a mat2d into a mat3\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat2d} a the matrix to copy\n * @returns {mat3} out\n **/\n\nexport function fromMat2d(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = 0;\n  out[3] = a[2];\n  out[4] = a[3];\n  out[5] = 0;\n  out[6] = a[4];\n  out[7] = a[5];\n  out[8] = 1;\n  return out;\n}\n/**\n * Calculates a 3x3 matrix from the given quaternion\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat3} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[3] = yx - wz;\n  out[6] = zx + wy;\n  out[1] = yx + wz;\n  out[4] = 1 - xx - zz;\n  out[7] = zy - wx;\n  out[2] = zx - wy;\n  out[5] = zy + wx;\n  out[8] = 1 - xx - yy;\n  return out;\n}\n/**\n * Calculates a 3x3 normal matrix (transpose inverse) from the 4x4 matrix\n *\n * @param {mat3} out mat3 receiving operation result\n * @param {ReadonlyMat4} a Mat4 to derive the normal matrix from\n *\n * @returns {mat3} out\n */\n\nexport function normalFromMat4(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[2] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[3] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[4] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[5] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[6] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[7] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[8] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  return out;\n}\n/**\n * Generates a 2D projection matrix with the given bounds\n *\n * @param {mat3} out mat3 frustum matrix will be written into\n * @param {number} width Width of your gl context\n * @param {number} height Height of gl context\n * @returns {mat3} out\n */\n\nexport function projection(out, width, height) {\n  out[0] = 2 / width;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -2 / height;\n  out[5] = 0;\n  out[6] = -1;\n  out[7] = 1;\n  out[8] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat3\n *\n * @param {ReadonlyMat3} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat3\n *\n * @param {ReadonlyMat3} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8]);\n}\n/**\n * Adds two mat3's\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @returns {mat3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat3} out the receiving matrix\n * @param {ReadonlyMat3} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat3} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  return out;\n}\n/**\n * Adds two mat3's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat3} out the receiving vector\n * @param {ReadonlyMat3} a the first operand\n * @param {ReadonlyMat3} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat3} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat3} a The first matrix.\n * @param {ReadonlyMat3} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7],\n      a8 = a[8];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7],\n      b8 = b[8];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8));\n}\n/**\n * Alias for {@link mat3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat3.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\n/**\n * 4x4 Matrix<br>Format: column-major, when typed out it looks like row-major<br>The matrices are being post multiplied.\n * @module mat4\n */\n\n/**\n * Creates a new identity mat4\n *\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(16);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n    out[4] = 0;\n    out[6] = 0;\n    out[7] = 0;\n    out[8] = 0;\n    out[9] = 0;\n    out[11] = 0;\n    out[12] = 0;\n    out[13] = 0;\n    out[14] = 0;\n  }\n\n  out[0] = 1;\n  out[5] = 1;\n  out[10] = 1;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 initialized with values from an existing matrix\n *\n * @param {ReadonlyMat4} a matrix to clone\n * @returns {mat4} a new 4x4 matrix\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Copy the values from one mat4 to another\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  out[8] = a[8];\n  out[9] = a[9];\n  out[10] = a[10];\n  out[11] = a[11];\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Create a new mat4 with the given values\n *\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} A new mat4\n */\n\nexport function fromValues(m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  var out = new glMatrix.ARRAY_TYPE(16);\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set the components of a mat4 to the given values\n *\n * @param {mat4} out the receiving matrix\n * @param {Number} m00 Component in column 0, row 0 position (index 0)\n * @param {Number} m01 Component in column 0, row 1 position (index 1)\n * @param {Number} m02 Component in column 0, row 2 position (index 2)\n * @param {Number} m03 Component in column 0, row 3 position (index 3)\n * @param {Number} m10 Component in column 1, row 0 position (index 4)\n * @param {Number} m11 Component in column 1, row 1 position (index 5)\n * @param {Number} m12 Component in column 1, row 2 position (index 6)\n * @param {Number} m13 Component in column 1, row 3 position (index 7)\n * @param {Number} m20 Component in column 2, row 0 position (index 8)\n * @param {Number} m21 Component in column 2, row 1 position (index 9)\n * @param {Number} m22 Component in column 2, row 2 position (index 10)\n * @param {Number} m23 Component in column 2, row 3 position (index 11)\n * @param {Number} m30 Component in column 3, row 0 position (index 12)\n * @param {Number} m31 Component in column 3, row 1 position (index 13)\n * @param {Number} m32 Component in column 3, row 2 position (index 14)\n * @param {Number} m33 Component in column 3, row 3 position (index 15)\n * @returns {mat4} out\n */\n\nexport function set(out, m00, m01, m02, m03, m10, m11, m12, m13, m20, m21, m22, m23, m30, m31, m32, m33) {\n  out[0] = m00;\n  out[1] = m01;\n  out[2] = m02;\n  out[3] = m03;\n  out[4] = m10;\n  out[5] = m11;\n  out[6] = m12;\n  out[7] = m13;\n  out[8] = m20;\n  out[9] = m21;\n  out[10] = m22;\n  out[11] = m23;\n  out[12] = m30;\n  out[13] = m31;\n  out[14] = m32;\n  out[15] = m33;\n  return out;\n}\n/**\n * Set a mat4 to the identity matrix\n *\n * @param {mat4} out the receiving matrix\n * @returns {mat4} out\n */\n\nexport function identity(out) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Transpose the values of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function transpose(out, a) {\n  // If we are transposing ourselves we can skip a few steps but have to cache some values\n  if (out === a) {\n    var a01 = a[1],\n        a02 = a[2],\n        a03 = a[3];\n    var a12 = a[6],\n        a13 = a[7];\n    var a23 = a[11];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a01;\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a02;\n    out[9] = a12;\n    out[11] = a[14];\n    out[12] = a03;\n    out[13] = a13;\n    out[14] = a23;\n  } else {\n    out[0] = a[0];\n    out[1] = a[4];\n    out[2] = a[8];\n    out[3] = a[12];\n    out[4] = a[1];\n    out[5] = a[5];\n    out[6] = a[9];\n    out[7] = a[13];\n    out[8] = a[2];\n    out[9] = a[6];\n    out[10] = a[10];\n    out[11] = a[14];\n    out[12] = a[3];\n    out[13] = a[7];\n    out[14] = a[11];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Inverts a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function invert(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  var det = b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n\n  if (!det) {\n    return null;\n  }\n\n  det = 1.0 / det;\n  out[0] = (a11 * b11 - a12 * b10 + a13 * b09) * det;\n  out[1] = (a02 * b10 - a01 * b11 - a03 * b09) * det;\n  out[2] = (a31 * b05 - a32 * b04 + a33 * b03) * det;\n  out[3] = (a22 * b04 - a21 * b05 - a23 * b03) * det;\n  out[4] = (a12 * b08 - a10 * b11 - a13 * b07) * det;\n  out[5] = (a00 * b11 - a02 * b08 + a03 * b07) * det;\n  out[6] = (a32 * b02 - a30 * b05 - a33 * b01) * det;\n  out[7] = (a20 * b05 - a22 * b02 + a23 * b01) * det;\n  out[8] = (a10 * b10 - a11 * b08 + a13 * b06) * det;\n  out[9] = (a01 * b08 - a00 * b10 - a03 * b06) * det;\n  out[10] = (a30 * b04 - a31 * b02 + a33 * b00) * det;\n  out[11] = (a21 * b02 - a20 * b04 - a23 * b00) * det;\n  out[12] = (a11 * b07 - a10 * b09 - a12 * b06) * det;\n  out[13] = (a00 * b09 - a01 * b07 + a02 * b06) * det;\n  out[14] = (a31 * b01 - a30 * b03 - a32 * b00) * det;\n  out[15] = (a20 * b03 - a21 * b01 + a22 * b00) * det;\n  return out;\n}\n/**\n * Calculates the adjugate of a mat4\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the source matrix\n * @returns {mat4} out\n */\n\nexport function adjoint(out, a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  out[0] = a11 * (a22 * a33 - a23 * a32) - a21 * (a12 * a33 - a13 * a32) + a31 * (a12 * a23 - a13 * a22);\n  out[1] = -(a01 * (a22 * a33 - a23 * a32) - a21 * (a02 * a33 - a03 * a32) + a31 * (a02 * a23 - a03 * a22));\n  out[2] = a01 * (a12 * a33 - a13 * a32) - a11 * (a02 * a33 - a03 * a32) + a31 * (a02 * a13 - a03 * a12);\n  out[3] = -(a01 * (a12 * a23 - a13 * a22) - a11 * (a02 * a23 - a03 * a22) + a21 * (a02 * a13 - a03 * a12));\n  out[4] = -(a10 * (a22 * a33 - a23 * a32) - a20 * (a12 * a33 - a13 * a32) + a30 * (a12 * a23 - a13 * a22));\n  out[5] = a00 * (a22 * a33 - a23 * a32) - a20 * (a02 * a33 - a03 * a32) + a30 * (a02 * a23 - a03 * a22);\n  out[6] = -(a00 * (a12 * a33 - a13 * a32) - a10 * (a02 * a33 - a03 * a32) + a30 * (a02 * a13 - a03 * a12));\n  out[7] = a00 * (a12 * a23 - a13 * a22) - a10 * (a02 * a23 - a03 * a22) + a20 * (a02 * a13 - a03 * a12);\n  out[8] = a10 * (a21 * a33 - a23 * a31) - a20 * (a11 * a33 - a13 * a31) + a30 * (a11 * a23 - a13 * a21);\n  out[9] = -(a00 * (a21 * a33 - a23 * a31) - a20 * (a01 * a33 - a03 * a31) + a30 * (a01 * a23 - a03 * a21));\n  out[10] = a00 * (a11 * a33 - a13 * a31) - a10 * (a01 * a33 - a03 * a31) + a30 * (a01 * a13 - a03 * a11);\n  out[11] = -(a00 * (a11 * a23 - a13 * a21) - a10 * (a01 * a23 - a03 * a21) + a20 * (a01 * a13 - a03 * a11));\n  out[12] = -(a10 * (a21 * a32 - a22 * a31) - a20 * (a11 * a32 - a12 * a31) + a30 * (a11 * a22 - a12 * a21));\n  out[13] = a00 * (a21 * a32 - a22 * a31) - a20 * (a01 * a32 - a02 * a31) + a30 * (a01 * a22 - a02 * a21);\n  out[14] = -(a00 * (a11 * a32 - a12 * a31) - a10 * (a01 * a32 - a02 * a31) + a30 * (a01 * a12 - a02 * a11));\n  out[15] = a00 * (a11 * a22 - a12 * a21) - a10 * (a01 * a22 - a02 * a21) + a20 * (a01 * a12 - a02 * a11);\n  return out;\n}\n/**\n * Calculates the determinant of a mat4\n *\n * @param {ReadonlyMat4} a the source matrix\n * @returns {Number} determinant of a\n */\n\nexport function determinant(a) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15];\n  var b00 = a00 * a11 - a01 * a10;\n  var b01 = a00 * a12 - a02 * a10;\n  var b02 = a00 * a13 - a03 * a10;\n  var b03 = a01 * a12 - a02 * a11;\n  var b04 = a01 * a13 - a03 * a11;\n  var b05 = a02 * a13 - a03 * a12;\n  var b06 = a20 * a31 - a21 * a30;\n  var b07 = a20 * a32 - a22 * a30;\n  var b08 = a20 * a33 - a23 * a30;\n  var b09 = a21 * a32 - a22 * a31;\n  var b10 = a21 * a33 - a23 * a31;\n  var b11 = a22 * a33 - a23 * a32; // Calculate the determinant\n\n  return b00 * b11 - b01 * b10 + b02 * b09 + b03 * b08 - b04 * b07 + b05 * b06;\n}\n/**\n * Multiplies two mat4s\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function multiply(out, a, b) {\n  var a00 = a[0],\n      a01 = a[1],\n      a02 = a[2],\n      a03 = a[3];\n  var a10 = a[4],\n      a11 = a[5],\n      a12 = a[6],\n      a13 = a[7];\n  var a20 = a[8],\n      a21 = a[9],\n      a22 = a[10],\n      a23 = a[11];\n  var a30 = a[12],\n      a31 = a[13],\n      a32 = a[14],\n      a33 = a[15]; // Cache only the current line of the second matrix\n\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  out[0] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[1] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[2] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[3] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[4];\n  b1 = b[5];\n  b2 = b[6];\n  b3 = b[7];\n  out[4] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[5] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[6] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[7] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[8];\n  b1 = b[9];\n  b2 = b[10];\n  b3 = b[11];\n  out[8] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[9] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[10] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[11] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  b0 = b[12];\n  b1 = b[13];\n  b2 = b[14];\n  b3 = b[15];\n  out[12] = b0 * a00 + b1 * a10 + b2 * a20 + b3 * a30;\n  out[13] = b0 * a01 + b1 * a11 + b2 * a21 + b3 * a31;\n  out[14] = b0 * a02 + b1 * a12 + b2 * a22 + b3 * a32;\n  out[15] = b0 * a03 + b1 * a13 + b2 * a23 + b3 * a33;\n  return out;\n}\n/**\n * Translate a mat4 by the given vector\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {mat4} out\n */\n\nexport function translate(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n\n  if (a === out) {\n    out[12] = a[0] * x + a[4] * y + a[8] * z + a[12];\n    out[13] = a[1] * x + a[5] * y + a[9] * z + a[13];\n    out[14] = a[2] * x + a[6] * y + a[10] * z + a[14];\n    out[15] = a[3] * x + a[7] * y + a[11] * z + a[15];\n  } else {\n    a00 = a[0];\n    a01 = a[1];\n    a02 = a[2];\n    a03 = a[3];\n    a10 = a[4];\n    a11 = a[5];\n    a12 = a[6];\n    a13 = a[7];\n    a20 = a[8];\n    a21 = a[9];\n    a22 = a[10];\n    a23 = a[11];\n    out[0] = a00;\n    out[1] = a01;\n    out[2] = a02;\n    out[3] = a03;\n    out[4] = a10;\n    out[5] = a11;\n    out[6] = a12;\n    out[7] = a13;\n    out[8] = a20;\n    out[9] = a21;\n    out[10] = a22;\n    out[11] = a23;\n    out[12] = a00 * x + a10 * y + a20 * z + a[12];\n    out[13] = a01 * x + a11 * y + a21 * z + a[13];\n    out[14] = a02 * x + a12 * y + a22 * z + a[14];\n    out[15] = a03 * x + a13 * y + a23 * z + a[15];\n  }\n\n  return out;\n}\n/**\n * Scales the mat4 by the dimensions in the given vec3 not using vectorization\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {ReadonlyVec3} v the vec3 to scale the matrix by\n * @returns {mat4} out\n **/\n\nexport function scale(out, a, v) {\n  var x = v[0],\n      y = v[1],\n      z = v[2];\n  out[0] = a[0] * x;\n  out[1] = a[1] * x;\n  out[2] = a[2] * x;\n  out[3] = a[3] * x;\n  out[4] = a[4] * y;\n  out[5] = a[5] * y;\n  out[6] = a[6] * y;\n  out[7] = a[7] * y;\n  out[8] = a[8] * z;\n  out[9] = a[9] * z;\n  out[10] = a[10] * z;\n  out[11] = a[11] * z;\n  out[12] = a[12];\n  out[13] = a[13];\n  out[14] = a[14];\n  out[15] = a[15];\n  return out;\n}\n/**\n * Rotates a mat4 by the given angle around the given axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function rotate(out, a, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n  var a00, a01, a02, a03;\n  var a10, a11, a12, a13;\n  var a20, a21, a22, a23;\n  var b00, b01, b02;\n  var b10, b11, b12;\n  var b20, b21, b22;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c;\n  a00 = a[0];\n  a01 = a[1];\n  a02 = a[2];\n  a03 = a[3];\n  a10 = a[4];\n  a11 = a[5];\n  a12 = a[6];\n  a13 = a[7];\n  a20 = a[8];\n  a21 = a[9];\n  a22 = a[10];\n  a23 = a[11]; // Construct the elements of the rotation matrix\n\n  b00 = x * x * t + c;\n  b01 = y * x * t + z * s;\n  b02 = z * x * t - y * s;\n  b10 = x * y * t - z * s;\n  b11 = y * y * t + c;\n  b12 = z * y * t + x * s;\n  b20 = x * z * t + y * s;\n  b21 = y * z * t - x * s;\n  b22 = z * z * t + c; // Perform rotation-specific matrix multiplication\n\n  out[0] = a00 * b00 + a10 * b01 + a20 * b02;\n  out[1] = a01 * b00 + a11 * b01 + a21 * b02;\n  out[2] = a02 * b00 + a12 * b01 + a22 * b02;\n  out[3] = a03 * b00 + a13 * b01 + a23 * b02;\n  out[4] = a00 * b10 + a10 * b11 + a20 * b12;\n  out[5] = a01 * b10 + a11 * b11 + a21 * b12;\n  out[6] = a02 * b10 + a12 * b11 + a22 * b12;\n  out[7] = a03 * b10 + a13 * b11 + a23 * b12;\n  out[8] = a00 * b20 + a10 * b21 + a20 * b22;\n  out[9] = a01 * b20 + a11 * b21 + a21 * b22;\n  out[10] = a02 * b20 + a12 * b21 + a22 * b22;\n  out[11] = a03 * b20 + a13 * b21 + a23 * b22;\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  }\n\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the X axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateX(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[0] = a[0];\n    out[1] = a[1];\n    out[2] = a[2];\n    out[3] = a[3];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[4] = a10 * c + a20 * s;\n  out[5] = a11 * c + a21 * s;\n  out[6] = a12 * c + a22 * s;\n  out[7] = a13 * c + a23 * s;\n  out[8] = a20 * c - a10 * s;\n  out[9] = a21 * c - a11 * s;\n  out[10] = a22 * c - a12 * s;\n  out[11] = a23 * c - a13 * s;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Y axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateY(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a20 = a[8];\n  var a21 = a[9];\n  var a22 = a[10];\n  var a23 = a[11];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged rows\n    out[4] = a[4];\n    out[5] = a[5];\n    out[6] = a[6];\n    out[7] = a[7];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c - a20 * s;\n  out[1] = a01 * c - a21 * s;\n  out[2] = a02 * c - a22 * s;\n  out[3] = a03 * c - a23 * s;\n  out[8] = a00 * s + a20 * c;\n  out[9] = a01 * s + a21 * c;\n  out[10] = a02 * s + a22 * c;\n  out[11] = a03 * s + a23 * c;\n  return out;\n}\n/**\n * Rotates a matrix by the given angle around the Z axis\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to rotate\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad);\n  var a00 = a[0];\n  var a01 = a[1];\n  var a02 = a[2];\n  var a03 = a[3];\n  var a10 = a[4];\n  var a11 = a[5];\n  var a12 = a[6];\n  var a13 = a[7];\n\n  if (a !== out) {\n    // If the source and destination differ, copy the unchanged last row\n    out[8] = a[8];\n    out[9] = a[9];\n    out[10] = a[10];\n    out[11] = a[11];\n    out[12] = a[12];\n    out[13] = a[13];\n    out[14] = a[14];\n    out[15] = a[15];\n  } // Perform axis-specific matrix multiplication\n\n\n  out[0] = a00 * c + a10 * s;\n  out[1] = a01 * c + a11 * s;\n  out[2] = a02 * c + a12 * s;\n  out[3] = a03 * c + a13 * s;\n  out[4] = a10 * c - a00 * s;\n  out[5] = a11 * c - a01 * s;\n  out[6] = a12 * c - a02 * s;\n  out[7] = a13 * c - a03 * s;\n  return out;\n}\n/**\n * Creates a matrix from a vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromTranslation(out, v) {\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a vector scaling\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.scale(dest, dest, vec);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyVec3} v Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromScaling(out, v) {\n  out[0] = v[0];\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = v[1];\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = v[2];\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a given angle around a given axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotate(dest, dest, rad, axis);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @returns {mat4} out\n */\n\nexport function fromRotation(out, rad, axis) {\n  var x = axis[0],\n      y = axis[1],\n      z = axis[2];\n  var len = Math.hypot(x, y, z);\n  var s, c, t;\n\n  if (len < glMatrix.EPSILON) {\n    return null;\n  }\n\n  len = 1 / len;\n  x *= len;\n  y *= len;\n  z *= len;\n  s = Math.sin(rad);\n  c = Math.cos(rad);\n  t = 1 - c; // Perform rotation-specific matrix multiplication\n\n  out[0] = x * x * t + c;\n  out[1] = y * x * t + z * s;\n  out[2] = z * x * t - y * s;\n  out[3] = 0;\n  out[4] = x * y * t - z * s;\n  out[5] = y * y * t + c;\n  out[6] = z * y * t + x * s;\n  out[7] = 0;\n  out[8] = x * z * t + y * s;\n  out[9] = y * z * t - x * s;\n  out[10] = z * z * t + c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the X axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateX(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromXRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = 1;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = c;\n  out[6] = s;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = -s;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Y axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateY(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromYRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = 0;\n  out[2] = -s;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = 1;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = s;\n  out[9] = 0;\n  out[10] = c;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from the given angle around the Z axis\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.rotateZ(dest, dest, rad);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {Number} rad the angle to rotate the matrix by\n * @returns {mat4} out\n */\n\nexport function fromZRotation(out, rad) {\n  var s = Math.sin(rad);\n  var c = Math.cos(rad); // Perform axis-specific matrix multiplication\n\n  out[0] = c;\n  out[1] = s;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = -s;\n  out[5] = c;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 1;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation and vector translation\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslation(out, q, v) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - (yy + zz);\n  out[1] = xy + wz;\n  out[2] = xz - wy;\n  out[3] = 0;\n  out[4] = xy - wz;\n  out[5] = 1 - (xx + zz);\n  out[6] = yz + wx;\n  out[7] = 0;\n  out[8] = xz + wy;\n  out[9] = yz - wx;\n  out[10] = 1 - (xx + yy);\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a new mat4 from a dual quat.\n *\n * @param {mat4} out Matrix\n * @param {ReadonlyQuat2} a Dual Quaternion\n * @returns {mat4} mat4 receiving operation result\n */\n\nexport function fromQuat2(out, a) {\n  var translation = new glMatrix.ARRAY_TYPE(3);\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  var magnitude = bx * bx + by * by + bz * bz + bw * bw; //Only scale if it makes sense\n\n  if (magnitude > 0) {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2 / magnitude;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2 / magnitude;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2 / magnitude;\n  } else {\n    translation[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n    translation[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n    translation[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  }\n\n  fromRotationTranslation(out, a, translation);\n  return out;\n}\n/**\n * Returns the translation vector component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslation,\n *  the returned vector will be the same as the translation vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive translation component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getTranslation(out, mat) {\n  out[0] = mat[12];\n  out[1] = mat[13];\n  out[2] = mat[14];\n  return out;\n}\n/**\n * Returns the scaling factor component of a transformation\n *  matrix. If a matrix is built with fromRotationTranslationScale\n *  with a normalized Quaternion paramter, the returned vector will be\n *  the same as the scaling vector\n *  originally supplied.\n * @param  {vec3} out Vector to receive scaling factor component\n * @param  {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {vec3} out\n */\n\nexport function getScaling(out, mat) {\n  var m11 = mat[0];\n  var m12 = mat[1];\n  var m13 = mat[2];\n  var m21 = mat[4];\n  var m22 = mat[5];\n  var m23 = mat[6];\n  var m31 = mat[8];\n  var m32 = mat[9];\n  var m33 = mat[10];\n  out[0] = Math.hypot(m11, m12, m13);\n  out[1] = Math.hypot(m21, m22, m23);\n  out[2] = Math.hypot(m31, m32, m33);\n  return out;\n}\n/**\n * Returns a quaternion representing the rotational component\n *  of a transformation matrix. If a matrix is built with\n *  fromRotationTranslation, the returned quaternion will be the\n *  same as the quaternion originally supplied.\n * @param {quat} out Quaternion to receive the rotation component\n * @param {ReadonlyMat4} mat Matrix to be decomposed (input)\n * @return {quat} out\n */\n\nexport function getRotation(out, mat) {\n  var scaling = new glMatrix.ARRAY_TYPE(3);\n  getScaling(scaling, mat);\n  var is1 = 1 / scaling[0];\n  var is2 = 1 / scaling[1];\n  var is3 = 1 / scaling[2];\n  var sm11 = mat[0] * is1;\n  var sm12 = mat[1] * is2;\n  var sm13 = mat[2] * is3;\n  var sm21 = mat[4] * is1;\n  var sm22 = mat[5] * is2;\n  var sm23 = mat[6] * is3;\n  var sm31 = mat[8] * is1;\n  var sm32 = mat[9] * is2;\n  var sm33 = mat[10] * is3;\n  var trace = sm11 + sm22 + sm33;\n  var S = 0;\n\n  if (trace > 0) {\n    S = Math.sqrt(trace + 1.0) * 2;\n    out[3] = 0.25 * S;\n    out[0] = (sm23 - sm32) / S;\n    out[1] = (sm31 - sm13) / S;\n    out[2] = (sm12 - sm21) / S;\n  } else if (sm11 > sm22 && sm11 > sm33) {\n    S = Math.sqrt(1.0 + sm11 - sm22 - sm33) * 2;\n    out[3] = (sm23 - sm32) / S;\n    out[0] = 0.25 * S;\n    out[1] = (sm12 + sm21) / S;\n    out[2] = (sm31 + sm13) / S;\n  } else if (sm22 > sm33) {\n    S = Math.sqrt(1.0 + sm22 - sm11 - sm33) * 2;\n    out[3] = (sm31 - sm13) / S;\n    out[0] = (sm12 + sm21) / S;\n    out[1] = 0.25 * S;\n    out[2] = (sm23 + sm32) / S;\n  } else {\n    S = Math.sqrt(1.0 + sm33 - sm11 - sm22) * 2;\n    out[3] = (sm12 - sm21) / S;\n    out[0] = (sm31 + sm13) / S;\n    out[1] = (sm23 + sm32) / S;\n    out[2] = 0.25 * S;\n  }\n\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScale(out, q, v, s) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  out[0] = (1 - (yy + zz)) * sx;\n  out[1] = (xy + wz) * sx;\n  out[2] = (xz - wy) * sx;\n  out[3] = 0;\n  out[4] = (xy - wz) * sy;\n  out[5] = (1 - (xx + zz)) * sy;\n  out[6] = (yz + wx) * sy;\n  out[7] = 0;\n  out[8] = (xz + wy) * sz;\n  out[9] = (yz - wx) * sz;\n  out[10] = (1 - (xx + yy)) * sz;\n  out[11] = 0;\n  out[12] = v[0];\n  out[13] = v[1];\n  out[14] = v[2];\n  out[15] = 1;\n  return out;\n}\n/**\n * Creates a matrix from a quaternion rotation, vector translation and vector scale, rotating and scaling around the given origin\n * This is equivalent to (but much faster than):\n *\n *     mat4.identity(dest);\n *     mat4.translate(dest, vec);\n *     mat4.translate(dest, origin);\n *     let quatMat = mat4.create();\n *     quat4.toMat4(quat, quatMat);\n *     mat4.multiply(dest, quatMat);\n *     mat4.scale(dest, scale)\n *     mat4.translate(dest, negativeOrigin);\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {quat4} q Rotation quaternion\n * @param {ReadonlyVec3} v Translation vector\n * @param {ReadonlyVec3} s Scaling vector\n * @param {ReadonlyVec3} o The origin vector around which to scale and rotate\n * @returns {mat4} out\n */\n\nexport function fromRotationTranslationScaleOrigin(out, q, v, s, o) {\n  // Quaternion math\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var xy = x * y2;\n  var xz = x * z2;\n  var yy = y * y2;\n  var yz = y * z2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  var sx = s[0];\n  var sy = s[1];\n  var sz = s[2];\n  var ox = o[0];\n  var oy = o[1];\n  var oz = o[2];\n  var out0 = (1 - (yy + zz)) * sx;\n  var out1 = (xy + wz) * sx;\n  var out2 = (xz - wy) * sx;\n  var out4 = (xy - wz) * sy;\n  var out5 = (1 - (xx + zz)) * sy;\n  var out6 = (yz + wx) * sy;\n  var out8 = (xz + wy) * sz;\n  var out9 = (yz - wx) * sz;\n  var out10 = (1 - (xx + yy)) * sz;\n  out[0] = out0;\n  out[1] = out1;\n  out[2] = out2;\n  out[3] = 0;\n  out[4] = out4;\n  out[5] = out5;\n  out[6] = out6;\n  out[7] = 0;\n  out[8] = out8;\n  out[9] = out9;\n  out[10] = out10;\n  out[11] = 0;\n  out[12] = v[0] + ox - (out0 * ox + out4 * oy + out8 * oz);\n  out[13] = v[1] + oy - (out1 * ox + out5 * oy + out9 * oz);\n  out[14] = v[2] + oz - (out2 * ox + out6 * oy + out10 * oz);\n  out[15] = 1;\n  return out;\n}\n/**\n * Calculates a 4x4 matrix from the given quaternion\n *\n * @param {mat4} out mat4 receiving operation result\n * @param {ReadonlyQuat} q Quaternion to create matrix from\n *\n * @returns {mat4} out\n */\n\nexport function fromQuat(out, q) {\n  var x = q[0],\n      y = q[1],\n      z = q[2],\n      w = q[3];\n  var x2 = x + x;\n  var y2 = y + y;\n  var z2 = z + z;\n  var xx = x * x2;\n  var yx = y * x2;\n  var yy = y * y2;\n  var zx = z * x2;\n  var zy = z * y2;\n  var zz = z * z2;\n  var wx = w * x2;\n  var wy = w * y2;\n  var wz = w * z2;\n  out[0] = 1 - yy - zz;\n  out[1] = yx + wz;\n  out[2] = zx - wy;\n  out[3] = 0;\n  out[4] = yx - wz;\n  out[5] = 1 - xx - zz;\n  out[6] = zy + wx;\n  out[7] = 0;\n  out[8] = zx + wy;\n  out[9] = zy - wx;\n  out[10] = 1 - xx - yy;\n  out[11] = 0;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = 0;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a frustum matrix with the given bounds\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Number} left Left bound of the frustum\n * @param {Number} right Right bound of the frustum\n * @param {Number} bottom Bottom bound of the frustum\n * @param {Number} top Top bound of the frustum\n * @param {Number} near Near bound of the frustum\n * @param {Number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function frustum(out, left, right, bottom, top, near, far) {\n  var rl = 1 / (right - left);\n  var tb = 1 / (top - bottom);\n  var nf = 1 / (near - far);\n  out[0] = near * 2 * rl;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = near * 2 * tb;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = (right + left) * rl;\n  out[9] = (top + bottom) * tb;\n  out[10] = (far + near) * nf;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[14] = far * near * 2 * nf;\n  out[15] = 0;\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveNO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = (far + near) * nf;\n    out[14] = 2 * far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -2 * near;\n  }\n\n  return out;\n}\n/**\n * Alias for {@link mat4.perspectiveNO}\n * @function\n */\n\nexport var perspective = perspectiveNO;\n/**\n * Generates a perspective projection matrix suitable for WebGPU with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n * Passing null/undefined/no value for far will generate infinite projection matrix.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} fovy Vertical field of view in radians\n * @param {number} aspect Aspect ratio. typically viewport width/height\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum, can be null or Infinity\n * @returns {mat4} out\n */\n\nexport function perspectiveZO(out, fovy, aspect, near, far) {\n  var f = 1.0 / Math.tan(fovy / 2),\n      nf;\n  out[0] = f / aspect;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = f;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[11] = -1;\n  out[12] = 0;\n  out[13] = 0;\n  out[15] = 0;\n\n  if (far != null && far !== Infinity) {\n    nf = 1 / (near - far);\n    out[10] = far * nf;\n    out[14] = far * near * nf;\n  } else {\n    out[10] = -1;\n    out[14] = -near;\n  }\n\n  return out;\n}\n/**\n * Generates a perspective projection matrix with the given field of view.\n * This is primarily useful for generating projection matrices to be used\n * with the still experiemental WebVR API.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {Object} fov Object containing the following values: upDegrees, downDegrees, leftDegrees, rightDegrees\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function perspectiveFromFieldOfView(out, fov, near, far) {\n  var upTan = Math.tan(fov.upDegrees * Math.PI / 180.0);\n  var downTan = Math.tan(fov.downDegrees * Math.PI / 180.0);\n  var leftTan = Math.tan(fov.leftDegrees * Math.PI / 180.0);\n  var rightTan = Math.tan(fov.rightDegrees * Math.PI / 180.0);\n  var xScale = 2.0 / (leftTan + rightTan);\n  var yScale = 2.0 / (upTan + downTan);\n  out[0] = xScale;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  out[4] = 0.0;\n  out[5] = yScale;\n  out[6] = 0.0;\n  out[7] = 0.0;\n  out[8] = -((leftTan - rightTan) * xScale * 0.5);\n  out[9] = (upTan - downTan) * yScale * 0.5;\n  out[10] = far / (near - far);\n  out[11] = -1.0;\n  out[12] = 0.0;\n  out[13] = 0.0;\n  out[14] = far * near / (near - far);\n  out[15] = 0.0;\n  return out;\n}\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [-1, 1],\n * which matches WebGL/OpenGL's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoNO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = 2 * nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = (far + near) * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Alias for {@link mat4.orthoNO}\n * @function\n */\n\nexport var ortho = orthoNO;\n/**\n * Generates a orthogonal projection matrix with the given bounds.\n * The near/far clip planes correspond to a normalized device coordinate Z range of [0, 1],\n * which matches WebGPU/Vulkan/DirectX/Metal's clip volume.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {number} left Left bound of the frustum\n * @param {number} right Right bound of the frustum\n * @param {number} bottom Bottom bound of the frustum\n * @param {number} top Top bound of the frustum\n * @param {number} near Near bound of the frustum\n * @param {number} far Far bound of the frustum\n * @returns {mat4} out\n */\n\nexport function orthoZO(out, left, right, bottom, top, near, far) {\n  var lr = 1 / (left - right);\n  var bt = 1 / (bottom - top);\n  var nf = 1 / (near - far);\n  out[0] = -2 * lr;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 0;\n  out[4] = 0;\n  out[5] = -2 * bt;\n  out[6] = 0;\n  out[7] = 0;\n  out[8] = 0;\n  out[9] = 0;\n  out[10] = nf;\n  out[11] = 0;\n  out[12] = (left + right) * lr;\n  out[13] = (top + bottom) * bt;\n  out[14] = near * nf;\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a look-at matrix with the given eye position, focal point, and up axis.\n * If you want a matrix that actually makes an object look at another object, you should use targetTo instead.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function lookAt(out, eye, center, up) {\n  var x0, x1, x2, y0, y1, y2, z0, z1, z2, len;\n  var eyex = eye[0];\n  var eyey = eye[1];\n  var eyez = eye[2];\n  var upx = up[0];\n  var upy = up[1];\n  var upz = up[2];\n  var centerx = center[0];\n  var centery = center[1];\n  var centerz = center[2];\n\n  if (Math.abs(eyex - centerx) < glMatrix.EPSILON && Math.abs(eyey - centery) < glMatrix.EPSILON && Math.abs(eyez - centerz) < glMatrix.EPSILON) {\n    return identity(out);\n  }\n\n  z0 = eyex - centerx;\n  z1 = eyey - centery;\n  z2 = eyez - centerz;\n  len = 1 / Math.hypot(z0, z1, z2);\n  z0 *= len;\n  z1 *= len;\n  z2 *= len;\n  x0 = upy * z2 - upz * z1;\n  x1 = upz * z0 - upx * z2;\n  x2 = upx * z1 - upy * z0;\n  len = Math.hypot(x0, x1, x2);\n\n  if (!len) {\n    x0 = 0;\n    x1 = 0;\n    x2 = 0;\n  } else {\n    len = 1 / len;\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  y0 = z1 * x2 - z2 * x1;\n  y1 = z2 * x0 - z0 * x2;\n  y2 = z0 * x1 - z1 * x0;\n  len = Math.hypot(y0, y1, y2);\n\n  if (!len) {\n    y0 = 0;\n    y1 = 0;\n    y2 = 0;\n  } else {\n    len = 1 / len;\n    y0 *= len;\n    y1 *= len;\n    y2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = y0;\n  out[2] = z0;\n  out[3] = 0;\n  out[4] = x1;\n  out[5] = y1;\n  out[6] = z1;\n  out[7] = 0;\n  out[8] = x2;\n  out[9] = y2;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = -(x0 * eyex + x1 * eyey + x2 * eyez);\n  out[13] = -(y0 * eyex + y1 * eyey + y2 * eyez);\n  out[14] = -(z0 * eyex + z1 * eyey + z2 * eyez);\n  out[15] = 1;\n  return out;\n}\n/**\n * Generates a matrix that makes something look at something else.\n *\n * @param {mat4} out mat4 frustum matrix will be written into\n * @param {ReadonlyVec3} eye Position of the viewer\n * @param {ReadonlyVec3} center Point the viewer is looking at\n * @param {ReadonlyVec3} up vec3 pointing up\n * @returns {mat4} out\n */\n\nexport function targetTo(out, eye, target, up) {\n  var eyex = eye[0],\n      eyey = eye[1],\n      eyez = eye[2],\n      upx = up[0],\n      upy = up[1],\n      upz = up[2];\n  var z0 = eyex - target[0],\n      z1 = eyey - target[1],\n      z2 = eyez - target[2];\n  var len = z0 * z0 + z1 * z1 + z2 * z2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    z0 *= len;\n    z1 *= len;\n    z2 *= len;\n  }\n\n  var x0 = upy * z2 - upz * z1,\n      x1 = upz * z0 - upx * z2,\n      x2 = upx * z1 - upy * z0;\n  len = x0 * x0 + x1 * x1 + x2 * x2;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n    x0 *= len;\n    x1 *= len;\n    x2 *= len;\n  }\n\n  out[0] = x0;\n  out[1] = x1;\n  out[2] = x2;\n  out[3] = 0;\n  out[4] = z1 * x2 - z2 * x1;\n  out[5] = z2 * x0 - z0 * x2;\n  out[6] = z0 * x1 - z1 * x0;\n  out[7] = 0;\n  out[8] = z0;\n  out[9] = z1;\n  out[10] = z2;\n  out[11] = 0;\n  out[12] = eyex;\n  out[13] = eyey;\n  out[14] = eyez;\n  out[15] = 1;\n  return out;\n}\n/**\n * Returns a string representation of a mat4\n *\n * @param {ReadonlyMat4} a matrix to represent as a string\n * @returns {String} string representation of the matrix\n */\n\nexport function str(a) {\n  return \"mat4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \", \" + a[8] + \", \" + a[9] + \", \" + a[10] + \", \" + a[11] + \", \" + a[12] + \", \" + a[13] + \", \" + a[14] + \", \" + a[15] + \")\";\n}\n/**\n * Returns Frobenius norm of a mat4\n *\n * @param {ReadonlyMat4} a the matrix to calculate Frobenius norm of\n * @returns {Number} Frobenius norm\n */\n\nexport function frob(a) {\n  return Math.hypot(a[0], a[1], a[2], a[3], a[4], a[5], a[6], a[7], a[8], a[9], a[10], a[11], a[12], a[13], a[14], a[15]);\n}\n/**\n * Adds two mat4's\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  out[8] = a[8] + b[8];\n  out[9] = a[9] + b[9];\n  out[10] = a[10] + b[10];\n  out[11] = a[11] + b[11];\n  out[12] = a[12] + b[12];\n  out[13] = a[13] + b[13];\n  out[14] = a[14] + b[14];\n  out[15] = a[15] + b[15];\n  return out;\n}\n/**\n * Subtracts matrix b from matrix a\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @returns {mat4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  out[4] = a[4] - b[4];\n  out[5] = a[5] - b[5];\n  out[6] = a[6] - b[6];\n  out[7] = a[7] - b[7];\n  out[8] = a[8] - b[8];\n  out[9] = a[9] - b[9];\n  out[10] = a[10] - b[10];\n  out[11] = a[11] - b[11];\n  out[12] = a[12] - b[12];\n  out[13] = a[13] - b[13];\n  out[14] = a[14] - b[14];\n  out[15] = a[15] - b[15];\n  return out;\n}\n/**\n * Multiply each element of the matrix by a scalar.\n *\n * @param {mat4} out the receiving matrix\n * @param {ReadonlyMat4} a the matrix to scale\n * @param {Number} b amount to scale the matrix's elements by\n * @returns {mat4} out\n */\n\nexport function multiplyScalar(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  out[8] = a[8] * b;\n  out[9] = a[9] * b;\n  out[10] = a[10] * b;\n  out[11] = a[11] * b;\n  out[12] = a[12] * b;\n  out[13] = a[13] * b;\n  out[14] = a[14] * b;\n  out[15] = a[15] * b;\n  return out;\n}\n/**\n * Adds two mat4's after multiplying each element of the second operand by a scalar value.\n *\n * @param {mat4} out the receiving vector\n * @param {ReadonlyMat4} a the first operand\n * @param {ReadonlyMat4} b the second operand\n * @param {Number} scale the amount to scale b's elements by before adding\n * @returns {mat4} out\n */\n\nexport function multiplyScalarAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  out[4] = a[4] + b[4] * scale;\n  out[5] = a[5] + b[5] * scale;\n  out[6] = a[6] + b[6] * scale;\n  out[7] = a[7] + b[7] * scale;\n  out[8] = a[8] + b[8] * scale;\n  out[9] = a[9] + b[9] * scale;\n  out[10] = a[10] + b[10] * scale;\n  out[11] = a[11] + b[11] * scale;\n  out[12] = a[12] + b[12] * scale;\n  out[13] = a[13] + b[13] * scale;\n  out[14] = a[14] + b[14] * scale;\n  out[15] = a[15] + b[15] * scale;\n  return out;\n}\n/**\n * Returns whether or not the matrices have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7] && a[8] === b[8] && a[9] === b[9] && a[10] === b[10] && a[11] === b[11] && a[12] === b[12] && a[13] === b[13] && a[14] === b[14] && a[15] === b[15];\n}\n/**\n * Returns whether or not the matrices have approximately the same elements in the same position.\n *\n * @param {ReadonlyMat4} a The first matrix.\n * @param {ReadonlyMat4} b The second matrix.\n * @returns {Boolean} True if the matrices are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var a8 = a[8],\n      a9 = a[9],\n      a10 = a[10],\n      a11 = a[11];\n  var a12 = a[12],\n      a13 = a[13],\n      a14 = a[14],\n      a15 = a[15];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  var b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  var b8 = b[8],\n      b9 = b[9],\n      b10 = b[10],\n      b11 = b[11];\n  var b12 = b[12],\n      b13 = b[13],\n      b14 = b[14],\n      b15 = b[15];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7)) && Math.abs(a8 - b8) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a8), Math.abs(b8)) && Math.abs(a9 - b9) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a9), Math.abs(b9)) && Math.abs(a10 - b10) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a10), Math.abs(b10)) && Math.abs(a11 - b11) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a11), Math.abs(b11)) && Math.abs(a12 - b12) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a12), Math.abs(b12)) && Math.abs(a13 - b13) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a13), Math.abs(b13)) && Math.abs(a14 - b14) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a14), Math.abs(b14)) && Math.abs(a15 - b15) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a15), Math.abs(b15));\n}\n/**\n * Alias for {@link mat4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link mat4.subtract}\n * @function\n */\n\nexport var sub = subtract;","import * as glMatrix from \"./common.js\";\nimport * as mat3 from \"./mat3.js\";\nimport * as vec3 from \"./vec3.js\";\nimport * as vec4 from \"./vec4.js\";\n/**\n * Quaternion\n * @module quat\n */\n\n/**\n * Creates a new identity quat\n *\n * @returns {quat} a new quaternion\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  out[3] = 1;\n  return out;\n}\n/**\n * Set a quat to the identity quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  return out;\n}\n/**\n * Sets a quat from the given angle and rotation axis,\n * then returns it.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyVec3} axis the axis around which to rotate\n * @param {Number} rad the angle in radians\n * @returns {quat} out\n **/\n\nexport function setAxisAngle(out, axis, rad) {\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  out[0] = s * axis[0];\n  out[1] = s * axis[1];\n  out[2] = s * axis[2];\n  out[3] = Math.cos(rad);\n  return out;\n}\n/**\n * Gets the rotation axis and angle for a given\n *  quaternion. If a quaternion is created with\n *  setAxisAngle, this method will return the same\n *  values as providied in the original parameter list\n *  OR functionally equivalent values.\n * Example: The quaternion formed by axis [0, 0, 1] and\n *  angle -90 is the same as the quaternion formed by\n *  [0, 0, 1] and 270. This method favors the latter.\n * @param  {vec3} out_axis  Vector receiving the axis of rotation\n * @param  {ReadonlyQuat} q     Quaternion to be decomposed\n * @return {Number}     Angle, in radians, of the rotation\n */\n\nexport function getAxisAngle(out_axis, q) {\n  var rad = Math.acos(q[3]) * 2.0;\n  var s = Math.sin(rad / 2.0);\n\n  if (s > glMatrix.EPSILON) {\n    out_axis[0] = q[0] / s;\n    out_axis[1] = q[1] / s;\n    out_axis[2] = q[2] / s;\n  } else {\n    // If s is zero, return any axis (no rotation - axis does not matter)\n    out_axis[0] = 1;\n    out_axis[1] = 0;\n    out_axis[2] = 0;\n  }\n\n  return rad;\n}\n/**\n * Gets the angular distance between two unit quaternions\n *\n * @param  {ReadonlyQuat} a     Origin unit quaternion\n * @param  {ReadonlyQuat} b     Destination unit quaternion\n * @return {Number}     Angle, in radians, between the two quaternions\n */\n\nexport function getAngle(a, b) {\n  var dotproduct = dot(a, b);\n  return Math.acos(2 * dotproduct * dotproduct - 1);\n}\n/**\n * Multiplies two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n */\n\nexport function multiply(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  out[0] = ax * bw + aw * bx + ay * bz - az * by;\n  out[1] = ay * bw + aw * by + az * bx - ax * bz;\n  out[2] = az * bw + aw * bz + ax * by - ay * bx;\n  out[3] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the X axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateX(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + aw * bx;\n  out[1] = ay * bw + az * bx;\n  out[2] = az * bw - ay * bx;\n  out[3] = aw * bw - ax * bx;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Y axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateY(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var by = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw - az * by;\n  out[1] = ay * bw + aw * by;\n  out[2] = az * bw + ax * by;\n  out[3] = aw * bw - ay * by;\n  return out;\n}\n/**\n * Rotates a quaternion by the given angle about the Z axis\n *\n * @param {quat} out quat receiving operation result\n * @param {ReadonlyQuat} a quat to rotate\n * @param {number} rad angle (in radians) to rotate\n * @returns {quat} out\n */\n\nexport function rotateZ(out, a, rad) {\n  rad *= 0.5;\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bz = Math.sin(rad),\n      bw = Math.cos(rad);\n  out[0] = ax * bw + ay * bz;\n  out[1] = ay * bw - ax * bz;\n  out[2] = az * bw + aw * bz;\n  out[3] = aw * bw - az * bz;\n  return out;\n}\n/**\n * Calculates the W component of a quat from the X, Y, and Z components.\n * Assumes that quaternion is 1 unit in length.\n * Any existing W component will be ignored.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate W component of\n * @returns {quat} out\n */\n\nexport function calculateW(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = Math.sqrt(Math.abs(1.0 - x * x - y * y - z * z));\n  return out;\n}\n/**\n * Calculate the exponential of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function exp(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var et = Math.exp(w);\n  var s = r > 0 ? et * Math.sin(r) / r : 0;\n  out[0] = x * s;\n  out[1] = y * s;\n  out[2] = z * s;\n  out[3] = et * Math.cos(r);\n  return out;\n}\n/**\n * Calculate the natural logarithm of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @returns {quat} out\n */\n\nexport function ln(out, a) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  var r = Math.sqrt(x * x + y * y + z * z);\n  var t = r > 0 ? Math.atan2(r, w) / r : 0;\n  out[0] = x * t;\n  out[1] = y * t;\n  out[2] = z * t;\n  out[3] = 0.5 * Math.log(x * x + y * y + z * z + w * w);\n  return out;\n}\n/**\n * Calculate the scalar power of a unit quaternion.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate the exponential of\n * @param {Number} b amount to scale the quaternion by\n * @returns {quat} out\n */\n\nexport function pow(out, a, b) {\n  ln(out, a);\n  scale(out, out, b);\n  exp(out, out);\n  return out;\n}\n/**\n * Performs a spherical linear interpolation between two quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport function slerp(out, a, b, t) {\n  // benchmarks:\n  //    http://jsperf.com/quaternion-slerp-implementations\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2],\n      bw = b[3];\n  var omega, cosom, sinom, scale0, scale1; // calc cosine\n\n  cosom = ax * bx + ay * by + az * bz + aw * bw; // adjust signs (if necessary)\n\n  if (cosom < 0.0) {\n    cosom = -cosom;\n    bx = -bx;\n    by = -by;\n    bz = -bz;\n    bw = -bw;\n  } // calculate coefficients\n\n\n  if (1.0 - cosom > glMatrix.EPSILON) {\n    // standard case (slerp)\n    omega = Math.acos(cosom);\n    sinom = Math.sin(omega);\n    scale0 = Math.sin((1.0 - t) * omega) / sinom;\n    scale1 = Math.sin(t * omega) / sinom;\n  } else {\n    // \"from\" and \"to\" quaternions are very close\n    //  ... so we can do a linear interpolation\n    scale0 = 1.0 - t;\n    scale1 = t;\n  } // calculate final values\n\n\n  out[0] = scale0 * ax + scale1 * bx;\n  out[1] = scale0 * ay + scale1 * by;\n  out[2] = scale0 * az + scale1 * bz;\n  out[3] = scale0 * aw + scale1 * bw;\n  return out;\n}\n/**\n * Generates a random unit quaternion\n *\n * @param {quat} out the receiving quaternion\n * @returns {quat} out\n */\n\nexport function random(out) {\n  // Implementation of http://planning.cs.uiuc.edu/node198.html\n  // TODO: Calling random 3 times is probably not the fastest solution\n  var u1 = glMatrix.RANDOM();\n  var u2 = glMatrix.RANDOM();\n  var u3 = glMatrix.RANDOM();\n  var sqrt1MinusU1 = Math.sqrt(1 - u1);\n  var sqrtU1 = Math.sqrt(u1);\n  out[0] = sqrt1MinusU1 * Math.sin(2.0 * Math.PI * u2);\n  out[1] = sqrt1MinusU1 * Math.cos(2.0 * Math.PI * u2);\n  out[2] = sqrtU1 * Math.sin(2.0 * Math.PI * u3);\n  out[3] = sqrtU1 * Math.cos(2.0 * Math.PI * u3);\n  return out;\n}\n/**\n * Calculates the inverse of a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate inverse of\n * @returns {quat} out\n */\n\nexport function invert(out, a) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var dot = a0 * a0 + a1 * a1 + a2 * a2 + a3 * a3;\n  var invDot = dot ? 1.0 / dot : 0; // TODO: Would be faster to return [0,0,0,0] immediately if dot == 0\n\n  out[0] = -a0 * invDot;\n  out[1] = -a1 * invDot;\n  out[2] = -a2 * invDot;\n  out[3] = a3 * invDot;\n  return out;\n}\n/**\n * Calculates the conjugate of a quat\n * If the quaternion is normalized, this function is faster than quat.inverse and produces the same result.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quat to calculate conjugate of\n * @returns {quat} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a quaternion from the given 3x3 rotation matrix.\n *\n * NOTE: The resultant quaternion is not normalized, so you should be sure\n * to renormalize the quaternion yourself where necessary.\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyMat3} m rotation matrix\n * @returns {quat} out\n * @function\n */\n\nexport function fromMat3(out, m) {\n  // Algorithm in Ken Shoemake's article in 1987 SIGGRAPH course notes\n  // article \"Quaternion Calculus and Fast Animation\".\n  var fTrace = m[0] + m[4] + m[8];\n  var fRoot;\n\n  if (fTrace > 0.0) {\n    // |w| > 1/2, may as well choose w > 1/2\n    fRoot = Math.sqrt(fTrace + 1.0); // 2w\n\n    out[3] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot; // 1/(4w)\n\n    out[0] = (m[5] - m[7]) * fRoot;\n    out[1] = (m[6] - m[2]) * fRoot;\n    out[2] = (m[1] - m[3]) * fRoot;\n  } else {\n    // |w| <= 1/2\n    var i = 0;\n    if (m[4] > m[0]) i = 1;\n    if (m[8] > m[i * 3 + i]) i = 2;\n    var j = (i + 1) % 3;\n    var k = (i + 2) % 3;\n    fRoot = Math.sqrt(m[i * 3 + i] - m[j * 3 + j] - m[k * 3 + k] + 1.0);\n    out[i] = 0.5 * fRoot;\n    fRoot = 0.5 / fRoot;\n    out[3] = (m[j * 3 + k] - m[k * 3 + j]) * fRoot;\n    out[j] = (m[j * 3 + i] + m[i * 3 + j]) * fRoot;\n    out[k] = (m[k * 3 + i] + m[i * 3 + k]) * fRoot;\n  }\n\n  return out;\n}\n/**\n * Creates a quaternion from the given euler angle x, y, z.\n *\n * @param {quat} out the receiving quaternion\n * @param {x} Angle to rotate around X axis in degrees.\n * @param {y} Angle to rotate around Y axis in degrees.\n * @param {z} Angle to rotate around Z axis in degrees.\n * @returns {quat} out\n * @function\n */\n\nexport function fromEuler(out, x, y, z) {\n  var halfToRad = 0.5 * Math.PI / 180.0;\n  x *= halfToRad;\n  y *= halfToRad;\n  z *= halfToRad;\n  var sx = Math.sin(x);\n  var cx = Math.cos(x);\n  var sy = Math.sin(y);\n  var cy = Math.cos(y);\n  var sz = Math.sin(z);\n  var cz = Math.cos(z);\n  out[0] = sx * cy * cz - cx * sy * sz;\n  out[1] = cx * sy * cz + sx * cy * sz;\n  out[2] = cx * cy * sz - sx * sy * cz;\n  out[3] = cx * cy * cz + sx * sy * sz;\n  return out;\n}\n/**\n * Returns a string representation of a quatenion\n *\n * @param {ReadonlyQuat} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"quat(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat} a quaternion to clone\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var clone = vec4.clone;\n/**\n * Creates a new quat initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} a new quaternion\n * @function\n */\n\nexport var fromValues = vec4.fromValues;\n/**\n * Copy the values from one quat to another\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the source quaternion\n * @returns {quat} out\n * @function\n */\n\nexport var copy = vec4.copy;\n/**\n * Set the components of a quat to the given values\n *\n * @param {quat} out the receiving quaternion\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {quat} out\n * @function\n */\n\nexport var set = vec4.set;\n/**\n * Adds two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {quat} out\n * @function\n */\n\nexport var add = vec4.add;\n/**\n * Alias for {@link quat.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a quat by a scalar number\n *\n * @param {quat} out the receiving vector\n * @param {ReadonlyQuat} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {quat} out\n * @function\n */\n\nexport var scale = vec4.scale;\n/**\n * Calculates the dot product of two quat's\n *\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = vec4.dot;\n/**\n * Performs a linear interpolation between two quat's\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n * @function\n */\n\nexport var lerp = vec4.lerp;\n/**\n * Calculates the length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport var length = vec4.length;\n/**\n * Alias for {@link quat.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a quat\n *\n * @param {ReadonlyQuat} a vector to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = vec4.squaredLength;\n/**\n * Alias for {@link quat.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a quat\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a quaternion to normalize\n * @returns {quat} out\n * @function\n */\n\nexport var normalize = vec4.normalize;\n/**\n * Returns whether or not the quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat} a The first quaternion.\n * @param {ReadonlyQuat} b The second quaternion.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var exactEquals = vec4.exactEquals;\n/**\n * Returns whether or not the quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat} a The first vector.\n * @param {ReadonlyQuat} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport var equals = vec4.equals;\n/**\n * Sets a quaternion to represent the shortest rotation from one\n * vector to another.\n *\n * Both vectors are assumed to be unit length.\n *\n * @param {quat} out the receiving quaternion.\n * @param {ReadonlyVec3} a the initial vector\n * @param {ReadonlyVec3} b the destination vector\n * @returns {quat} out\n */\n\nexport var rotationTo = function () {\n  var tmpvec3 = vec3.create();\n  var xUnitVec3 = vec3.fromValues(1, 0, 0);\n  var yUnitVec3 = vec3.fromValues(0, 1, 0);\n  return function (out, a, b) {\n    var dot = vec3.dot(a, b);\n\n    if (dot < -0.999999) {\n      vec3.cross(tmpvec3, xUnitVec3, a);\n      if (vec3.len(tmpvec3) < 0.000001) vec3.cross(tmpvec3, yUnitVec3, a);\n      vec3.normalize(tmpvec3, tmpvec3);\n      setAxisAngle(out, tmpvec3, Math.PI);\n      return out;\n    } else if (dot > 0.999999) {\n      out[0] = 0;\n      out[1] = 0;\n      out[2] = 0;\n      out[3] = 1;\n      return out;\n    } else {\n      vec3.cross(tmpvec3, a, b);\n      out[0] = tmpvec3[0];\n      out[1] = tmpvec3[1];\n      out[2] = tmpvec3[2];\n      out[3] = 1 + dot;\n      return normalize(out, out);\n    }\n  };\n}();\n/**\n * Performs a spherical linear interpolation with two control points\n *\n * @param {quat} out the receiving quaternion\n * @param {ReadonlyQuat} a the first operand\n * @param {ReadonlyQuat} b the second operand\n * @param {ReadonlyQuat} c the third operand\n * @param {ReadonlyQuat} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat} out\n */\n\nexport var sqlerp = function () {\n  var temp1 = create();\n  var temp2 = create();\n  return function (out, a, b, c, d, t) {\n    slerp(temp1, a, d, t);\n    slerp(temp2, b, c, t);\n    slerp(out, temp1, temp2, 2 * t * (1 - t));\n    return out;\n  };\n}();\n/**\n * Sets the specified quaternion with values corresponding to the given\n * axes. Each axis is a vec3 and is expected to be unit length and\n * perpendicular to all other specified axes.\n *\n * @param {ReadonlyVec3} view  the vector representing the viewing direction\n * @param {ReadonlyVec3} right the vector representing the local \"right\" direction\n * @param {ReadonlyVec3} up    the vector representing the local \"up\" direction\n * @returns {quat} out\n */\n\nexport var setAxes = function () {\n  var matr = mat3.create();\n  return function (out, view, right, up) {\n    matr[0] = right[0];\n    matr[3] = right[1];\n    matr[6] = right[2];\n    matr[1] = up[0];\n    matr[4] = up[1];\n    matr[7] = up[2];\n    matr[2] = -view[0];\n    matr[5] = -view[1];\n    matr[8] = -view[2];\n    return normalize(out, fromMat3(out, matr));\n  };\n}();","import * as glMatrix from \"./common.js\";\nimport * as quat from \"./quat.js\";\nimport * as mat4 from \"./mat4.js\";\n/**\n * Dual Quaternion<br>\n * Format: [real, dual]<br>\n * Quaternion format: XYZW<br>\n * Make sure to have normalized dual quaternions, otherwise the functions may not work as intended.<br>\n * @module quat2\n */\n\n/**\n * Creates a new identity dual quat\n *\n * @returns {quat2} a new dual quaternion [real -> rotation, dual -> translation]\n */\n\nexport function create() {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    dq[0] = 0;\n    dq[1] = 0;\n    dq[2] = 0;\n    dq[4] = 0;\n    dq[5] = 0;\n    dq[6] = 0;\n    dq[7] = 0;\n  }\n\n  dq[3] = 1;\n  return dq;\n}\n/**\n * Creates a new quat initialized with values from an existing quaternion\n *\n * @param {ReadonlyQuat2} a dual quaternion to clone\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function clone(a) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = a[0];\n  dq[1] = a[1];\n  dq[2] = a[2];\n  dq[3] = a[3];\n  dq[4] = a[4];\n  dq[5] = a[5];\n  dq[6] = a[6];\n  dq[7] = a[7];\n  return dq;\n}\n/**\n * Creates a new dual quat initialized with the given values\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function fromValues(x1, y1, z1, w1, x2, y2, z2, w2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  dq[4] = x2;\n  dq[5] = y2;\n  dq[6] = z2;\n  dq[7] = w2;\n  return dq;\n}\n/**\n * Creates a new dual quat from the given values (quat and translation)\n *\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component (translation)\n * @param {Number} y2 Y component (translation)\n * @param {Number} z2 Z component (translation)\n * @returns {quat2} new dual quaternion\n * @function\n */\n\nexport function fromRotationTranslationValues(x1, y1, z1, w1, x2, y2, z2) {\n  var dq = new glMatrix.ARRAY_TYPE(8);\n  dq[0] = x1;\n  dq[1] = y1;\n  dq[2] = z1;\n  dq[3] = w1;\n  var ax = x2 * 0.5,\n      ay = y2 * 0.5,\n      az = z2 * 0.5;\n  dq[4] = ax * w1 + ay * z1 - az * y1;\n  dq[5] = ay * w1 + az * x1 - ax * z1;\n  dq[6] = az * w1 + ax * y1 - ay * x1;\n  dq[7] = -ax * x1 - ay * y1 - az * z1;\n  return dq;\n}\n/**\n * Creates a dual quat from a quaternion and a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q a normalized quaternion\n * @param {ReadonlyVec3} t tranlation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromRotationTranslation(out, q, t) {\n  var ax = t[0] * 0.5,\n      ay = t[1] * 0.5,\n      az = t[2] * 0.5,\n      bx = q[0],\n      by = q[1],\n      bz = q[2],\n      bw = q[3];\n  out[0] = bx;\n  out[1] = by;\n  out[2] = bz;\n  out[3] = bw;\n  out[4] = ax * bw + ay * bz - az * by;\n  out[5] = ay * bw + az * bx - ax * bz;\n  out[6] = az * bw + ax * by - ay * bx;\n  out[7] = -ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Creates a dual quat from a translation\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyVec3} t translation vector\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromTranslation(out, t) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = t[0] * 0.5;\n  out[5] = t[1] * 0.5;\n  out[6] = t[2] * 0.5;\n  out[7] = 0;\n  return out;\n}\n/**\n * Creates a dual quat from a quaternion\n *\n * @param {ReadonlyQuat2} dual quaternion receiving operation result\n * @param {ReadonlyQuat} q the quaternion\n * @returns {quat2} dual quaternion receiving operation result\n * @function\n */\n\nexport function fromRotation(out, q) {\n  out[0] = q[0];\n  out[1] = q[1];\n  out[2] = q[2];\n  out[3] = q[3];\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\n * Creates a new dual quat from a matrix (4x4)\n *\n * @param {quat2} out the dual quaternion\n * @param {ReadonlyMat4} a the matrix\n * @returns {quat2} dual quat receiving operation result\n * @function\n */\n\nexport function fromMat4(out, a) {\n  //TODO Optimize this\n  var outer = quat.create();\n  mat4.getRotation(outer, a);\n  var t = new glMatrix.ARRAY_TYPE(3);\n  mat4.getTranslation(t, a);\n  fromRotationTranslation(out, outer, t);\n  return out;\n}\n/**\n * Copy the values from one dual quat to another\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the source dual quaternion\n * @returns {quat2} out\n * @function\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  out[4] = a[4];\n  out[5] = a[5];\n  out[6] = a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\n * Set a dual quat to the identity dual quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @returns {quat2} out\n */\n\nexport function identity(out) {\n  out[0] = 0;\n  out[1] = 0;\n  out[2] = 0;\n  out[3] = 1;\n  out[4] = 0;\n  out[5] = 0;\n  out[6] = 0;\n  out[7] = 0;\n  return out;\n}\n/**\n * Set the components of a dual quat to the given values\n *\n * @param {quat2} out the receiving quaternion\n * @param {Number} x1 X component\n * @param {Number} y1 Y component\n * @param {Number} z1 Z component\n * @param {Number} w1 W component\n * @param {Number} x2 X component\n * @param {Number} y2 Y component\n * @param {Number} z2 Z component\n * @param {Number} w2 W component\n * @returns {quat2} out\n * @function\n */\n\nexport function set(out, x1, y1, z1, w1, x2, y2, z2, w2) {\n  out[0] = x1;\n  out[1] = y1;\n  out[2] = z1;\n  out[3] = w1;\n  out[4] = x2;\n  out[5] = y2;\n  out[6] = z2;\n  out[7] = w2;\n  return out;\n}\n/**\n * Gets the real part of a dual quat\n * @param  {quat} out real part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} real part\n */\n\nexport var getReal = quat.copy;\n/**\n * Gets the dual part of a dual quat\n * @param  {quat} out dual part\n * @param  {ReadonlyQuat2} a Dual Quaternion\n * @return {quat} dual part\n */\n\nexport function getDual(out, a) {\n  out[0] = a[4];\n  out[1] = a[5];\n  out[2] = a[6];\n  out[3] = a[7];\n  return out;\n}\n/**\n * Set the real component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the real part\n * @returns {quat2} out\n * @function\n */\n\nexport var setReal = quat.copy;\n/**\n * Set the dual component of a dual quat to the given quaternion\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat} q a quaternion representing the dual part\n * @returns {quat2} out\n * @function\n */\n\nexport function setDual(out, q) {\n  out[4] = q[0];\n  out[5] = q[1];\n  out[6] = q[2];\n  out[7] = q[3];\n  return out;\n}\n/**\n * Gets the translation of a normalized dual quat\n * @param  {vec3} out translation\n * @param  {ReadonlyQuat2} a Dual Quaternion to be decomposed\n * @return {vec3} translation\n */\n\nexport function getTranslation(out, a) {\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3];\n  out[0] = (ax * bw + aw * bx + ay * bz - az * by) * 2;\n  out[1] = (ay * bw + aw * by + az * bx - ax * bz) * 2;\n  out[2] = (az * bw + aw * bz + ax * by - ay * bx) * 2;\n  return out;\n}\n/**\n * Translates a dual quat by the given vector\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to translate\n * @param {ReadonlyVec3} v vector to translate by\n * @returns {quat2} out\n */\n\nexport function translate(out, a, v) {\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3],\n      bx1 = v[0] * 0.5,\n      by1 = v[1] * 0.5,\n      bz1 = v[2] * 0.5,\n      ax2 = a[4],\n      ay2 = a[5],\n      az2 = a[6],\n      aw2 = a[7];\n  out[0] = ax1;\n  out[1] = ay1;\n  out[2] = az1;\n  out[3] = aw1;\n  out[4] = aw1 * bx1 + ay1 * bz1 - az1 * by1 + ax2;\n  out[5] = aw1 * by1 + az1 * bx1 - ax1 * bz1 + ay2;\n  out[6] = aw1 * bz1 + ax1 * by1 - ay1 * bx1 + az2;\n  out[7] = -ax1 * bx1 - ay1 * by1 - az1 * bz1 + aw2;\n  return out;\n}\n/**\n * Rotates a dual quat around the X axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateX(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateX(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around the Y axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateY(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateY(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around the Z axis\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {number} rad how far should the rotation be\n * @returns {quat2} out\n */\n\nexport function rotateZ(out, a, rad) {\n  var bx = -a[0],\n      by = -a[1],\n      bz = -a[2],\n      bw = a[3],\n      ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7],\n      ax1 = ax * bw + aw * bx + ay * bz - az * by,\n      ay1 = ay * bw + aw * by + az * bx - ax * bz,\n      az1 = az * bw + aw * bz + ax * by - ay * bx,\n      aw1 = aw * bw - ax * bx - ay * by - az * bz;\n  quat.rotateZ(out, a, rad);\n  bx = out[0];\n  by = out[1];\n  bz = out[2];\n  bw = out[3];\n  out[4] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[5] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[6] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[7] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  return out;\n}\n/**\n * Rotates a dual quat by a given quaternion (a * q)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @returns {quat2} out\n */\n\nexport function rotateByQuatAppend(out, a, q) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      ax = a[0],\n      ay = a[1],\n      az = a[2],\n      aw = a[3];\n  out[0] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[1] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[2] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[3] = aw * qw - ax * qx - ay * qy - az * qz;\n  ax = a[4];\n  ay = a[5];\n  az = a[6];\n  aw = a[7];\n  out[4] = ax * qw + aw * qx + ay * qz - az * qy;\n  out[5] = ay * qw + aw * qy + az * qx - ax * qz;\n  out[6] = az * qw + aw * qz + ax * qy - ay * qx;\n  out[7] = aw * qw - ax * qx - ay * qy - az * qz;\n  return out;\n}\n/**\n * Rotates a dual quat by a given quaternion (q * a)\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat} q quaternion to rotate by\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @returns {quat2} out\n */\n\nexport function rotateByQuatPrepend(out, q, a) {\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3],\n      bx = a[0],\n      by = a[1],\n      bz = a[2],\n      bw = a[3];\n  out[0] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[1] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[2] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[3] = qw * bw - qx * bx - qy * by - qz * bz;\n  bx = a[4];\n  by = a[5];\n  bz = a[6];\n  bw = a[7];\n  out[4] = qx * bw + qw * bx + qy * bz - qz * by;\n  out[5] = qy * bw + qw * by + qz * bx - qx * bz;\n  out[6] = qz * bw + qw * bz + qx * by - qy * bx;\n  out[7] = qw * bw - qx * bx - qy * by - qz * bz;\n  return out;\n}\n/**\n * Rotates a dual quat around a given axis. Does the normalisation automatically\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the dual quaternion to rotate\n * @param {ReadonlyVec3} axis the axis to rotate around\n * @param {Number} rad how far the rotation should be\n * @returns {quat2} out\n */\n\nexport function rotateAroundAxis(out, a, axis, rad) {\n  //Special case for rad = 0\n  if (Math.abs(rad) < glMatrix.EPSILON) {\n    return copy(out, a);\n  }\n\n  var axisLength = Math.hypot(axis[0], axis[1], axis[2]);\n  rad = rad * 0.5;\n  var s = Math.sin(rad);\n  var bx = s * axis[0] / axisLength;\n  var by = s * axis[1] / axisLength;\n  var bz = s * axis[2] / axisLength;\n  var bw = Math.cos(rad);\n  var ax1 = a[0],\n      ay1 = a[1],\n      az1 = a[2],\n      aw1 = a[3];\n  out[0] = ax1 * bw + aw1 * bx + ay1 * bz - az1 * by;\n  out[1] = ay1 * bw + aw1 * by + az1 * bx - ax1 * bz;\n  out[2] = az1 * bw + aw1 * bz + ax1 * by - ay1 * bx;\n  out[3] = aw1 * bw - ax1 * bx - ay1 * by - az1 * bz;\n  var ax = a[4],\n      ay = a[5],\n      az = a[6],\n      aw = a[7];\n  out[4] = ax * bw + aw * bx + ay * bz - az * by;\n  out[5] = ay * bw + aw * by + az * bx - ax * bz;\n  out[6] = az * bw + aw * bz + ax * by - ay * bx;\n  out[7] = aw * bw - ax * bx - ay * by - az * bz;\n  return out;\n}\n/**\n * Adds two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n * @function\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  out[4] = a[4] + b[4];\n  out[5] = a[5] + b[5];\n  out[6] = a[6] + b[6];\n  out[7] = a[7] + b[7];\n  return out;\n}\n/**\n * Multiplies two dual quat's\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {quat2} out\n */\n\nexport function multiply(out, a, b) {\n  var ax0 = a[0],\n      ay0 = a[1],\n      az0 = a[2],\n      aw0 = a[3],\n      bx1 = b[4],\n      by1 = b[5],\n      bz1 = b[6],\n      bw1 = b[7],\n      ax1 = a[4],\n      ay1 = a[5],\n      az1 = a[6],\n      aw1 = a[7],\n      bx0 = b[0],\n      by0 = b[1],\n      bz0 = b[2],\n      bw0 = b[3];\n  out[0] = ax0 * bw0 + aw0 * bx0 + ay0 * bz0 - az0 * by0;\n  out[1] = ay0 * bw0 + aw0 * by0 + az0 * bx0 - ax0 * bz0;\n  out[2] = az0 * bw0 + aw0 * bz0 + ax0 * by0 - ay0 * bx0;\n  out[3] = aw0 * bw0 - ax0 * bx0 - ay0 * by0 - az0 * bz0;\n  out[4] = ax0 * bw1 + aw0 * bx1 + ay0 * bz1 - az0 * by1 + ax1 * bw0 + aw1 * bx0 + ay1 * bz0 - az1 * by0;\n  out[5] = ay0 * bw1 + aw0 * by1 + az0 * bx1 - ax0 * bz1 + ay1 * bw0 + aw1 * by0 + az1 * bx0 - ax1 * bz0;\n  out[6] = az0 * bw1 + aw0 * bz1 + ax0 * by1 - ay0 * bx1 + az1 * bw0 + aw1 * bz0 + ax1 * by0 - ay1 * bx0;\n  out[7] = aw0 * bw1 - ax0 * bx1 - ay0 * by1 - az0 * bz1 + aw1 * bw0 - ax1 * bx0 - ay1 * by0 - az1 * bz0;\n  return out;\n}\n/**\n * Alias for {@link quat2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Scales a dual quat by a scalar number\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the dual quat to scale\n * @param {Number} b amount to scale the dual quat by\n * @returns {quat2} out\n * @function\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  out[4] = a[4] * b;\n  out[5] = a[5] * b;\n  out[6] = a[6] * b;\n  out[7] = a[7] * b;\n  return out;\n}\n/**\n * Calculates the dot product of two dual quat's (The dot product of the real parts)\n *\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @returns {Number} dot product of a and b\n * @function\n */\n\nexport var dot = quat.dot;\n/**\n * Performs a linear interpolation between two dual quats's\n * NOTE: The resulting dual quaternions won't always be normalized (The error is most noticeable when t = 0.5)\n *\n * @param {quat2} out the receiving dual quat\n * @param {ReadonlyQuat2} a the first operand\n * @param {ReadonlyQuat2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {quat2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var mt = 1 - t;\n  if (dot(a, b) < 0) t = -t;\n  out[0] = a[0] * mt + b[0] * t;\n  out[1] = a[1] * mt + b[1] * t;\n  out[2] = a[2] * mt + b[2] * t;\n  out[3] = a[3] * mt + b[3] * t;\n  out[4] = a[4] * mt + b[4] * t;\n  out[5] = a[5] * mt + b[5] * t;\n  out[6] = a[6] * mt + b[6] * t;\n  out[7] = a[7] * mt + b[7] * t;\n  return out;\n}\n/**\n * Calculates the inverse of a dual quat. If they are normalized, conjugate is cheaper\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quat to calculate inverse of\n * @returns {quat2} out\n */\n\nexport function invert(out, a) {\n  var sqlen = squaredLength(a);\n  out[0] = -a[0] / sqlen;\n  out[1] = -a[1] / sqlen;\n  out[2] = -a[2] / sqlen;\n  out[3] = a[3] / sqlen;\n  out[4] = -a[4] / sqlen;\n  out[5] = -a[5] / sqlen;\n  out[6] = -a[6] / sqlen;\n  out[7] = a[7] / sqlen;\n  return out;\n}\n/**\n * Calculates the conjugate of a dual quat\n * If the dual quaternion is normalized, this function is faster than quat2.inverse and produces the same result.\n *\n * @param {quat2} out the receiving quaternion\n * @param {ReadonlyQuat2} a quat to calculate conjugate of\n * @returns {quat2} out\n */\n\nexport function conjugate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = a[3];\n  out[4] = -a[4];\n  out[5] = -a[5];\n  out[6] = -a[6];\n  out[7] = a[7];\n  return out;\n}\n/**\n * Calculates the length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate length of\n * @returns {Number} length of a\n * @function\n */\n\nexport var length = quat.length;\n/**\n * Alias for {@link quat2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Calculates the squared length of a dual quat\n *\n * @param {ReadonlyQuat2} a dual quat to calculate squared length of\n * @returns {Number} squared length of a\n * @function\n */\n\nexport var squaredLength = quat.squaredLength;\n/**\n * Alias for {@link quat2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Normalize a dual quat\n *\n * @param {quat2} out the receiving dual quaternion\n * @param {ReadonlyQuat2} a dual quaternion to normalize\n * @returns {quat2} out\n * @function\n */\n\nexport function normalize(out, a) {\n  var magnitude = squaredLength(a);\n\n  if (magnitude > 0) {\n    magnitude = Math.sqrt(magnitude);\n    var a0 = a[0] / magnitude;\n    var a1 = a[1] / magnitude;\n    var a2 = a[2] / magnitude;\n    var a3 = a[3] / magnitude;\n    var b0 = a[4];\n    var b1 = a[5];\n    var b2 = a[6];\n    var b3 = a[7];\n    var a_dot_b = a0 * b0 + a1 * b1 + a2 * b2 + a3 * b3;\n    out[0] = a0;\n    out[1] = a1;\n    out[2] = a2;\n    out[3] = a3;\n    out[4] = (b0 - a0 * a_dot_b) / magnitude;\n    out[5] = (b1 - a1 * a_dot_b) / magnitude;\n    out[6] = (b2 - a2 * a_dot_b) / magnitude;\n    out[7] = (b3 - a3 * a_dot_b) / magnitude;\n  }\n\n  return out;\n}\n/**\n * Returns a string representation of a dual quatenion\n *\n * @param {ReadonlyQuat2} a dual quaternion to represent as a string\n * @returns {String} string representation of the dual quat\n */\n\nexport function str(a) {\n  return \"quat2(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \", \" + a[4] + \", \" + a[5] + \", \" + a[6] + \", \" + a[7] + \")\";\n}\n/**\n * Returns whether or not the dual quaternions have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyQuat2} a the first dual quaternion.\n * @param {ReadonlyQuat2} b the second dual quaternion.\n * @returns {Boolean} true if the dual quaternions are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3] && a[4] === b[4] && a[5] === b[5] && a[6] === b[6] && a[7] === b[7];\n}\n/**\n * Returns whether or not the dual quaternions have approximately the same elements in the same position.\n *\n * @param {ReadonlyQuat2} a the first dual quat.\n * @param {ReadonlyQuat2} b the second dual quat.\n * @returns {Boolean} true if the dual quats are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3],\n      a4 = a[4],\n      a5 = a[5],\n      a6 = a[6],\n      a7 = a[7];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3],\n      b4 = b[4],\n      b5 = b[5],\n      b6 = b[6],\n      b7 = b[7];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3)) && Math.abs(a4 - b4) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a4), Math.abs(b4)) && Math.abs(a5 - b5) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a5), Math.abs(b5)) && Math.abs(a6 - b6) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a6), Math.abs(b6)) && Math.abs(a7 - b7) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a7), Math.abs(b7));\n}","import * as glMatrix from \"./common.js\";\n/**\n * 2 Dimensional Vector\n * @module vec2\n */\n\n/**\n * Creates a new, empty vec2\n *\n * @returns {vec2} a new 2D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(2);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec2 initialized with values from an existing vector\n *\n * @param {ReadonlyVec2} a vector to clone\n * @returns {vec2} a new 2D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Creates a new vec2 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} a new 2D vector\n */\n\nexport function fromValues(x, y) {\n  var out = new glMatrix.ARRAY_TYPE(2);\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Copy the values from one vec2 to another\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the source vector\n * @returns {vec2} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  return out;\n}\n/**\n * Set the components of a vec2 to the given values\n *\n * @param {vec2} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @returns {vec2} out\n */\n\nexport function set(out, x, y) {\n  out[0] = x;\n  out[1] = y;\n  return out;\n}\n/**\n * Adds two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  return out;\n}\n/**\n * Multiplies two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  return out;\n}\n/**\n * Divides two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  return out;\n}\n/**\n * Math.ceil the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to ceil\n * @returns {vec2} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  return out;\n}\n/**\n * Math.floor the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to floor\n * @returns {vec2} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  return out;\n}\n/**\n * Returns the minimum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  return out;\n}\n/**\n * Returns the maximum of two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec2} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  return out;\n}\n/**\n * Math.round the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to round\n * @returns {vec2} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  return out;\n}\n/**\n * Scales a vec2 by a scalar number\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec2} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  return out;\n}\n/**\n * Adds two vec2's after scaling the second operand by a scalar value\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec2} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared euclidian distance between two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0],\n      y = b[1] - a[1];\n  return x * x + y * y;\n}\n/**\n * Calculates the length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0],\n      y = a[1];\n  return Math.hypot(x, y);\n}\n/**\n * Calculates the squared length of a vec2\n *\n * @param {ReadonlyVec2} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0],\n      y = a[1];\n  return x * x + y * y;\n}\n/**\n * Negates the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to negate\n * @returns {vec2} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to invert\n * @returns {vec2} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  return out;\n}\n/**\n * Normalize a vec2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a vector to normalize\n * @returns {vec2} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0],\n      y = a[1];\n  var len = x * x + y * y;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec2's\n *\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1];\n}\n/**\n * Computes the cross product of two vec2's\n * Note that the cross product must by definition produce a 3D vector\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var z = a[0] * b[1] - a[1] * b[0];\n  out[0] = out[1] = 0;\n  out[2] = z;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec2's\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the first operand\n * @param {ReadonlyVec2} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec2} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0],\n      ay = a[1];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec2} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec2} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  out[0] = Math.cos(r) * scale;\n  out[1] = Math.sin(r) * scale;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y;\n  out[1] = m[1] * x + m[3] * y;\n  return out;\n}\n/**\n * Transforms the vec2 with a mat2d\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat2d} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat2d(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[2] * y + m[4];\n  out[1] = m[1] * x + m[3] * y + m[5];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat3\n * 3rd vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat3} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1];\n  out[0] = m[0] * x + m[3] * y + m[6];\n  out[1] = m[1] * x + m[4] * y + m[7];\n  return out;\n}\n/**\n * Transforms the vec2 with a mat4\n * 3rd vector component is implicitly '0'\n * 4th vector component is implicitly '1'\n *\n * @param {vec2} out the receiving vector\n * @param {ReadonlyVec2} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec2} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0];\n  var y = a[1];\n  out[0] = m[0] * x + m[4] * y + m[12];\n  out[1] = m[1] * x + m[5] * y + m[13];\n  return out;\n}\n/**\n * Rotate a 2D vector\n * @param {vec2} out The receiving vec2\n * @param {ReadonlyVec2} a The vec2 point to rotate\n * @param {ReadonlyVec2} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec2} out\n */\n\nexport function rotate(out, a, b, rad) {\n  //Translate point to the origin\n  var p0 = a[0] - b[0],\n      p1 = a[1] - b[1],\n      sinC = Math.sin(rad),\n      cosC = Math.cos(rad); //perform rotation and translate to correct position\n\n  out[0] = p0 * cosC - p1 * sinC + b[0];\n  out[1] = p0 * sinC + p1 * cosC + b[1];\n  return out;\n}\n/**\n * Get the angle between two 2D vectors\n * @param {ReadonlyVec2} a The first operand\n * @param {ReadonlyVec2} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var x1 = a[0],\n      y1 = a[1],\n      x2 = b[0],\n      y2 = b[1],\n      // mag is the product of the magnitudes of a and b\n  mag = Math.sqrt(x1 * x1 + y1 * y1) * Math.sqrt(x2 * x2 + y2 * y2),\n      // mag &&.. short circuits if mag == 0\n  cosine = mag && (x1 * x2 + y1 * y2) / mag; // Math.min(Math.max(cosine, -1), 1) clamps the cosine between -1 and 1\n\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec2 to zero\n *\n * @param {vec2} out the receiving vector\n * @returns {vec2} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec2} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec2(\" + a[0] + \", \" + a[1] + \")\";\n}\n/**\n * Returns whether or not the vectors exactly have the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec2} a The first vector.\n * @param {ReadonlyVec2} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1];\n  var b0 = b[0],\n      b1 = b[1];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1));\n}\n/**\n * Alias for {@link vec2.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec2.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec2.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec2.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec2.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec2.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec2.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec2s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec2. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec2s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 2;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 3 Dimensional Vector\n * @module vec3\n */\n\n/**\n * Creates a new, empty vec3\n *\n * @returns {vec3} a new 3D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(3);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec3 initialized with values from an existing vector\n *\n * @param {ReadonlyVec3} a vector to clone\n * @returns {vec3} a new 3D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Calculates the length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Creates a new vec3 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} a new 3D vector\n */\n\nexport function fromValues(x, y, z) {\n  var out = new glMatrix.ARRAY_TYPE(3);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Copy the values from one vec3 to another\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the source vector\n * @returns {vec3} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  return out;\n}\n/**\n * Set the components of a vec3 to the given values\n *\n * @param {vec3} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @returns {vec3} out\n */\n\nexport function set(out, x, y, z) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  return out;\n}\n/**\n * Adds two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  return out;\n}\n/**\n * Multiplies two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  return out;\n}\n/**\n * Divides two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  return out;\n}\n/**\n * Math.ceil the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to ceil\n * @returns {vec3} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  return out;\n}\n/**\n * Math.floor the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to floor\n * @returns {vec3} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  return out;\n}\n/**\n * Returns the minimum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  return out;\n}\n/**\n * Returns the maximum of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  return out;\n}\n/**\n * Math.round the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to round\n * @returns {vec3} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  return out;\n}\n/**\n * Scales a vec3 by a scalar number\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec3} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  return out;\n}\n/**\n * Adds two vec3's after scaling the second operand by a scalar value\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec3} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return Math.hypot(x, y, z);\n}\n/**\n * Calculates the squared euclidian distance between two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Calculates the squared length of a vec3\n *\n * @param {ReadonlyVec3} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  return x * x + y * y + z * z;\n}\n/**\n * Negates the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to negate\n * @returns {vec3} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to invert\n * @returns {vec3} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  return out;\n}\n/**\n * Normalize a vec3\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a vector to normalize\n * @returns {vec3} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var len = x * x + y * y + z * z;\n\n  if (len > 0) {\n    //TODO: evaluate use of glm_invsqrt here?\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = a[0] * len;\n  out[1] = a[1] * len;\n  out[2] = a[2] * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec3's\n *\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2];\n}\n/**\n * Computes the cross product of two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @returns {vec3} out\n */\n\nexport function cross(out, a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2];\n  var bx = b[0],\n      by = b[1],\n      bz = b[2];\n  out[0] = ay * bz - az * by;\n  out[1] = az * bx - ax * bz;\n  out[2] = ax * by - ay * bx;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec3's\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  return out;\n}\n/**\n * Performs a hermite interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function hermite(out, a, b, c, d, t) {\n  var factorTimes2 = t * t;\n  var factor1 = factorTimes2 * (2 * t - 3) + 1;\n  var factor2 = factorTimes2 * (t - 2) + t;\n  var factor3 = factorTimes2 * (t - 1);\n  var factor4 = factorTimes2 * (3 - 2 * t);\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Performs a bezier interpolation with two control points\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the first operand\n * @param {ReadonlyVec3} b the second operand\n * @param {ReadonlyVec3} c the third operand\n * @param {ReadonlyVec3} d the fourth operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec3} out\n */\n\nexport function bezier(out, a, b, c, d, t) {\n  var inverseFactor = 1 - t;\n  var inverseFactorTimesTwo = inverseFactor * inverseFactor;\n  var factorTimes2 = t * t;\n  var factor1 = inverseFactorTimesTwo * inverseFactor;\n  var factor2 = 3 * t * inverseFactorTimesTwo;\n  var factor3 = 3 * factorTimes2 * inverseFactor;\n  var factor4 = factorTimes2 * t;\n  out[0] = a[0] * factor1 + b[0] * factor2 + c[0] * factor3 + d[0] * factor4;\n  out[1] = a[1] * factor1 + b[1] * factor2 + c[1] * factor3 + d[1] * factor4;\n  out[2] = a[2] * factor1 + b[2] * factor2 + c[2] * factor3 + d[2] * factor4;\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec3} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec3} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0;\n  var r = glMatrix.RANDOM() * 2.0 * Math.PI;\n  var z = glMatrix.RANDOM() * 2.0 - 1.0;\n  var zScale = Math.sqrt(1.0 - z * z) * scale;\n  out[0] = Math.cos(r) * zScale;\n  out[1] = Math.sin(r) * zScale;\n  out[2] = z * scale;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat4.\n * 4th vector component is implicitly '1'\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var w = m[3] * x + m[7] * y + m[11] * z + m[15];\n  w = w || 1.0;\n  out[0] = (m[0] * x + m[4] * y + m[8] * z + m[12]) / w;\n  out[1] = (m[1] * x + m[5] * y + m[9] * z + m[13]) / w;\n  out[2] = (m[2] * x + m[6] * y + m[10] * z + m[14]) / w;\n  return out;\n}\n/**\n * Transforms the vec3 with a mat3.\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyMat3} m the 3x3 matrix to transform with\n * @returns {vec3} out\n */\n\nexport function transformMat3(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  out[0] = x * m[0] + y * m[3] + z * m[6];\n  out[1] = x * m[1] + y * m[4] + z * m[7];\n  out[2] = x * m[2] + y * m[5] + z * m[8];\n  return out;\n}\n/**\n * Transforms the vec3 with a quat\n * Can also be used for dual quaternions. (Multiply it with the real part)\n *\n * @param {vec3} out the receiving vector\n * @param {ReadonlyVec3} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec3} out\n */\n\nexport function transformQuat(out, a, q) {\n  // benchmarks: https://jsperf.com/quaternion-transform-vec3-implementations-fixed\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3];\n  var x = a[0],\n      y = a[1],\n      z = a[2]; // var qvec = [qx, qy, qz];\n  // var uv = vec3.cross([], qvec, a);\n\n  var uvx = qy * z - qz * y,\n      uvy = qz * x - qx * z,\n      uvz = qx * y - qy * x; // var uuv = vec3.cross([], qvec, uv);\n\n  var uuvx = qy * uvz - qz * uvy,\n      uuvy = qz * uvx - qx * uvz,\n      uuvz = qx * uvy - qy * uvx; // vec3.scale(uv, uv, 2 * w);\n\n  var w2 = qw * 2;\n  uvx *= w2;\n  uvy *= w2;\n  uvz *= w2; // vec3.scale(uuv, uuv, 2);\n\n  uuvx *= 2;\n  uuvy *= 2;\n  uuvz *= 2; // return vec3.add(out, a, vec3.add(out, uv, uuv));\n\n  out[0] = x + uvx + uuvx;\n  out[1] = y + uvy + uuvy;\n  out[2] = z + uvz + uuvz;\n  return out;\n}\n/**\n * Rotate a 3D vector around the x-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateX(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0];\n  r[1] = p[1] * Math.cos(rad) - p[2] * Math.sin(rad);\n  r[2] = p[1] * Math.sin(rad) + p[2] * Math.cos(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the y-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateY(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[2] * Math.sin(rad) + p[0] * Math.cos(rad);\n  r[1] = p[1];\n  r[2] = p[2] * Math.cos(rad) - p[0] * Math.sin(rad); //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Rotate a 3D vector around the z-axis\n * @param {vec3} out The receiving vec3\n * @param {ReadonlyVec3} a The vec3 point to rotate\n * @param {ReadonlyVec3} b The origin of the rotation\n * @param {Number} rad The angle of rotation in radians\n * @returns {vec3} out\n */\n\nexport function rotateZ(out, a, b, rad) {\n  var p = [],\n      r = []; //Translate point to the origin\n\n  p[0] = a[0] - b[0];\n  p[1] = a[1] - b[1];\n  p[2] = a[2] - b[2]; //perform rotation\n\n  r[0] = p[0] * Math.cos(rad) - p[1] * Math.sin(rad);\n  r[1] = p[0] * Math.sin(rad) + p[1] * Math.cos(rad);\n  r[2] = p[2]; //translate to correct position\n\n  out[0] = r[0] + b[0];\n  out[1] = r[1] + b[1];\n  out[2] = r[2] + b[2];\n  return out;\n}\n/**\n * Get the angle between two 3D vectors\n * @param {ReadonlyVec3} a The first operand\n * @param {ReadonlyVec3} b The second operand\n * @returns {Number} The angle in radians\n */\n\nexport function angle(a, b) {\n  var ax = a[0],\n      ay = a[1],\n      az = a[2],\n      bx = b[0],\n      by = b[1],\n      bz = b[2],\n      mag1 = Math.sqrt(ax * ax + ay * ay + az * az),\n      mag2 = Math.sqrt(bx * bx + by * by + bz * bz),\n      mag = mag1 * mag2,\n      cosine = mag && dot(a, b) / mag;\n  return Math.acos(Math.min(Math.max(cosine, -1), 1));\n}\n/**\n * Set the components of a vec3 to zero\n *\n * @param {vec3} out the receiving vector\n * @returns {vec3} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec3} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec3(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec3} a The first vector.\n * @param {ReadonlyVec3} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2));\n}\n/**\n * Alias for {@link vec3.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec3.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec3.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec3.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec3.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec3.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec3.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec3s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec3. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec3s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 3;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n    }\n\n    return a;\n  };\n}();","import * as glMatrix from \"./common.js\";\n/**\n * 4 Dimensional Vector\n * @module vec4\n */\n\n/**\n * Creates a new, empty vec4\n *\n * @returns {vec4} a new 4D vector\n */\n\nexport function create() {\n  var out = new glMatrix.ARRAY_TYPE(4);\n\n  if (glMatrix.ARRAY_TYPE != Float32Array) {\n    out[0] = 0;\n    out[1] = 0;\n    out[2] = 0;\n    out[3] = 0;\n  }\n\n  return out;\n}\n/**\n * Creates a new vec4 initialized with values from an existing vector\n *\n * @param {ReadonlyVec4} a vector to clone\n * @returns {vec4} a new 4D vector\n */\n\nexport function clone(a) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Creates a new vec4 initialized with the given values\n *\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} a new 4D vector\n */\n\nexport function fromValues(x, y, z, w) {\n  var out = new glMatrix.ARRAY_TYPE(4);\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Copy the values from one vec4 to another\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the source vector\n * @returns {vec4} out\n */\n\nexport function copy(out, a) {\n  out[0] = a[0];\n  out[1] = a[1];\n  out[2] = a[2];\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to the given values\n *\n * @param {vec4} out the receiving vector\n * @param {Number} x X component\n * @param {Number} y Y component\n * @param {Number} z Z component\n * @param {Number} w W component\n * @returns {vec4} out\n */\n\nexport function set(out, x, y, z, w) {\n  out[0] = x;\n  out[1] = y;\n  out[2] = z;\n  out[3] = w;\n  return out;\n}\n/**\n * Adds two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function add(out, a, b) {\n  out[0] = a[0] + b[0];\n  out[1] = a[1] + b[1];\n  out[2] = a[2] + b[2];\n  out[3] = a[3] + b[3];\n  return out;\n}\n/**\n * Subtracts vector b from vector a\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function subtract(out, a, b) {\n  out[0] = a[0] - b[0];\n  out[1] = a[1] - b[1];\n  out[2] = a[2] - b[2];\n  out[3] = a[3] - b[3];\n  return out;\n}\n/**\n * Multiplies two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function multiply(out, a, b) {\n  out[0] = a[0] * b[0];\n  out[1] = a[1] * b[1];\n  out[2] = a[2] * b[2];\n  out[3] = a[3] * b[3];\n  return out;\n}\n/**\n * Divides two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function divide(out, a, b) {\n  out[0] = a[0] / b[0];\n  out[1] = a[1] / b[1];\n  out[2] = a[2] / b[2];\n  out[3] = a[3] / b[3];\n  return out;\n}\n/**\n * Math.ceil the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to ceil\n * @returns {vec4} out\n */\n\nexport function ceil(out, a) {\n  out[0] = Math.ceil(a[0]);\n  out[1] = Math.ceil(a[1]);\n  out[2] = Math.ceil(a[2]);\n  out[3] = Math.ceil(a[3]);\n  return out;\n}\n/**\n * Math.floor the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to floor\n * @returns {vec4} out\n */\n\nexport function floor(out, a) {\n  out[0] = Math.floor(a[0]);\n  out[1] = Math.floor(a[1]);\n  out[2] = Math.floor(a[2]);\n  out[3] = Math.floor(a[3]);\n  return out;\n}\n/**\n * Returns the minimum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function min(out, a, b) {\n  out[0] = Math.min(a[0], b[0]);\n  out[1] = Math.min(a[1], b[1]);\n  out[2] = Math.min(a[2], b[2]);\n  out[3] = Math.min(a[3], b[3]);\n  return out;\n}\n/**\n * Returns the maximum of two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {vec4} out\n */\n\nexport function max(out, a, b) {\n  out[0] = Math.max(a[0], b[0]);\n  out[1] = Math.max(a[1], b[1]);\n  out[2] = Math.max(a[2], b[2]);\n  out[3] = Math.max(a[3], b[3]);\n  return out;\n}\n/**\n * Math.round the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to round\n * @returns {vec4} out\n */\n\nexport function round(out, a) {\n  out[0] = Math.round(a[0]);\n  out[1] = Math.round(a[1]);\n  out[2] = Math.round(a[2]);\n  out[3] = Math.round(a[3]);\n  return out;\n}\n/**\n * Scales a vec4 by a scalar number\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to scale\n * @param {Number} b amount to scale the vector by\n * @returns {vec4} out\n */\n\nexport function scale(out, a, b) {\n  out[0] = a[0] * b;\n  out[1] = a[1] * b;\n  out[2] = a[2] * b;\n  out[3] = a[3] * b;\n  return out;\n}\n/**\n * Adds two vec4's after scaling the second operand by a scalar value\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} scale the amount to scale b by before adding\n * @returns {vec4} out\n */\n\nexport function scaleAndAdd(out, a, b, scale) {\n  out[0] = a[0] + b[0] * scale;\n  out[1] = a[1] + b[1] * scale;\n  out[2] = a[2] + b[2] * scale;\n  out[3] = a[3] + b[3] * scale;\n  return out;\n}\n/**\n * Calculates the euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} distance between a and b\n */\n\nexport function distance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared euclidian distance between two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} squared distance between a and b\n */\n\nexport function squaredDistance(a, b) {\n  var x = b[0] - a[0];\n  var y = b[1] - a[1];\n  var z = b[2] - a[2];\n  var w = b[3] - a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Calculates the length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate length of\n * @returns {Number} length of a\n */\n\nexport function length(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return Math.hypot(x, y, z, w);\n}\n/**\n * Calculates the squared length of a vec4\n *\n * @param {ReadonlyVec4} a vector to calculate squared length of\n * @returns {Number} squared length of a\n */\n\nexport function squaredLength(a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  return x * x + y * y + z * z + w * w;\n}\n/**\n * Negates the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to negate\n * @returns {vec4} out\n */\n\nexport function negate(out, a) {\n  out[0] = -a[0];\n  out[1] = -a[1];\n  out[2] = -a[2];\n  out[3] = -a[3];\n  return out;\n}\n/**\n * Returns the inverse of the components of a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to invert\n * @returns {vec4} out\n */\n\nexport function inverse(out, a) {\n  out[0] = 1.0 / a[0];\n  out[1] = 1.0 / a[1];\n  out[2] = 1.0 / a[2];\n  out[3] = 1.0 / a[3];\n  return out;\n}\n/**\n * Normalize a vec4\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a vector to normalize\n * @returns {vec4} out\n */\n\nexport function normalize(out, a) {\n  var x = a[0];\n  var y = a[1];\n  var z = a[2];\n  var w = a[3];\n  var len = x * x + y * y + z * z + w * w;\n\n  if (len > 0) {\n    len = 1 / Math.sqrt(len);\n  }\n\n  out[0] = x * len;\n  out[1] = y * len;\n  out[2] = z * len;\n  out[3] = w * len;\n  return out;\n}\n/**\n * Calculates the dot product of two vec4's\n *\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @returns {Number} dot product of a and b\n */\n\nexport function dot(a, b) {\n  return a[0] * b[0] + a[1] * b[1] + a[2] * b[2] + a[3] * b[3];\n}\n/**\n * Returns the cross-product of three vectors in a 4-dimensional space\n *\n * @param {ReadonlyVec4} result the receiving vector\n * @param {ReadonlyVec4} U the first vector\n * @param {ReadonlyVec4} V the second vector\n * @param {ReadonlyVec4} W the third vector\n * @returns {vec4} result\n */\n\nexport function cross(out, u, v, w) {\n  var A = v[0] * w[1] - v[1] * w[0],\n      B = v[0] * w[2] - v[2] * w[0],\n      C = v[0] * w[3] - v[3] * w[0],\n      D = v[1] * w[2] - v[2] * w[1],\n      E = v[1] * w[3] - v[3] * w[1],\n      F = v[2] * w[3] - v[3] * w[2];\n  var G = u[0];\n  var H = u[1];\n  var I = u[2];\n  var J = u[3];\n  out[0] = H * F - I * E + J * D;\n  out[1] = -(G * F) + I * C - J * B;\n  out[2] = G * E - H * C + J * A;\n  out[3] = -(G * D) + H * B - I * A;\n  return out;\n}\n/**\n * Performs a linear interpolation between two vec4's\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the first operand\n * @param {ReadonlyVec4} b the second operand\n * @param {Number} t interpolation amount, in the range [0-1], between the two inputs\n * @returns {vec4} out\n */\n\nexport function lerp(out, a, b, t) {\n  var ax = a[0];\n  var ay = a[1];\n  var az = a[2];\n  var aw = a[3];\n  out[0] = ax + t * (b[0] - ax);\n  out[1] = ay + t * (b[1] - ay);\n  out[2] = az + t * (b[2] - az);\n  out[3] = aw + t * (b[3] - aw);\n  return out;\n}\n/**\n * Generates a random vector with the given scale\n *\n * @param {vec4} out the receiving vector\n * @param {Number} [scale] Length of the resulting vector. If ommitted, a unit vector will be returned\n * @returns {vec4} out\n */\n\nexport function random(out, scale) {\n  scale = scale || 1.0; // Marsaglia, George. Choosing a Point from the Surface of a\n  // Sphere. Ann. Math. Statist. 43 (1972), no. 2, 645--646.\n  // http://projecteuclid.org/euclid.aoms/1177692644;\n\n  var v1, v2, v3, v4;\n  var s1, s2;\n\n  do {\n    v1 = glMatrix.RANDOM() * 2 - 1;\n    v2 = glMatrix.RANDOM() * 2 - 1;\n    s1 = v1 * v1 + v2 * v2;\n  } while (s1 >= 1);\n\n  do {\n    v3 = glMatrix.RANDOM() * 2 - 1;\n    v4 = glMatrix.RANDOM() * 2 - 1;\n    s2 = v3 * v3 + v4 * v4;\n  } while (s2 >= 1);\n\n  var d = Math.sqrt((1 - s1) / s2);\n  out[0] = scale * v1;\n  out[1] = scale * v2;\n  out[2] = scale * v3 * d;\n  out[3] = scale * v4 * d;\n  return out;\n}\n/**\n * Transforms the vec4 with a mat4.\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyMat4} m matrix to transform with\n * @returns {vec4} out\n */\n\nexport function transformMat4(out, a, m) {\n  var x = a[0],\n      y = a[1],\n      z = a[2],\n      w = a[3];\n  out[0] = m[0] * x + m[4] * y + m[8] * z + m[12] * w;\n  out[1] = m[1] * x + m[5] * y + m[9] * z + m[13] * w;\n  out[2] = m[2] * x + m[6] * y + m[10] * z + m[14] * w;\n  out[3] = m[3] * x + m[7] * y + m[11] * z + m[15] * w;\n  return out;\n}\n/**\n * Transforms the vec4 with a quat\n *\n * @param {vec4} out the receiving vector\n * @param {ReadonlyVec4} a the vector to transform\n * @param {ReadonlyQuat} q quaternion to transform with\n * @returns {vec4} out\n */\n\nexport function transformQuat(out, a, q) {\n  var x = a[0],\n      y = a[1],\n      z = a[2];\n  var qx = q[0],\n      qy = q[1],\n      qz = q[2],\n      qw = q[3]; // calculate quat * vec\n\n  var ix = qw * x + qy * z - qz * y;\n  var iy = qw * y + qz * x - qx * z;\n  var iz = qw * z + qx * y - qy * x;\n  var iw = -qx * x - qy * y - qz * z; // calculate result * inverse quat\n\n  out[0] = ix * qw + iw * -qx + iy * -qz - iz * -qy;\n  out[1] = iy * qw + iw * -qy + iz * -qx - ix * -qz;\n  out[2] = iz * qw + iw * -qz + ix * -qy - iy * -qx;\n  out[3] = a[3];\n  return out;\n}\n/**\n * Set the components of a vec4 to zero\n *\n * @param {vec4} out the receiving vector\n * @returns {vec4} out\n */\n\nexport function zero(out) {\n  out[0] = 0.0;\n  out[1] = 0.0;\n  out[2] = 0.0;\n  out[3] = 0.0;\n  return out;\n}\n/**\n * Returns a string representation of a vector\n *\n * @param {ReadonlyVec4} a vector to represent as a string\n * @returns {String} string representation of the vector\n */\n\nexport function str(a) {\n  return \"vec4(\" + a[0] + \", \" + a[1] + \", \" + a[2] + \", \" + a[3] + \")\";\n}\n/**\n * Returns whether or not the vectors have exactly the same elements in the same position (when compared with ===)\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function exactEquals(a, b) {\n  return a[0] === b[0] && a[1] === b[1] && a[2] === b[2] && a[3] === b[3];\n}\n/**\n * Returns whether or not the vectors have approximately the same elements in the same position.\n *\n * @param {ReadonlyVec4} a The first vector.\n * @param {ReadonlyVec4} b The second vector.\n * @returns {Boolean} True if the vectors are equal, false otherwise.\n */\n\nexport function equals(a, b) {\n  var a0 = a[0],\n      a1 = a[1],\n      a2 = a[2],\n      a3 = a[3];\n  var b0 = b[0],\n      b1 = b[1],\n      b2 = b[2],\n      b3 = b[3];\n  return Math.abs(a0 - b0) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a0), Math.abs(b0)) && Math.abs(a1 - b1) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a1), Math.abs(b1)) && Math.abs(a2 - b2) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a2), Math.abs(b2)) && Math.abs(a3 - b3) <= glMatrix.EPSILON * Math.max(1.0, Math.abs(a3), Math.abs(b3));\n}\n/**\n * Alias for {@link vec4.subtract}\n * @function\n */\n\nexport var sub = subtract;\n/**\n * Alias for {@link vec4.multiply}\n * @function\n */\n\nexport var mul = multiply;\n/**\n * Alias for {@link vec4.divide}\n * @function\n */\n\nexport var div = divide;\n/**\n * Alias for {@link vec4.distance}\n * @function\n */\n\nexport var dist = distance;\n/**\n * Alias for {@link vec4.squaredDistance}\n * @function\n */\n\nexport var sqrDist = squaredDistance;\n/**\n * Alias for {@link vec4.length}\n * @function\n */\n\nexport var len = length;\n/**\n * Alias for {@link vec4.squaredLength}\n * @function\n */\n\nexport var sqrLen = squaredLength;\n/**\n * Perform some operation over an array of vec4s.\n *\n * @param {Array} a the array of vectors to iterate over\n * @param {Number} stride Number of elements between the start of each vec4. If 0 assumes tightly packed\n * @param {Number} offset Number of elements to skip at the beginning of the array\n * @param {Number} count Number of vec4s to iterate over. If 0 iterates over entire array\n * @param {Function} fn Function to call for each vector in the array\n * @param {Object} [arg] additional argument to pass to fn\n * @returns {Array} a\n * @function\n */\n\nexport var forEach = function () {\n  var vec = create();\n  return function (a, stride, offset, count, fn, arg) {\n    var i, l;\n\n    if (!stride) {\n      stride = 4;\n    }\n\n    if (!offset) {\n      offset = 0;\n    }\n\n    if (count) {\n      l = Math.min(count * stride + offset, a.length);\n    } else {\n      l = a.length;\n    }\n\n    for (i = offset; i < l; i += stride) {\n      vec[0] = a[i];\n      vec[1] = a[i + 1];\n      vec[2] = a[i + 2];\n      vec[3] = a[i + 3];\n      fn(vec, vec, arg);\n      a[i] = vec[0];\n      a[i + 1] = vec[1];\n      a[i + 2] = vec[2];\n      a[i + 3] = vec[3];\n    }\n\n    return a;\n  };\n}();","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar surrogate_pairs_1 = require(\"./surrogate-pairs\");\nvar HTML_ALPHA = ['apos', 'nbsp', 'iexcl', 'cent', 'pound', 'curren', 'yen', 'brvbar', 'sect', 'uml', 'copy', 'ordf', 'laquo', 'not', 'shy', 'reg', 'macr', 'deg', 'plusmn', 'sup2', 'sup3', 'acute', 'micro', 'para', 'middot', 'cedil', 'sup1', 'ordm', 'raquo', 'frac14', 'frac12', 'frac34', 'iquest', 'Agrave', 'Aacute', 'Acirc', 'Atilde', 'Auml', 'Aring', 'AElig', 'Ccedil', 'Egrave', 'Eacute', 'Ecirc', 'Euml', 'Igrave', 'Iacute', 'Icirc', 'Iuml', 'ETH', 'Ntilde', 'Ograve', 'Oacute', 'Ocirc', 'Otilde', 'Ouml', 'times', 'Oslash', 'Ugrave', 'Uacute', 'Ucirc', 'Uuml', 'Yacute', 'THORN', 'szlig', 'agrave', 'aacute', 'acirc', 'atilde', 'auml', 'aring', 'aelig', 'ccedil', 'egrave', 'eacute', 'ecirc', 'euml', 'igrave', 'iacute', 'icirc', 'iuml', 'eth', 'ntilde', 'ograve', 'oacute', 'ocirc', 'otilde', 'ouml', 'divide', 'oslash', 'ugrave', 'uacute', 'ucirc', 'uuml', 'yacute', 'thorn', 'yuml', 'quot', 'amp', 'lt', 'gt', 'OElig', 'oelig', 'Scaron', 'scaron', 'Yuml', 'circ', 'tilde', 'ensp', 'emsp', 'thinsp', 'zwnj', 'zwj', 'lrm', 'rlm', 'ndash', 'mdash', 'lsquo', 'rsquo', 'sbquo', 'ldquo', 'rdquo', 'bdquo', 'dagger', 'Dagger', 'permil', 'lsaquo', 'rsaquo', 'euro', 'fnof', 'Alpha', 'Beta', 'Gamma', 'Delta', 'Epsilon', 'Zeta', 'Eta', 'Theta', 'Iota', 'Kappa', 'Lambda', 'Mu', 'Nu', 'Xi', 'Omicron', 'Pi', 'Rho', 'Sigma', 'Tau', 'Upsilon', 'Phi', 'Chi', 'Psi', 'Omega', 'alpha', 'beta', 'gamma', 'delta', 'epsilon', 'zeta', 'eta', 'theta', 'iota', 'kappa', 'lambda', 'mu', 'nu', 'xi', 'omicron', 'pi', 'rho', 'sigmaf', 'sigma', 'tau', 'upsilon', 'phi', 'chi', 'psi', 'omega', 'thetasym', 'upsih', 'piv', 'bull', 'hellip', 'prime', 'Prime', 'oline', 'frasl', 'weierp', 'image', 'real', 'trade', 'alefsym', 'larr', 'uarr', 'rarr', 'darr', 'harr', 'crarr', 'lArr', 'uArr', 'rArr', 'dArr', 'hArr', 'forall', 'part', 'exist', 'empty', 'nabla', 'isin', 'notin', 'ni', 'prod', 'sum', 'minus', 'lowast', 'radic', 'prop', 'infin', 'ang', 'and', 'or', 'cap', 'cup', 'int', 'there4', 'sim', 'cong', 'asymp', 'ne', 'equiv', 'le', 'ge', 'sub', 'sup', 'nsub', 'sube', 'supe', 'oplus', 'otimes', 'perp', 'sdot', 'lceil', 'rceil', 'lfloor', 'rfloor', 'lang', 'rang', 'loz', 'spades', 'clubs', 'hearts', 'diams'];\nvar HTML_CODES = [39, 160, 161, 162, 163, 164, 165, 166, 167, 168, 169, 170, 171, 172, 173, 174, 175, 176, 177, 178, 179, 180, 181, 182, 183, 184, 185, 186, 187, 188, 189, 190, 191, 192, 193, 194, 195, 196, 197, 198, 199, 200, 201, 202, 203, 204, 205, 206, 207, 208, 209, 210, 211, 212, 213, 214, 215, 216, 217, 218, 219, 220, 221, 222, 223, 224, 225, 226, 227, 228, 229, 230, 231, 232, 233, 234, 235, 236, 237, 238, 239, 240, 241, 242, 243, 244, 245, 246, 247, 248, 249, 250, 251, 252, 253, 254, 255, 34, 38, 60, 62, 338, 339, 352, 353, 376, 710, 732, 8194, 8195, 8201, 8204, 8205, 8206, 8207, 8211, 8212, 8216, 8217, 8218, 8220, 8221, 8222, 8224, 8225, 8240, 8249, 8250, 8364, 402, 913, 914, 915, 916, 917, 918, 919, 920, 921, 922, 923, 924, 925, 926, 927, 928, 929, 931, 932, 933, 934, 935, 936, 937, 945, 946, 947, 948, 949, 950, 951, 952, 953, 954, 955, 956, 957, 958, 959, 960, 961, 962, 963, 964, 965, 966, 967, 968, 969, 977, 978, 982, 8226, 8230, 8242, 8243, 8254, 8260, 8472, 8465, 8476, 8482, 8501, 8592, 8593, 8594, 8595, 8596, 8629, 8656, 8657, 8658, 8659, 8660, 8704, 8706, 8707, 8709, 8711, 8712, 8713, 8715, 8719, 8721, 8722, 8727, 8730, 8733, 8734, 8736, 8743, 8744, 8745, 8746, 8747, 8756, 8764, 8773, 8776, 8800, 8801, 8804, 8805, 8834, 8835, 8836, 8838, 8839, 8853, 8855, 8869, 8901, 8968, 8969, 8970, 8971, 9001, 9002, 9674, 9824, 9827, 9829, 9830];\nvar alphaIndex = {};\nvar numIndex = {};\n(function () {\n    var i = 0;\n    var length = HTML_ALPHA.length;\n    while (i < length) {\n        var a = HTML_ALPHA[i];\n        var c = HTML_CODES[i];\n        alphaIndex[a] = String.fromCharCode(c);\n        numIndex[c] = a;\n        i++;\n    }\n})();\nvar Html4Entities = /** @class */ (function () {\n    function Html4Entities() {\n    }\n    Html4Entities.prototype.decode = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        return str.replace(/&(#?[\\w\\d]+);?/g, function (s, entity) {\n            var chr;\n            if (entity.charAt(0) === \"#\") {\n                var code = entity.charAt(1).toLowerCase() === 'x' ?\n                    parseInt(entity.substr(2), 16) :\n                    parseInt(entity.substr(1));\n                if (!isNaN(code) || code >= -32768) {\n                    if (code <= 65535) {\n                        chr = String.fromCharCode(code);\n                    }\n                    else {\n                        chr = surrogate_pairs_1.fromCodePoint(code);\n                    }\n                }\n            }\n            else {\n                chr = alphaIndex[entity];\n            }\n            return chr || s;\n        });\n    };\n    Html4Entities.decode = function (str) {\n        return new Html4Entities().decode(str);\n    };\n    Html4Entities.prototype.encode = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var alpha = numIndex[str.charCodeAt(i)];\n            result += alpha ? \"&\" + alpha + \";\" : str.charAt(i);\n            i++;\n        }\n        return result;\n    };\n    Html4Entities.encode = function (str) {\n        return new Html4Entities().encode(str);\n    };\n    Html4Entities.prototype.encodeNonUTF = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var cc = str.charCodeAt(i);\n            var alpha = numIndex[cc];\n            if (alpha) {\n                result += \"&\" + alpha + \";\";\n            }\n            else if (cc < 32 || cc > 126) {\n                if (cc >= surrogate_pairs_1.highSurrogateFrom && cc <= surrogate_pairs_1.highSurrogateTo) {\n                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n                    i++;\n                }\n                else {\n                    result += '&#' + cc + ';';\n                }\n            }\n            else {\n                result += str.charAt(i);\n            }\n            i++;\n        }\n        return result;\n    };\n    Html4Entities.encodeNonUTF = function (str) {\n        return new Html4Entities().encodeNonUTF(str);\n    };\n    Html4Entities.prototype.encodeNonASCII = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var c = str.charCodeAt(i);\n            if (c <= 255) {\n                result += str[i++];\n                continue;\n            }\n            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {\n                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n                i++;\n            }\n            else {\n                result += '&#' + c + ';';\n            }\n            i++;\n        }\n        return result;\n    };\n    Html4Entities.encodeNonASCII = function (str) {\n        return new Html4Entities().encodeNonASCII(str);\n    };\n    return Html4Entities;\n}());\nexports.Html4Entities = Html4Entities;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar surrogate_pairs_1 = require(\"./surrogate-pairs\");\nvar ENTITIES = [['Aacute', [193]], ['aacute', [225]], ['Abreve', [258]], ['abreve', [259]], ['ac', [8766]], ['acd', [8767]], ['acE', [8766, 819]], ['Acirc', [194]], ['acirc', [226]], ['acute', [180]], ['Acy', [1040]], ['acy', [1072]], ['AElig', [198]], ['aelig', [230]], ['af', [8289]], ['Afr', [120068]], ['afr', [120094]], ['Agrave', [192]], ['agrave', [224]], ['alefsym', [8501]], ['aleph', [8501]], ['Alpha', [913]], ['alpha', [945]], ['Amacr', [256]], ['amacr', [257]], ['amalg', [10815]], ['amp', [38]], ['AMP', [38]], ['andand', [10837]], ['And', [10835]], ['and', [8743]], ['andd', [10844]], ['andslope', [10840]], ['andv', [10842]], ['ang', [8736]], ['ange', [10660]], ['angle', [8736]], ['angmsdaa', [10664]], ['angmsdab', [10665]], ['angmsdac', [10666]], ['angmsdad', [10667]], ['angmsdae', [10668]], ['angmsdaf', [10669]], ['angmsdag', [10670]], ['angmsdah', [10671]], ['angmsd', [8737]], ['angrt', [8735]], ['angrtvb', [8894]], ['angrtvbd', [10653]], ['angsph', [8738]], ['angst', [197]], ['angzarr', [9084]], ['Aogon', [260]], ['aogon', [261]], ['Aopf', [120120]], ['aopf', [120146]], ['apacir', [10863]], ['ap', [8776]], ['apE', [10864]], ['ape', [8778]], ['apid', [8779]], ['apos', [39]], ['ApplyFunction', [8289]], ['approx', [8776]], ['approxeq', [8778]], ['Aring', [197]], ['aring', [229]], ['Ascr', [119964]], ['ascr', [119990]], ['Assign', [8788]], ['ast', [42]], ['asymp', [8776]], ['asympeq', [8781]], ['Atilde', [195]], ['atilde', [227]], ['Auml', [196]], ['auml', [228]], ['awconint', [8755]], ['awint', [10769]], ['backcong', [8780]], ['backepsilon', [1014]], ['backprime', [8245]], ['backsim', [8765]], ['backsimeq', [8909]], ['Backslash', [8726]], ['Barv', [10983]], ['barvee', [8893]], ['barwed', [8965]], ['Barwed', [8966]], ['barwedge', [8965]], ['bbrk', [9141]], ['bbrktbrk', [9142]], ['bcong', [8780]], ['Bcy', [1041]], ['bcy', [1073]], ['bdquo', [8222]], ['becaus', [8757]], ['because', [8757]], ['Because', [8757]], ['bemptyv', [10672]], ['bepsi', [1014]], ['bernou', [8492]], ['Bernoullis', [8492]], ['Beta', [914]], ['beta', [946]], ['beth', [8502]], ['between', [8812]], ['Bfr', [120069]], ['bfr', [120095]], ['bigcap', [8898]], ['bigcirc', [9711]], ['bigcup', [8899]], ['bigodot', [10752]], ['bigoplus', [10753]], ['bigotimes', [10754]], ['bigsqcup', [10758]], ['bigstar', [9733]], ['bigtriangledown', [9661]], ['bigtriangleup', [9651]], ['biguplus', [10756]], ['bigvee', [8897]], ['bigwedge', [8896]], ['bkarow', [10509]], ['blacklozenge', [10731]], ['blacksquare', [9642]], ['blacktriangle', [9652]], ['blacktriangledown', [9662]], ['blacktriangleleft', [9666]], ['blacktriangleright', [9656]], ['blank', [9251]], ['blk12', [9618]], ['blk14', [9617]], ['blk34', [9619]], ['block', [9608]], ['bne', [61, 8421]], ['bnequiv', [8801, 8421]], ['bNot', [10989]], ['bnot', [8976]], ['Bopf', [120121]], ['bopf', [120147]], ['bot', [8869]], ['bottom', [8869]], ['bowtie', [8904]], ['boxbox', [10697]], ['boxdl', [9488]], ['boxdL', [9557]], ['boxDl', [9558]], ['boxDL', [9559]], ['boxdr', [9484]], ['boxdR', [9554]], ['boxDr', [9555]], ['boxDR', [9556]], ['boxh', [9472]], ['boxH', [9552]], ['boxhd', [9516]], ['boxHd', [9572]], ['boxhD', [9573]], ['boxHD', [9574]], ['boxhu', [9524]], ['boxHu', [9575]], ['boxhU', [9576]], ['boxHU', [9577]], ['boxminus', [8863]], ['boxplus', [8862]], ['boxtimes', [8864]], ['boxul', [9496]], ['boxuL', [9563]], ['boxUl', [9564]], ['boxUL', [9565]], ['boxur', [9492]], ['boxuR', [9560]], ['boxUr', [9561]], ['boxUR', [9562]], ['boxv', [9474]], ['boxV', [9553]], ['boxvh', [9532]], ['boxvH', [9578]], ['boxVh', [9579]], ['boxVH', [9580]], ['boxvl', [9508]], ['boxvL', [9569]], ['boxVl', [9570]], ['boxVL', [9571]], ['boxvr', [9500]], ['boxvR', [9566]], ['boxVr', [9567]], ['boxVR', [9568]], ['bprime', [8245]], ['breve', [728]], ['Breve', [728]], ['brvbar', [166]], ['bscr', [119991]], ['Bscr', [8492]], ['bsemi', [8271]], ['bsim', [8765]], ['bsime', [8909]], ['bsolb', [10693]], ['bsol', [92]], ['bsolhsub', [10184]], ['bull', [8226]], ['bullet', [8226]], ['bump', [8782]], ['bumpE', [10926]], ['bumpe', [8783]], ['Bumpeq', [8782]], ['bumpeq', [8783]], ['Cacute', [262]], ['cacute', [263]], ['capand', [10820]], ['capbrcup', [10825]], ['capcap', [10827]], ['cap', [8745]], ['Cap', [8914]], ['capcup', [10823]], ['capdot', [10816]], ['CapitalDifferentialD', [8517]], ['caps', [8745, 65024]], ['caret', [8257]], ['caron', [711]], ['Cayleys', [8493]], ['ccaps', [10829]], ['Ccaron', [268]], ['ccaron', [269]], ['Ccedil', [199]], ['ccedil', [231]], ['Ccirc', [264]], ['ccirc', [265]], ['Cconint', [8752]], ['ccups', [10828]], ['ccupssm', [10832]], ['Cdot', [266]], ['cdot', [267]], ['cedil', [184]], ['Cedilla', [184]], ['cemptyv', [10674]], ['cent', [162]], ['centerdot', [183]], ['CenterDot', [183]], ['cfr', [120096]], ['Cfr', [8493]], ['CHcy', [1063]], ['chcy', [1095]], ['check', [10003]], ['checkmark', [10003]], ['Chi', [935]], ['chi', [967]], ['circ', [710]], ['circeq', [8791]], ['circlearrowleft', [8634]], ['circlearrowright', [8635]], ['circledast', [8859]], ['circledcirc', [8858]], ['circleddash', [8861]], ['CircleDot', [8857]], ['circledR', [174]], ['circledS', [9416]], ['CircleMinus', [8854]], ['CirclePlus', [8853]], ['CircleTimes', [8855]], ['cir', [9675]], ['cirE', [10691]], ['cire', [8791]], ['cirfnint', [10768]], ['cirmid', [10991]], ['cirscir', [10690]], ['ClockwiseContourIntegral', [8754]], ['clubs', [9827]], ['clubsuit', [9827]], ['colon', [58]], ['Colon', [8759]], ['Colone', [10868]], ['colone', [8788]], ['coloneq', [8788]], ['comma', [44]], ['commat', [64]], ['comp', [8705]], ['compfn', [8728]], ['complement', [8705]], ['complexes', [8450]], ['cong', [8773]], ['congdot', [10861]], ['Congruent', [8801]], ['conint', [8750]], ['Conint', [8751]], ['ContourIntegral', [8750]], ['copf', [120148]], ['Copf', [8450]], ['coprod', [8720]], ['Coproduct', [8720]], ['copy', [169]], ['COPY', [169]], ['copysr', [8471]], ['CounterClockwiseContourIntegral', [8755]], ['crarr', [8629]], ['cross', [10007]], ['Cross', [10799]], ['Cscr', [119966]], ['cscr', [119992]], ['csub', [10959]], ['csube', [10961]], ['csup', [10960]], ['csupe', [10962]], ['ctdot', [8943]], ['cudarrl', [10552]], ['cudarrr', [10549]], ['cuepr', [8926]], ['cuesc', [8927]], ['cularr', [8630]], ['cularrp', [10557]], ['cupbrcap', [10824]], ['cupcap', [10822]], ['CupCap', [8781]], ['cup', [8746]], ['Cup', [8915]], ['cupcup', [10826]], ['cupdot', [8845]], ['cupor', [10821]], ['cups', [8746, 65024]], ['curarr', [8631]], ['curarrm', [10556]], ['curlyeqprec', [8926]], ['curlyeqsucc', [8927]], ['curlyvee', [8910]], ['curlywedge', [8911]], ['curren', [164]], ['curvearrowleft', [8630]], ['curvearrowright', [8631]], ['cuvee', [8910]], ['cuwed', [8911]], ['cwconint', [8754]], ['cwint', [8753]], ['cylcty', [9005]], ['dagger', [8224]], ['Dagger', [8225]], ['daleth', [8504]], ['darr', [8595]], ['Darr', [8609]], ['dArr', [8659]], ['dash', [8208]], ['Dashv', [10980]], ['dashv', [8867]], ['dbkarow', [10511]], ['dblac', [733]], ['Dcaron', [270]], ['dcaron', [271]], ['Dcy', [1044]], ['dcy', [1076]], ['ddagger', [8225]], ['ddarr', [8650]], ['DD', [8517]], ['dd', [8518]], ['DDotrahd', [10513]], ['ddotseq', [10871]], ['deg', [176]], ['Del', [8711]], ['Delta', [916]], ['delta', [948]], ['demptyv', [10673]], ['dfisht', [10623]], ['Dfr', [120071]], ['dfr', [120097]], ['dHar', [10597]], ['dharl', [8643]], ['dharr', [8642]], ['DiacriticalAcute', [180]], ['DiacriticalDot', [729]], ['DiacriticalDoubleAcute', [733]], ['DiacriticalGrave', [96]], ['DiacriticalTilde', [732]], ['diam', [8900]], ['diamond', [8900]], ['Diamond', [8900]], ['diamondsuit', [9830]], ['diams', [9830]], ['die', [168]], ['DifferentialD', [8518]], ['digamma', [989]], ['disin', [8946]], ['div', [247]], ['divide', [247]], ['divideontimes', [8903]], ['divonx', [8903]], ['DJcy', [1026]], ['djcy', [1106]], ['dlcorn', [8990]], ['dlcrop', [8973]], ['dollar', [36]], ['Dopf', [120123]], ['dopf', [120149]], ['Dot', [168]], ['dot', [729]], ['DotDot', [8412]], ['doteq', [8784]], ['doteqdot', [8785]], ['DotEqual', [8784]], ['dotminus', [8760]], ['dotplus', [8724]], ['dotsquare', [8865]], ['doublebarwedge', [8966]], ['DoubleContourIntegral', [8751]], ['DoubleDot', [168]], ['DoubleDownArrow', [8659]], ['DoubleLeftArrow', [8656]], ['DoubleLeftRightArrow', [8660]], ['DoubleLeftTee', [10980]], ['DoubleLongLeftArrow', [10232]], ['DoubleLongLeftRightArrow', [10234]], ['DoubleLongRightArrow', [10233]], ['DoubleRightArrow', [8658]], ['DoubleRightTee', [8872]], ['DoubleUpArrow', [8657]], ['DoubleUpDownArrow', [8661]], ['DoubleVerticalBar', [8741]], ['DownArrowBar', [10515]], ['downarrow', [8595]], ['DownArrow', [8595]], ['Downarrow', [8659]], ['DownArrowUpArrow', [8693]], ['DownBreve', [785]], ['downdownarrows', [8650]], ['downharpoonleft', [8643]], ['downharpoonright', [8642]], ['DownLeftRightVector', [10576]], ['DownLeftTeeVector', [10590]], ['DownLeftVectorBar', [10582]], ['DownLeftVector', [8637]], ['DownRightTeeVector', [10591]], ['DownRightVectorBar', [10583]], ['DownRightVector', [8641]], ['DownTeeArrow', [8615]], ['DownTee', [8868]], ['drbkarow', [10512]], ['drcorn', [8991]], ['drcrop', [8972]], ['Dscr', [119967]], ['dscr', [119993]], ['DScy', [1029]], ['dscy', [1109]], ['dsol', [10742]], ['Dstrok', [272]], ['dstrok', [273]], ['dtdot', [8945]], ['dtri', [9663]], ['dtrif', [9662]], ['duarr', [8693]], ['duhar', [10607]], ['dwangle', [10662]], ['DZcy', [1039]], ['dzcy', [1119]], ['dzigrarr', [10239]], ['Eacute', [201]], ['eacute', [233]], ['easter', [10862]], ['Ecaron', [282]], ['ecaron', [283]], ['Ecirc', [202]], ['ecirc', [234]], ['ecir', [8790]], ['ecolon', [8789]], ['Ecy', [1069]], ['ecy', [1101]], ['eDDot', [10871]], ['Edot', [278]], ['edot', [279]], ['eDot', [8785]], ['ee', [8519]], ['efDot', [8786]], ['Efr', [120072]], ['efr', [120098]], ['eg', [10906]], ['Egrave', [200]], ['egrave', [232]], ['egs', [10902]], ['egsdot', [10904]], ['el', [10905]], ['Element', [8712]], ['elinters', [9191]], ['ell', [8467]], ['els', [10901]], ['elsdot', [10903]], ['Emacr', [274]], ['emacr', [275]], ['empty', [8709]], ['emptyset', [8709]], ['EmptySmallSquare', [9723]], ['emptyv', [8709]], ['EmptyVerySmallSquare', [9643]], ['emsp13', [8196]], ['emsp14', [8197]], ['emsp', [8195]], ['ENG', [330]], ['eng', [331]], ['ensp', [8194]], ['Eogon', [280]], ['eogon', [281]], ['Eopf', [120124]], ['eopf', [120150]], ['epar', [8917]], ['eparsl', [10723]], ['eplus', [10865]], ['epsi', [949]], ['Epsilon', [917]], ['epsilon', [949]], ['epsiv', [1013]], ['eqcirc', [8790]], ['eqcolon', [8789]], ['eqsim', [8770]], ['eqslantgtr', [10902]], ['eqslantless', [10901]], ['Equal', [10869]], ['equals', [61]], ['EqualTilde', [8770]], ['equest', [8799]], ['Equilibrium', [8652]], ['equiv', [8801]], ['equivDD', [10872]], ['eqvparsl', [10725]], ['erarr', [10609]], ['erDot', [8787]], ['escr', [8495]], ['Escr', [8496]], ['esdot', [8784]], ['Esim', [10867]], ['esim', [8770]], ['Eta', [919]], ['eta', [951]], ['ETH', [208]], ['eth', [240]], ['Euml', [203]], ['euml', [235]], ['euro', [8364]], ['excl', [33]], ['exist', [8707]], ['Exists', [8707]], ['expectation', [8496]], ['exponentiale', [8519]], ['ExponentialE', [8519]], ['fallingdotseq', [8786]], ['Fcy', [1060]], ['fcy', [1092]], ['female', [9792]], ['ffilig', [64259]], ['fflig', [64256]], ['ffllig', [64260]], ['Ffr', [120073]], ['ffr', [120099]], ['filig', [64257]], ['FilledSmallSquare', [9724]], ['FilledVerySmallSquare', [9642]], ['fjlig', [102, 106]], ['flat', [9837]], ['fllig', [64258]], ['fltns', [9649]], ['fnof', [402]], ['Fopf', [120125]], ['fopf', [120151]], ['forall', [8704]], ['ForAll', [8704]], ['fork', [8916]], ['forkv', [10969]], ['Fouriertrf', [8497]], ['fpartint', [10765]], ['frac12', [189]], ['frac13', [8531]], ['frac14', [188]], ['frac15', [8533]], ['frac16', [8537]], ['frac18', [8539]], ['frac23', [8532]], ['frac25', [8534]], ['frac34', [190]], ['frac35', [8535]], ['frac38', [8540]], ['frac45', [8536]], ['frac56', [8538]], ['frac58', [8541]], ['frac78', [8542]], ['frasl', [8260]], ['frown', [8994]], ['fscr', [119995]], ['Fscr', [8497]], ['gacute', [501]], ['Gamma', [915]], ['gamma', [947]], ['Gammad', [988]], ['gammad', [989]], ['gap', [10886]], ['Gbreve', [286]], ['gbreve', [287]], ['Gcedil', [290]], ['Gcirc', [284]], ['gcirc', [285]], ['Gcy', [1043]], ['gcy', [1075]], ['Gdot', [288]], ['gdot', [289]], ['ge', [8805]], ['gE', [8807]], ['gEl', [10892]], ['gel', [8923]], ['geq', [8805]], ['geqq', [8807]], ['geqslant', [10878]], ['gescc', [10921]], ['ges', [10878]], ['gesdot', [10880]], ['gesdoto', [10882]], ['gesdotol', [10884]], ['gesl', [8923, 65024]], ['gesles', [10900]], ['Gfr', [120074]], ['gfr', [120100]], ['gg', [8811]], ['Gg', [8921]], ['ggg', [8921]], ['gimel', [8503]], ['GJcy', [1027]], ['gjcy', [1107]], ['gla', [10917]], ['gl', [8823]], ['glE', [10898]], ['glj', [10916]], ['gnap', [10890]], ['gnapprox', [10890]], ['gne', [10888]], ['gnE', [8809]], ['gneq', [10888]], ['gneqq', [8809]], ['gnsim', [8935]], ['Gopf', [120126]], ['gopf', [120152]], ['grave', [96]], ['GreaterEqual', [8805]], ['GreaterEqualLess', [8923]], ['GreaterFullEqual', [8807]], ['GreaterGreater', [10914]], ['GreaterLess', [8823]], ['GreaterSlantEqual', [10878]], ['GreaterTilde', [8819]], ['Gscr', [119970]], ['gscr', [8458]], ['gsim', [8819]], ['gsime', [10894]], ['gsiml', [10896]], ['gtcc', [10919]], ['gtcir', [10874]], ['gt', [62]], ['GT', [62]], ['Gt', [8811]], ['gtdot', [8919]], ['gtlPar', [10645]], ['gtquest', [10876]], ['gtrapprox', [10886]], ['gtrarr', [10616]], ['gtrdot', [8919]], ['gtreqless', [8923]], ['gtreqqless', [10892]], ['gtrless', [8823]], ['gtrsim', [8819]], ['gvertneqq', [8809, 65024]], ['gvnE', [8809, 65024]], ['Hacek', [711]], ['hairsp', [8202]], ['half', [189]], ['hamilt', [8459]], ['HARDcy', [1066]], ['hardcy', [1098]], ['harrcir', [10568]], ['harr', [8596]], ['hArr', [8660]], ['harrw', [8621]], ['Hat', [94]], ['hbar', [8463]], ['Hcirc', [292]], ['hcirc', [293]], ['hearts', [9829]], ['heartsuit', [9829]], ['hellip', [8230]], ['hercon', [8889]], ['hfr', [120101]], ['Hfr', [8460]], ['HilbertSpace', [8459]], ['hksearow', [10533]], ['hkswarow', [10534]], ['hoarr', [8703]], ['homtht', [8763]], ['hookleftarrow', [8617]], ['hookrightarrow', [8618]], ['hopf', [120153]], ['Hopf', [8461]], ['horbar', [8213]], ['HorizontalLine', [9472]], ['hscr', [119997]], ['Hscr', [8459]], ['hslash', [8463]], ['Hstrok', [294]], ['hstrok', [295]], ['HumpDownHump', [8782]], ['HumpEqual', [8783]], ['hybull', [8259]], ['hyphen', [8208]], ['Iacute', [205]], ['iacute', [237]], ['ic', [8291]], ['Icirc', [206]], ['icirc', [238]], ['Icy', [1048]], ['icy', [1080]], ['Idot', [304]], ['IEcy', [1045]], ['iecy', [1077]], ['iexcl', [161]], ['iff', [8660]], ['ifr', [120102]], ['Ifr', [8465]], ['Igrave', [204]], ['igrave', [236]], ['ii', [8520]], ['iiiint', [10764]], ['iiint', [8749]], ['iinfin', [10716]], ['iiota', [8489]], ['IJlig', [306]], ['ijlig', [307]], ['Imacr', [298]], ['imacr', [299]], ['image', [8465]], ['ImaginaryI', [8520]], ['imagline', [8464]], ['imagpart', [8465]], ['imath', [305]], ['Im', [8465]], ['imof', [8887]], ['imped', [437]], ['Implies', [8658]], ['incare', [8453]], ['in', [8712]], ['infin', [8734]], ['infintie', [10717]], ['inodot', [305]], ['intcal', [8890]], ['int', [8747]], ['Int', [8748]], ['integers', [8484]], ['Integral', [8747]], ['intercal', [8890]], ['Intersection', [8898]], ['intlarhk', [10775]], ['intprod', [10812]], ['InvisibleComma', [8291]], ['InvisibleTimes', [8290]], ['IOcy', [1025]], ['iocy', [1105]], ['Iogon', [302]], ['iogon', [303]], ['Iopf', [120128]], ['iopf', [120154]], ['Iota', [921]], ['iota', [953]], ['iprod', [10812]], ['iquest', [191]], ['iscr', [119998]], ['Iscr', [8464]], ['isin', [8712]], ['isindot', [8949]], ['isinE', [8953]], ['isins', [8948]], ['isinsv', [8947]], ['isinv', [8712]], ['it', [8290]], ['Itilde', [296]], ['itilde', [297]], ['Iukcy', [1030]], ['iukcy', [1110]], ['Iuml', [207]], ['iuml', [239]], ['Jcirc', [308]], ['jcirc', [309]], ['Jcy', [1049]], ['jcy', [1081]], ['Jfr', [120077]], ['jfr', [120103]], ['jmath', [567]], ['Jopf', [120129]], ['jopf', [120155]], ['Jscr', [119973]], ['jscr', [119999]], ['Jsercy', [1032]], ['jsercy', [1112]], ['Jukcy', [1028]], ['jukcy', [1108]], ['Kappa', [922]], ['kappa', [954]], ['kappav', [1008]], ['Kcedil', [310]], ['kcedil', [311]], ['Kcy', [1050]], ['kcy', [1082]], ['Kfr', [120078]], ['kfr', [120104]], ['kgreen', [312]], ['KHcy', [1061]], ['khcy', [1093]], ['KJcy', [1036]], ['kjcy', [1116]], ['Kopf', [120130]], ['kopf', [120156]], ['Kscr', [119974]], ['kscr', [120000]], ['lAarr', [8666]], ['Lacute', [313]], ['lacute', [314]], ['laemptyv', [10676]], ['lagran', [8466]], ['Lambda', [923]], ['lambda', [955]], ['lang', [10216]], ['Lang', [10218]], ['langd', [10641]], ['langle', [10216]], ['lap', [10885]], ['Laplacetrf', [8466]], ['laquo', [171]], ['larrb', [8676]], ['larrbfs', [10527]], ['larr', [8592]], ['Larr', [8606]], ['lArr', [8656]], ['larrfs', [10525]], ['larrhk', [8617]], ['larrlp', [8619]], ['larrpl', [10553]], ['larrsim', [10611]], ['larrtl', [8610]], ['latail', [10521]], ['lAtail', [10523]], ['lat', [10923]], ['late', [10925]], ['lates', [10925, 65024]], ['lbarr', [10508]], ['lBarr', [10510]], ['lbbrk', [10098]], ['lbrace', [123]], ['lbrack', [91]], ['lbrke', [10635]], ['lbrksld', [10639]], ['lbrkslu', [10637]], ['Lcaron', [317]], ['lcaron', [318]], ['Lcedil', [315]], ['lcedil', [316]], ['lceil', [8968]], ['lcub', [123]], ['Lcy', [1051]], ['lcy', [1083]], ['ldca', [10550]], ['ldquo', [8220]], ['ldquor', [8222]], ['ldrdhar', [10599]], ['ldrushar', [10571]], ['ldsh', [8626]], ['le', [8804]], ['lE', [8806]], ['LeftAngleBracket', [10216]], ['LeftArrowBar', [8676]], ['leftarrow', [8592]], ['LeftArrow', [8592]], ['Leftarrow', [8656]], ['LeftArrowRightArrow', [8646]], ['leftarrowtail', [8610]], ['LeftCeiling', [8968]], ['LeftDoubleBracket', [10214]], ['LeftDownTeeVector', [10593]], ['LeftDownVectorBar', [10585]], ['LeftDownVector', [8643]], ['LeftFloor', [8970]], ['leftharpoondown', [8637]], ['leftharpoonup', [8636]], ['leftleftarrows', [8647]], ['leftrightarrow', [8596]], ['LeftRightArrow', [8596]], ['Leftrightarrow', [8660]], ['leftrightarrows', [8646]], ['leftrightharpoons', [8651]], ['leftrightsquigarrow', [8621]], ['LeftRightVector', [10574]], ['LeftTeeArrow', [8612]], ['LeftTee', [8867]], ['LeftTeeVector', [10586]], ['leftthreetimes', [8907]], ['LeftTriangleBar', [10703]], ['LeftTriangle', [8882]], ['LeftTriangleEqual', [8884]], ['LeftUpDownVector', [10577]], ['LeftUpTeeVector', [10592]], ['LeftUpVectorBar', [10584]], ['LeftUpVector', [8639]], ['LeftVectorBar', [10578]], ['LeftVector', [8636]], ['lEg', [10891]], ['leg', [8922]], ['leq', [8804]], ['leqq', [8806]], ['leqslant', [10877]], ['lescc', [10920]], ['les', [10877]], ['lesdot', [10879]], ['lesdoto', [10881]], ['lesdotor', [10883]], ['lesg', [8922, 65024]], ['lesges', [10899]], ['lessapprox', [10885]], ['lessdot', [8918]], ['lesseqgtr', [8922]], ['lesseqqgtr', [10891]], ['LessEqualGreater', [8922]], ['LessFullEqual', [8806]], ['LessGreater', [8822]], ['lessgtr', [8822]], ['LessLess', [10913]], ['lesssim', [8818]], ['LessSlantEqual', [10877]], ['LessTilde', [8818]], ['lfisht', [10620]], ['lfloor', [8970]], ['Lfr', [120079]], ['lfr', [120105]], ['lg', [8822]], ['lgE', [10897]], ['lHar', [10594]], ['lhard', [8637]], ['lharu', [8636]], ['lharul', [10602]], ['lhblk', [9604]], ['LJcy', [1033]], ['ljcy', [1113]], ['llarr', [8647]], ['ll', [8810]], ['Ll', [8920]], ['llcorner', [8990]], ['Lleftarrow', [8666]], ['llhard', [10603]], ['lltri', [9722]], ['Lmidot', [319]], ['lmidot', [320]], ['lmoustache', [9136]], ['lmoust', [9136]], ['lnap', [10889]], ['lnapprox', [10889]], ['lne', [10887]], ['lnE', [8808]], ['lneq', [10887]], ['lneqq', [8808]], ['lnsim', [8934]], ['loang', [10220]], ['loarr', [8701]], ['lobrk', [10214]], ['longleftarrow', [10229]], ['LongLeftArrow', [10229]], ['Longleftarrow', [10232]], ['longleftrightarrow', [10231]], ['LongLeftRightArrow', [10231]], ['Longleftrightarrow', [10234]], ['longmapsto', [10236]], ['longrightarrow', [10230]], ['LongRightArrow', [10230]], ['Longrightarrow', [10233]], ['looparrowleft', [8619]], ['looparrowright', [8620]], ['lopar', [10629]], ['Lopf', [120131]], ['lopf', [120157]], ['loplus', [10797]], ['lotimes', [10804]], ['lowast', [8727]], ['lowbar', [95]], ['LowerLeftArrow', [8601]], ['LowerRightArrow', [8600]], ['loz', [9674]], ['lozenge', [9674]], ['lozf', [10731]], ['lpar', [40]], ['lparlt', [10643]], ['lrarr', [8646]], ['lrcorner', [8991]], ['lrhar', [8651]], ['lrhard', [10605]], ['lrm', [8206]], ['lrtri', [8895]], ['lsaquo', [8249]], ['lscr', [120001]], ['Lscr', [8466]], ['lsh', [8624]], ['Lsh', [8624]], ['lsim', [8818]], ['lsime', [10893]], ['lsimg', [10895]], ['lsqb', [91]], ['lsquo', [8216]], ['lsquor', [8218]], ['Lstrok', [321]], ['lstrok', [322]], ['ltcc', [10918]], ['ltcir', [10873]], ['lt', [60]], ['LT', [60]], ['Lt', [8810]], ['ltdot', [8918]], ['lthree', [8907]], ['ltimes', [8905]], ['ltlarr', [10614]], ['ltquest', [10875]], ['ltri', [9667]], ['ltrie', [8884]], ['ltrif', [9666]], ['ltrPar', [10646]], ['lurdshar', [10570]], ['luruhar', [10598]], ['lvertneqq', [8808, 65024]], ['lvnE', [8808, 65024]], ['macr', [175]], ['male', [9794]], ['malt', [10016]], ['maltese', [10016]], ['Map', [10501]], ['map', [8614]], ['mapsto', [8614]], ['mapstodown', [8615]], ['mapstoleft', [8612]], ['mapstoup', [8613]], ['marker', [9646]], ['mcomma', [10793]], ['Mcy', [1052]], ['mcy', [1084]], ['mdash', [8212]], ['mDDot', [8762]], ['measuredangle', [8737]], ['MediumSpace', [8287]], ['Mellintrf', [8499]], ['Mfr', [120080]], ['mfr', [120106]], ['mho', [8487]], ['micro', [181]], ['midast', [42]], ['midcir', [10992]], ['mid', [8739]], ['middot', [183]], ['minusb', [8863]], ['minus', [8722]], ['minusd', [8760]], ['minusdu', [10794]], ['MinusPlus', [8723]], ['mlcp', [10971]], ['mldr', [8230]], ['mnplus', [8723]], ['models', [8871]], ['Mopf', [120132]], ['mopf', [120158]], ['mp', [8723]], ['mscr', [120002]], ['Mscr', [8499]], ['mstpos', [8766]], ['Mu', [924]], ['mu', [956]], ['multimap', [8888]], ['mumap', [8888]], ['nabla', [8711]], ['Nacute', [323]], ['nacute', [324]], ['nang', [8736, 8402]], ['nap', [8777]], ['napE', [10864, 824]], ['napid', [8779, 824]], ['napos', [329]], ['napprox', [8777]], ['natural', [9838]], ['naturals', [8469]], ['natur', [9838]], ['nbsp', [160]], ['nbump', [8782, 824]], ['nbumpe', [8783, 824]], ['ncap', [10819]], ['Ncaron', [327]], ['ncaron', [328]], ['Ncedil', [325]], ['ncedil', [326]], ['ncong', [8775]], ['ncongdot', [10861, 824]], ['ncup', [10818]], ['Ncy', [1053]], ['ncy', [1085]], ['ndash', [8211]], ['nearhk', [10532]], ['nearr', [8599]], ['neArr', [8663]], ['nearrow', [8599]], ['ne', [8800]], ['nedot', [8784, 824]], ['NegativeMediumSpace', [8203]], ['NegativeThickSpace', [8203]], ['NegativeThinSpace', [8203]], ['NegativeVeryThinSpace', [8203]], ['nequiv', [8802]], ['nesear', [10536]], ['nesim', [8770, 824]], ['NestedGreaterGreater', [8811]], ['NestedLessLess', [8810]], ['nexist', [8708]], ['nexists', [8708]], ['Nfr', [120081]], ['nfr', [120107]], ['ngE', [8807, 824]], ['nge', [8817]], ['ngeq', [8817]], ['ngeqq', [8807, 824]], ['ngeqslant', [10878, 824]], ['nges', [10878, 824]], ['nGg', [8921, 824]], ['ngsim', [8821]], ['nGt', [8811, 8402]], ['ngt', [8815]], ['ngtr', [8815]], ['nGtv', [8811, 824]], ['nharr', [8622]], ['nhArr', [8654]], ['nhpar', [10994]], ['ni', [8715]], ['nis', [8956]], ['nisd', [8954]], ['niv', [8715]], ['NJcy', [1034]], ['njcy', [1114]], ['nlarr', [8602]], ['nlArr', [8653]], ['nldr', [8229]], ['nlE', [8806, 824]], ['nle', [8816]], ['nleftarrow', [8602]], ['nLeftarrow', [8653]], ['nleftrightarrow', [8622]], ['nLeftrightarrow', [8654]], ['nleq', [8816]], ['nleqq', [8806, 824]], ['nleqslant', [10877, 824]], ['nles', [10877, 824]], ['nless', [8814]], ['nLl', [8920, 824]], ['nlsim', [8820]], ['nLt', [8810, 8402]], ['nlt', [8814]], ['nltri', [8938]], ['nltrie', [8940]], ['nLtv', [8810, 824]], ['nmid', [8740]], ['NoBreak', [8288]], ['NonBreakingSpace', [160]], ['nopf', [120159]], ['Nopf', [8469]], ['Not', [10988]], ['not', [172]], ['NotCongruent', [8802]], ['NotCupCap', [8813]], ['NotDoubleVerticalBar', [8742]], ['NotElement', [8713]], ['NotEqual', [8800]], ['NotEqualTilde', [8770, 824]], ['NotExists', [8708]], ['NotGreater', [8815]], ['NotGreaterEqual', [8817]], ['NotGreaterFullEqual', [8807, 824]], ['NotGreaterGreater', [8811, 824]], ['NotGreaterLess', [8825]], ['NotGreaterSlantEqual', [10878, 824]], ['NotGreaterTilde', [8821]], ['NotHumpDownHump', [8782, 824]], ['NotHumpEqual', [8783, 824]], ['notin', [8713]], ['notindot', [8949, 824]], ['notinE', [8953, 824]], ['notinva', [8713]], ['notinvb', [8951]], ['notinvc', [8950]], ['NotLeftTriangleBar', [10703, 824]], ['NotLeftTriangle', [8938]], ['NotLeftTriangleEqual', [8940]], ['NotLess', [8814]], ['NotLessEqual', [8816]], ['NotLessGreater', [8824]], ['NotLessLess', [8810, 824]], ['NotLessSlantEqual', [10877, 824]], ['NotLessTilde', [8820]], ['NotNestedGreaterGreater', [10914, 824]], ['NotNestedLessLess', [10913, 824]], ['notni', [8716]], ['notniva', [8716]], ['notnivb', [8958]], ['notnivc', [8957]], ['NotPrecedes', [8832]], ['NotPrecedesEqual', [10927, 824]], ['NotPrecedesSlantEqual', [8928]], ['NotReverseElement', [8716]], ['NotRightTriangleBar', [10704, 824]], ['NotRightTriangle', [8939]], ['NotRightTriangleEqual', [8941]], ['NotSquareSubset', [8847, 824]], ['NotSquareSubsetEqual', [8930]], ['NotSquareSuperset', [8848, 824]], ['NotSquareSupersetEqual', [8931]], ['NotSubset', [8834, 8402]], ['NotSubsetEqual', [8840]], ['NotSucceeds', [8833]], ['NotSucceedsEqual', [10928, 824]], ['NotSucceedsSlantEqual', [8929]], ['NotSucceedsTilde', [8831, 824]], ['NotSuperset', [8835, 8402]], ['NotSupersetEqual', [8841]], ['NotTilde', [8769]], ['NotTildeEqual', [8772]], ['NotTildeFullEqual', [8775]], ['NotTildeTilde', [8777]], ['NotVerticalBar', [8740]], ['nparallel', [8742]], ['npar', [8742]], ['nparsl', [11005, 8421]], ['npart', [8706, 824]], ['npolint', [10772]], ['npr', [8832]], ['nprcue', [8928]], ['nprec', [8832]], ['npreceq', [10927, 824]], ['npre', [10927, 824]], ['nrarrc', [10547, 824]], ['nrarr', [8603]], ['nrArr', [8655]], ['nrarrw', [8605, 824]], ['nrightarrow', [8603]], ['nRightarrow', [8655]], ['nrtri', [8939]], ['nrtrie', [8941]], ['nsc', [8833]], ['nsccue', [8929]], ['nsce', [10928, 824]], ['Nscr', [119977]], ['nscr', [120003]], ['nshortmid', [8740]], ['nshortparallel', [8742]], ['nsim', [8769]], ['nsime', [8772]], ['nsimeq', [8772]], ['nsmid', [8740]], ['nspar', [8742]], ['nsqsube', [8930]], ['nsqsupe', [8931]], ['nsub', [8836]], ['nsubE', [10949, 824]], ['nsube', [8840]], ['nsubset', [8834, 8402]], ['nsubseteq', [8840]], ['nsubseteqq', [10949, 824]], ['nsucc', [8833]], ['nsucceq', [10928, 824]], ['nsup', [8837]], ['nsupE', [10950, 824]], ['nsupe', [8841]], ['nsupset', [8835, 8402]], ['nsupseteq', [8841]], ['nsupseteqq', [10950, 824]], ['ntgl', [8825]], ['Ntilde', [209]], ['ntilde', [241]], ['ntlg', [8824]], ['ntriangleleft', [8938]], ['ntrianglelefteq', [8940]], ['ntriangleright', [8939]], ['ntrianglerighteq', [8941]], ['Nu', [925]], ['nu', [957]], ['num', [35]], ['numero', [8470]], ['numsp', [8199]], ['nvap', [8781, 8402]], ['nvdash', [8876]], ['nvDash', [8877]], ['nVdash', [8878]], ['nVDash', [8879]], ['nvge', [8805, 8402]], ['nvgt', [62, 8402]], ['nvHarr', [10500]], ['nvinfin', [10718]], ['nvlArr', [10498]], ['nvle', [8804, 8402]], ['nvlt', [60, 8402]], ['nvltrie', [8884, 8402]], ['nvrArr', [10499]], ['nvrtrie', [8885, 8402]], ['nvsim', [8764, 8402]], ['nwarhk', [10531]], ['nwarr', [8598]], ['nwArr', [8662]], ['nwarrow', [8598]], ['nwnear', [10535]], ['Oacute', [211]], ['oacute', [243]], ['oast', [8859]], ['Ocirc', [212]], ['ocirc', [244]], ['ocir', [8858]], ['Ocy', [1054]], ['ocy', [1086]], ['odash', [8861]], ['Odblac', [336]], ['odblac', [337]], ['odiv', [10808]], ['odot', [8857]], ['odsold', [10684]], ['OElig', [338]], ['oelig', [339]], ['ofcir', [10687]], ['Ofr', [120082]], ['ofr', [120108]], ['ogon', [731]], ['Ograve', [210]], ['ograve', [242]], ['ogt', [10689]], ['ohbar', [10677]], ['ohm', [937]], ['oint', [8750]], ['olarr', [8634]], ['olcir', [10686]], ['olcross', [10683]], ['oline', [8254]], ['olt', [10688]], ['Omacr', [332]], ['omacr', [333]], ['Omega', [937]], ['omega', [969]], ['Omicron', [927]], ['omicron', [959]], ['omid', [10678]], ['ominus', [8854]], ['Oopf', [120134]], ['oopf', [120160]], ['opar', [10679]], ['OpenCurlyDoubleQuote', [8220]], ['OpenCurlyQuote', [8216]], ['operp', [10681]], ['oplus', [8853]], ['orarr', [8635]], ['Or', [10836]], ['or', [8744]], ['ord', [10845]], ['order', [8500]], ['orderof', [8500]], ['ordf', [170]], ['ordm', [186]], ['origof', [8886]], ['oror', [10838]], ['orslope', [10839]], ['orv', [10843]], ['oS', [9416]], ['Oscr', [119978]], ['oscr', [8500]], ['Oslash', [216]], ['oslash', [248]], ['osol', [8856]], ['Otilde', [213]], ['otilde', [245]], ['otimesas', [10806]], ['Otimes', [10807]], ['otimes', [8855]], ['Ouml', [214]], ['ouml', [246]], ['ovbar', [9021]], ['OverBar', [8254]], ['OverBrace', [9182]], ['OverBracket', [9140]], ['OverParenthesis', [9180]], ['para', [182]], ['parallel', [8741]], ['par', [8741]], ['parsim', [10995]], ['parsl', [11005]], ['part', [8706]], ['PartialD', [8706]], ['Pcy', [1055]], ['pcy', [1087]], ['percnt', [37]], ['period', [46]], ['permil', [8240]], ['perp', [8869]], ['pertenk', [8241]], ['Pfr', [120083]], ['pfr', [120109]], ['Phi', [934]], ['phi', [966]], ['phiv', [981]], ['phmmat', [8499]], ['phone', [9742]], ['Pi', [928]], ['pi', [960]], ['pitchfork', [8916]], ['piv', [982]], ['planck', [8463]], ['planckh', [8462]], ['plankv', [8463]], ['plusacir', [10787]], ['plusb', [8862]], ['pluscir', [10786]], ['plus', [43]], ['plusdo', [8724]], ['plusdu', [10789]], ['pluse', [10866]], ['PlusMinus', [177]], ['plusmn', [177]], ['plussim', [10790]], ['plustwo', [10791]], ['pm', [177]], ['Poincareplane', [8460]], ['pointint', [10773]], ['popf', [120161]], ['Popf', [8473]], ['pound', [163]], ['prap', [10935]], ['Pr', [10939]], ['pr', [8826]], ['prcue', [8828]], ['precapprox', [10935]], ['prec', [8826]], ['preccurlyeq', [8828]], ['Precedes', [8826]], ['PrecedesEqual', [10927]], ['PrecedesSlantEqual', [8828]], ['PrecedesTilde', [8830]], ['preceq', [10927]], ['precnapprox', [10937]], ['precneqq', [10933]], ['precnsim', [8936]], ['pre', [10927]], ['prE', [10931]], ['precsim', [8830]], ['prime', [8242]], ['Prime', [8243]], ['primes', [8473]], ['prnap', [10937]], ['prnE', [10933]], ['prnsim', [8936]], ['prod', [8719]], ['Product', [8719]], ['profalar', [9006]], ['profline', [8978]], ['profsurf', [8979]], ['prop', [8733]], ['Proportional', [8733]], ['Proportion', [8759]], ['propto', [8733]], ['prsim', [8830]], ['prurel', [8880]], ['Pscr', [119979]], ['pscr', [120005]], ['Psi', [936]], ['psi', [968]], ['puncsp', [8200]], ['Qfr', [120084]], ['qfr', [120110]], ['qint', [10764]], ['qopf', [120162]], ['Qopf', [8474]], ['qprime', [8279]], ['Qscr', [119980]], ['qscr', [120006]], ['quaternions', [8461]], ['quatint', [10774]], ['quest', [63]], ['questeq', [8799]], ['quot', [34]], ['QUOT', [34]], ['rAarr', [8667]], ['race', [8765, 817]], ['Racute', [340]], ['racute', [341]], ['radic', [8730]], ['raemptyv', [10675]], ['rang', [10217]], ['Rang', [10219]], ['rangd', [10642]], ['range', [10661]], ['rangle', [10217]], ['raquo', [187]], ['rarrap', [10613]], ['rarrb', [8677]], ['rarrbfs', [10528]], ['rarrc', [10547]], ['rarr', [8594]], ['Rarr', [8608]], ['rArr', [8658]], ['rarrfs', [10526]], ['rarrhk', [8618]], ['rarrlp', [8620]], ['rarrpl', [10565]], ['rarrsim', [10612]], ['Rarrtl', [10518]], ['rarrtl', [8611]], ['rarrw', [8605]], ['ratail', [10522]], ['rAtail', [10524]], ['ratio', [8758]], ['rationals', [8474]], ['rbarr', [10509]], ['rBarr', [10511]], ['RBarr', [10512]], ['rbbrk', [10099]], ['rbrace', [125]], ['rbrack', [93]], ['rbrke', [10636]], ['rbrksld', [10638]], ['rbrkslu', [10640]], ['Rcaron', [344]], ['rcaron', [345]], ['Rcedil', [342]], ['rcedil', [343]], ['rceil', [8969]], ['rcub', [125]], ['Rcy', [1056]], ['rcy', [1088]], ['rdca', [10551]], ['rdldhar', [10601]], ['rdquo', [8221]], ['rdquor', [8221]], ['CloseCurlyDoubleQuote', [8221]], ['rdsh', [8627]], ['real', [8476]], ['realine', [8475]], ['realpart', [8476]], ['reals', [8477]], ['Re', [8476]], ['rect', [9645]], ['reg', [174]], ['REG', [174]], ['ReverseElement', [8715]], ['ReverseEquilibrium', [8651]], ['ReverseUpEquilibrium', [10607]], ['rfisht', [10621]], ['rfloor', [8971]], ['rfr', [120111]], ['Rfr', [8476]], ['rHar', [10596]], ['rhard', [8641]], ['rharu', [8640]], ['rharul', [10604]], ['Rho', [929]], ['rho', [961]], ['rhov', [1009]], ['RightAngleBracket', [10217]], ['RightArrowBar', [8677]], ['rightarrow', [8594]], ['RightArrow', [8594]], ['Rightarrow', [8658]], ['RightArrowLeftArrow', [8644]], ['rightarrowtail', [8611]], ['RightCeiling', [8969]], ['RightDoubleBracket', [10215]], ['RightDownTeeVector', [10589]], ['RightDownVectorBar', [10581]], ['RightDownVector', [8642]], ['RightFloor', [8971]], ['rightharpoondown', [8641]], ['rightharpoonup', [8640]], ['rightleftarrows', [8644]], ['rightleftharpoons', [8652]], ['rightrightarrows', [8649]], ['rightsquigarrow', [8605]], ['RightTeeArrow', [8614]], ['RightTee', [8866]], ['RightTeeVector', [10587]], ['rightthreetimes', [8908]], ['RightTriangleBar', [10704]], ['RightTriangle', [8883]], ['RightTriangleEqual', [8885]], ['RightUpDownVector', [10575]], ['RightUpTeeVector', [10588]], ['RightUpVectorBar', [10580]], ['RightUpVector', [8638]], ['RightVectorBar', [10579]], ['RightVector', [8640]], ['ring', [730]], ['risingdotseq', [8787]], ['rlarr', [8644]], ['rlhar', [8652]], ['rlm', [8207]], ['rmoustache', [9137]], ['rmoust', [9137]], ['rnmid', [10990]], ['roang', [10221]], ['roarr', [8702]], ['robrk', [10215]], ['ropar', [10630]], ['ropf', [120163]], ['Ropf', [8477]], ['roplus', [10798]], ['rotimes', [10805]], ['RoundImplies', [10608]], ['rpar', [41]], ['rpargt', [10644]], ['rppolint', [10770]], ['rrarr', [8649]], ['Rrightarrow', [8667]], ['rsaquo', [8250]], ['rscr', [120007]], ['Rscr', [8475]], ['rsh', [8625]], ['Rsh', [8625]], ['rsqb', [93]], ['rsquo', [8217]], ['rsquor', [8217]], ['CloseCurlyQuote', [8217]], ['rthree', [8908]], ['rtimes', [8906]], ['rtri', [9657]], ['rtrie', [8885]], ['rtrif', [9656]], ['rtriltri', [10702]], ['RuleDelayed', [10740]], ['ruluhar', [10600]], ['rx', [8478]], ['Sacute', [346]], ['sacute', [347]], ['sbquo', [8218]], ['scap', [10936]], ['Scaron', [352]], ['scaron', [353]], ['Sc', [10940]], ['sc', [8827]], ['sccue', [8829]], ['sce', [10928]], ['scE', [10932]], ['Scedil', [350]], ['scedil', [351]], ['Scirc', [348]], ['scirc', [349]], ['scnap', [10938]], ['scnE', [10934]], ['scnsim', [8937]], ['scpolint', [10771]], ['scsim', [8831]], ['Scy', [1057]], ['scy', [1089]], ['sdotb', [8865]], ['sdot', [8901]], ['sdote', [10854]], ['searhk', [10533]], ['searr', [8600]], ['seArr', [8664]], ['searrow', [8600]], ['sect', [167]], ['semi', [59]], ['seswar', [10537]], ['setminus', [8726]], ['setmn', [8726]], ['sext', [10038]], ['Sfr', [120086]], ['sfr', [120112]], ['sfrown', [8994]], ['sharp', [9839]], ['SHCHcy', [1065]], ['shchcy', [1097]], ['SHcy', [1064]], ['shcy', [1096]], ['ShortDownArrow', [8595]], ['ShortLeftArrow', [8592]], ['shortmid', [8739]], ['shortparallel', [8741]], ['ShortRightArrow', [8594]], ['ShortUpArrow', [8593]], ['shy', [173]], ['Sigma', [931]], ['sigma', [963]], ['sigmaf', [962]], ['sigmav', [962]], ['sim', [8764]], ['simdot', [10858]], ['sime', [8771]], ['simeq', [8771]], ['simg', [10910]], ['simgE', [10912]], ['siml', [10909]], ['simlE', [10911]], ['simne', [8774]], ['simplus', [10788]], ['simrarr', [10610]], ['slarr', [8592]], ['SmallCircle', [8728]], ['smallsetminus', [8726]], ['smashp', [10803]], ['smeparsl', [10724]], ['smid', [8739]], ['smile', [8995]], ['smt', [10922]], ['smte', [10924]], ['smtes', [10924, 65024]], ['SOFTcy', [1068]], ['softcy', [1100]], ['solbar', [9023]], ['solb', [10692]], ['sol', [47]], ['Sopf', [120138]], ['sopf', [120164]], ['spades', [9824]], ['spadesuit', [9824]], ['spar', [8741]], ['sqcap', [8851]], ['sqcaps', [8851, 65024]], ['sqcup', [8852]], ['sqcups', [8852, 65024]], ['Sqrt', [8730]], ['sqsub', [8847]], ['sqsube', [8849]], ['sqsubset', [8847]], ['sqsubseteq', [8849]], ['sqsup', [8848]], ['sqsupe', [8850]], ['sqsupset', [8848]], ['sqsupseteq', [8850]], ['square', [9633]], ['Square', [9633]], ['SquareIntersection', [8851]], ['SquareSubset', [8847]], ['SquareSubsetEqual', [8849]], ['SquareSuperset', [8848]], ['SquareSupersetEqual', [8850]], ['SquareUnion', [8852]], ['squarf', [9642]], ['squ', [9633]], ['squf', [9642]], ['srarr', [8594]], ['Sscr', [119982]], ['sscr', [120008]], ['ssetmn', [8726]], ['ssmile', [8995]], ['sstarf', [8902]], ['Star', [8902]], ['star', [9734]], ['starf', [9733]], ['straightepsilon', [1013]], ['straightphi', [981]], ['strns', [175]], ['sub', [8834]], ['Sub', [8912]], ['subdot', [10941]], ['subE', [10949]], ['sube', [8838]], ['subedot', [10947]], ['submult', [10945]], ['subnE', [10955]], ['subne', [8842]], ['subplus', [10943]], ['subrarr', [10617]], ['subset', [8834]], ['Subset', [8912]], ['subseteq', [8838]], ['subseteqq', [10949]], ['SubsetEqual', [8838]], ['subsetneq', [8842]], ['subsetneqq', [10955]], ['subsim', [10951]], ['subsub', [10965]], ['subsup', [10963]], ['succapprox', [10936]], ['succ', [8827]], ['succcurlyeq', [8829]], ['Succeeds', [8827]], ['SucceedsEqual', [10928]], ['SucceedsSlantEqual', [8829]], ['SucceedsTilde', [8831]], ['succeq', [10928]], ['succnapprox', [10938]], ['succneqq', [10934]], ['succnsim', [8937]], ['succsim', [8831]], ['SuchThat', [8715]], ['sum', [8721]], ['Sum', [8721]], ['sung', [9834]], ['sup1', [185]], ['sup2', [178]], ['sup3', [179]], ['sup', [8835]], ['Sup', [8913]], ['supdot', [10942]], ['supdsub', [10968]], ['supE', [10950]], ['supe', [8839]], ['supedot', [10948]], ['Superset', [8835]], ['SupersetEqual', [8839]], ['suphsol', [10185]], ['suphsub', [10967]], ['suplarr', [10619]], ['supmult', [10946]], ['supnE', [10956]], ['supne', [8843]], ['supplus', [10944]], ['supset', [8835]], ['Supset', [8913]], ['supseteq', [8839]], ['supseteqq', [10950]], ['supsetneq', [8843]], ['supsetneqq', [10956]], ['supsim', [10952]], ['supsub', [10964]], ['supsup', [10966]], ['swarhk', [10534]], ['swarr', [8601]], ['swArr', [8665]], ['swarrow', [8601]], ['swnwar', [10538]], ['szlig', [223]], ['Tab', [9]], ['target', [8982]], ['Tau', [932]], ['tau', [964]], ['tbrk', [9140]], ['Tcaron', [356]], ['tcaron', [357]], ['Tcedil', [354]], ['tcedil', [355]], ['Tcy', [1058]], ['tcy', [1090]], ['tdot', [8411]], ['telrec', [8981]], ['Tfr', [120087]], ['tfr', [120113]], ['there4', [8756]], ['therefore', [8756]], ['Therefore', [8756]], ['Theta', [920]], ['theta', [952]], ['thetasym', [977]], ['thetav', [977]], ['thickapprox', [8776]], ['thicksim', [8764]], ['ThickSpace', [8287, 8202]], ['ThinSpace', [8201]], ['thinsp', [8201]], ['thkap', [8776]], ['thksim', [8764]], ['THORN', [222]], ['thorn', [254]], ['tilde', [732]], ['Tilde', [8764]], ['TildeEqual', [8771]], ['TildeFullEqual', [8773]], ['TildeTilde', [8776]], ['timesbar', [10801]], ['timesb', [8864]], ['times', [215]], ['timesd', [10800]], ['tint', [8749]], ['toea', [10536]], ['topbot', [9014]], ['topcir', [10993]], ['top', [8868]], ['Topf', [120139]], ['topf', [120165]], ['topfork', [10970]], ['tosa', [10537]], ['tprime', [8244]], ['trade', [8482]], ['TRADE', [8482]], ['triangle', [9653]], ['triangledown', [9663]], ['triangleleft', [9667]], ['trianglelefteq', [8884]], ['triangleq', [8796]], ['triangleright', [9657]], ['trianglerighteq', [8885]], ['tridot', [9708]], ['trie', [8796]], ['triminus', [10810]], ['TripleDot', [8411]], ['triplus', [10809]], ['trisb', [10701]], ['tritime', [10811]], ['trpezium', [9186]], ['Tscr', [119983]], ['tscr', [120009]], ['TScy', [1062]], ['tscy', [1094]], ['TSHcy', [1035]], ['tshcy', [1115]], ['Tstrok', [358]], ['tstrok', [359]], ['twixt', [8812]], ['twoheadleftarrow', [8606]], ['twoheadrightarrow', [8608]], ['Uacute', [218]], ['uacute', [250]], ['uarr', [8593]], ['Uarr', [8607]], ['uArr', [8657]], ['Uarrocir', [10569]], ['Ubrcy', [1038]], ['ubrcy', [1118]], ['Ubreve', [364]], ['ubreve', [365]], ['Ucirc', [219]], ['ucirc', [251]], ['Ucy', [1059]], ['ucy', [1091]], ['udarr', [8645]], ['Udblac', [368]], ['udblac', [369]], ['udhar', [10606]], ['ufisht', [10622]], ['Ufr', [120088]], ['ufr', [120114]], ['Ugrave', [217]], ['ugrave', [249]], ['uHar', [10595]], ['uharl', [8639]], ['uharr', [8638]], ['uhblk', [9600]], ['ulcorn', [8988]], ['ulcorner', [8988]], ['ulcrop', [8975]], ['ultri', [9720]], ['Umacr', [362]], ['umacr', [363]], ['uml', [168]], ['UnderBar', [95]], ['UnderBrace', [9183]], ['UnderBracket', [9141]], ['UnderParenthesis', [9181]], ['Union', [8899]], ['UnionPlus', [8846]], ['Uogon', [370]], ['uogon', [371]], ['Uopf', [120140]], ['uopf', [120166]], ['UpArrowBar', [10514]], ['uparrow', [8593]], ['UpArrow', [8593]], ['Uparrow', [8657]], ['UpArrowDownArrow', [8645]], ['updownarrow', [8597]], ['UpDownArrow', [8597]], ['Updownarrow', [8661]], ['UpEquilibrium', [10606]], ['upharpoonleft', [8639]], ['upharpoonright', [8638]], ['uplus', [8846]], ['UpperLeftArrow', [8598]], ['UpperRightArrow', [8599]], ['upsi', [965]], ['Upsi', [978]], ['upsih', [978]], ['Upsilon', [933]], ['upsilon', [965]], ['UpTeeArrow', [8613]], ['UpTee', [8869]], ['upuparrows', [8648]], ['urcorn', [8989]], ['urcorner', [8989]], ['urcrop', [8974]], ['Uring', [366]], ['uring', [367]], ['urtri', [9721]], ['Uscr', [119984]], ['uscr', [120010]], ['utdot', [8944]], ['Utilde', [360]], ['utilde', [361]], ['utri', [9653]], ['utrif', [9652]], ['uuarr', [8648]], ['Uuml', [220]], ['uuml', [252]], ['uwangle', [10663]], ['vangrt', [10652]], ['varepsilon', [1013]], ['varkappa', [1008]], ['varnothing', [8709]], ['varphi', [981]], ['varpi', [982]], ['varpropto', [8733]], ['varr', [8597]], ['vArr', [8661]], ['varrho', [1009]], ['varsigma', [962]], ['varsubsetneq', [8842, 65024]], ['varsubsetneqq', [10955, 65024]], ['varsupsetneq', [8843, 65024]], ['varsupsetneqq', [10956, 65024]], ['vartheta', [977]], ['vartriangleleft', [8882]], ['vartriangleright', [8883]], ['vBar', [10984]], ['Vbar', [10987]], ['vBarv', [10985]], ['Vcy', [1042]], ['vcy', [1074]], ['vdash', [8866]], ['vDash', [8872]], ['Vdash', [8873]], ['VDash', [8875]], ['Vdashl', [10982]], ['veebar', [8891]], ['vee', [8744]], ['Vee', [8897]], ['veeeq', [8794]], ['vellip', [8942]], ['verbar', [124]], ['Verbar', [8214]], ['vert', [124]], ['Vert', [8214]], ['VerticalBar', [8739]], ['VerticalLine', [124]], ['VerticalSeparator', [10072]], ['VerticalTilde', [8768]], ['VeryThinSpace', [8202]], ['Vfr', [120089]], ['vfr', [120115]], ['vltri', [8882]], ['vnsub', [8834, 8402]], ['vnsup', [8835, 8402]], ['Vopf', [120141]], ['vopf', [120167]], ['vprop', [8733]], ['vrtri', [8883]], ['Vscr', [119985]], ['vscr', [120011]], ['vsubnE', [10955, 65024]], ['vsubne', [8842, 65024]], ['vsupnE', [10956, 65024]], ['vsupne', [8843, 65024]], ['Vvdash', [8874]], ['vzigzag', [10650]], ['Wcirc', [372]], ['wcirc', [373]], ['wedbar', [10847]], ['wedge', [8743]], ['Wedge', [8896]], ['wedgeq', [8793]], ['weierp', [8472]], ['Wfr', [120090]], ['wfr', [120116]], ['Wopf', [120142]], ['wopf', [120168]], ['wp', [8472]], ['wr', [8768]], ['wreath', [8768]], ['Wscr', [119986]], ['wscr', [120012]], ['xcap', [8898]], ['xcirc', [9711]], ['xcup', [8899]], ['xdtri', [9661]], ['Xfr', [120091]], ['xfr', [120117]], ['xharr', [10231]], ['xhArr', [10234]], ['Xi', [926]], ['xi', [958]], ['xlarr', [10229]], ['xlArr', [10232]], ['xmap', [10236]], ['xnis', [8955]], ['xodot', [10752]], ['Xopf', [120143]], ['xopf', [120169]], ['xoplus', [10753]], ['xotime', [10754]], ['xrarr', [10230]], ['xrArr', [10233]], ['Xscr', [119987]], ['xscr', [120013]], ['xsqcup', [10758]], ['xuplus', [10756]], ['xutri', [9651]], ['xvee', [8897]], ['xwedge', [8896]], ['Yacute', [221]], ['yacute', [253]], ['YAcy', [1071]], ['yacy', [1103]], ['Ycirc', [374]], ['ycirc', [375]], ['Ycy', [1067]], ['ycy', [1099]], ['yen', [165]], ['Yfr', [120092]], ['yfr', [120118]], ['YIcy', [1031]], ['yicy', [1111]], ['Yopf', [120144]], ['yopf', [120170]], ['Yscr', [119988]], ['yscr', [120014]], ['YUcy', [1070]], ['yucy', [1102]], ['yuml', [255]], ['Yuml', [376]], ['Zacute', [377]], ['zacute', [378]], ['Zcaron', [381]], ['zcaron', [382]], ['Zcy', [1047]], ['zcy', [1079]], ['Zdot', [379]], ['zdot', [380]], ['zeetrf', [8488]], ['ZeroWidthSpace', [8203]], ['Zeta', [918]], ['zeta', [950]], ['zfr', [120119]], ['Zfr', [8488]], ['ZHcy', [1046]], ['zhcy', [1078]], ['zigrarr', [8669]], ['zopf', [120171]], ['Zopf', [8484]], ['Zscr', [119989]], ['zscr', [120015]], ['zwj', [8205]], ['zwnj', [8204]]];\nvar DECODE_ONLY_ENTITIES = [['NewLine', [10]]];\nvar alphaIndex = {};\nvar charIndex = {};\ncreateIndexes(alphaIndex, charIndex);\nvar Html5Entities = /** @class */ (function () {\n    function Html5Entities() {\n    }\n    Html5Entities.prototype.decode = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        return str.replace(/&(#?[\\w\\d]+);?/g, function (s, entity) {\n            var chr;\n            if (entity.charAt(0) === \"#\") {\n                var code = entity.charAt(1) === 'x' ?\n                    parseInt(entity.substr(2).toLowerCase(), 16) :\n                    parseInt(entity.substr(1));\n                if (!isNaN(code) || code >= -32768) {\n                    if (code <= 65535) {\n                        chr = String.fromCharCode(code);\n                    }\n                    else {\n                        chr = surrogate_pairs_1.fromCodePoint(code);\n                    }\n                }\n            }\n            else {\n                chr = alphaIndex[entity];\n            }\n            return chr || s;\n        });\n    };\n    Html5Entities.decode = function (str) {\n        return new Html5Entities().decode(str);\n    };\n    Html5Entities.prototype.encode = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var charInfo = charIndex[str.charCodeAt(i)];\n            if (charInfo) {\n                var alpha = charInfo[str.charCodeAt(i + 1)];\n                if (alpha) {\n                    i++;\n                }\n                else {\n                    alpha = charInfo[''];\n                }\n                if (alpha) {\n                    result += \"&\" + alpha + \";\";\n                    i++;\n                    continue;\n                }\n            }\n            result += str.charAt(i);\n            i++;\n        }\n        return result;\n    };\n    Html5Entities.encode = function (str) {\n        return new Html5Entities().encode(str);\n    };\n    Html5Entities.prototype.encodeNonUTF = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var c = str.charCodeAt(i);\n            var charInfo = charIndex[c];\n            if (charInfo) {\n                var alpha = charInfo[str.charCodeAt(i + 1)];\n                if (alpha) {\n                    i++;\n                }\n                else {\n                    alpha = charInfo[''];\n                }\n                if (alpha) {\n                    result += \"&\" + alpha + \";\";\n                    i++;\n                    continue;\n                }\n            }\n            if (c < 32 || c > 126) {\n                if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {\n                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n                    i++;\n                }\n                else {\n                    result += '&#' + c + ';';\n                }\n            }\n            else {\n                result += str.charAt(i);\n            }\n            i++;\n        }\n        return result;\n    };\n    Html5Entities.encodeNonUTF = function (str) {\n        return new Html5Entities().encodeNonUTF(str);\n    };\n    Html5Entities.prototype.encodeNonASCII = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var c = str.charCodeAt(i);\n            if (c <= 255) {\n                result += str[i++];\n                continue;\n            }\n            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {\n                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n                i += 2;\n            }\n            else {\n                result += '&#' + c + ';';\n                i++;\n            }\n        }\n        return result;\n    };\n    Html5Entities.encodeNonASCII = function (str) {\n        return new Html5Entities().encodeNonASCII(str);\n    };\n    return Html5Entities;\n}());\nexports.Html5Entities = Html5Entities;\nfunction createIndexes(alphaIndex, charIndex) {\n    var i = ENTITIES.length;\n    while (i--) {\n        var _a = ENTITIES[i], alpha = _a[0], _b = _a[1], chr = _b[0], chr2 = _b[1];\n        var addChar = (chr < 32 || chr > 126) || chr === 62 || chr === 60 || chr === 38 || chr === 34 || chr === 39;\n        var charInfo = void 0;\n        if (addChar) {\n            charInfo = charIndex[chr] = charIndex[chr] || {};\n        }\n        if (chr2) {\n            alphaIndex[alpha] = String.fromCharCode(chr) + String.fromCharCode(chr2);\n            addChar && (charInfo[chr2] = alpha);\n        }\n        else {\n            alphaIndex[alpha] = String.fromCharCode(chr);\n            addChar && (charInfo[''] = alpha);\n        }\n    }\n    i = DECODE_ONLY_ENTITIES.length;\n    while (i--) {\n        var _c = DECODE_ONLY_ENTITIES[i], alpha = _c[0], _d = _c[1], chr = _d[0], chr2 = _d[1];\n        alphaIndex[alpha] = String.fromCharCode(chr) + (chr2 ? String.fromCharCode(chr2) : '');\n    }\n}\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar xml_entities_1 = require(\"./xml-entities\");\nexports.XmlEntities = xml_entities_1.XmlEntities;\nvar html4_entities_1 = require(\"./html4-entities\");\nexports.Html4Entities = html4_entities_1.Html4Entities;\nvar html5_entities_1 = require(\"./html5-entities\");\nexports.Html5Entities = html5_entities_1.Html5Entities;\nexports.AllHtmlEntities = html5_entities_1.Html5Entities;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.fromCodePoint = String.fromCodePoint || function (astralCodePoint) {\n    return String.fromCharCode(Math.floor((astralCodePoint - 0x10000) / 0x400) + 0xD800, (astralCodePoint - 0x10000) % 0x400 + 0xDC00);\n};\nexports.getCodePoint = String.prototype.codePointAt ?\n    function (input, position) {\n        return input.codePointAt(position);\n    } :\n    function (input, position) {\n        return (input.charCodeAt(position) - 0xD800) * 0x400\n            + input.charCodeAt(position + 1) - 0xDC00 + 0x10000;\n    };\nexports.highSurrogateFrom = 0xD800;\nexports.highSurrogateTo = 0xDBFF;\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar surrogate_pairs_1 = require(\"./surrogate-pairs\");\nvar ALPHA_INDEX = {\n    '&lt': '<',\n    '&gt': '>',\n    '&quot': '\"',\n    '&apos': '\\'',\n    '&amp': '&',\n    '&lt;': '<',\n    '&gt;': '>',\n    '&quot;': '\"',\n    '&apos;': '\\'',\n    '&amp;': '&'\n};\nvar CHAR_INDEX = {\n    60: 'lt',\n    62: 'gt',\n    34: 'quot',\n    39: 'apos',\n    38: 'amp'\n};\nvar CHAR_S_INDEX = {\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    '\\'': '&apos;',\n    '&': '&amp;'\n};\nvar XmlEntities = /** @class */ (function () {\n    function XmlEntities() {\n    }\n    XmlEntities.prototype.encode = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        return str.replace(/[<>\"'&]/g, function (s) {\n            return CHAR_S_INDEX[s];\n        });\n    };\n    XmlEntities.encode = function (str) {\n        return new XmlEntities().encode(str);\n    };\n    XmlEntities.prototype.decode = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        return str.replace(/&#?[0-9a-zA-Z]+;?/g, function (s) {\n            if (s.charAt(1) === '#') {\n                var code = s.charAt(2).toLowerCase() === 'x' ?\n                    parseInt(s.substr(3), 16) :\n                    parseInt(s.substr(2));\n                if (!isNaN(code) || code >= -32768) {\n                    if (code <= 65535) {\n                        return String.fromCharCode(code);\n                    }\n                    else {\n                        return surrogate_pairs_1.fromCodePoint(code);\n                    }\n                }\n                return '';\n            }\n            return ALPHA_INDEX[s] || s;\n        });\n    };\n    XmlEntities.decode = function (str) {\n        return new XmlEntities().decode(str);\n    };\n    XmlEntities.prototype.encodeNonUTF = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var c = str.charCodeAt(i);\n            var alpha = CHAR_INDEX[c];\n            if (alpha) {\n                result += \"&\" + alpha + \";\";\n                i++;\n                continue;\n            }\n            if (c < 32 || c > 126) {\n                if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {\n                    result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n                    i++;\n                }\n                else {\n                    result += '&#' + c + ';';\n                }\n            }\n            else {\n                result += str.charAt(i);\n            }\n            i++;\n        }\n        return result;\n    };\n    XmlEntities.encodeNonUTF = function (str) {\n        return new XmlEntities().encodeNonUTF(str);\n    };\n    XmlEntities.prototype.encodeNonASCII = function (str) {\n        if (!str || !str.length) {\n            return '';\n        }\n        var strLength = str.length;\n        var result = '';\n        var i = 0;\n        while (i < strLength) {\n            var c = str.charCodeAt(i);\n            if (c <= 255) {\n                result += str[i++];\n                continue;\n            }\n            if (c >= surrogate_pairs_1.highSurrogateFrom && c <= surrogate_pairs_1.highSurrogateTo) {\n                result += '&#' + surrogate_pairs_1.getCodePoint(str, i) + ';';\n                i++;\n            }\n            else {\n                result += '&#' + c + ';';\n            }\n            i++;\n        }\n        return result;\n    };\n    XmlEntities.encodeNonASCII = function (str) {\n        return new XmlEntities().encodeNonASCII(str);\n    };\n    return XmlEntities;\n}());\nexports.XmlEntities = XmlEntities;\n","/*\n* loglevel - https://github.com/pimterry/loglevel\n*\n* Copyright (c) 2013 Tim Perry\n* Licensed under the MIT license.\n*/\n(function (root, definition) {\n    \"use strict\";\n    if (typeof define === 'function' && define.amd) {\n        define(definition);\n    } else if (typeof module === 'object' && module.exports) {\n        module.exports = definition();\n    } else {\n        root.log = definition();\n    }\n}(this, function () {\n    \"use strict\";\n\n    // Slightly dubious tricks to cut down minimized file size\n    var noop = function() {};\n    var undefinedType = \"undefined\";\n    var isIE = (typeof window !== undefinedType) && (typeof window.navigator !== undefinedType) && (\n        /Trident\\/|MSIE /.test(window.navigator.userAgent)\n    );\n\n    var logMethods = [\n        \"trace\",\n        \"debug\",\n        \"info\",\n        \"warn\",\n        \"error\"\n    ];\n\n    // Cross-browser bind equivalent that works at least back to IE6\n    function bindMethod(obj, methodName) {\n        var method = obj[methodName];\n        if (typeof method.bind === 'function') {\n            return method.bind(obj);\n        } else {\n            try {\n                return Function.prototype.bind.call(method, obj);\n            } catch (e) {\n                // Missing bind shim or IE8 + Modernizr, fallback to wrapping\n                return function() {\n                    return Function.prototype.apply.apply(method, [obj, arguments]);\n                };\n            }\n        }\n    }\n\n    // Trace() doesn't print the message in IE, so for that case we need to wrap it\n    function traceForIE() {\n        if (console.log) {\n            if (console.log.apply) {\n                console.log.apply(console, arguments);\n            } else {\n                // In old IE, native console methods themselves don't have apply().\n                Function.prototype.apply.apply(console.log, [console, arguments]);\n            }\n        }\n        if (console.trace) console.trace();\n    }\n\n    // Build the best logging method possible for this env\n    // Wherever possible we want to bind, not wrap, to preserve stack traces\n    function realMethod(methodName) {\n        if (methodName === 'debug') {\n            methodName = 'log';\n        }\n\n        if (typeof console === undefinedType) {\n            return false; // No method possible, for now - fixed later by enableLoggingWhenConsoleArrives\n        } else if (methodName === 'trace' && isIE) {\n            return traceForIE;\n        } else if (console[methodName] !== undefined) {\n            return bindMethod(console, methodName);\n        } else if (console.log !== undefined) {\n            return bindMethod(console, 'log');\n        } else {\n            return noop;\n        }\n    }\n\n    // These private functions always need `this` to be set properly\n\n    function replaceLoggingMethods(level, loggerName) {\n        /*jshint validthis:true */\n        for (var i = 0; i < logMethods.length; i++) {\n            var methodName = logMethods[i];\n            this[methodName] = (i < level) ?\n                noop :\n                this.methodFactory(methodName, level, loggerName);\n        }\n\n        // Define log.log as an alias for log.debug\n        this.log = this.debug;\n    }\n\n    // In old IE versions, the console isn't present until you first open it.\n    // We build realMethod() replacements here that regenerate logging methods\n    function enableLoggingWhenConsoleArrives(methodName, level, loggerName) {\n        return function () {\n            if (typeof console !== undefinedType) {\n                replaceLoggingMethods.call(this, level, loggerName);\n                this[methodName].apply(this, arguments);\n            }\n        };\n    }\n\n    // By default, we use closely bound real methods wherever possible, and\n    // otherwise we wait for a console to appear, and then try again.\n    function defaultMethodFactory(methodName, level, loggerName) {\n        /*jshint validthis:true */\n        return realMethod(methodName) ||\n               enableLoggingWhenConsoleArrives.apply(this, arguments);\n    }\n\n    function Logger(name, defaultLevel, factory) {\n      var self = this;\n      var currentLevel;\n      defaultLevel = defaultLevel == null ? \"WARN\" : defaultLevel;\n\n      var storageKey = \"loglevel\";\n      if (typeof name === \"string\") {\n        storageKey += \":\" + name;\n      } else if (typeof name === \"symbol\") {\n        storageKey = undefined;\n      }\n\n      function persistLevelIfPossible(levelNum) {\n          var levelName = (logMethods[levelNum] || 'silent').toUpperCase();\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage[storageKey] = levelName;\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=\" + levelName + \";\";\n          } catch (ignore) {}\n      }\n\n      function getPersistedLevel() {\n          var storedLevel;\n\n          if (typeof window === undefinedType || !storageKey) return;\n\n          try {\n              storedLevel = window.localStorage[storageKey];\n          } catch (ignore) {}\n\n          // Fallback to cookies if local storage gives us nothing\n          if (typeof storedLevel === undefinedType) {\n              try {\n                  var cookie = window.document.cookie;\n                  var location = cookie.indexOf(\n                      encodeURIComponent(storageKey) + \"=\");\n                  if (location !== -1) {\n                      storedLevel = /^([^;]+)/.exec(cookie.slice(location))[1];\n                  }\n              } catch (ignore) {}\n          }\n\n          // If the stored level is not valid, treat it as if nothing was stored.\n          if (self.levels[storedLevel] === undefined) {\n              storedLevel = undefined;\n          }\n\n          return storedLevel;\n      }\n\n      function clearPersistedLevel() {\n          if (typeof window === undefinedType || !storageKey) return;\n\n          // Use localStorage if available\n          try {\n              window.localStorage.removeItem(storageKey);\n              return;\n          } catch (ignore) {}\n\n          // Use session cookie as fallback\n          try {\n              window.document.cookie =\n                encodeURIComponent(storageKey) + \"=; expires=Thu, 01 Jan 1970 00:00:00 UTC\";\n          } catch (ignore) {}\n      }\n\n      /*\n       *\n       * Public logger API - see https://github.com/pimterry/loglevel for details\n       *\n       */\n\n      self.name = name;\n\n      self.levels = { \"TRACE\": 0, \"DEBUG\": 1, \"INFO\": 2, \"WARN\": 3,\n          \"ERROR\": 4, \"SILENT\": 5};\n\n      self.methodFactory = factory || defaultMethodFactory;\n\n      self.getLevel = function () {\n          return currentLevel;\n      };\n\n      self.setLevel = function (level, persist) {\n          if (typeof level === \"string\" && self.levels[level.toUpperCase()] !== undefined) {\n              level = self.levels[level.toUpperCase()];\n          }\n          if (typeof level === \"number\" && level >= 0 && level <= self.levels.SILENT) {\n              currentLevel = level;\n              if (persist !== false) {  // defaults to true\n                  persistLevelIfPossible(level);\n              }\n              replaceLoggingMethods.call(self, level, name);\n              if (typeof console === undefinedType && level < self.levels.SILENT) {\n                  return \"No console available for logging\";\n              }\n          } else {\n              throw \"log.setLevel() called with invalid level: \" + level;\n          }\n      };\n\n      self.setDefaultLevel = function (level) {\n          defaultLevel = level;\n          if (!getPersistedLevel()) {\n              self.setLevel(level, false);\n          }\n      };\n\n      self.resetLevel = function () {\n          self.setLevel(defaultLevel, false);\n          clearPersistedLevel();\n      };\n\n      self.enableAll = function(persist) {\n          self.setLevel(self.levels.TRACE, persist);\n      };\n\n      self.disableAll = function(persist) {\n          self.setLevel(self.levels.SILENT, persist);\n      };\n\n      // Initialize with the right level\n      var initialLevel = getPersistedLevel();\n      if (initialLevel == null) {\n          initialLevel = defaultLevel;\n      }\n      self.setLevel(initialLevel, false);\n    }\n\n    /*\n     *\n     * Top-level API\n     *\n     */\n\n    var defaultLogger = new Logger();\n\n    var _loggersByName = {};\n    defaultLogger.getLogger = function getLogger(name) {\n        if ((typeof name !== \"symbol\" && typeof name !== \"string\") || name === \"\") {\n          throw new TypeError(\"You must supply a name when creating a logger.\");\n        }\n\n        var logger = _loggersByName[name];\n        if (!logger) {\n          logger = _loggersByName[name] = new Logger(\n            name, defaultLogger.getLevel(), defaultLogger.methodFactory);\n        }\n        return logger;\n    };\n\n    // Grab the current global log variable in case of overwrite\n    var _log = (typeof window !== undefinedType) ? window.log : undefined;\n    defaultLogger.noConflict = function() {\n        if (typeof window !== undefinedType &&\n               window.log === defaultLogger) {\n            window.log = _log;\n        }\n\n        return defaultLogger;\n    };\n\n    defaultLogger.getLoggers = function getLoggers() {\n        return _loggersByName;\n    };\n\n    // ES6 default export, for compatibility\n    defaultLogger['default'] = defaultLogger;\n\n    return defaultLogger;\n}));\n","/*! https://mths.be/punycode v1.3.2 by @mathias */\n;(function(root) {\n\n\t/** Detect free variables */\n\tvar freeExports = typeof exports == 'object' && exports &&\n\t\t!exports.nodeType && exports;\n\tvar freeModule = typeof module == 'object' && module &&\n\t\t!module.nodeType && module;\n\tvar freeGlobal = typeof global == 'object' && global;\n\tif (\n\t\tfreeGlobal.global === freeGlobal ||\n\t\tfreeGlobal.window === freeGlobal ||\n\t\tfreeGlobal.self === freeGlobal\n\t) {\n\t\troot = freeGlobal;\n\t}\n\n\t/**\n\t * The `punycode` object.\n\t * @name punycode\n\t * @type Object\n\t */\n\tvar punycode,\n\n\t/** Highest positive signed 32-bit float value */\n\tmaxInt = 2147483647, // aka. 0x7FFFFFFF or 2^31-1\n\n\t/** Bootstring parameters */\n\tbase = 36,\n\ttMin = 1,\n\ttMax = 26,\n\tskew = 38,\n\tdamp = 700,\n\tinitialBias = 72,\n\tinitialN = 128, // 0x80\n\tdelimiter = '-', // '\\x2D'\n\n\t/** Regular expressions */\n\tregexPunycode = /^xn--/,\n\tregexNonASCII = /[^\\x20-\\x7E]/, // unprintable ASCII chars + non-ASCII chars\n\tregexSeparators = /[\\x2E\\u3002\\uFF0E\\uFF61]/g, // RFC 3490 separators\n\n\t/** Error messages */\n\terrors = {\n\t\t'overflow': 'Overflow: input needs wider integers to process',\n\t\t'not-basic': 'Illegal input >= 0x80 (not a basic code point)',\n\t\t'invalid-input': 'Invalid input'\n\t},\n\n\t/** Convenience shortcuts */\n\tbaseMinusTMin = base - tMin,\n\tfloor = Math.floor,\n\tstringFromCharCode = String.fromCharCode,\n\n\t/** Temporary variable */\n\tkey;\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/**\n\t * A generic error utility function.\n\t * @private\n\t * @param {String} type The error type.\n\t * @returns {Error} Throws a `RangeError` with the applicable error message.\n\t */\n\tfunction error(type) {\n\t\tthrow RangeError(errors[type]);\n\t}\n\n\t/**\n\t * A generic `Array#map` utility function.\n\t * @private\n\t * @param {Array} array The array to iterate over.\n\t * @param {Function} callback The function that gets called for every array\n\t * item.\n\t * @returns {Array} A new array of values returned by the callback function.\n\t */\n\tfunction map(array, fn) {\n\t\tvar length = array.length;\n\t\tvar result = [];\n\t\twhile (length--) {\n\t\t\tresult[length] = fn(array[length]);\n\t\t}\n\t\treturn result;\n\t}\n\n\t/**\n\t * A simple `Array#map`-like wrapper to work with domain name strings or email\n\t * addresses.\n\t * @private\n\t * @param {String} domain The domain name or email address.\n\t * @param {Function} callback The function that gets called for every\n\t * character.\n\t * @returns {Array} A new string of characters returned by the callback\n\t * function.\n\t */\n\tfunction mapDomain(string, fn) {\n\t\tvar parts = string.split('@');\n\t\tvar result = '';\n\t\tif (parts.length > 1) {\n\t\t\t// In email addresses, only the domain name should be punycoded. Leave\n\t\t\t// the local part (i.e. everything up to `@`) intact.\n\t\t\tresult = parts[0] + '@';\n\t\t\tstring = parts[1];\n\t\t}\n\t\t// Avoid `split(regex)` for IE8 compatibility. See #17.\n\t\tstring = string.replace(regexSeparators, '\\x2E');\n\t\tvar labels = string.split('.');\n\t\tvar encoded = map(labels, fn).join('.');\n\t\treturn result + encoded;\n\t}\n\n\t/**\n\t * Creates an array containing the numeric code points of each Unicode\n\t * character in the string. While JavaScript uses UCS-2 internally,\n\t * this function will convert a pair of surrogate halves (each of which\n\t * UCS-2 exposes as separate characters) into a single code point,\n\t * matching UTF-16.\n\t * @see `punycode.ucs2.encode`\n\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t * @memberOf punycode.ucs2\n\t * @name decode\n\t * @param {String} string The Unicode input string (UCS-2).\n\t * @returns {Array} The new array of code points.\n\t */\n\tfunction ucs2decode(string) {\n\t\tvar output = [],\n\t\t    counter = 0,\n\t\t    length = string.length,\n\t\t    value,\n\t\t    extra;\n\t\twhile (counter < length) {\n\t\t\tvalue = string.charCodeAt(counter++);\n\t\t\tif (value >= 0xD800 && value <= 0xDBFF && counter < length) {\n\t\t\t\t// high surrogate, and there is a next character\n\t\t\t\textra = string.charCodeAt(counter++);\n\t\t\t\tif ((extra & 0xFC00) == 0xDC00) { // low surrogate\n\t\t\t\t\toutput.push(((value & 0x3FF) << 10) + (extra & 0x3FF) + 0x10000);\n\t\t\t\t} else {\n\t\t\t\t\t// unmatched surrogate; only append this code unit, in case the next\n\t\t\t\t\t// code unit is the high surrogate of a surrogate pair\n\t\t\t\t\toutput.push(value);\n\t\t\t\t\tcounter--;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\toutput.push(value);\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t/**\n\t * Creates a string based on an array of numeric code points.\n\t * @see `punycode.ucs2.decode`\n\t * @memberOf punycode.ucs2\n\t * @name encode\n\t * @param {Array} codePoints The array of numeric code points.\n\t * @returns {String} The new Unicode string (UCS-2).\n\t */\n\tfunction ucs2encode(array) {\n\t\treturn map(array, function(value) {\n\t\t\tvar output = '';\n\t\t\tif (value > 0xFFFF) {\n\t\t\t\tvalue -= 0x10000;\n\t\t\t\toutput += stringFromCharCode(value >>> 10 & 0x3FF | 0xD800);\n\t\t\t\tvalue = 0xDC00 | value & 0x3FF;\n\t\t\t}\n\t\t\toutput += stringFromCharCode(value);\n\t\t\treturn output;\n\t\t}).join('');\n\t}\n\n\t/**\n\t * Converts a basic code point into a digit/integer.\n\t * @see `digitToBasic()`\n\t * @private\n\t * @param {Number} codePoint The basic numeric code point value.\n\t * @returns {Number} The numeric value of a basic code point (for use in\n\t * representing integers) in the range `0` to `base - 1`, or `base` if\n\t * the code point does not represent a value.\n\t */\n\tfunction basicToDigit(codePoint) {\n\t\tif (codePoint - 48 < 10) {\n\t\t\treturn codePoint - 22;\n\t\t}\n\t\tif (codePoint - 65 < 26) {\n\t\t\treturn codePoint - 65;\n\t\t}\n\t\tif (codePoint - 97 < 26) {\n\t\t\treturn codePoint - 97;\n\t\t}\n\t\treturn base;\n\t}\n\n\t/**\n\t * Converts a digit/integer into a basic code point.\n\t * @see `basicToDigit()`\n\t * @private\n\t * @param {Number} digit The numeric value of a basic code point.\n\t * @returns {Number} The basic code point whose value (when used for\n\t * representing integers) is `digit`, which needs to be in the range\n\t * `0` to `base - 1`. If `flag` is non-zero, the uppercase form is\n\t * used; else, the lowercase form is used. The behavior is undefined\n\t * if `flag` is non-zero and `digit` has no uppercase form.\n\t */\n\tfunction digitToBasic(digit, flag) {\n\t\t//  0..25 map to ASCII a..z or A..Z\n\t\t// 26..35 map to ASCII 0..9\n\t\treturn digit + 22 + 75 * (digit < 26) - ((flag != 0) << 5);\n\t}\n\n\t/**\n\t * Bias adaptation function as per section 3.4 of RFC 3492.\n\t * http://tools.ietf.org/html/rfc3492#section-3.4\n\t * @private\n\t */\n\tfunction adapt(delta, numPoints, firstTime) {\n\t\tvar k = 0;\n\t\tdelta = firstTime ? floor(delta / damp) : delta >> 1;\n\t\tdelta += floor(delta / numPoints);\n\t\tfor (/* no initialization */; delta > baseMinusTMin * tMax >> 1; k += base) {\n\t\t\tdelta = floor(delta / baseMinusTMin);\n\t\t}\n\t\treturn floor(k + (baseMinusTMin + 1) * delta / (delta + skew));\n\t}\n\n\t/**\n\t * Converts a Punycode string of ASCII-only symbols to a string of Unicode\n\t * symbols.\n\t * @memberOf punycode\n\t * @param {String} input The Punycode string of ASCII-only symbols.\n\t * @returns {String} The resulting string of Unicode symbols.\n\t */\n\tfunction decode(input) {\n\t\t// Don't use UCS-2\n\t\tvar output = [],\n\t\t    inputLength = input.length,\n\t\t    out,\n\t\t    i = 0,\n\t\t    n = initialN,\n\t\t    bias = initialBias,\n\t\t    basic,\n\t\t    j,\n\t\t    index,\n\t\t    oldi,\n\t\t    w,\n\t\t    k,\n\t\t    digit,\n\t\t    t,\n\t\t    /** Cached calculation results */\n\t\t    baseMinusT;\n\n\t\t// Handle the basic code points: let `basic` be the number of input code\n\t\t// points before the last delimiter, or `0` if there is none, then copy\n\t\t// the first basic code points to the output.\n\n\t\tbasic = input.lastIndexOf(delimiter);\n\t\tif (basic < 0) {\n\t\t\tbasic = 0;\n\t\t}\n\n\t\tfor (j = 0; j < basic; ++j) {\n\t\t\t// if it's not a basic code point\n\t\t\tif (input.charCodeAt(j) >= 0x80) {\n\t\t\t\terror('not-basic');\n\t\t\t}\n\t\t\toutput.push(input.charCodeAt(j));\n\t\t}\n\n\t\t// Main decoding loop: start just after the last delimiter if any basic code\n\t\t// points were copied; start at the beginning otherwise.\n\n\t\tfor (index = basic > 0 ? basic + 1 : 0; index < inputLength; /* no final expression */) {\n\n\t\t\t// `index` is the index of the next character to be consumed.\n\t\t\t// Decode a generalized variable-length integer into `delta`,\n\t\t\t// which gets added to `i`. The overflow checking is easier\n\t\t\t// if we increase `i` as we go, then subtract off its starting\n\t\t\t// value at the end to obtain `delta`.\n\t\t\tfor (oldi = i, w = 1, k = base; /* no condition */; k += base) {\n\n\t\t\t\tif (index >= inputLength) {\n\t\t\t\t\terror('invalid-input');\n\t\t\t\t}\n\n\t\t\t\tdigit = basicToDigit(input.charCodeAt(index++));\n\n\t\t\t\tif (digit >= base || digit > floor((maxInt - i) / w)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\ti += digit * w;\n\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\n\t\t\t\tif (digit < t) {\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\n\t\t\t\tbaseMinusT = base - t;\n\t\t\t\tif (w > floor(maxInt / baseMinusT)) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tw *= baseMinusT;\n\n\t\t\t}\n\n\t\t\tout = output.length + 1;\n\t\t\tbias = adapt(i - oldi, out, oldi == 0);\n\n\t\t\t// `i` was supposed to wrap around from `out` to `0`,\n\t\t\t// incrementing `n` each time, so we'll fix that now:\n\t\t\tif (floor(i / out) > maxInt - n) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tn += floor(i / out);\n\t\t\ti %= out;\n\n\t\t\t// Insert `n` at position `i` of the output\n\t\t\toutput.splice(i++, 0, n);\n\n\t\t}\n\n\t\treturn ucs2encode(output);\n\t}\n\n\t/**\n\t * Converts a string of Unicode symbols (e.g. a domain name label) to a\n\t * Punycode string of ASCII-only symbols.\n\t * @memberOf punycode\n\t * @param {String} input The string of Unicode symbols.\n\t * @returns {String} The resulting Punycode string of ASCII-only symbols.\n\t */\n\tfunction encode(input) {\n\t\tvar n,\n\t\t    delta,\n\t\t    handledCPCount,\n\t\t    basicLength,\n\t\t    bias,\n\t\t    j,\n\t\t    m,\n\t\t    q,\n\t\t    k,\n\t\t    t,\n\t\t    currentValue,\n\t\t    output = [],\n\t\t    /** `inputLength` will hold the number of code points in `input`. */\n\t\t    inputLength,\n\t\t    /** Cached calculation results */\n\t\t    handledCPCountPlusOne,\n\t\t    baseMinusT,\n\t\t    qMinusT;\n\n\t\t// Convert the input in UCS-2 to Unicode\n\t\tinput = ucs2decode(input);\n\n\t\t// Cache the length\n\t\tinputLength = input.length;\n\n\t\t// Initialize the state\n\t\tn = initialN;\n\t\tdelta = 0;\n\t\tbias = initialBias;\n\n\t\t// Handle the basic code points\n\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\tcurrentValue = input[j];\n\t\t\tif (currentValue < 0x80) {\n\t\t\t\toutput.push(stringFromCharCode(currentValue));\n\t\t\t}\n\t\t}\n\n\t\thandledCPCount = basicLength = output.length;\n\n\t\t// `handledCPCount` is the number of code points that have been handled;\n\t\t// `basicLength` is the number of basic code points.\n\n\t\t// Finish the basic string - if it is not empty - with a delimiter\n\t\tif (basicLength) {\n\t\t\toutput.push(delimiter);\n\t\t}\n\n\t\t// Main encoding loop:\n\t\twhile (handledCPCount < inputLength) {\n\n\t\t\t// All non-basic code points < n have been handled already. Find the next\n\t\t\t// larger one:\n\t\t\tfor (m = maxInt, j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\t\t\t\tif (currentValue >= n && currentValue < m) {\n\t\t\t\t\tm = currentValue;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Increase `delta` enough to advance the decoder's <n,i> state to <m,0>,\n\t\t\t// but guard against overflow\n\t\t\thandledCPCountPlusOne = handledCPCount + 1;\n\t\t\tif (m - n > floor((maxInt - delta) / handledCPCountPlusOne)) {\n\t\t\t\terror('overflow');\n\t\t\t}\n\n\t\t\tdelta += (m - n) * handledCPCountPlusOne;\n\t\t\tn = m;\n\n\t\t\tfor (j = 0; j < inputLength; ++j) {\n\t\t\t\tcurrentValue = input[j];\n\n\t\t\t\tif (currentValue < n && ++delta > maxInt) {\n\t\t\t\t\terror('overflow');\n\t\t\t\t}\n\n\t\t\t\tif (currentValue == n) {\n\t\t\t\t\t// Represent delta as a generalized variable-length integer\n\t\t\t\t\tfor (q = delta, k = base; /* no condition */; k += base) {\n\t\t\t\t\t\tt = k <= bias ? tMin : (k >= bias + tMax ? tMax : k - bias);\n\t\t\t\t\t\tif (q < t) {\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tqMinusT = q - t;\n\t\t\t\t\t\tbaseMinusT = base - t;\n\t\t\t\t\t\toutput.push(\n\t\t\t\t\t\t\tstringFromCharCode(digitToBasic(t + qMinusT % baseMinusT, 0))\n\t\t\t\t\t\t);\n\t\t\t\t\t\tq = floor(qMinusT / baseMinusT);\n\t\t\t\t\t}\n\n\t\t\t\t\toutput.push(stringFromCharCode(digitToBasic(q, 0)));\n\t\t\t\t\tbias = adapt(delta, handledCPCountPlusOne, handledCPCount == basicLength);\n\t\t\t\t\tdelta = 0;\n\t\t\t\t\t++handledCPCount;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t++delta;\n\t\t\t++n;\n\n\t\t}\n\t\treturn output.join('');\n\t}\n\n\t/**\n\t * Converts a Punycode string representing a domain name or an email address\n\t * to Unicode. Only the Punycoded parts of the input will be converted, i.e.\n\t * it doesn't matter if you call it on a string that has already been\n\t * converted to Unicode.\n\t * @memberOf punycode\n\t * @param {String} input The Punycoded domain name or email address to\n\t * convert to Unicode.\n\t * @returns {String} The Unicode representation of the given Punycode\n\t * string.\n\t */\n\tfunction toUnicode(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexPunycode.test(string)\n\t\t\t\t? decode(string.slice(4).toLowerCase())\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/**\n\t * Converts a Unicode string representing a domain name or an email address to\n\t * Punycode. Only the non-ASCII parts of the domain name will be converted,\n\t * i.e. it doesn't matter if you call it with a domain that's already in\n\t * ASCII.\n\t * @memberOf punycode\n\t * @param {String} input The domain name or email address to convert, as a\n\t * Unicode string.\n\t * @returns {String} The Punycode representation of the given domain name or\n\t * email address.\n\t */\n\tfunction toASCII(input) {\n\t\treturn mapDomain(input, function(string) {\n\t\t\treturn regexNonASCII.test(string)\n\t\t\t\t? 'xn--' + encode(string)\n\t\t\t\t: string;\n\t\t});\n\t}\n\n\t/*--------------------------------------------------------------------------*/\n\n\t/** Define the public API */\n\tpunycode = {\n\t\t/**\n\t\t * A string representing the current Punycode.js version number.\n\t\t * @memberOf punycode\n\t\t * @type String\n\t\t */\n\t\t'version': '1.3.2',\n\t\t/**\n\t\t * An object of methods to convert from JavaScript's internal character\n\t\t * representation (UCS-2) to Unicode code points, and back.\n\t\t * @see <https://mathiasbynens.be/notes/javascript-encoding>\n\t\t * @memberOf punycode\n\t\t * @type Object\n\t\t */\n\t\t'ucs2': {\n\t\t\t'decode': ucs2decode,\n\t\t\t'encode': ucs2encode\n\t\t},\n\t\t'decode': decode,\n\t\t'encode': encode,\n\t\t'toASCII': toASCII,\n\t\t'toUnicode': toUnicode\n\t};\n\n\t/** Expose `punycode` */\n\t// Some AMD build optimizers, like r.js, check for specific condition patterns\n\t// like the following:\n\tif (\n\t\ttypeof define == 'function' &&\n\t\ttypeof define.amd == 'object' &&\n\t\tdefine.amd\n\t) {\n\t\tdefine('punycode', function() {\n\t\t\treturn punycode;\n\t\t});\n\t} else if (freeExports && freeModule) {\n\t\tif (module.exports == freeExports) { // in Node.js or RingoJS v0.8.0+\n\t\t\tfreeModule.exports = punycode;\n\t\t} else { // in Narwhal or RingoJS v0.7.0-\n\t\t\tfor (key in punycode) {\n\t\t\t\tpunycode.hasOwnProperty(key) && (freeExports[key] = punycode[key]);\n\t\t\t}\n\t\t}\n\t} else { // in Rhino or a web browser\n\t\troot.punycode = punycode;\n\t}\n\n}(this));\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\n// If obj.hasOwnProperty has been overridden, then calling\n// obj.hasOwnProperty(prop) will break.\n// See: https://github.com/joyent/node/issues/1707\nfunction hasOwnProperty(obj, prop) {\n  return Object.prototype.hasOwnProperty.call(obj, prop);\n}\n\nmodule.exports = function(qs, sep, eq, options) {\n  sep = sep || '&';\n  eq = eq || '=';\n  var obj = {};\n\n  if (typeof qs !== 'string' || qs.length === 0) {\n    return obj;\n  }\n\n  var regexp = /\\+/g;\n  qs = qs.split(sep);\n\n  var maxKeys = 1000;\n  if (options && typeof options.maxKeys === 'number') {\n    maxKeys = options.maxKeys;\n  }\n\n  var len = qs.length;\n  // maxKeys <= 0 means that we should not limit keys count\n  if (maxKeys > 0 && len > maxKeys) {\n    len = maxKeys;\n  }\n\n  for (var i = 0; i < len; ++i) {\n    var x = qs[i].replace(regexp, '%20'),\n        idx = x.indexOf(eq),\n        kstr, vstr, k, v;\n\n    if (idx >= 0) {\n      kstr = x.substr(0, idx);\n      vstr = x.substr(idx + 1);\n    } else {\n      kstr = x;\n      vstr = '';\n    }\n\n    k = decodeURIComponent(kstr);\n    v = decodeURIComponent(vstr);\n\n    if (!hasOwnProperty(obj, k)) {\n      obj[k] = v;\n    } else if (Array.isArray(obj[k])) {\n      obj[k].push(v);\n    } else {\n      obj[k] = [obj[k], v];\n    }\n  }\n\n  return obj;\n};\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar stringifyPrimitive = function(v) {\n  switch (typeof v) {\n    case 'string':\n      return v;\n\n    case 'boolean':\n      return v ? 'true' : 'false';\n\n    case 'number':\n      return isFinite(v) ? v : '';\n\n    default:\n      return '';\n  }\n};\n\nmodule.exports = function(obj, sep, eq, name) {\n  sep = sep || '&';\n  eq = eq || '=';\n  if (obj === null) {\n    obj = undefined;\n  }\n\n  if (typeof obj === 'object') {\n    return Object.keys(obj).map(function(k) {\n      var ks = encodeURIComponent(stringifyPrimitive(k)) + eq;\n      if (Array.isArray(obj[k])) {\n        return obj[k].map(function(v) {\n          return ks + encodeURIComponent(stringifyPrimitive(v));\n        }).join(sep);\n      } else {\n        return ks + encodeURIComponent(stringifyPrimitive(obj[k]));\n      }\n    }).join(sep);\n\n  }\n\n  if (!name) return '';\n  return encodeURIComponent(stringifyPrimitive(name)) + eq +\n         encodeURIComponent(stringifyPrimitive(obj));\n};\n","'use strict';\n\nexports.decode = exports.parse = require('./decode');\nexports.encode = exports.stringify = require('./encode');\n","function t(e){return(t=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?\"symbol\":typeof t})(e)}function e(e,i,s){var o=s.value;if(\"function\"!=typeof o)throw new TypeError(\"@boundMethod decorator can only be applied to methods not: \".concat(t(o)));var n=!1;return{configurable:!0,get:function(){if(n||this===e.prototype||this.hasOwnProperty(i)||\"function\"!=typeof o)return o;var t=o.bind(this);return n=!0,Object.defineProperty(this,i,{configurable:!0,get:function(){return t},set:function(t){o=t,delete this[i]}}),n=!1,t},set:function(t){o=t}}}var i,s,o,n;const l=globalThis.trustedTypes,r=l?l.createPolicy(\"lit-html\",{createHTML:t=>t}):void 0,a=`lit$${(Math.random()+\"\").slice(9)}$`,d=\"?\"+a,h=`<${d}>`,c=document,p=(t=\"\")=>c.createComment(t),u=t=>null===t||\"object\"!=typeof t&&\"function\"!=typeof t,v=Array.isArray,f=/<(?:(!--|\\/[^a-zA-Z])|(\\/?[a-zA-Z][^>\\s]*)|(\\/?$))/g,b=/-->/g,y=/>/g,g=/>|[ \t\\n\f\\r](?:([^\\s\"'>=/]+)([ \t\\n\f\\r]*=[ \t\\n\f\\r]*(?:[^ \t\\n\f\\r\"'`<>=]|(\"|')|))|$)/g,m=/'/g,S=/\"/g,x=/^(?:script|style|textarea)$/i,w=(t=>(e,...i)=>({_$litType$:t,strings:e,values:i}))(1),O=Symbol.for(\"lit-noChange\"),k=Symbol.for(\"lit-nothing\"),C=new WeakMap,$=c.createTreeWalker(c,129,null,!1);class P{constructor({strings:t,_$litType$:e},i){let s;this.parts=[];let o=0,n=0;const c=t.length-1,u=this.parts,[v,w]=((t,e)=>{const i=t.length-1,s=[];let o,n=2===e?\"<svg>\":\"\",l=f;for(let e=0;e<i;e++){const i=t[e];let r,d,c=-1,p=0;for(;p<i.length&&(l.lastIndex=p,d=l.exec(i),null!==d);)p=l.lastIndex,l===f?\"!--\"===d[1]?l=b:void 0!==d[1]?l=y:void 0!==d[2]?(x.test(d[2])&&(o=RegExp(\"</\"+d[2],\"g\")),l=g):void 0!==d[3]&&(l=g):l===g?\">\"===d[0]?(l=null!=o?o:f,c=-1):void 0===d[1]?c=-2:(c=l.lastIndex-d[2].length,r=d[1],l=void 0===d[3]?g:'\"'===d[3]?S:m):l===S||l===m?l=g:l===b||l===y?l=f:(l=g,o=void 0);const u=l===g&&t[e+1].startsWith(\"/>\")?\" \":\"\";n+=l===f?i+h:c>=0?(s.push(r),i.slice(0,c)+\"$lit$\"+i.slice(c)+a+u):i+a+(-2===c?(s.push(void 0),e):u)}const d=n+(t[i]||\"<?>\")+(2===e?\"</svg>\":\"\");return[void 0!==r?r.createHTML(d):d,s]})(t,e);if(this.el=P.createElement(v,i),$.currentNode=this.el.content,2===e){const t=this.el.content,e=t.firstChild;e.remove(),t.append(...e.childNodes)}for(;null!==(s=$.nextNode())&&u.length<c;){if(1===s.nodeType){if(s.hasAttributes()){const t=[];for(const e of s.getAttributeNames())if(e.endsWith(\"$lit$\")||e.startsWith(a)){const i=w[n++];if(t.push(e),void 0!==i){const t=s.getAttribute(i.toLowerCase()+\"$lit$\").split(a),e=/([.?@])?(.*)/.exec(i);u.push({type:1,index:o,name:e[2],strings:t,ctor:\".\"===e[1]?R:\"?\"===e[1]?N:\"@\"===e[1]?L:I})}else u.push({type:6,index:o})}for(const e of t)s.removeAttribute(e)}if(x.test(s.tagName)){const t=s.textContent.split(a),e=t.length-1;if(e>0){s.textContent=l?l.emptyScript:\"\";for(let i=0;i<e;i++)s.append(t[i],p()),$.nextNode(),u.push({type:2,index:++o});s.append(t[e],p())}}}else if(8===s.nodeType)if(s.data===d)u.push({type:2,index:o});else{let t=-1;for(;-1!==(t=s.data.indexOf(a,t+1));)u.push({type:7,index:o}),t+=a.length-1}o++}}static createElement(t,e){const i=c.createElement(\"template\");return i.innerHTML=t,i}}function E(t,e,i=t,s){var o,n,l,r;if(e===O)return e;let a=void 0!==s?null===(o=i.Σi)||void 0===o?void 0:o[s]:i.Σo;const d=u(e)?void 0:e._$litDirective$;return(null==a?void 0:a.constructor)!==d&&(null===(n=null==a?void 0:a.O)||void 0===n||n.call(a,!1),void 0===d?a=void 0:(a=new d(t),a.T(t,i,s)),void 0!==s?(null!==(l=(r=i).Σi)&&void 0!==l?l:r.Σi=[])[s]=a:i.Σo=a),void 0!==a&&(e=E(t,a.S(t,e.values),a,s)),e}class H{constructor(t,e){this.l=[],this.N=void 0,this.D=t,this.M=e}u(t){var e;const{el:{content:i},parts:s}=this.D,o=(null!==(e=null==t?void 0:t.creationScope)&&void 0!==e?e:c).importNode(i,!0);$.currentNode=o;let n=$.nextNode(),l=0,r=0,a=s[0];for(;void 0!==a;){if(l===a.index){let e;2===a.type?e=new A(n,n.nextSibling,this,t):1===a.type?e=new a.ctor(n,a.name,a.strings,this,t):6===a.type&&(e=new U(n,this,t)),this.l.push(e),a=s[++r]}l!==(null==a?void 0:a.index)&&(n=$.nextNode(),l++)}return o}v(t){let e=0;for(const i of this.l)void 0!==i&&(void 0!==i.strings?(i.I(t,i,e),e+=i.strings.length-2):i.I(t[e])),e++}}class A{constructor(t,e,i,s){this.type=2,this.N=void 0,this.A=t,this.B=e,this.M=i,this.options=s}setConnected(t){var e;null===(e=this.P)||void 0===e||e.call(this,t)}get parentNode(){return this.A.parentNode}get startNode(){return this.A}get endNode(){return this.B}I(t,e=this){t=E(this,t,e),u(t)?t===k||null==t||\"\"===t?(this.H!==k&&this.R(),this.H=k):t!==this.H&&t!==O&&this.m(t):void 0!==t._$litType$?this._(t):void 0!==t.nodeType?this.$(t):(t=>{var e;return v(t)||\"function\"==typeof(null===(e=t)||void 0===e?void 0:e[Symbol.iterator])})(t)?this.g(t):this.m(t)}k(t,e=this.B){return this.A.parentNode.insertBefore(t,e)}$(t){this.H!==t&&(this.R(),this.H=this.k(t))}m(t){const e=this.A.nextSibling;null!==e&&3===e.nodeType&&(null===this.B?null===e.nextSibling:e===this.B.previousSibling)?e.data=t:this.$(c.createTextNode(t)),this.H=t}_(t){var e;const{values:i,_$litType$:s}=t,o=\"number\"==typeof s?this.C(t):(void 0===s.el&&(s.el=P.createElement(s.h,this.options)),s);if((null===(e=this.H)||void 0===e?void 0:e.D)===o)this.H.v(i);else{const t=new H(o,this),e=t.u(this.options);t.v(i),this.$(e),this.H=t}}C(t){let e=C.get(t.strings);return void 0===e&&C.set(t.strings,e=new P(t)),e}g(t){v(this.H)||(this.H=[],this.R());const e=this.H;let i,s=0;for(const o of t)s===e.length?e.push(i=new A(this.k(p()),this.k(p()),this,this.options)):i=e[s],i.I(o),s++;s<e.length&&(this.R(i&&i.B.nextSibling,s),e.length=s)}R(t=this.A.nextSibling,e){var i;for(null===(i=this.P)||void 0===i||i.call(this,!1,!0,e);t&&t!==this.B;){const e=t.nextSibling;t.remove(),t=e}}}class I{constructor(t,e,i,s,o){this.type=1,this.H=k,this.N=void 0,this.V=void 0,this.element=t,this.name=e,this.M=s,this.options=o,i.length>2||\"\"!==i[0]||\"\"!==i[1]?(this.H=Array(i.length-1).fill(k),this.strings=i):this.H=k}get tagName(){return this.element.tagName}I(t,e=this,i,s){const o=this.strings;let n=!1;if(void 0===o)t=E(this,t,e,0),n=!u(t)||t!==this.H&&t!==O,n&&(this.H=t);else{const s=t;let l,r;for(t=o[0],l=0;l<o.length-1;l++)r=E(this,s[i+l],e,l),r===O&&(r=this.H[l]),n||(n=!u(r)||r!==this.H[l]),r===k?t=k:t!==k&&(t+=(null!=r?r:\"\")+o[l+1]),this.H[l]=r}n&&!s&&this.W(t)}W(t){t===k?this.element.removeAttribute(this.name):this.element.setAttribute(this.name,null!=t?t:\"\")}}class R extends I{constructor(){super(...arguments),this.type=3}W(t){this.element[this.name]=t===k?void 0:t}}class N extends I{constructor(){super(...arguments),this.type=4}W(t){t&&t!==k?this.element.setAttribute(this.name,\"\"):this.element.removeAttribute(this.name)}}class L extends I{constructor(){super(...arguments),this.type=5}I(t,e=this){var i;if((t=null!==(i=E(this,t,e,0))&&void 0!==i?i:k)===O)return;const s=this.H,o=t===k&&s!==k||t.capture!==s.capture||t.once!==s.once||t.passive!==s.passive,n=t!==k&&(s===k||o);o&&this.element.removeEventListener(this.name,this,s),n&&this.element.addEventListener(this.name,this,t),this.H=t}handleEvent(t){var e,i;\"function\"==typeof this.H?this.H.call(null!==(i=null===(e=this.options)||void 0===e?void 0:e.host)&&void 0!==i?i:this.element,t):this.H.handleEvent(t)}}class U{constructor(t,e,i){this.element=t,this.type=6,this.N=void 0,this.V=void 0,this.M=e,this.options=i}I(t){E(this,t)}}null===(s=(i=globalThis).litHtmlPlatformSupport)||void 0===s||s.call(i,P,A),(null!==(o=(n=globalThis).litHtmlVersions)&&void 0!==o?o:n.litHtmlVersions=[]).push(\"2.0.0-rc.3\");const z=window.ShadowRoot&&(void 0===window.ShadyCSS||window.ShadyCSS.nativeShadow)&&\"adoptedStyleSheets\"in Document.prototype&&\"replace\"in CSSStyleSheet.prototype,M=Symbol();class T{constructor(t,e){if(e!==M)throw Error(\"CSSResult is not constructable. Use `unsafeCSS` or `css` instead.\");this.cssText=t}get styleSheet(){return z&&void 0===this.t&&(this.t=new CSSStyleSheet,this.t.replaceSync(this.cssText)),this.t}toString(){return this.cssText}}const V=new Map,_=t=>{let e=V.get(t);return void 0===e&&V.set(t,e=new T(t,M)),e},D=(t,...e)=>{const i=1===t.length?t[0]:e.reduce(((e,i,s)=>e+(t=>{if(t instanceof T)return t.cssText;if(\"number\"==typeof t)return t;throw Error(\"Value passed to 'css' function must be a 'css' function result: \"+t+\". Use 'unsafeCSS' to pass non-literal values, but take care to ensure page security.\")})(i)+t[s+1]),t[0]);return _(i)},j=(t,e)=>{z?t.adoptedStyleSheets=e.map((t=>t instanceof CSSStyleSheet?t:t.styleSheet)):e.forEach((e=>{const i=document.createElement(\"style\");i.textContent=e.cssText,t.appendChild(i)}))},B=z?t=>t:t=>t instanceof CSSStyleSheet?(t=>{let e=\"\";for(const i of t.cssRules)e+=i.cssText;return(t=>_(\"string\"==typeof t?t:t+\"\"))(e)})(t):t;var q,W,K,F;const J={toAttribute(t,e){switch(e){case Boolean:t=t?\"\":null;break;case Object:case Array:t=null==t?t:JSON.stringify(t)}return t},fromAttribute(t,e){let i=t;switch(e){case Boolean:i=null!==t;break;case Number:i=null===t?null:Number(t);break;case Object:case Array:try{i=JSON.parse(t)}catch(t){i=null}}return i}},Z=(t,e)=>e!==t&&(e==e||t==t),G={attribute:!0,type:String,converter:J,reflect:!1,hasChanged:Z};class Q extends HTMLElement{constructor(){super(),this.Πi=new Map,this.Πo=void 0,this.Πl=void 0,this.isUpdatePending=!1,this.hasUpdated=!1,this.Πh=null,this.u()}static addInitializer(t){var e;null!==(e=this.v)&&void 0!==e||(this.v=[]),this.v.push(t)}static get observedAttributes(){this.finalize();const t=[];return this.elementProperties.forEach(((e,i)=>{const s=this.Πp(i,e);void 0!==s&&(this.Πm.set(s,i),t.push(s))})),t}static createProperty(t,e=G){if(e.state&&(e.attribute=!1),this.finalize(),this.elementProperties.set(t,e),!e.noAccessor&&!this.prototype.hasOwnProperty(t)){const i=\"symbol\"==typeof t?Symbol():\"__\"+t,s=this.getPropertyDescriptor(t,i,e);void 0!==s&&Object.defineProperty(this.prototype,t,s)}}static getPropertyDescriptor(t,e,i){return{get(){return this[e]},set(s){const o=this[t];this[e]=s,this.requestUpdate(t,o,i)},configurable:!0,enumerable:!0}}static getPropertyOptions(t){return this.elementProperties.get(t)||G}static finalize(){if(this.hasOwnProperty(\"finalized\"))return!1;this.finalized=!0;const t=Object.getPrototypeOf(this);if(t.finalize(),this.elementProperties=new Map(t.elementProperties),this.Πm=new Map,this.hasOwnProperty(\"properties\")){const t=this.properties,e=[...Object.getOwnPropertyNames(t),...Object.getOwnPropertySymbols(t)];for(const i of e)this.createProperty(i,t[i])}return this.elementStyles=this.finalizeStyles(this.styles),!0}static finalizeStyles(t){const e=[];if(Array.isArray(t)){const i=new Set(t.flat(1/0).reverse());for(const t of i)e.unshift(B(t))}else void 0!==t&&e.push(B(t));return e}static\"Πp\"(t,e){const i=e.attribute;return!1===i?void 0:\"string\"==typeof i?i:\"string\"==typeof t?t.toLowerCase():void 0}u(){var t;this.Πg=new Promise((t=>this.enableUpdating=t)),this.L=new Map,this.Π_(),this.requestUpdate(),null===(t=this.constructor.v)||void 0===t||t.forEach((t=>t(this)))}addController(t){var e,i;(null!==(e=this.ΠU)&&void 0!==e?e:this.ΠU=[]).push(t),void 0!==this.renderRoot&&this.isConnected&&(null===(i=t.hostConnected)||void 0===i||i.call(t))}removeController(t){var e;null===(e=this.ΠU)||void 0===e||e.splice(this.ΠU.indexOf(t)>>>0,1)}\"Π_\"(){this.constructor.elementProperties.forEach(((t,e)=>{this.hasOwnProperty(e)&&(this.Πi.set(e,this[e]),delete this[e])}))}createRenderRoot(){var t;const e=null!==(t=this.shadowRoot)&&void 0!==t?t:this.attachShadow(this.constructor.shadowRootOptions);return j(e,this.constructor.elementStyles),e}connectedCallback(){var t;void 0===this.renderRoot&&(this.renderRoot=this.createRenderRoot()),this.enableUpdating(!0),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostConnected)||void 0===e?void 0:e.call(t)})),this.Πl&&(this.Πl(),this.Πo=this.Πl=void 0)}enableUpdating(t){}disconnectedCallback(){var t;null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostDisconnected)||void 0===e?void 0:e.call(t)})),this.Πo=new Promise((t=>this.Πl=t))}attributeChangedCallback(t,e,i){this.K(t,i)}\"Πj\"(t,e,i=G){var s,o;const n=this.constructor.Πp(t,i);if(void 0!==n&&!0===i.reflect){const l=(null!==(o=null===(s=i.converter)||void 0===s?void 0:s.toAttribute)&&void 0!==o?o:J.toAttribute)(e,i.type);this.Πh=t,null==l?this.removeAttribute(n):this.setAttribute(n,l),this.Πh=null}}K(t,e){var i,s,o;const n=this.constructor,l=n.Πm.get(t);if(void 0!==l&&this.Πh!==l){const t=n.getPropertyOptions(l),r=t.converter,a=null!==(o=null!==(s=null===(i=r)||void 0===i?void 0:i.fromAttribute)&&void 0!==s?s:\"function\"==typeof r?r:null)&&void 0!==o?o:J.fromAttribute;this.Πh=l,this[l]=a(e,t.type),this.Πh=null}}requestUpdate(t,e,i){let s=!0;void 0!==t&&(((i=i||this.constructor.getPropertyOptions(t)).hasChanged||Z)(this[t],e)?(this.L.has(t)||this.L.set(t,e),!0===i.reflect&&this.Πh!==t&&(void 0===this.Πk&&(this.Πk=new Map),this.Πk.set(t,i))):s=!1),!this.isUpdatePending&&s&&(this.Πg=this.Πq())}async\"Πq\"(){this.isUpdatePending=!0;try{for(await this.Πg;this.Πo;)await this.Πo}catch(t){Promise.reject(t)}const t=this.performUpdate();return null!=t&&await t,!this.isUpdatePending}performUpdate(){var t;if(!this.isUpdatePending)return;this.hasUpdated,this.Πi&&(this.Πi.forEach(((t,e)=>this[e]=t)),this.Πi=void 0);let e=!1;const i=this.L;try{e=this.shouldUpdate(i),e?(this.willUpdate(i),null===(t=this.ΠU)||void 0===t||t.forEach((t=>{var e;return null===(e=t.hostUpdate)||void 0===e?void 0:e.call(t)})),this.update(i)):this.Π$()}catch(t){throw e=!1,this.Π$(),t}e&&this.E(i)}willUpdate(t){}E(t){var e;null===(e=this.ΠU)||void 0===e||e.forEach((t=>{var e;return null===(e=t.hostUpdated)||void 0===e?void 0:e.call(t)})),this.hasUpdated||(this.hasUpdated=!0,this.firstUpdated(t)),this.updated(t)}\"Π$\"(){this.L=new Map,this.isUpdatePending=!1}get updateComplete(){return this.getUpdateComplete()}getUpdateComplete(){return this.Πg}shouldUpdate(t){return!0}update(t){void 0!==this.Πk&&(this.Πk.forEach(((t,e)=>this.Πj(e,this[e],t))),this.Πk=void 0),this.Π$()}updated(t){}firstUpdated(t){}}var X,Y,tt,et,it,st;Q.finalized=!0,Q.elementProperties=new Map,Q.elementStyles=[],Q.shadowRootOptions={mode:\"open\"},null===(W=(q=globalThis).reactiveElementPlatformSupport)||void 0===W||W.call(q,{ReactiveElement:Q}),(null!==(K=(F=globalThis).reactiveElementVersions)&&void 0!==K?K:F.reactiveElementVersions=[]).push(\"1.0.0-rc.2\"),(null!==(X=(st=globalThis).litElementVersions)&&void 0!==X?X:st.litElementVersions=[]).push(\"3.0.0-rc.2\");class ot extends Q{constructor(){super(...arguments),this.renderOptions={host:this},this.Φt=void 0}createRenderRoot(){var t,e;const i=super.createRenderRoot();return null!==(t=(e=this.renderOptions).renderBefore)&&void 0!==t||(e.renderBefore=i.firstChild),i}update(t){const e=this.render();super.update(t),this.Φt=((t,e,i)=>{var s,o;const n=null!==(s=null==i?void 0:i.renderBefore)&&void 0!==s?s:e;let l=n._$litPart$;if(void 0===l){const t=null!==(o=null==i?void 0:i.renderBefore)&&void 0!==o?o:null;n._$litPart$=l=new A(e.insertBefore(p(),t),t,void 0,i)}return l.I(t),l})(e,this.renderRoot,this.renderOptions)}connectedCallback(){var t;super.connectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!0)}disconnectedCallback(){var t;super.disconnectedCallback(),null===(t=this.Φt)||void 0===t||t.setConnected(!1)}render(){return O}}ot.finalized=!0,ot._$litElement$=!0,null===(tt=(Y=globalThis).litElementHydrateSupport)||void 0===tt||tt.call(Y,{LitElement:ot}),null===(it=(et=globalThis).litElementPlatformSupport)||void 0===it||it.call(et,{LitElement:ot});const nt=t=>null!=t?t:k,lt=t=>e=>\"function\"==typeof e?((t,e)=>(window.customElements.define(t,e),e))(t,e):((t,e)=>{const{kind:i,elements:s}=e;return{kind:i,elements:s,finisher(e){window.customElements.define(t,e)}}})(t,e),rt=(t,e)=>\"method\"===e.kind&&e.descriptor&&!(\"value\"in e.descriptor)?{...e,finisher(i){i.createProperty(e.key,t)}}:{kind:\"field\",key:Symbol(),placement:\"own\",descriptor:{},originalKey:e.key,initializer(){\"function\"==typeof e.initializer&&(this[e.key]=e.initializer.call(this))},finisher(i){i.createProperty(e.key,t)}};function at(t){return(e,i)=>void 0!==i?((t,e,i)=>{e.constructor.createProperty(i,t)})(t,e,i):rt(t,e)}const dt=\"Enter\",ht=\"Tab\",ct=()=>{},pt={label:\"\",value:\"\",select:ct,unselect:ct,disabled:!1,hidden:!1,selected:!1},ut=D`.select-wrapper{position:relative}.select{bottom:0;display:flex;flex-wrap:wrap;left:0;position:absolute;right:0;top:0;width:var(--select-width,100%)}.label:focus{outline:var(--select-outline,2px solid #e3e3e3)}.label:after{border-bottom:1px solid var(--color,#000);border-right:1px solid var(--color,#000);box-sizing:border-box;content:\"\";display:block;height:10px;margin-top:-2px;transform:rotate(45deg);transition:.2s ease-in-out;width:10px}.label.visible:after{margin-bottom:-4px;margin-top:0;transform:rotate(225deg)}select{-webkit-appearance:none;-moz-appearance:none;appearance:none;position:relative;opacity:0}select[multiple]{z-index:0}.label,select{align-items:center;background-color:var(--background-color,#fff);border-radius:var(--border-radius,4px);border:var(--border-width,1px) solid var(--border-color,#000);box-sizing:border-box;color:var(--color,#000);cursor:pointer;display:flex;font-family:var(--font-family,inherit);font-size:var(--font-size,14px);font-weight:var(--font-weight,400);min-height:var(--select-height,44px);justify-content:space-between;padding:var(--padding,0 10px);width:100%;z-index:1}@media only screen and (hover:none) and (pointer:coarse){select{z-index:2}}.dropdown{background-color:var(--border-color,#000);border-radius:var(--border-radius,4px);border:var(--border-width,1px) solid var(--border-color,#000);display:none;flex-direction:column;gap:var(--border-width,1px);justify-content:space-between;max-height:calc(var(--select-height,44px) * var(--dropdown-items,4) + var(--border-width,1px) * calc(var(--dropdown-items,4) - 1));overflow-y:scroll;position:absolute;top:calc(var(--select-height,44px) + var(--dropdown-gap,0px));width:calc(100% - var(--border-width,1px) * 2);z-index:var(--dropdown-z-index,2)}.dropdown.visible{display:flex;z-index:100}.disabled{background-color:var(--disabled-background-color,#bdc3c7);color:var(--disabled-color,#ecf0f1);cursor:default}.multi-selected{background-color:var(--selected-background-color,#e3e3e3);border-radius:var(--border-radius,4px);color:var(--selected-color,#000);display:flex;gap:8px;justify-content:space-between;padding:2px 4px}.multi-selected-wrapper{display:flex;flex-wrap:wrap;gap:4px;width:calc(100% - 30px)}.cross:after{content:'\\\\00d7';display:inline-block;height:100%;text-align:center;width:12px}`,vt=D`.option{align-items:center;background-color:var(--background-color,#fff);box-sizing:border-box;color:var(--color,#000);cursor:pointer;display:flex;font-family:var(--font-family,inherit);font-size:var(--font-size,14px);font-weight:var(--font-weight,400);height:var(--select-height,44px);height:var(--select-height,44px);justify-content:flex-start;padding:var(--padding,0 10px);width:100%}.option:not(.disabled):focus,.option:not(.disabled):not(.selected):hover{background-color:var(--hover-background-color,#e3e3e3);color:var(--hover-color,#000)}.selected{background-color:var(--selected-background-color,#e3e3e3);color:var(--selected-color,#000)}.disabled{background-color:var(--disabled-background-color,#e3e3e3);color:var(--disabled-color,#000);cursor:default}`;var ft=function(t,e,i,s){var o,n=arguments.length,l=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};let bt=class extends ot{constructor(){super(...arguments),this.isSelected=!1,this.isDisabled=!1,this.isHidden=!1,this.optionValue=\"\",this.displayedLabel=\"\",this.optionIndex=-1}static get styles(){return vt}connectedCallback(){super.connectedCallback(),this.isSelected=null!==this.getAttribute(\"selected\"),this.isDisabled=null!==this.getAttribute(\"disabled\"),this.isHidden=null!==this.getAttribute(\"hidden\"),this.optionValue=this.getAttribute(\"value\")||\"\",this.assignDisplayedLabel(),this.fireOnReadyCallback()}getOption(){return{label:this.displayedLabel,value:this.optionValue,select:this.select,unselect:this.unselect,selected:this.isSelected,disabled:this.isDisabled,hidden:this.isHidden}}select(){this.isSelected=!0,this.setAttribute(\"selected\",\"\")}unselect(){this.isSelected=!1,this.removeAttribute(\"selected\")}setOnReadyCallback(t,e){this.onReady=t,this.optionIndex=e}setOnSelectCallback(t){this.onSelect=t}render(){const t=[\"option\"];return this.isSelected&&t.push(\"selected\"),this.isDisabled&&t.push(\"disabled\"),w`<div class=\"${t.join(\" \")}\" @click=\"${this.fireOnSelectCallback}\" @keydown=\"${this.fireOnSelectIfEnterPressed}\" tabindex=\"${nt(this.isDisabled?void 0:\"0\")}\"><slot hidden @slotchange=\"${this.assignDisplayedLabel}\"></slot>${this.displayedLabel}</div>`}assignDisplayedLabel(){this.textContent?this.displayedLabel=this.textContent:this.getAttribute(\"label\")&&(this.displayedLabel=this.getAttribute(\"label\")||\"\")}fireOnReadyCallback(){this.onReady&&this.onReady(this.getOption(),this.optionIndex)}fireOnSelectCallback(t){t.stopPropagation(),this.onSelect&&!this.isDisabled&&this.onSelect(this.optionValue)}fireOnSelectIfEnterPressed(t){t.key===dt&&this.fireOnSelectCallback(t)}};ft([at()],bt.prototype,\"isSelected\",void 0),ft([at()],bt.prototype,\"isDisabled\",void 0),ft([at()],bt.prototype,\"isHidden\",void 0),ft([at()],bt.prototype,\"optionValue\",void 0),ft([at()],bt.prototype,\"displayedLabel\",void 0),ft([at()],bt.prototype,\"optionIndex\",void 0),ft([e],bt.prototype,\"getOption\",null),ft([e],bt.prototype,\"select\",null),ft([e],bt.prototype,\"unselect\",null),ft([e],bt.prototype,\"fireOnReadyCallback\",null),bt=ft([lt(\"option-pure\")],bt);var yt=function(t,e,i,s){var o,n=arguments.length,l=n<3?e:null===s?s=Object.getOwnPropertyDescriptor(e,i):s;if(\"object\"==typeof Reflect&&\"function\"==typeof Reflect.decorate)l=Reflect.decorate(t,e,i,s);else for(var r=t.length-1;r>=0;r--)(o=t[r])&&(l=(n<3?o(l):n>3?o(e,i,l):o(e,i))||l);return n>3&&l&&Object.defineProperty(e,i,l),l};let gt=class extends ot{constructor(){super(...arguments),this.options=[],this.visible=!1,this.selectedOption=pt,this._selectedOptions=[],this.disabled=!1,this.isMultipleSelect=!1,this.name=\"\",this._id=\"\",this.formName=\"\",this.value=\"\",this.values=[],this.defaultLabel=\"\",this.totalRenderedChildOptions=-1,this.form=null,this.hiddenInput=null}static get styles(){return ut}connectedCallback(){super.connectedCallback(),this.disabled=null!==this.getAttribute(\"disabled\"),this.isMultipleSelect=null!==this.getAttribute(\"multiple\"),this.name=this.getAttribute(\"name\")||\"\",this._id=this.getAttribute(\"id\")||\"\",this.formName=this.name||this.id,this.defaultLabel=this.getAttribute(\"default-label\")||\"\"}open(){this.disabled||(this.visible=!0,this.removeEventListeners(),document.body.addEventListener(\"click\",this.close,!0))}close(t){t&&this.contains(t.target)||(this.visible=!1,this.removeEventListeners())}enable(){this.disabled=!1}disable(){this.disabled=!0}get selectedIndex(){var t;return null===(t=this.nativeSelect)||void 0===t?void 0:t.selectedIndex}set selectedIndex(t){(t||0===t)&&this.selectOptionByValue(this.options[t].value)}get selectedOptions(){var t;return null===(t=this.nativeSelect)||void 0===t?void 0:t.selectedOptions}render(){const t=[\"label\"];return this.disabled&&t.push(\"disabled\"),this.visible&&t.push(\"visible\"),w`<div class=\"select-wrapper\"><select @change=\"${this.handleNativeSelectChange}\" ?disabled=\"${this.disabled}\" ?multiple=\"${this.isMultipleSelect}\" name=\"${nt(this.name||void 0)}\" id=\"${nt(this.id||void 0)}\" size=\"1\">${this.getNativeOptionsHtml()}</select><div class=\"select\"><div class=\"${t.join(\" \")}\" @click=\"${this.visible?this.close:this.open}\" @keydown=\"${this.openDropdownIfProperKeyIsPressed}\" tabindex=\"0\">${this.getDisplayedLabel()}</div><div class=\"dropdown${this.visible?\" visible\":\"\"}\"><slot @slotchange=\"${this.initializeSelect}\"></slot></div></div></div>`}handleNativeSelectChange(){var t;this.selectedIndex=null===(t=this.nativeSelect)||void 0===t?void 0:t.selectedIndex}getNativeOptionsHtml(){return this.options.map(this.getSingleNativeOptionHtml)}getSingleNativeOptionHtml({value:t,label:e,hidden:i,disabled:s}){return w`<option value=\"${t}\" ?selected=\"${this.isOptionSelected(t)}\" ?hidden=\"${i}\" ?disabled=\"${s}\">${e}</option>`}isOptionSelected(t){let e=this.selectedOption.value===t;return this.isMultipleSelect&&(e=Boolean(this._selectedOptions.find((e=>e.value===t)))),e}openDropdownIfProperKeyIsPressed(t){t.key!==dt&&t.key!==ht||this.open()}getDisplayedLabel(){return this.isMultipleSelect&&this._selectedOptions.length?this.getMultiSelectLabelHtml():this.selectedOption.label||this.defaultLabel}getMultiSelectLabelHtml(){return w`<div class=\"multi-selected-wrapper\">${this._selectedOptions.map(this.getMultiSelectSelectedOptionHtml)}</div>`}getMultiSelectSelectedOptionHtml({label:t,value:e}){return w`<span class=\"multi-selected\">${t} <span class=\"cross\" @click=\"${t=>this.fireOnSelectCallback(t,e)}\"></span></span>`}fireOnSelectCallback(t,e){t.stopPropagation(),this.selectOptionByValue(e)}initializeSelect(){this.processChildOptions(),this.selectDefaultOptionIfNoneSelected(),this.appendHiddenInputToClosestForm()}processChildOptions(){const t=this.querySelectorAll(\"option-pure\");this.totalRenderedChildOptions=t.length;for(let e=0;e<t.length;e++)this.initializeSingleOption(t[e],e)}selectDefaultOptionIfNoneSelected(){!this.selectedOption.value&&!this.isMultipleSelect&&this.options.length&&this.selectOptionByValue(this.options[0].value)}initializeSingleOption(t,e){t.setOnSelectCallback(this.selectOptionByValue),this.options[e]=t.getOption(),this.options[e].selected&&this.selectOptionByValue(this.options[e].value)}removeEventListeners(){document.body.removeEventListener(\"click\",this.close)}appendHiddenInputToClosestForm(){this.form=this.closest(\"form\"),this.form&&!this.hiddenInput&&(this.hiddenInput=document.createElement(\"input\"),this.hiddenInput.setAttribute(\"type\",\"hidden\"),this.hiddenInput.setAttribute(\"name\",this.formName),this.form.appendChild(this.hiddenInput))}unselectAllOptions(){for(let t=0;t<this.options.length;t++)this.options[t].unselect()}selectOptionByValue(t){const e=this.options.find((({value:e})=>e===t));e&&this.setSelectValue(e)}setSelectValue(t){this.isMultipleSelect?this.setMultiSelectValue(t):this.setSingleSelectValue(t),this.updateHiddenInputInForm(),this.dispatchChangeEvent()}dispatchChangeEvent(){this.dispatchEvent(new Event(\"change\"))}setMultiSelectValue(t){const e=this._selectedOptions.indexOf(t);-1!==e?(this.values.splice(e,1),this._selectedOptions.splice(e,1),t.unselect()):(this.values.push(t.value),this._selectedOptions.push(t),t.select()),this.requestUpdate()}setSingleSelectValue(t){this.unselectAllOptions(),this.close(),this.selectedOption=t,this.value=t.value,t.select()}updateHiddenInputInForm(){if(!this.form||!this.hiddenInput)return;this.hiddenInput.value=this.isMultipleSelect?this.values.join(\",\"):this.value;const t=new Event(\"change\",{bubbles:!0});this.hiddenInput.dispatchEvent(t)}};yt([at()],gt.prototype,\"options\",void 0),yt([at()],gt.prototype,\"visible\",void 0),yt([at()],gt.prototype,\"selectedOption\",void 0),yt([at()],gt.prototype,\"_selectedOptions\",void 0),yt([at()],gt.prototype,\"disabled\",void 0),yt([at()],gt.prototype,\"isMultipleSelect\",void 0),yt([at()],gt.prototype,\"name\",void 0),yt([at()],gt.prototype,\"_id\",void 0),yt([at()],gt.prototype,\"formName\",void 0),yt([at()],gt.prototype,\"value\",void 0),yt([at()],gt.prototype,\"values\",void 0),yt([at()],gt.prototype,\"defaultLabel\",void 0),yt([at()],gt.prototype,\"totalRenderedChildOptions\",void 0),yt([function(t,e){return(({finisher:t,descriptor:e})=>(i,s)=>{var o;if(void 0===s){const s=null!==(o=i.originalKey)&&void 0!==o?o:i.key,n=null!=e?{kind:\"method\",placement:\"prototype\",key:s,descriptor:e(i.key)}:{...i,key:s};return null!=t&&(n.finisher=function(e){t(e,s)}),n}{const o=i.constructor;void 0!==e&&Object.defineProperty(i,s,e(s)),null==t||t(o,s)}})({descriptor:i=>{const s={get(){var e;return null===(e=this.renderRoot)||void 0===e?void 0:e.querySelector(t)},enumerable:!0,configurable:!0};if(e){const e=\"symbol\"==typeof i?Symbol():\"__\"+i;s.get=function(){var i;return void 0===this[e]&&(this[e]=null===(i=this.renderRoot)||void 0===i?void 0:i.querySelector(t)),this[e]}}return s}})}(\"select\")],gt.prototype,\"nativeSelect\",void 0),yt([e],gt.prototype,\"close\",null),yt([e],gt.prototype,\"getSingleNativeOptionHtml\",null),yt([e],gt.prototype,\"getMultiSelectLabelHtml\",null),yt([e],gt.prototype,\"getMultiSelectSelectedOptionHtml\",null),yt([e],gt.prototype,\"initializeSelect\",null),yt([e],gt.prototype,\"initializeSingleOption\",null),yt([e],gt.prototype,\"removeEventListeners\",null),yt([e],gt.prototype,\"appendHiddenInputToClosestForm\",null),yt([e],gt.prototype,\"selectOptionByValue\",null),gt=yt([lt(\"select-pure\")],gt);\n","/* sockjs-client v1.5.2 | http://sockjs.org | MIT license */\n(function(f){if(typeof exports===\"object\"&&typeof module!==\"undefined\"){module.exports=f()}else if(typeof define===\"function\"&&define.amd){define([],f)}else{var g;if(typeof window!==\"undefined\"){g=window}else if(typeof global!==\"undefined\"){g=global}else if(typeof self!==\"undefined\"){g=self}else{g=this}g.SockJS = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar transportList = require('./transport-list');\n\nmodule.exports = require('./main')(transportList);\n\n// TODO can't get rid of this until all servers do\nif ('_sockjs_onload' in global) {\n  setTimeout(global._sockjs_onload, 1);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./main\":14,\"./transport-list\":16}],2:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction CloseEvent() {\n  Event.call(this);\n  this.initEvent('close', false, false);\n  this.wasClean = false;\n  this.code = 0;\n  this.reason = '';\n}\n\ninherits(CloseEvent, Event);\n\nmodule.exports = CloseEvent;\n\n},{\"./event\":4,\"inherits\":57}],3:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , EventTarget = require('./eventtarget')\n  ;\n\nfunction EventEmitter() {\n  EventTarget.call(this);\n}\n\ninherits(EventEmitter, EventTarget);\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  if (type) {\n    delete this._listeners[type];\n  } else {\n    this._listeners = {};\n  }\n};\n\nEventEmitter.prototype.once = function(type, listener) {\n  var self = this\n    , fired = false;\n\n  function g() {\n    self.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  this.on(type, g);\n};\n\nEventEmitter.prototype.emit = function() {\n  var type = arguments[0];\n  var listeners = this._listeners[type];\n  if (!listeners) {\n    return;\n  }\n  // equivalent of Array.prototype.slice.call(arguments, 1);\n  var l = arguments.length;\n  var args = new Array(l - 1);\n  for (var ai = 1; ai < l; ai++) {\n    args[ai - 1] = arguments[ai];\n  }\n  for (var i = 0; i < listeners.length; i++) {\n    listeners[i].apply(this, args);\n  }\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener = EventTarget.prototype.addEventListener;\nEventEmitter.prototype.removeListener = EventTarget.prototype.removeEventListener;\n\nmodule.exports.EventEmitter = EventEmitter;\n\n},{\"./eventtarget\":5,\"inherits\":57}],4:[function(require,module,exports){\n'use strict';\n\nfunction Event(eventType) {\n  this.type = eventType;\n}\n\nEvent.prototype.initEvent = function(eventType, canBubble, cancelable) {\n  this.type = eventType;\n  this.bubbles = canBubble;\n  this.cancelable = cancelable;\n  this.timeStamp = +new Date();\n  return this;\n};\n\nEvent.prototype.stopPropagation = function() {};\nEvent.prototype.preventDefault = function() {};\n\nEvent.CAPTURING_PHASE = 1;\nEvent.AT_TARGET = 2;\nEvent.BUBBLING_PHASE = 3;\n\nmodule.exports = Event;\n\n},{}],5:[function(require,module,exports){\n'use strict';\n\n/* Simplified implementation of DOM2 EventTarget.\n *   http://www.w3.org/TR/DOM-Level-2-Events/events.html#Events-EventTarget\n */\n\nfunction EventTarget() {\n  this._listeners = {};\n}\n\nEventTarget.prototype.addEventListener = function(eventType, listener) {\n  if (!(eventType in this._listeners)) {\n    this._listeners[eventType] = [];\n  }\n  var arr = this._listeners[eventType];\n  // #4\n  if (arr.indexOf(listener) === -1) {\n    // Make a copy so as not to interfere with a current dispatchEvent.\n    arr = arr.concat([listener]);\n  }\n  this._listeners[eventType] = arr;\n};\n\nEventTarget.prototype.removeEventListener = function(eventType, listener) {\n  var arr = this._listeners[eventType];\n  if (!arr) {\n    return;\n  }\n  var idx = arr.indexOf(listener);\n  if (idx !== -1) {\n    if (arr.length > 1) {\n      // Make a copy so as not to interfere with a current dispatchEvent.\n      this._listeners[eventType] = arr.slice(0, idx).concat(arr.slice(idx + 1));\n    } else {\n      delete this._listeners[eventType];\n    }\n    return;\n  }\n};\n\nEventTarget.prototype.dispatchEvent = function() {\n  var event = arguments[0];\n  var t = event.type;\n  // equivalent of Array.prototype.slice.call(arguments, 0);\n  var args = arguments.length === 1 ? [event] : Array.apply(null, arguments);\n  // TODO: This doesn't match the real behavior; per spec, onfoo get\n  // their place in line from the /first/ time they're set from\n  // non-null. Although WebKit bumps it to the end every time it's\n  // set.\n  if (this['on' + t]) {\n    this['on' + t].apply(this, args);\n  }\n  if (t in this._listeners) {\n    // Grab a reference to the listeners list. removeEventListener may alter the list.\n    var listeners = this._listeners[t];\n    for (var i = 0; i < listeners.length; i++) {\n      listeners[i].apply(this, args);\n    }\n  }\n};\n\nmodule.exports = EventTarget;\n\n},{}],6:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , Event = require('./event')\n  ;\n\nfunction TransportMessageEvent(data) {\n  Event.call(this);\n  this.initEvent('message', false, false);\n  this.data = data;\n}\n\ninherits(TransportMessageEvent, Event);\n\nmodule.exports = TransportMessageEvent;\n\n},{\"./event\":4,\"inherits\":57}],7:[function(require,module,exports){\n'use strict';\n\nvar JSON3 = require('json3')\n  , iframeUtils = require('./utils/iframe')\n  ;\n\nfunction FacadeJS(transport) {\n  this._transport = transport;\n  transport.on('message', this._transportMessage.bind(this));\n  transport.on('close', this._transportClose.bind(this));\n}\n\nFacadeJS.prototype._transportClose = function(code, reason) {\n  iframeUtils.postMessage('c', JSON3.stringify([code, reason]));\n};\nFacadeJS.prototype._transportMessage = function(frame) {\n  iframeUtils.postMessage('t', frame);\n};\nFacadeJS.prototype._send = function(data) {\n  this._transport.send(data);\n};\nFacadeJS.prototype._close = function() {\n  this._transport.close();\n  this._transport.removeAllListeners();\n};\n\nmodule.exports = FacadeJS;\n\n},{\"./utils/iframe\":47,\"json3\":58}],8:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , JSON3 = require('json3')\n  , FacadeJS = require('./facade')\n  , InfoIframeReceiver = require('./info-iframe-receiver')\n  , iframeUtils = require('./utils/iframe')\n  , loc = require('./location')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:iframe-bootstrap');\n}\n\nmodule.exports = function(SockJS, availableTransports) {\n  var transportMap = {};\n  availableTransports.forEach(function(at) {\n    if (at.facadeTransport) {\n      transportMap[at.facadeTransport.transportName] = at.facadeTransport;\n    }\n  });\n\n  // hard-coded for the info iframe\n  // TODO see if we can make this more dynamic\n  transportMap[InfoIframeReceiver.transportName] = InfoIframeReceiver;\n  var parentOrigin;\n\n  /* eslint-disable camelcase */\n  SockJS.bootstrap_iframe = function() {\n    /* eslint-enable camelcase */\n    var facade;\n    iframeUtils.currentWindowId = loc.hash.slice(1);\n    var onMessage = function(e) {\n      if (e.source !== parent) {\n        return;\n      }\n      if (typeof parentOrigin === 'undefined') {\n        parentOrigin = e.origin;\n      }\n      if (e.origin !== parentOrigin) {\n        return;\n      }\n\n      var iframeMessage;\n      try {\n        iframeMessage = JSON3.parse(e.data);\n      } catch (ignored) {\n        debug('bad json', e.data);\n        return;\n      }\n\n      if (iframeMessage.windowId !== iframeUtils.currentWindowId) {\n        return;\n      }\n      switch (iframeMessage.type) {\n      case 's':\n        var p;\n        try {\n          p = JSON3.parse(iframeMessage.data);\n        } catch (ignored) {\n          debug('bad json', iframeMessage.data);\n          break;\n        }\n        var version = p[0];\n        var transport = p[1];\n        var transUrl = p[2];\n        var baseUrl = p[3];\n        debug(version, transport, transUrl, baseUrl);\n        // change this to semver logic\n        if (version !== SockJS.version) {\n          throw new Error('Incompatible SockJS! Main site uses:' +\n                    ' \"' + version + '\", the iframe:' +\n                    ' \"' + SockJS.version + '\".');\n        }\n\n        if (!urlUtils.isOriginEqual(transUrl, loc.href) ||\n            !urlUtils.isOriginEqual(baseUrl, loc.href)) {\n          throw new Error('Can\\'t connect to different domain from within an ' +\n                    'iframe. (' + loc.href + ', ' + transUrl + ', ' + baseUrl + ')');\n        }\n        facade = new FacadeJS(new transportMap[transport](transUrl, baseUrl));\n        break;\n      case 'm':\n        facade._send(iframeMessage.data);\n        break;\n      case 'c':\n        if (facade) {\n          facade._close();\n        }\n        facade = null;\n        break;\n      }\n    };\n\n    eventUtils.attachEvent('message', onMessage);\n\n    // Start\n    iframeUtils.postMessage('s');\n  };\n};\n\n}).call(this,{ env: {} })\n\n},{\"./facade\":7,\"./info-iframe-receiver\":10,\"./location\":13,\"./utils/event\":46,\"./utils/iframe\":47,\"./utils/url\":52,\"debug\":55,\"json3\":58}],9:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , objectUtils = require('./utils/object')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-ajax');\n}\n\nfunction InfoAjax(url, AjaxObject) {\n  EventEmitter.call(this);\n\n  var self = this;\n  var t0 = +new Date();\n  this.xo = new AjaxObject('GET', url);\n\n  this.xo.once('finish', function(status, text) {\n    var info, rtt;\n    if (status === 200) {\n      rtt = (+new Date()) - t0;\n      if (text) {\n        try {\n          info = JSON3.parse(text);\n        } catch (e) {\n          debug('bad json', text);\n        }\n      }\n\n      if (!objectUtils.isObject(info)) {\n        info = {};\n      }\n    }\n    self.emit('finish', info, rtt);\n    self.removeAllListeners();\n  });\n}\n\ninherits(InfoAjax, EventEmitter);\n\nInfoAjax.prototype.close = function() {\n  this.removeAllListeners();\n  this.xo.close();\n};\n\nmodule.exports = InfoAjax;\n\n}).call(this,{ env: {} })\n\n},{\"./utils/object\":49,\"debug\":55,\"events\":3,\"inherits\":57,\"json3\":58}],10:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , JSON3 = require('json3')\n  , XHRLocalObject = require('./transport/sender/xhr-local')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nfunction InfoReceiverIframe(transUrl) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.ir = new InfoAjax(transUrl, XHRLocalObject);\n  this.ir.once('finish', function(info, rtt) {\n    self.ir = null;\n    self.emit('message', JSON3.stringify([info, rtt]));\n  });\n}\n\ninherits(InfoReceiverIframe, EventEmitter);\n\nInfoReceiverIframe.transportName = 'iframe-info-receiver';\n\nInfoReceiverIframe.prototype.close = function() {\n  if (this.ir) {\n    this.ir.close();\n    this.ir = null;\n  }\n  this.removeAllListeners();\n};\n\nmodule.exports = InfoReceiverIframe;\n\n},{\"./info-ajax\":9,\"./transport/sender/xhr-local\":37,\"events\":3,\"inherits\":57,\"json3\":58}],11:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , utils = require('./utils/event')\n  , IframeTransport = require('./transport/iframe')\n  , InfoReceiverIframe = require('./info-iframe-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-iframe');\n}\n\nfunction InfoIframe(baseUrl, url) {\n  var self = this;\n  EventEmitter.call(this);\n\n  var go = function() {\n    var ifr = self.ifr = new IframeTransport(InfoReceiverIframe.transportName, url, baseUrl);\n\n    ifr.once('message', function(msg) {\n      if (msg) {\n        var d;\n        try {\n          d = JSON3.parse(msg);\n        } catch (e) {\n          debug('bad json', msg);\n          self.emit('finish');\n          self.close();\n          return;\n        }\n\n        var info = d[0], rtt = d[1];\n        self.emit('finish', info, rtt);\n      }\n      self.close();\n    });\n\n    ifr.once('close', function() {\n      self.emit('finish');\n      self.close();\n    });\n  };\n\n  // TODO this seems the same as the 'needBody' from transports\n  if (!global.document.body) {\n    utils.attachEvent('load', go);\n  } else {\n    go();\n  }\n}\n\ninherits(InfoIframe, EventEmitter);\n\nInfoIframe.enabled = function() {\n  return IframeTransport.enabled();\n};\n\nInfoIframe.prototype.close = function() {\n  if (this.ifr) {\n    this.ifr.close();\n  }\n  this.removeAllListeners();\n  this.ifr = null;\n};\n\nmodule.exports = InfoIframe;\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./info-iframe-receiver\":10,\"./transport/iframe\":22,\"./utils/event\":46,\"debug\":55,\"events\":3,\"inherits\":57,\"json3\":58}],12:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , urlUtils = require('./utils/url')\n  , XDR = require('./transport/sender/xdr')\n  , XHRCors = require('./transport/sender/xhr-cors')\n  , XHRLocal = require('./transport/sender/xhr-local')\n  , XHRFake = require('./transport/sender/xhr-fake')\n  , InfoIframe = require('./info-iframe')\n  , InfoAjax = require('./info-ajax')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:info-receiver');\n}\n\nfunction InfoReceiver(baseUrl, urlInfo) {\n  debug(baseUrl);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self.doXhr(baseUrl, urlInfo);\n  }, 0);\n}\n\ninherits(InfoReceiver, EventEmitter);\n\n// TODO this is currently ignoring the list of available transports and the whitelist\n\nInfoReceiver._getReceiver = function(baseUrl, url, urlInfo) {\n  // determine method of CORS support (if needed)\n  if (urlInfo.sameOrigin) {\n    return new InfoAjax(url, XHRLocal);\n  }\n  if (XHRCors.enabled) {\n    return new InfoAjax(url, XHRCors);\n  }\n  if (XDR.enabled && urlInfo.sameScheme) {\n    return new InfoAjax(url, XDR);\n  }\n  if (InfoIframe.enabled()) {\n    return new InfoIframe(baseUrl, url);\n  }\n  return new InfoAjax(url, XHRFake);\n};\n\nInfoReceiver.prototype.doXhr = function(baseUrl, urlInfo) {\n  var self = this\n    , url = urlUtils.addPath(baseUrl, '/info')\n    ;\n  debug('doXhr', url);\n\n  this.xo = InfoReceiver._getReceiver(baseUrl, url, urlInfo);\n\n  this.timeoutRef = setTimeout(function() {\n    debug('timeout');\n    self._cleanup(false);\n    self.emit('finish');\n  }, InfoReceiver.timeout);\n\n  this.xo.once('finish', function(info, rtt) {\n    debug('finish', info, rtt);\n    self._cleanup(true);\n    self.emit('finish', info, rtt);\n  });\n};\n\nInfoReceiver.prototype._cleanup = function(wasClean) {\n  debug('_cleanup');\n  clearTimeout(this.timeoutRef);\n  this.timeoutRef = null;\n  if (!wasClean && this.xo) {\n    this.xo.close();\n  }\n  this.xo = null;\n};\n\nInfoReceiver.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  this._cleanup(false);\n};\n\nInfoReceiver.timeout = 8000;\n\nmodule.exports = InfoReceiver;\n\n}).call(this,{ env: {} })\n\n},{\"./info-ajax\":9,\"./info-iframe\":11,\"./transport/sender/xdr\":34,\"./transport/sender/xhr-cors\":35,\"./transport/sender/xhr-fake\":36,\"./transport/sender/xhr-local\":37,\"./utils/url\":52,\"debug\":55,\"events\":3,\"inherits\":57}],13:[function(require,module,exports){\n(function (global){\n'use strict';\n\nmodule.exports = global.location || {\n  origin: 'http://localhost:80'\n, protocol: 'http:'\n, host: 'localhost'\n, port: 80\n, href: 'http://localhost/'\n, hash: ''\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],14:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nrequire('./shims');\n\nvar URL = require('url-parse')\n  , inherits = require('inherits')\n  , JSON3 = require('json3')\n  , random = require('./utils/random')\n  , escape = require('./utils/escape')\n  , urlUtils = require('./utils/url')\n  , eventUtils = require('./utils/event')\n  , transport = require('./utils/transport')\n  , objectUtils = require('./utils/object')\n  , browser = require('./utils/browser')\n  , log = require('./utils/log')\n  , Event = require('./event/event')\n  , EventTarget = require('./event/eventtarget')\n  , loc = require('./location')\n  , CloseEvent = require('./event/close')\n  , TransportMessageEvent = require('./event/trans-message')\n  , InfoReceiver = require('./info-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:main');\n}\n\nvar transports;\n\n// follow constructor steps defined at http://dev.w3.org/html5/websockets/#the-websocket-interface\nfunction SockJS(url, protocols, options) {\n  if (!(this instanceof SockJS)) {\n    return new SockJS(url, protocols, options);\n  }\n  if (arguments.length < 1) {\n    throw new TypeError(\"Failed to construct 'SockJS: 1 argument required, but only 0 present\");\n  }\n  EventTarget.call(this);\n\n  this.readyState = SockJS.CONNECTING;\n  this.extensions = '';\n  this.protocol = '';\n\n  // non-standard extension\n  options = options || {};\n  if (options.protocols_whitelist) {\n    log.warn(\"'protocols_whitelist' is DEPRECATED. Use 'transports' instead.\");\n  }\n  this._transportsWhitelist = options.transports;\n  this._transportOptions = options.transportOptions || {};\n  this._timeout = options.timeout || 0;\n\n  var sessionId = options.sessionId || 8;\n  if (typeof sessionId === 'function') {\n    this._generateSessionId = sessionId;\n  } else if (typeof sessionId === 'number') {\n    this._generateSessionId = function() {\n      return random.string(sessionId);\n    };\n  } else {\n    throw new TypeError('If sessionId is used in the options, it needs to be a number or a function.');\n  }\n\n  this._server = options.server || random.numberString(1000);\n\n  // Step 1 of WS spec - parse and validate the url. Issue #8\n  var parsedUrl = new URL(url);\n  if (!parsedUrl.host || !parsedUrl.protocol) {\n    throw new SyntaxError(\"The URL '\" + url + \"' is invalid\");\n  } else if (parsedUrl.hash) {\n    throw new SyntaxError('The URL must not contain a fragment');\n  } else if (parsedUrl.protocol !== 'http:' && parsedUrl.protocol !== 'https:') {\n    throw new SyntaxError(\"The URL's scheme must be either 'http:' or 'https:'. '\" + parsedUrl.protocol + \"' is not allowed.\");\n  }\n\n  var secure = parsedUrl.protocol === 'https:';\n  // Step 2 - don't allow secure origin with an insecure protocol\n  if (loc.protocol === 'https:' && !secure) {\n    // exception is 127.0.0.0/8 and ::1 urls\n    if (!urlUtils.isLoopbackAddr(parsedUrl.hostname)) {\n      throw new Error('SecurityError: An insecure SockJS connection may not be initiated from a page loaded over HTTPS');\n    }\n  }\n\n  // Step 3 - check port access - no need here\n  // Step 4 - parse protocols argument\n  if (!protocols) {\n    protocols = [];\n  } else if (!Array.isArray(protocols)) {\n    protocols = [protocols];\n  }\n\n  // Step 5 - check protocols argument\n  var sortedProtocols = protocols.sort();\n  sortedProtocols.forEach(function(proto, i) {\n    if (!proto) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is invalid.\");\n    }\n    if (i < (sortedProtocols.length - 1) && proto === sortedProtocols[i + 1]) {\n      throw new SyntaxError(\"The protocols entry '\" + proto + \"' is duplicated.\");\n    }\n  });\n\n  // Step 6 - convert origin\n  var o = urlUtils.getOrigin(loc.href);\n  this._origin = o ? o.toLowerCase() : null;\n\n  // remove the trailing slash\n  parsedUrl.set('pathname', parsedUrl.pathname.replace(/\\/+$/, ''));\n\n  // store the sanitized url\n  this.url = parsedUrl.href;\n  debug('using url', this.url);\n\n  // Step 7 - start connection in background\n  // obtain server info\n  // http://sockjs.github.io/sockjs-protocol/sockjs-protocol-0.3.3.html#section-26\n  this._urlInfo = {\n    nullOrigin: !browser.hasDomain()\n  , sameOrigin: urlUtils.isOriginEqual(this.url, loc.href)\n  , sameScheme: urlUtils.isSchemeEqual(this.url, loc.href)\n  };\n\n  this._ir = new InfoReceiver(this.url, this._urlInfo);\n  this._ir.once('finish', this._receiveInfo.bind(this));\n}\n\ninherits(SockJS, EventTarget);\n\nfunction userSetCode(code) {\n  return code === 1000 || (code >= 3000 && code <= 4999);\n}\n\nSockJS.prototype.close = function(code, reason) {\n  // Step 1\n  if (code && !userSetCode(code)) {\n    throw new Error('InvalidAccessError: Invalid code');\n  }\n  // Step 2.4 states the max is 123 bytes, but we are just checking length\n  if (reason && reason.length > 123) {\n    throw new SyntaxError('reason argument has an invalid length');\n  }\n\n  // Step 3.1\n  if (this.readyState === SockJS.CLOSING || this.readyState === SockJS.CLOSED) {\n    return;\n  }\n\n  // TODO look at docs to determine how to set this\n  var wasClean = true;\n  this._close(code || 1000, reason || 'Normal closure', wasClean);\n};\n\nSockJS.prototype.send = function(data) {\n  // #13 - convert anything non-string to string\n  // TODO this currently turns objects into [object Object]\n  if (typeof data !== 'string') {\n    data = '' + data;\n  }\n  if (this.readyState === SockJS.CONNECTING) {\n    throw new Error('InvalidStateError: The connection has not been established yet');\n  }\n  if (this.readyState !== SockJS.OPEN) {\n    return;\n  }\n  this._transport.send(escape.quote(data));\n};\n\nSockJS.version = require('./version');\n\nSockJS.CONNECTING = 0;\nSockJS.OPEN = 1;\nSockJS.CLOSING = 2;\nSockJS.CLOSED = 3;\n\nSockJS.prototype._receiveInfo = function(info, rtt) {\n  debug('_receiveInfo', rtt);\n  this._ir = null;\n  if (!info) {\n    this._close(1002, 'Cannot connect to server');\n    return;\n  }\n\n  // establish a round-trip timeout (RTO) based on the\n  // round-trip time (RTT)\n  this._rto = this.countRTO(rtt);\n  // allow server to override url used for the actual transport\n  this._transUrl = info.base_url ? info.base_url : this.url;\n  info = objectUtils.extend(info, this._urlInfo);\n  debug('info', info);\n  // determine list of desired and supported transports\n  var enabledTransports = transports.filterToEnabled(this._transportsWhitelist, info);\n  this._transports = enabledTransports.main;\n  debug(this._transports.length + ' enabled transports');\n\n  this._connect();\n};\n\nSockJS.prototype._connect = function() {\n  for (var Transport = this._transports.shift(); Transport; Transport = this._transports.shift()) {\n    debug('attempt', Transport.transportName);\n    if (Transport.needBody) {\n      if (!global.document.body ||\n          (typeof global.document.readyState !== 'undefined' &&\n            global.document.readyState !== 'complete' &&\n            global.document.readyState !== 'interactive')) {\n        debug('waiting for body');\n        this._transports.unshift(Transport);\n        eventUtils.attachEvent('load', this._connect.bind(this));\n        return;\n      }\n    }\n\n    // calculate timeout based on RTO and round trips. Default to 5s\n    var timeoutMs = Math.max(this._timeout, (this._rto * Transport.roundTrips) || 5000);\n    this._transportTimeoutId = setTimeout(this._transportTimeout.bind(this), timeoutMs);\n    debug('using timeout', timeoutMs);\n\n    var transportUrl = urlUtils.addPath(this._transUrl, '/' + this._server + '/' + this._generateSessionId());\n    var options = this._transportOptions[Transport.transportName];\n    debug('transport url', transportUrl);\n    var transportObj = new Transport(transportUrl, this._transUrl, options);\n    transportObj.on('message', this._transportMessage.bind(this));\n    transportObj.once('close', this._transportClose.bind(this));\n    transportObj.transportName = Transport.transportName;\n    this._transport = transportObj;\n\n    return;\n  }\n  this._close(2000, 'All transports failed', false);\n};\n\nSockJS.prototype._transportTimeout = function() {\n  debug('_transportTimeout');\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transport) {\n      this._transport.close();\n    }\n\n    this._transportClose(2007, 'Transport timed out');\n  }\n};\n\nSockJS.prototype._transportMessage = function(msg) {\n  debug('_transportMessage', msg);\n  var self = this\n    , type = msg.slice(0, 1)\n    , content = msg.slice(1)\n    , payload\n    ;\n\n  // first check for messages that don't need a payload\n  switch (type) {\n    case 'o':\n      this._open();\n      return;\n    case 'h':\n      this.dispatchEvent(new Event('heartbeat'));\n      debug('heartbeat', this.transport);\n      return;\n  }\n\n  if (content) {\n    try {\n      payload = JSON3.parse(content);\n    } catch (e) {\n      debug('bad json', content);\n    }\n  }\n\n  if (typeof payload === 'undefined') {\n    debug('empty payload', content);\n    return;\n  }\n\n  switch (type) {\n    case 'a':\n      if (Array.isArray(payload)) {\n        payload.forEach(function(p) {\n          debug('message', self.transport, p);\n          self.dispatchEvent(new TransportMessageEvent(p));\n        });\n      }\n      break;\n    case 'm':\n      debug('message', this.transport, payload);\n      this.dispatchEvent(new TransportMessageEvent(payload));\n      break;\n    case 'c':\n      if (Array.isArray(payload) && payload.length === 2) {\n        this._close(payload[0], payload[1], true);\n      }\n      break;\n  }\n};\n\nSockJS.prototype._transportClose = function(code, reason) {\n  debug('_transportClose', this.transport, code, reason);\n  if (this._transport) {\n    this._transport.removeAllListeners();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (!userSetCode(code) && code !== 2000 && this.readyState === SockJS.CONNECTING) {\n    this._connect();\n    return;\n  }\n\n  this._close(code, reason);\n};\n\nSockJS.prototype._open = function() {\n  debug('_open', this._transport && this._transport.transportName, this.readyState);\n  if (this.readyState === SockJS.CONNECTING) {\n    if (this._transportTimeoutId) {\n      clearTimeout(this._transportTimeoutId);\n      this._transportTimeoutId = null;\n    }\n    this.readyState = SockJS.OPEN;\n    this.transport = this._transport.transportName;\n    this.dispatchEvent(new Event('open'));\n    debug('connected', this.transport);\n  } else {\n    // The server might have been restarted, and lost track of our\n    // connection.\n    this._close(1006, 'Server lost session');\n  }\n};\n\nSockJS.prototype._close = function(code, reason, wasClean) {\n  debug('_close', this.transport, code, reason, wasClean, this.readyState);\n  var forceFail = false;\n\n  if (this._ir) {\n    forceFail = true;\n    this._ir.close();\n    this._ir = null;\n  }\n  if (this._transport) {\n    this._transport.close();\n    this._transport = null;\n    this.transport = null;\n  }\n\n  if (this.readyState === SockJS.CLOSED) {\n    throw new Error('InvalidStateError: SockJS has already been closed');\n  }\n\n  this.readyState = SockJS.CLOSING;\n  setTimeout(function() {\n    this.readyState = SockJS.CLOSED;\n\n    if (forceFail) {\n      this.dispatchEvent(new Event('error'));\n    }\n\n    var e = new CloseEvent('close');\n    e.wasClean = wasClean || false;\n    e.code = code || 1000;\n    e.reason = reason;\n\n    this.dispatchEvent(e);\n    this.onmessage = this.onclose = this.onerror = null;\n    debug('disconnected');\n  }.bind(this), 0);\n};\n\n// See: http://www.erg.abdn.ac.uk/~gerrit/dccp/notes/ccid2/rto_estimator/\n// and RFC 2988.\nSockJS.prototype.countRTO = function(rtt) {\n  // In a local environment, when using IE8/9 and the `jsonp-polling`\n  // transport the time needed to establish a connection (the time that pass\n  // from the opening of the transport to the call of `_dispatchOpen`) is\n  // around 200msec (the lower bound used in the article above) and this\n  // causes spurious timeouts. For this reason we calculate a value slightly\n  // larger than that used in the article.\n  if (rtt > 100) {\n    return 4 * rtt; // rto > 400msec\n  }\n  return 300 + rtt; // 300msec < rto <= 400msec\n};\n\nmodule.exports = function(availableTransports) {\n  transports = transport(availableTransports);\n  require('./iframe-bootstrap')(SockJS, availableTransports);\n  return SockJS;\n};\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./event/close\":2,\"./event/event\":4,\"./event/eventtarget\":5,\"./event/trans-message\":6,\"./iframe-bootstrap\":8,\"./info-receiver\":12,\"./location\":13,\"./shims\":15,\"./utils/browser\":44,\"./utils/escape\":45,\"./utils/event\":46,\"./utils/log\":48,\"./utils/object\":49,\"./utils/random\":50,\"./utils/transport\":51,\"./utils/url\":52,\"./version\":53,\"debug\":55,\"inherits\":57,\"json3\":58,\"url-parse\":61}],15:[function(require,module,exports){\n/* eslint-disable */\n/* jscs: disable */\n'use strict';\n\n// pulled specific shims from https://github.com/es-shims/es5-shim\n\nvar ArrayPrototype = Array.prototype;\nvar ObjectPrototype = Object.prototype;\nvar FunctionPrototype = Function.prototype;\nvar StringPrototype = String.prototype;\nvar array_slice = ArrayPrototype.slice;\n\nvar _toString = ObjectPrototype.toString;\nvar isFunction = function (val) {\n    return ObjectPrototype.toString.call(val) === '[object Function]';\n};\nvar isArray = function isArray(obj) {\n    return _toString.call(obj) === '[object Array]';\n};\nvar isString = function isString(obj) {\n    return _toString.call(obj) === '[object String]';\n};\n\nvar supportsDescriptors = Object.defineProperty && (function () {\n    try {\n        Object.defineProperty({}, 'x', {});\n        return true;\n    } catch (e) { /* this is ES3 */\n        return false;\n    }\n}());\n\n// Define configurable, writable and non-enumerable props\n// if they don't exist.\nvar defineProperty;\nif (supportsDescriptors) {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        Object.defineProperty(object, name, {\n            configurable: true,\n            enumerable: false,\n            writable: true,\n            value: method\n        });\n    };\n} else {\n    defineProperty = function (object, name, method, forceAssign) {\n        if (!forceAssign && (name in object)) { return; }\n        object[name] = method;\n    };\n}\nvar defineProperties = function (object, map, forceAssign) {\n    for (var name in map) {\n        if (ObjectPrototype.hasOwnProperty.call(map, name)) {\n          defineProperty(object, name, map[name], forceAssign);\n        }\n    }\n};\n\nvar toObject = function (o) {\n    if (o == null) { // this matches both null and undefined\n        throw new TypeError(\"can't convert \" + o + ' to object');\n    }\n    return Object(o);\n};\n\n//\n// Util\n// ======\n//\n\n// ES5 9.4\n// http://es5.github.com/#x9.4\n// http://jsperf.com/to-integer\n\nfunction toInteger(num) {\n    var n = +num;\n    if (n !== n) { // isNaN\n        n = 0;\n    } else if (n !== 0 && n !== (1 / 0) && n !== -(1 / 0)) {\n        n = (n > 0 || -1) * Math.floor(Math.abs(n));\n    }\n    return n;\n}\n\nfunction ToUint32(x) {\n    return x >>> 0;\n}\n\n//\n// Function\n// ========\n//\n\n// ES-5 15.3.4.5\n// http://es5.github.com/#x15.3.4.5\n\nfunction Empty() {}\n\ndefineProperties(FunctionPrototype, {\n    bind: function bind(that) { // .length is 1\n        // 1. Let Target be the this value.\n        var target = this;\n        // 2. If IsCallable(Target) is false, throw a TypeError exception.\n        if (!isFunction(target)) {\n            throw new TypeError('Function.prototype.bind called on incompatible ' + target);\n        }\n        // 3. Let A be a new (possibly empty) internal list of all of the\n        //   argument values provided after thisArg (arg1, arg2 etc), in order.\n        // XXX slicedArgs will stand in for \"A\" if used\n        var args = array_slice.call(arguments, 1); // for normal call\n        // 4. Let F be a new native ECMAScript object.\n        // 11. Set the [[Prototype]] internal property of F to the standard\n        //   built-in Function prototype object as specified in 15.3.3.1.\n        // 12. Set the [[Call]] internal property of F as described in\n        //   15.3.4.5.1.\n        // 13. Set the [[Construct]] internal property of F as described in\n        //   15.3.4.5.2.\n        // 14. Set the [[HasInstance]] internal property of F as described in\n        //   15.3.4.5.3.\n        var binder = function () {\n\n            if (this instanceof bound) {\n                // 15.3.4.5.2 [[Construct]]\n                // When the [[Construct]] internal method of a function object,\n                // F that was created using the bind function is called with a\n                // list of arguments ExtraArgs, the following steps are taken:\n                // 1. Let target be the value of F's [[TargetFunction]]\n                //   internal property.\n                // 2. If target has no [[Construct]] internal method, a\n                //   TypeError exception is thrown.\n                // 3. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Construct]] internal\n                //   method of target providing args as the arguments.\n\n                var result = target.apply(\n                    this,\n                    args.concat(array_slice.call(arguments))\n                );\n                if (Object(result) === result) {\n                    return result;\n                }\n                return this;\n\n            } else {\n                // 15.3.4.5.1 [[Call]]\n                // When the [[Call]] internal method of a function object, F,\n                // which was created using the bind function is called with a\n                // this value and a list of arguments ExtraArgs, the following\n                // steps are taken:\n                // 1. Let boundArgs be the value of F's [[BoundArgs]] internal\n                //   property.\n                // 2. Let boundThis be the value of F's [[BoundThis]] internal\n                //   property.\n                // 3. Let target be the value of F's [[TargetFunction]] internal\n                //   property.\n                // 4. Let args be a new list containing the same values as the\n                //   list boundArgs in the same order followed by the same\n                //   values as the list ExtraArgs in the same order.\n                // 5. Return the result of calling the [[Call]] internal method\n                //   of target providing boundThis as the this value and\n                //   providing args as the arguments.\n\n                // equiv: target.call(this, ...boundArgs, ...args)\n                return target.apply(\n                    that,\n                    args.concat(array_slice.call(arguments))\n                );\n\n            }\n\n        };\n\n        // 15. If the [[Class]] internal property of Target is \"Function\", then\n        //     a. Let L be the length property of Target minus the length of A.\n        //     b. Set the length own property of F to either 0 or L, whichever is\n        //       larger.\n        // 16. Else set the length own property of F to 0.\n\n        var boundLength = Math.max(0, target.length - args.length);\n\n        // 17. Set the attributes of the length own property of F to the values\n        //   specified in 15.3.5.1.\n        var boundArgs = [];\n        for (var i = 0; i < boundLength; i++) {\n            boundArgs.push('$' + i);\n        }\n\n        // XXX Build a dynamic function with desired amount of arguments is the only\n        // way to set the length property of a function.\n        // In environments where Content Security Policies enabled (Chrome extensions,\n        // for ex.) all use of eval or Function costructor throws an exception.\n        // However in all of these environments Function.prototype.bind exists\n        // and so this code will never be executed.\n        var bound = Function('binder', 'return function (' + boundArgs.join(',') + '){ return binder.apply(this, arguments); }')(binder);\n\n        if (target.prototype) {\n            Empty.prototype = target.prototype;\n            bound.prototype = new Empty();\n            // Clean up dangling references.\n            Empty.prototype = null;\n        }\n\n        // TODO\n        // 18. Set the [[Extensible]] internal property of F to true.\n\n        // TODO\n        // 19. Let thrower be the [[ThrowTypeError]] function Object (13.2.3).\n        // 20. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"caller\", PropertyDescriptor {[[Get]]: thrower, [[Set]]:\n        //   thrower, [[Enumerable]]: false, [[Configurable]]: false}, and\n        //   false.\n        // 21. Call the [[DefineOwnProperty]] internal method of F with\n        //   arguments \"arguments\", PropertyDescriptor {[[Get]]: thrower,\n        //   [[Set]]: thrower, [[Enumerable]]: false, [[Configurable]]: false},\n        //   and false.\n\n        // TODO\n        // NOTE Function objects created using Function.prototype.bind do not\n        // have a prototype property or the [[Code]], [[FormalParameters]], and\n        // [[Scope]] internal properties.\n        // XXX can't delete prototype in pure-js.\n\n        // 22. Return F.\n        return bound;\n    }\n});\n\n//\n// Array\n// =====\n//\n\n// ES5 15.4.3.2\n// http://es5.github.com/#x15.4.3.2\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/isArray\ndefineProperties(Array, { isArray: isArray });\n\n\nvar boxedString = Object('a');\nvar splitString = boxedString[0] !== 'a' || !(0 in boxedString);\n\nvar properlyBoxesContext = function properlyBoxed(method) {\n    // Check node 0.6.21 bug where third parameter is not boxed\n    var properlyBoxesNonStrict = true;\n    var properlyBoxesStrict = true;\n    if (method) {\n        method.call('foo', function (_, __, context) {\n            if (typeof context !== 'object') { properlyBoxesNonStrict = false; }\n        });\n\n        method.call([1], function () {\n            'use strict';\n            properlyBoxesStrict = typeof this === 'string';\n        }, 'x');\n    }\n    return !!method && properlyBoxesNonStrict && properlyBoxesStrict;\n};\n\ndefineProperties(ArrayPrototype, {\n    forEach: function forEach(fun /*, thisp*/) {\n        var object = toObject(this),\n            self = splitString && isString(this) ? this.split('') : object,\n            thisp = arguments[1],\n            i = -1,\n            length = self.length >>> 0;\n\n        // If no callback function or if callback is not a callable function\n        if (!isFunction(fun)) {\n            throw new TypeError(); // TODO message\n        }\n\n        while (++i < length) {\n            if (i in self) {\n                // Invoke the callback function with call, passing arguments:\n                // context, property value, property key, thisArg object\n                // context\n                fun.call(thisp, self[i], i, object);\n            }\n        }\n    }\n}, !properlyBoxesContext(ArrayPrototype.forEach));\n\n// ES5 15.4.4.14\n// http://es5.github.com/#x15.4.4.14\n// https://developer.mozilla.org/en/JavaScript/Reference/Global_Objects/Array/indexOf\nvar hasFirefox2IndexOfBug = Array.prototype.indexOf && [0, 1].indexOf(1, 2) !== -1;\ndefineProperties(ArrayPrototype, {\n    indexOf: function indexOf(sought /*, fromIndex */ ) {\n        var self = splitString && isString(this) ? this.split('') : toObject(this),\n            length = self.length >>> 0;\n\n        if (!length) {\n            return -1;\n        }\n\n        var i = 0;\n        if (arguments.length > 1) {\n            i = toInteger(arguments[1]);\n        }\n\n        // handle negative indices\n        i = i >= 0 ? i : Math.max(0, length + i);\n        for (; i < length; i++) {\n            if (i in self && self[i] === sought) {\n                return i;\n            }\n        }\n        return -1;\n    }\n}, hasFirefox2IndexOfBug);\n\n//\n// String\n// ======\n//\n\n// ES5 15.5.4.14\n// http://es5.github.com/#x15.5.4.14\n\n// [bugfix, IE lt 9, firefox 4, Konqueror, Opera, obscure browsers]\n// Many browsers do not split properly with regular expressions or they\n// do not perform the split correctly under obscure conditions.\n// See http://blog.stevenlevithan.com/archives/cross-browser-split\n// I've tested in many browsers and this seems to cover the deviant ones:\n//    'ab'.split(/(?:ab)*/) should be [\"\", \"\"], not [\"\"]\n//    '.'.split(/(.?)(.?)/) should be [\"\", \".\", \"\", \"\"], not [\"\", \"\"]\n//    'tesst'.split(/(s)*/) should be [\"t\", undefined, \"e\", \"s\", \"t\"], not\n//       [undefined, \"t\", undefined, \"e\", ...]\n//    ''.split(/.?/) should be [], not [\"\"]\n//    '.'.split(/()()/) should be [\".\"], not [\"\", \"\", \".\"]\n\nvar string_split = StringPrototype.split;\nif (\n    'ab'.split(/(?:ab)*/).length !== 2 ||\n    '.'.split(/(.?)(.?)/).length !== 4 ||\n    'tesst'.split(/(s)*/)[1] === 't' ||\n    'test'.split(/(?:)/, -1).length !== 4 ||\n    ''.split(/.?/).length ||\n    '.'.split(/()()/).length > 1\n) {\n    (function () {\n        var compliantExecNpcg = /()??/.exec('')[1] === void 0; // NPCG: nonparticipating capturing group\n\n        StringPrototype.split = function (separator, limit) {\n            var string = this;\n            if (separator === void 0 && limit === 0) {\n                return [];\n            }\n\n            // If `separator` is not a regex, use native split\n            if (_toString.call(separator) !== '[object RegExp]') {\n                return string_split.call(this, separator, limit);\n            }\n\n            var output = [],\n                flags = (separator.ignoreCase ? 'i' : '') +\n                        (separator.multiline  ? 'm' : '') +\n                        (separator.extended   ? 'x' : '') + // Proposed for ES6\n                        (separator.sticky     ? 'y' : ''), // Firefox 3+\n                lastLastIndex = 0,\n                // Make `global` and avoid `lastIndex` issues by working with a copy\n                separator2, match, lastIndex, lastLength;\n            separator = new RegExp(separator.source, flags + 'g');\n            string += ''; // Type-convert\n            if (!compliantExecNpcg) {\n                // Doesn't need flags gy, but they don't hurt\n                separator2 = new RegExp('^' + separator.source + '$(?!\\\\s)', flags);\n            }\n            /* Values for `limit`, per the spec:\n             * If undefined: 4294967295 // Math.pow(2, 32) - 1\n             * If 0, Infinity, or NaN: 0\n             * If positive number: limit = Math.floor(limit); if (limit > 4294967295) limit -= 4294967296;\n             * If negative number: 4294967296 - Math.floor(Math.abs(limit))\n             * If other: Type-convert, then use the above rules\n             */\n            limit = limit === void 0 ?\n                -1 >>> 0 : // Math.pow(2, 32) - 1\n                ToUint32(limit);\n            while (match = separator.exec(string)) {\n                // `separator.lastIndex` is not reliable cross-browser\n                lastIndex = match.index + match[0].length;\n                if (lastIndex > lastLastIndex) {\n                    output.push(string.slice(lastLastIndex, match.index));\n                    // Fix browsers whose `exec` methods don't consistently return `undefined` for\n                    // nonparticipating capturing groups\n                    if (!compliantExecNpcg && match.length > 1) {\n                        match[0].replace(separator2, function () {\n                            for (var i = 1; i < arguments.length - 2; i++) {\n                                if (arguments[i] === void 0) {\n                                    match[i] = void 0;\n                                }\n                            }\n                        });\n                    }\n                    if (match.length > 1 && match.index < string.length) {\n                        ArrayPrototype.push.apply(output, match.slice(1));\n                    }\n                    lastLength = match[0].length;\n                    lastLastIndex = lastIndex;\n                    if (output.length >= limit) {\n                        break;\n                    }\n                }\n                if (separator.lastIndex === match.index) {\n                    separator.lastIndex++; // Avoid an infinite loop\n                }\n            }\n            if (lastLastIndex === string.length) {\n                if (lastLength || !separator.test('')) {\n                    output.push('');\n                }\n            } else {\n                output.push(string.slice(lastLastIndex));\n            }\n            return output.length > limit ? output.slice(0, limit) : output;\n        };\n    }());\n\n// [bugfix, chrome]\n// If separator is undefined, then the result array contains just one String,\n// which is the this value (converted to a String). If limit is not undefined,\n// then the output array is truncated so that it contains no more than limit\n// elements.\n// \"0\".split(undefined, 0) -> []\n} else if ('0'.split(void 0, 0).length) {\n    StringPrototype.split = function split(separator, limit) {\n        if (separator === void 0 && limit === 0) { return []; }\n        return string_split.call(this, separator, limit);\n    };\n}\n\n// ECMA-262, 3rd B.2.3\n// Not an ECMAScript standard, although ECMAScript 3rd Edition has a\n// non-normative section suggesting uniform semantics and it should be\n// normalized across all browsers\n// [bugfix, IE lt 9] IE < 9 substr() with negative value not working in IE\nvar string_substr = StringPrototype.substr;\nvar hasNegativeSubstrBug = ''.substr && '0b'.substr(-1) !== 'b';\ndefineProperties(StringPrototype, {\n    substr: function substr(start, length) {\n        return string_substr.call(\n            this,\n            start < 0 ? ((start = this.length + start) < 0 ? 0 : start) : start,\n            length\n        );\n    }\n}, hasNegativeSubstrBug);\n\n},{}],16:[function(require,module,exports){\n'use strict';\n\nmodule.exports = [\n  // streaming transports\n  require('./transport/websocket')\n, require('./transport/xhr-streaming')\n, require('./transport/xdr-streaming')\n, require('./transport/eventsource')\n, require('./transport/lib/iframe-wrap')(require('./transport/eventsource'))\n\n  // polling transports\n, require('./transport/htmlfile')\n, require('./transport/lib/iframe-wrap')(require('./transport/htmlfile'))\n, require('./transport/xhr-polling')\n, require('./transport/xdr-polling')\n, require('./transport/lib/iframe-wrap')(require('./transport/xhr-polling'))\n, require('./transport/jsonp-polling')\n];\n\n},{\"./transport/eventsource\":20,\"./transport/htmlfile\":21,\"./transport/jsonp-polling\":23,\"./transport/lib/iframe-wrap\":26,\"./transport/websocket\":38,\"./transport/xdr-polling\":39,\"./transport/xdr-streaming\":40,\"./transport/xhr-polling\":41,\"./transport/xhr-streaming\":42}],17:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , utils = require('../../utils/event')\n  , urlUtils = require('../../utils/url')\n  , XHR = global.XMLHttpRequest\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:browser:xhr');\n}\n\nfunction AbstractXHRObject(method, url, payload, opts) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function () {\n    self._start(method, url, payload, opts);\n  }, 0);\n}\n\ninherits(AbstractXHRObject, EventEmitter);\n\nAbstractXHRObject.prototype._start = function(method, url, payload, opts) {\n  var self = this;\n\n  try {\n    this.xhr = new XHR();\n  } catch (x) {\n    // intentionally empty\n  }\n\n  if (!this.xhr) {\n    debug('no xhr');\n    this.emit('finish', 0, 'no xhr support');\n    this._cleanup();\n    return;\n  }\n\n  // several browsers cache POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  // Explorer tends to keep connection open, even after the\n  // tab gets closed: http://bugs.jquery.com/ticket/5280\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload cleanup');\n    self._cleanup(true);\n  });\n  try {\n    this.xhr.open(method, url, true);\n    if (this.timeout && 'timeout' in this.xhr) {\n      this.xhr.timeout = this.timeout;\n      this.xhr.ontimeout = function() {\n        debug('xhr timeout');\n        self.emit('finish', 0, '');\n        self._cleanup(false);\n      };\n    }\n  } catch (e) {\n    debug('exception', e);\n    // IE raises an exception on wrong port.\n    this.emit('finish', 0, '');\n    this._cleanup(false);\n    return;\n  }\n\n  if ((!opts || !opts.noCredentials) && AbstractXHRObject.supportsCORS) {\n    debug('withCredentials');\n    // Mozilla docs says https://developer.mozilla.org/en/XMLHttpRequest :\n    // \"This never affects same-site requests.\"\n\n    this.xhr.withCredentials = true;\n  }\n  if (opts && opts.headers) {\n    for (var key in opts.headers) {\n      this.xhr.setRequestHeader(key, opts.headers[key]);\n    }\n  }\n\n  this.xhr.onreadystatechange = function() {\n    if (self.xhr) {\n      var x = self.xhr;\n      var text, status;\n      debug('readyState', x.readyState);\n      switch (x.readyState) {\n      case 3:\n        // IE doesn't like peeking into responseText or status\n        // on Microsoft.XMLHTTP and readystate=3\n        try {\n          status = x.status;\n          text = x.responseText;\n        } catch (e) {\n          // intentionally empty\n        }\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n\n        // IE does return readystate == 3 for 404 answers.\n        if (status === 200 && text && text.length > 0) {\n          debug('chunk');\n          self.emit('chunk', status, text);\n        }\n        break;\n      case 4:\n        status = x.status;\n        debug('status', status);\n        // IE returns 1223 for 204: http://bugs.jquery.com/ticket/1450\n        if (status === 1223) {\n          status = 204;\n        }\n        // IE returns this for a bad port\n        // http://msdn.microsoft.com/en-us/library/windows/desktop/aa383770(v=vs.85).aspx\n        if (status === 12005 || status === 12029) {\n          status = 0;\n        }\n\n        debug('finish', status, x.responseText);\n        self.emit('finish', status, x.responseText);\n        self._cleanup(false);\n        break;\n      }\n    }\n  };\n\n  try {\n    self.xhr.send(payload);\n  } catch (e) {\n    self.emit('finish', 0, '');\n    self._cleanup(false);\n  }\n};\n\nAbstractXHRObject.prototype._cleanup = function(abort) {\n  debug('cleanup');\n  if (!this.xhr) {\n    return;\n  }\n  this.removeAllListeners();\n  utils.unloadDel(this.unloadRef);\n\n  // IE needs this field to be a function\n  this.xhr.onreadystatechange = function() {};\n  if (this.xhr.ontimeout) {\n    this.xhr.ontimeout = null;\n  }\n\n  if (abort) {\n    try {\n      this.xhr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xhr = null;\n};\n\nAbstractXHRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\nAbstractXHRObject.enabled = !!XHR;\n// override XMLHttpRequest for IE6/7\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (!AbstractXHRObject.enabled && (axo in global)) {\n  debug('overriding xmlhttprequest');\n  XHR = function() {\n    try {\n      return new global[axo]('Microsoft.XMLHTTP');\n    } catch (e) {\n      return null;\n    }\n  };\n  AbstractXHRObject.enabled = !!new XHR();\n}\n\nvar cors = false;\ntry {\n  cors = 'withCredentials' in new XHR();\n} catch (ignored) {\n  // intentionally empty\n}\n\nAbstractXHRObject.supportsCORS = cors;\n\nmodule.exports = AbstractXHRObject;\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../utils/event\":46,\"../../utils/url\":52,\"debug\":55,\"events\":3,\"inherits\":57}],18:[function(require,module,exports){\n(function (global){\nmodule.exports = global.EventSource;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],19:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar Driver = global.WebSocket || global.MozWebSocket;\nif (Driver) {\n\tmodule.exports = function WebSocketBrowserDriver(url) {\n\t\treturn new Driver(url);\n\t};\n} else {\n\tmodule.exports = undefined;\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],20:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , EventSourceReceiver = require('./receiver/eventsource')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , EventSourceDriver = require('eventsource')\n  ;\n\nfunction EventSourceTransport(transUrl) {\n  if (!EventSourceTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  AjaxBasedTransport.call(this, transUrl, '/eventsource', EventSourceReceiver, XHRCorsObject);\n}\n\ninherits(EventSourceTransport, AjaxBasedTransport);\n\nEventSourceTransport.enabled = function() {\n  return !!EventSourceDriver;\n};\n\nEventSourceTransport.transportName = 'eventsource';\nEventSourceTransport.roundTrips = 2;\n\nmodule.exports = EventSourceTransport;\n\n},{\"./lib/ajax-based\":24,\"./receiver/eventsource\":29,\"./sender/xhr-cors\":35,\"eventsource\":18,\"inherits\":57}],21:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , HtmlfileReceiver = require('./receiver/htmlfile')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  ;\n\nfunction HtmlFileTransport(transUrl) {\n  if (!HtmlfileReceiver.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/htmlfile', HtmlfileReceiver, XHRLocalObject);\n}\n\ninherits(HtmlFileTransport, AjaxBasedTransport);\n\nHtmlFileTransport.enabled = function(info) {\n  return HtmlfileReceiver.enabled && info.sameOrigin;\n};\n\nHtmlFileTransport.transportName = 'htmlfile';\nHtmlFileTransport.roundTrips = 2;\n\nmodule.exports = HtmlFileTransport;\n\n},{\"./lib/ajax-based\":24,\"./receiver/htmlfile\":30,\"./sender/xhr-local\":37,\"inherits\":57}],22:[function(require,module,exports){\n(function (process){\n'use strict';\n\n// Few cool transports do work only for same-origin. In order to make\n// them work cross-domain we shall use iframe, served from the\n// remote domain. New browsers have capabilities to communicate with\n// cross domain iframe using postMessage(). In IE it was implemented\n// from IE 8+, but of course, IE got some details wrong:\n//    http://msdn.microsoft.com/en-us/library/cc197015(v=VS.85).aspx\n//    http://stevesouders.com/misc/test-postmessage.php\n\nvar inherits = require('inherits')\n  , JSON3 = require('json3')\n  , EventEmitter = require('events').EventEmitter\n  , version = require('../version')\n  , urlUtils = require('../utils/url')\n  , iframeUtils = require('../utils/iframe')\n  , eventUtils = require('../utils/event')\n  , random = require('../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:transport:iframe');\n}\n\nfunction IframeTransport(transport, transUrl, baseUrl) {\n  if (!IframeTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  EventEmitter.call(this);\n\n  var self = this;\n  this.origin = urlUtils.getOrigin(baseUrl);\n  this.baseUrl = baseUrl;\n  this.transUrl = transUrl;\n  this.transport = transport;\n  this.windowId = random.string(8);\n\n  var iframeUrl = urlUtils.addPath(baseUrl, '/iframe.html') + '#' + this.windowId;\n  debug(transport, transUrl, iframeUrl);\n\n  this.iframeObj = iframeUtils.createIframe(iframeUrl, function(r) {\n    debug('err callback');\n    self.emit('close', 1006, 'Unable to load an iframe (' + r + ')');\n    self.close();\n  });\n\n  this.onmessageCallback = this._message.bind(this);\n  eventUtils.attachEvent('message', this.onmessageCallback);\n}\n\ninherits(IframeTransport, EventEmitter);\n\nIframeTransport.prototype.close = function() {\n  debug('close');\n  this.removeAllListeners();\n  if (this.iframeObj) {\n    eventUtils.detachEvent('message', this.onmessageCallback);\n    try {\n      // When the iframe is not loaded, IE raises an exception\n      // on 'contentWindow'.\n      this.postMessage('c');\n    } catch (x) {\n      // intentionally empty\n    }\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n    this.onmessageCallback = this.iframeObj = null;\n  }\n};\n\nIframeTransport.prototype._message = function(e) {\n  debug('message', e.data);\n  if (!urlUtils.isOriginEqual(e.origin, this.origin)) {\n    debug('not same origin', e.origin, this.origin);\n    return;\n  }\n\n  var iframeMessage;\n  try {\n    iframeMessage = JSON3.parse(e.data);\n  } catch (ignored) {\n    debug('bad json', e.data);\n    return;\n  }\n\n  if (iframeMessage.windowId !== this.windowId) {\n    debug('mismatched window id', iframeMessage.windowId, this.windowId);\n    return;\n  }\n\n  switch (iframeMessage.type) {\n  case 's':\n    this.iframeObj.loaded();\n    // window global dependency\n    this.postMessage('s', JSON3.stringify([\n      version\n    , this.transport\n    , this.transUrl\n    , this.baseUrl\n    ]));\n    break;\n  case 't':\n    this.emit('message', iframeMessage.data);\n    break;\n  case 'c':\n    var cdata;\n    try {\n      cdata = JSON3.parse(iframeMessage.data);\n    } catch (ignored) {\n      debug('bad json', iframeMessage.data);\n      return;\n    }\n    this.emit('close', cdata[0], cdata[1]);\n    this.close();\n    break;\n  }\n};\n\nIframeTransport.prototype.postMessage = function(type, data) {\n  debug('postMessage', type, data);\n  this.iframeObj.post(JSON3.stringify({\n    windowId: this.windowId\n  , type: type\n  , data: data || ''\n  }), this.origin);\n};\n\nIframeTransport.prototype.send = function(message) {\n  debug('send', message);\n  this.postMessage('m', message);\n};\n\nIframeTransport.enabled = function() {\n  return iframeUtils.iframeEnabled;\n};\n\nIframeTransport.transportName = 'iframe';\nIframeTransport.roundTrips = 2;\n\nmodule.exports = IframeTransport;\n\n}).call(this,{ env: {} })\n\n},{\"../utils/event\":46,\"../utils/iframe\":47,\"../utils/random\":50,\"../utils/url\":52,\"../version\":53,\"debug\":55,\"events\":3,\"inherits\":57,\"json3\":58}],23:[function(require,module,exports){\n(function (global){\n'use strict';\n\n// The simplest and most robust transport, using the well-know cross\n// domain hack - JSONP. This transport is quite inefficient - one\n// message could use up to one http request. But at least it works almost\n// everywhere.\n// Known limitations:\n//   o you will get a spinning cursor\n//   o for Konqueror a dumb timer is needed to detect errors\n\nvar inherits = require('inherits')\n  , SenderReceiver = require('./lib/sender-receiver')\n  , JsonpReceiver = require('./receiver/jsonp')\n  , jsonpSender = require('./sender/jsonp')\n  ;\n\nfunction JsonPTransport(transUrl) {\n  if (!JsonPTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n  SenderReceiver.call(this, transUrl, '/jsonp', jsonpSender, JsonpReceiver);\n}\n\ninherits(JsonPTransport, SenderReceiver);\n\nJsonPTransport.enabled = function() {\n  return !!global.document;\n};\n\nJsonPTransport.transportName = 'jsonp-polling';\nJsonPTransport.roundTrips = 1;\nJsonPTransport.needBody = true;\n\nmodule.exports = JsonPTransport;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./lib/sender-receiver\":28,\"./receiver/jsonp\":31,\"./sender/jsonp\":33,\"inherits\":57}],24:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , SenderReceiver = require('./sender-receiver')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:ajax-based');\n}\n\nfunction createAjaxSender(AjaxObject) {\n  return function(url, payload, callback) {\n    debug('create ajax sender', url, payload);\n    var opt = {};\n    if (typeof payload === 'string') {\n      opt.headers = {'Content-type': 'text/plain'};\n    }\n    var ajaxUrl = urlUtils.addPath(url, '/xhr_send');\n    var xo = new AjaxObject('POST', ajaxUrl, payload, opt);\n    xo.once('finish', function(status) {\n      debug('finish', status);\n      xo = null;\n\n      if (status !== 200 && status !== 204) {\n        return callback(new Error('http status ' + status));\n      }\n      callback();\n    });\n    return function() {\n      debug('abort');\n      xo.close();\n      xo = null;\n\n      var err = new Error('Aborted');\n      err.code = 1000;\n      callback(err);\n    };\n  };\n}\n\nfunction AjaxBasedTransport(transUrl, urlSuffix, Receiver, AjaxObject) {\n  SenderReceiver.call(this, transUrl, urlSuffix, createAjaxSender(AjaxObject), Receiver, AjaxObject);\n}\n\ninherits(AjaxBasedTransport, SenderReceiver);\n\nmodule.exports = AjaxBasedTransport;\n\n}).call(this,{ env: {} })\n\n},{\"../../utils/url\":52,\"./sender-receiver\":28,\"debug\":55,\"inherits\":57}],25:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:buffered-sender');\n}\n\nfunction BufferedSender(url, sender) {\n  debug(url);\n  EventEmitter.call(this);\n  this.sendBuffer = [];\n  this.sender = sender;\n  this.url = url;\n}\n\ninherits(BufferedSender, EventEmitter);\n\nBufferedSender.prototype.send = function(message) {\n  debug('send', message);\n  this.sendBuffer.push(message);\n  if (!this.sendStop) {\n    this.sendSchedule();\n  }\n};\n\n// For polling transports in a situation when in the message callback,\n// new message is being send. If the sending connection was started\n// before receiving one, it is possible to saturate the network and\n// timeout due to the lack of receiving socket. To avoid that we delay\n// sending messages by some small time, in order to let receiving\n// connection be started beforehand. This is only a halfmeasure and\n// does not fix the big problem, but it does make the tests go more\n// stable on slow networks.\nBufferedSender.prototype.sendScheduleWait = function() {\n  debug('sendScheduleWait');\n  var self = this;\n  var tref;\n  this.sendStop = function() {\n    debug('sendStop');\n    self.sendStop = null;\n    clearTimeout(tref);\n  };\n  tref = setTimeout(function() {\n    debug('timeout');\n    self.sendStop = null;\n    self.sendSchedule();\n  }, 25);\n};\n\nBufferedSender.prototype.sendSchedule = function() {\n  debug('sendSchedule', this.sendBuffer.length);\n  var self = this;\n  if (this.sendBuffer.length > 0) {\n    var payload = '[' + this.sendBuffer.join(',') + ']';\n    this.sendStop = this.sender(this.url, payload, function(err) {\n      self.sendStop = null;\n      if (err) {\n        debug('error', err);\n        self.emit('close', err.code || 1006, 'Sending error: ' + err);\n        self.close();\n      } else {\n        self.sendScheduleWait();\n      }\n    });\n    this.sendBuffer = [];\n  }\n};\n\nBufferedSender.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nBufferedSender.prototype.close = function() {\n  debug('close');\n  this._cleanup();\n  if (this.sendStop) {\n    this.sendStop();\n    this.sendStop = null;\n  }\n};\n\nmodule.exports = BufferedSender;\n\n}).call(this,{ env: {} })\n\n},{\"debug\":55,\"events\":3,\"inherits\":57}],26:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar inherits = require('inherits')\n  , IframeTransport = require('../iframe')\n  , objectUtils = require('../../utils/object')\n  ;\n\nmodule.exports = function(transport) {\n\n  function IframeWrapTransport(transUrl, baseUrl) {\n    IframeTransport.call(this, transport.transportName, transUrl, baseUrl);\n  }\n\n  inherits(IframeWrapTransport, IframeTransport);\n\n  IframeWrapTransport.enabled = function(url, info) {\n    if (!global.document) {\n      return false;\n    }\n\n    var iframeInfo = objectUtils.extend({}, info);\n    iframeInfo.sameOrigin = true;\n    return transport.enabled(iframeInfo) && IframeTransport.enabled();\n  };\n\n  IframeWrapTransport.transportName = 'iframe-' + transport.transportName;\n  IframeWrapTransport.needBody = true;\n  IframeWrapTransport.roundTrips = IframeTransport.roundTrips + transport.roundTrips - 1; // html, javascript (2) + transport - no CORS (1)\n\n  IframeWrapTransport.facadeTransport = transport;\n\n  return IframeWrapTransport;\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../utils/object\":49,\"../iframe\":22,\"inherits\":57}],27:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:polling');\n}\n\nfunction Polling(Receiver, receiveUrl, AjaxObject) {\n  debug(receiveUrl);\n  EventEmitter.call(this);\n  this.Receiver = Receiver;\n  this.receiveUrl = receiveUrl;\n  this.AjaxObject = AjaxObject;\n  this._scheduleReceiver();\n}\n\ninherits(Polling, EventEmitter);\n\nPolling.prototype._scheduleReceiver = function() {\n  debug('_scheduleReceiver');\n  var self = this;\n  var poll = this.poll = new this.Receiver(this.receiveUrl, this.AjaxObject);\n\n  poll.on('message', function(msg) {\n    debug('message', msg);\n    self.emit('message', msg);\n  });\n\n  poll.once('close', function(code, reason) {\n    debug('close', code, reason, self.pollIsClosing);\n    self.poll = poll = null;\n\n    if (!self.pollIsClosing) {\n      if (reason === 'network') {\n        self._scheduleReceiver();\n      } else {\n        self.emit('close', code || 1006, reason);\n        self.removeAllListeners();\n      }\n    }\n  });\n};\n\nPolling.prototype.abort = function() {\n  debug('abort');\n  this.removeAllListeners();\n  this.pollIsClosing = true;\n  if (this.poll) {\n    this.poll.abort();\n  }\n};\n\nmodule.exports = Polling;\n\n}).call(this,{ env: {} })\n\n},{\"debug\":55,\"events\":3,\"inherits\":57}],28:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar inherits = require('inherits')\n  , urlUtils = require('../../utils/url')\n  , BufferedSender = require('./buffered-sender')\n  , Polling = require('./polling')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender-receiver');\n}\n\nfunction SenderReceiver(transUrl, urlSuffix, senderFunc, Receiver, AjaxObject) {\n  var pollUrl = urlUtils.addPath(transUrl, urlSuffix);\n  debug(pollUrl);\n  var self = this;\n  BufferedSender.call(this, transUrl, senderFunc);\n\n  this.poll = new Polling(Receiver, pollUrl, AjaxObject);\n  this.poll.on('message', function(msg) {\n    debug('poll message', msg);\n    self.emit('message', msg);\n  });\n  this.poll.once('close', function(code, reason) {\n    debug('poll close', code, reason);\n    self.poll = null;\n    self.emit('close', code, reason);\n    self.close();\n  });\n}\n\ninherits(SenderReceiver, BufferedSender);\n\nSenderReceiver.prototype.close = function() {\n  BufferedSender.prototype.close.call(this);\n  debug('close');\n  this.removeAllListeners();\n  if (this.poll) {\n    this.poll.abort();\n    this.poll = null;\n  }\n};\n\nmodule.exports = SenderReceiver;\n\n}).call(this,{ env: {} })\n\n},{\"../../utils/url\":52,\"./buffered-sender\":25,\"./polling\":27,\"debug\":55,\"inherits\":57}],29:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , EventSourceDriver = require('eventsource')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:eventsource');\n}\n\nfunction EventSourceReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n\n  var self = this;\n  var es = this.es = new EventSourceDriver(url);\n  es.onmessage = function(e) {\n    debug('message', e.data);\n    self.emit('message', decodeURI(e.data));\n  };\n  es.onerror = function(e) {\n    debug('error', es.readyState, e);\n    // ES on reconnection has readyState = 0 or 1.\n    // on network error it's CLOSED = 2\n    var reason = (es.readyState !== 2 ? 'network' : 'permanent');\n    self._cleanup();\n    self._close(reason);\n  };\n}\n\ninherits(EventSourceReceiver, EventEmitter);\n\nEventSourceReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nEventSourceReceiver.prototype._cleanup = function() {\n  debug('cleanup');\n  var es = this.es;\n  if (es) {\n    es.onmessage = es.onerror = null;\n    es.close();\n    this.es = null;\n  }\n};\n\nEventSourceReceiver.prototype._close = function(reason) {\n  debug('close', reason);\n  var self = this;\n  // Safari and chrome < 15 crash if we close window before\n  // waiting for ES cleanup. See:\n  // https://code.google.com/p/chromium/issues/detail?id=89155\n  setTimeout(function() {\n    self.emit('close', null, reason);\n    self.removeAllListeners();\n  }, 200);\n};\n\nmodule.exports = EventSourceReceiver;\n\n}).call(this,{ env: {} })\n\n},{\"debug\":55,\"events\":3,\"eventsource\":18,\"inherits\":57}],30:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar inherits = require('inherits')\n  , iframeUtils = require('../../utils/iframe')\n  , urlUtils = require('../../utils/url')\n  , EventEmitter = require('events').EventEmitter\n  , random = require('../../utils/random')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:htmlfile');\n}\n\nfunction HtmlfileReceiver(url) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n  iframeUtils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  url = urlUtils.addQuery(url, 'c=' + decodeURIComponent(iframeUtils.WPrefix + '.' + this.id));\n\n  debug('using htmlfile', HtmlfileReceiver.htmlfileEnabled);\n  var constructFunc = HtmlfileReceiver.htmlfileEnabled ?\n      iframeUtils.createHtmlfile : iframeUtils.createIframe;\n\n  global[iframeUtils.WPrefix][this.id] = {\n    start: function() {\n      debug('start');\n      self.iframeObj.loaded();\n    }\n  , message: function(data) {\n      debug('message', data);\n      self.emit('message', data);\n    }\n  , stop: function() {\n      debug('stop');\n      self._cleanup();\n      self._close('network');\n    }\n  };\n  this.iframeObj = constructFunc(url, function() {\n    debug('callback');\n    self._cleanup();\n    self._close('permanent');\n  });\n}\n\ninherits(HtmlfileReceiver, EventEmitter);\n\nHtmlfileReceiver.prototype.abort = function() {\n  debug('abort');\n  this._cleanup();\n  this._close('user');\n};\n\nHtmlfileReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  if (this.iframeObj) {\n    this.iframeObj.cleanup();\n    this.iframeObj = null;\n  }\n  delete global[iframeUtils.WPrefix][this.id];\n};\n\nHtmlfileReceiver.prototype._close = function(reason) {\n  debug('_close', reason);\n  this.emit('close', null, reason);\n  this.removeAllListeners();\n};\n\nHtmlfileReceiver.htmlfileEnabled = false;\n\n// obfuscate to avoid firewalls\nvar axo = ['Active'].concat('Object').join('X');\nif (axo in global) {\n  try {\n    HtmlfileReceiver.htmlfileEnabled = !!new global[axo]('htmlfile');\n  } catch (x) {\n    // intentionally empty\n  }\n}\n\nHtmlfileReceiver.enabled = HtmlfileReceiver.htmlfileEnabled || iframeUtils.iframeEnabled;\n\nmodule.exports = HtmlfileReceiver;\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../utils/iframe\":47,\"../../utils/random\":50,\"../../utils/url\":52,\"debug\":55,\"events\":3,\"inherits\":57}],31:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar utils = require('../../utils/iframe')\n  , random = require('../../utils/random')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:jsonp');\n}\n\nfunction JsonpReceiver(url) {\n  debug(url);\n  var self = this;\n  EventEmitter.call(this);\n\n  utils.polluteGlobalNamespace();\n\n  this.id = 'a' + random.string(6);\n  var urlWithId = urlUtils.addQuery(url, 'c=' + encodeURIComponent(utils.WPrefix + '.' + this.id));\n\n  global[utils.WPrefix][this.id] = this._callback.bind(this);\n  this._createScript(urlWithId);\n\n  // Fallback mostly for Konqueror - stupid timer, 35 seconds shall be plenty.\n  this.timeoutId = setTimeout(function() {\n    debug('timeout');\n    self._abort(new Error('JSONP script loaded abnormally (timeout)'));\n  }, JsonpReceiver.timeout);\n}\n\ninherits(JsonpReceiver, EventEmitter);\n\nJsonpReceiver.prototype.abort = function() {\n  debug('abort');\n  if (global[utils.WPrefix][this.id]) {\n    var err = new Error('JSONP user aborted read');\n    err.code = 1000;\n    this._abort(err);\n  }\n};\n\nJsonpReceiver.timeout = 35000;\nJsonpReceiver.scriptErrorTimeout = 1000;\n\nJsonpReceiver.prototype._callback = function(data) {\n  debug('_callback', data);\n  this._cleanup();\n\n  if (this.aborting) {\n    return;\n  }\n\n  if (data) {\n    debug('message', data);\n    this.emit('message', data);\n  }\n  this.emit('close', null, 'network');\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._abort = function(err) {\n  debug('_abort', err);\n  this._cleanup();\n  this.aborting = true;\n  this.emit('close', err.code, err.message);\n  this.removeAllListeners();\n};\n\nJsonpReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  clearTimeout(this.timeoutId);\n  if (this.script2) {\n    this.script2.parentNode.removeChild(this.script2);\n    this.script2 = null;\n  }\n  if (this.script) {\n    var script = this.script;\n    // Unfortunately, you can't really abort script loading of\n    // the script.\n    script.parentNode.removeChild(script);\n    script.onreadystatechange = script.onerror =\n        script.onload = script.onclick = null;\n    this.script = null;\n  }\n  delete global[utils.WPrefix][this.id];\n};\n\nJsonpReceiver.prototype._scriptError = function() {\n  debug('_scriptError');\n  var self = this;\n  if (this.errorTimer) {\n    return;\n  }\n\n  this.errorTimer = setTimeout(function() {\n    if (!self.loadedOkay) {\n      self._abort(new Error('JSONP script loaded abnormally (onerror)'));\n    }\n  }, JsonpReceiver.scriptErrorTimeout);\n};\n\nJsonpReceiver.prototype._createScript = function(url) {\n  debug('_createScript', url);\n  var self = this;\n  var script = this.script = global.document.createElement('script');\n  var script2;  // Opera synchronous load trick.\n\n  script.id = 'a' + random.string(8);\n  script.src = url;\n  script.type = 'text/javascript';\n  script.charset = 'UTF-8';\n  script.onerror = this._scriptError.bind(this);\n  script.onload = function() {\n    debug('onload');\n    self._abort(new Error('JSONP script loaded abnormally (onload)'));\n  };\n\n  // IE9 fires 'error' event after onreadystatechange or before, in random order.\n  // Use loadedOkay to determine if actually errored\n  script.onreadystatechange = function() {\n    debug('onreadystatechange', script.readyState);\n    if (/loaded|closed/.test(script.readyState)) {\n      if (script && script.htmlFor && script.onclick) {\n        self.loadedOkay = true;\n        try {\n          // In IE, actually execute the script.\n          script.onclick();\n        } catch (x) {\n          // intentionally empty\n        }\n      }\n      if (script) {\n        self._abort(new Error('JSONP script loaded abnormally (onreadystatechange)'));\n      }\n    }\n  };\n  // IE: event/htmlFor/onclick trick.\n  // One can't rely on proper order for onreadystatechange. In order to\n  // make sure, set a 'htmlFor' and 'event' properties, so that\n  // script code will be installed as 'onclick' handler for the\n  // script object. Later, onreadystatechange, manually execute this\n  // code. FF and Chrome doesn't work with 'event' and 'htmlFor'\n  // set. For reference see:\n  //   http://jaubourg.net/2010/07/loading-script-as-onclick-handler-of.html\n  // Also, read on that about script ordering:\n  //   http://wiki.whatwg.org/wiki/Dynamic_Script_Execution_Order\n  if (typeof script.async === 'undefined' && global.document.attachEvent) {\n    // According to mozilla docs, in recent browsers script.async defaults\n    // to 'true', so we may use it to detect a good browser:\n    // https://developer.mozilla.org/en/HTML/Element/script\n    if (!browser.isOpera()) {\n      // Naively assume we're in IE\n      try {\n        script.htmlFor = script.id;\n        script.event = 'onclick';\n      } catch (x) {\n        // intentionally empty\n      }\n      script.async = true;\n    } else {\n      // Opera, second sync script hack\n      script2 = this.script2 = global.document.createElement('script');\n      script2.text = \"try{var a = document.getElementById('\" + script.id + \"'); if(a)a.onerror();}catch(x){};\";\n      script.async = script2.async = false;\n    }\n  }\n  if (typeof script.async !== 'undefined') {\n    script.async = true;\n  }\n\n  var head = global.document.getElementsByTagName('head')[0];\n  head.insertBefore(script, head.firstChild);\n  if (script2) {\n    head.insertBefore(script2, head.firstChild);\n  }\n};\n\nmodule.exports = JsonpReceiver;\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../utils/browser\":44,\"../../utils/iframe\":47,\"../../utils/random\":50,\"../../utils/url\":52,\"debug\":55,\"events\":3,\"inherits\":57}],32:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:receiver:xhr');\n}\n\nfunction XhrReceiver(url, AjaxObject) {\n  debug(url);\n  EventEmitter.call(this);\n  var self = this;\n\n  this.bufferPosition = 0;\n\n  this.xo = new AjaxObject('POST', url, null);\n  this.xo.on('chunk', this._chunkHandler.bind(this));\n  this.xo.once('finish', function(status, text) {\n    debug('finish', status, text);\n    self._chunkHandler(status, text);\n    self.xo = null;\n    var reason = status === 200 ? 'network' : 'permanent';\n    debug('close', reason);\n    self.emit('close', null, reason);\n    self._cleanup();\n  });\n}\n\ninherits(XhrReceiver, EventEmitter);\n\nXhrReceiver.prototype._chunkHandler = function(status, text) {\n  debug('_chunkHandler', status);\n  if (status !== 200 || !text) {\n    return;\n  }\n\n  for (var idx = -1; ; this.bufferPosition += idx + 1) {\n    var buf = text.slice(this.bufferPosition);\n    idx = buf.indexOf('\\n');\n    if (idx === -1) {\n      break;\n    }\n    var msg = buf.slice(0, idx);\n    if (msg) {\n      debug('message', msg);\n      this.emit('message', msg);\n    }\n  }\n};\n\nXhrReceiver.prototype._cleanup = function() {\n  debug('_cleanup');\n  this.removeAllListeners();\n};\n\nXhrReceiver.prototype.abort = function() {\n  debug('abort');\n  if (this.xo) {\n    this.xo.close();\n    debug('close');\n    this.emit('close', null, 'user');\n    this.xo = null;\n  }\n  this._cleanup();\n};\n\nmodule.exports = XhrReceiver;\n\n}).call(this,{ env: {} })\n\n},{\"debug\":55,\"events\":3,\"inherits\":57}],33:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar random = require('../../utils/random')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:jsonp');\n}\n\nvar form, area;\n\nfunction createIframe(id) {\n  debug('createIframe', id);\n  try {\n    // ie6 dynamic iframes with target=\"\" support (thanks Chris Lambacher)\n    return global.document.createElement('<iframe name=\"' + id + '\">');\n  } catch (x) {\n    var iframe = global.document.createElement('iframe');\n    iframe.name = id;\n    return iframe;\n  }\n}\n\nfunction createForm() {\n  debug('createForm');\n  form = global.document.createElement('form');\n  form.style.display = 'none';\n  form.style.position = 'absolute';\n  form.method = 'POST';\n  form.enctype = 'application/x-www-form-urlencoded';\n  form.acceptCharset = 'UTF-8';\n\n  area = global.document.createElement('textarea');\n  area.name = 'd';\n  form.appendChild(area);\n\n  global.document.body.appendChild(form);\n}\n\nmodule.exports = function(url, payload, callback) {\n  debug(url, payload);\n  if (!form) {\n    createForm();\n  }\n  var id = 'a' + random.string(8);\n  form.target = id;\n  form.action = urlUtils.addQuery(urlUtils.addPath(url, '/jsonp_send'), 'i=' + id);\n\n  var iframe = createIframe(id);\n  iframe.id = id;\n  iframe.style.display = 'none';\n  form.appendChild(iframe);\n\n  try {\n    area.value = payload;\n  } catch (e) {\n    // seriously broken browsers get here\n  }\n  form.submit();\n\n  var completed = function(err) {\n    debug('completed', id, err);\n    if (!iframe.onerror) {\n      return;\n    }\n    iframe.onreadystatechange = iframe.onerror = iframe.onload = null;\n    // Opera mini doesn't like if we GC iframe\n    // immediately, thus this timeout.\n    setTimeout(function() {\n      debug('cleaning up', id);\n      iframe.parentNode.removeChild(iframe);\n      iframe = null;\n    }, 500);\n    area.value = '';\n    // It is not possible to detect if the iframe succeeded or\n    // failed to submit our form.\n    callback(err);\n  };\n  iframe.onerror = function() {\n    debug('onerror', id);\n    completed();\n  };\n  iframe.onload = function() {\n    debug('onload', id);\n    completed();\n  };\n  iframe.onreadystatechange = function(e) {\n    debug('onreadystatechange', id, iframe.readyState, e);\n    if (iframe.readyState === 'complete') {\n      completed();\n    }\n  };\n  return function() {\n    debug('aborted', id);\n    completed(new Error('Aborted'));\n  };\n};\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../utils/random\":50,\"../../utils/url\":52,\"debug\":55}],34:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  , eventUtils = require('../../utils/event')\n  , browser = require('../../utils/browser')\n  , urlUtils = require('../../utils/url')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:sender:xdr');\n}\n\n// References:\n//   http://ajaxian.com/archives/100-line-ajax-wrapper\n//   http://msdn.microsoft.com/en-us/library/cc288060(v=VS.85).aspx\n\nfunction XDRObject(method, url, payload) {\n  debug(method, url);\n  var self = this;\n  EventEmitter.call(this);\n\n  setTimeout(function() {\n    self._start(method, url, payload);\n  }, 0);\n}\n\ninherits(XDRObject, EventEmitter);\n\nXDRObject.prototype._start = function(method, url, payload) {\n  debug('_start');\n  var self = this;\n  var xdr = new global.XDomainRequest();\n  // IE caches even POSTs\n  url = urlUtils.addQuery(url, 't=' + (+new Date()));\n\n  xdr.onerror = function() {\n    debug('onerror');\n    self._error();\n  };\n  xdr.ontimeout = function() {\n    debug('ontimeout');\n    self._error();\n  };\n  xdr.onprogress = function() {\n    debug('progress', xdr.responseText);\n    self.emit('chunk', 200, xdr.responseText);\n  };\n  xdr.onload = function() {\n    debug('load');\n    self.emit('finish', 200, xdr.responseText);\n    self._cleanup(false);\n  };\n  this.xdr = xdr;\n  this.unloadRef = eventUtils.unloadAdd(function() {\n    self._cleanup(true);\n  });\n  try {\n    // Fails with AccessDenied if port number is bogus\n    this.xdr.open(method, url);\n    if (this.timeout) {\n      this.xdr.timeout = this.timeout;\n    }\n    this.xdr.send(payload);\n  } catch (x) {\n    this._error();\n  }\n};\n\nXDRObject.prototype._error = function() {\n  this.emit('finish', 0, '');\n  this._cleanup(false);\n};\n\nXDRObject.prototype._cleanup = function(abort) {\n  debug('cleanup', abort);\n  if (!this.xdr) {\n    return;\n  }\n  this.removeAllListeners();\n  eventUtils.unloadDel(this.unloadRef);\n\n  this.xdr.ontimeout = this.xdr.onerror = this.xdr.onprogress = this.xdr.onload = null;\n  if (abort) {\n    try {\n      this.xdr.abort();\n    } catch (x) {\n      // intentionally empty\n    }\n  }\n  this.unloadRef = this.xdr = null;\n};\n\nXDRObject.prototype.close = function() {\n  debug('close');\n  this._cleanup(true);\n};\n\n// IE 8/9 if the request target uses the same scheme - #79\nXDRObject.enabled = !!(global.XDomainRequest && browser.hasDomain());\n\nmodule.exports = XDRObject;\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../../utils/browser\":44,\"../../utils/event\":46,\"../../utils/url\":52,\"debug\":55,\"events\":3,\"inherits\":57}],35:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRCorsObject(method, url, payload, opts) {\n  XhrDriver.call(this, method, url, payload, opts);\n}\n\ninherits(XHRCorsObject, XhrDriver);\n\nXHRCorsObject.enabled = XhrDriver.enabled && XhrDriver.supportsCORS;\n\nmodule.exports = XHRCorsObject;\n\n},{\"../driver/xhr\":17,\"inherits\":57}],36:[function(require,module,exports){\n'use strict';\n\nvar EventEmitter = require('events').EventEmitter\n  , inherits = require('inherits')\n  ;\n\nfunction XHRFake(/* method, url, payload, opts */) {\n  var self = this;\n  EventEmitter.call(this);\n\n  this.to = setTimeout(function() {\n    self.emit('finish', 200, '{}');\n  }, XHRFake.timeout);\n}\n\ninherits(XHRFake, EventEmitter);\n\nXHRFake.prototype.close = function() {\n  clearTimeout(this.to);\n};\n\nXHRFake.timeout = 2000;\n\nmodule.exports = XHRFake;\n\n},{\"events\":3,\"inherits\":57}],37:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , XhrDriver = require('../driver/xhr')\n  ;\n\nfunction XHRLocalObject(method, url, payload /*, opts */) {\n  XhrDriver.call(this, method, url, payload, {\n    noCredentials: true\n  });\n}\n\ninherits(XHRLocalObject, XhrDriver);\n\nXHRLocalObject.enabled = XhrDriver.enabled;\n\nmodule.exports = XHRLocalObject;\n\n},{\"../driver/xhr\":17,\"inherits\":57}],38:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar utils = require('../utils/event')\n  , urlUtils = require('../utils/url')\n  , inherits = require('inherits')\n  , EventEmitter = require('events').EventEmitter\n  , WebsocketDriver = require('./driver/websocket')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:websocket');\n}\n\nfunction WebSocketTransport(transUrl, ignore, options) {\n  if (!WebSocketTransport.enabled()) {\n    throw new Error('Transport created when disabled');\n  }\n\n  EventEmitter.call(this);\n  debug('constructor', transUrl);\n\n  var self = this;\n  var url = urlUtils.addPath(transUrl, '/websocket');\n  if (url.slice(0, 5) === 'https') {\n    url = 'wss' + url.slice(5);\n  } else {\n    url = 'ws' + url.slice(4);\n  }\n  this.url = url;\n\n  this.ws = new WebsocketDriver(this.url, [], options);\n  this.ws.onmessage = function(e) {\n    debug('message event', e.data);\n    self.emit('message', e.data);\n  };\n  // Firefox has an interesting bug. If a websocket connection is\n  // created after onunload, it stays alive even when user\n  // navigates away from the page. In such situation let's lie -\n  // let's not open the ws connection at all. See:\n  // https://github.com/sockjs/sockjs-client/issues/28\n  // https://bugzilla.mozilla.org/show_bug.cgi?id=696085\n  this.unloadRef = utils.unloadAdd(function() {\n    debug('unload');\n    self.ws.close();\n  });\n  this.ws.onclose = function(e) {\n    debug('close event', e.code, e.reason);\n    self.emit('close', e.code, e.reason);\n    self._cleanup();\n  };\n  this.ws.onerror = function(e) {\n    debug('error event', e);\n    self.emit('close', 1006, 'WebSocket connection broken');\n    self._cleanup();\n  };\n}\n\ninherits(WebSocketTransport, EventEmitter);\n\nWebSocketTransport.prototype.send = function(data) {\n  var msg = '[' + data + ']';\n  debug('send', msg);\n  this.ws.send(msg);\n};\n\nWebSocketTransport.prototype.close = function() {\n  debug('close');\n  var ws = this.ws;\n  this._cleanup();\n  if (ws) {\n    ws.close();\n  }\n};\n\nWebSocketTransport.prototype._cleanup = function() {\n  debug('_cleanup');\n  var ws = this.ws;\n  if (ws) {\n    ws.onmessage = ws.onclose = ws.onerror = null;\n  }\n  utils.unloadDel(this.unloadRef);\n  this.unloadRef = this.ws = null;\n  this.removeAllListeners();\n};\n\nWebSocketTransport.enabled = function() {\n  debug('enabled');\n  return !!WebsocketDriver;\n};\nWebSocketTransport.transportName = 'websocket';\n\n// In theory, ws should require 1 round trip. But in chrome, this is\n// not very stable over SSL. Most likely a ws connection requires a\n// separate SSL connection, in which case 2 round trips are an\n// absolute minumum.\nWebSocketTransport.roundTrips = 2;\n\nmodule.exports = WebSocketTransport;\n\n}).call(this,{ env: {} })\n\n},{\"../utils/event\":46,\"../utils/url\":52,\"./driver/websocket\":19,\"debug\":55,\"events\":3,\"inherits\":57}],39:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XdrStreamingTransport = require('./xdr-streaming')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\nfunction XdrPollingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XDRObject);\n}\n\ninherits(XdrPollingTransport, AjaxBasedTransport);\n\nXdrPollingTransport.enabled = XdrStreamingTransport.enabled;\nXdrPollingTransport.transportName = 'xdr-polling';\nXdrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrPollingTransport;\n\n},{\"./lib/ajax-based\":24,\"./receiver/xhr\":32,\"./sender/xdr\":34,\"./xdr-streaming\":40,\"inherits\":57}],40:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XDRObject = require('./sender/xdr')\n  ;\n\n// According to:\n//   http://stackoverflow.com/questions/1641507/detect-browser-support-for-cross-domain-xmlhttprequests\n//   http://hacks.mozilla.org/2009/07/cross-site-xmlhttprequest-with-cors/\n\nfunction XdrStreamingTransport(transUrl) {\n  if (!XDRObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XDRObject);\n}\n\ninherits(XdrStreamingTransport, AjaxBasedTransport);\n\nXdrStreamingTransport.enabled = function(info) {\n  if (info.cookie_needed || info.nullOrigin) {\n    return false;\n  }\n  return XDRObject.enabled && info.sameScheme;\n};\n\nXdrStreamingTransport.transportName = 'xdr-streaming';\nXdrStreamingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XdrStreamingTransport;\n\n},{\"./lib/ajax-based\":24,\"./receiver/xhr\":32,\"./sender/xdr\":34,\"inherits\":57}],41:[function(require,module,exports){\n'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  ;\n\nfunction XhrPollingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrPollingTransport, AjaxBasedTransport);\n\nXhrPollingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n\n  if (XHRLocalObject.enabled && info.sameOrigin) {\n    return true;\n  }\n  return XHRCorsObject.enabled;\n};\n\nXhrPollingTransport.transportName = 'xhr-polling';\nXhrPollingTransport.roundTrips = 2; // preflight, ajax\n\nmodule.exports = XhrPollingTransport;\n\n},{\"./lib/ajax-based\":24,\"./receiver/xhr\":32,\"./sender/xhr-cors\":35,\"./sender/xhr-local\":37,\"inherits\":57}],42:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar inherits = require('inherits')\n  , AjaxBasedTransport = require('./lib/ajax-based')\n  , XhrReceiver = require('./receiver/xhr')\n  , XHRCorsObject = require('./sender/xhr-cors')\n  , XHRLocalObject = require('./sender/xhr-local')\n  , browser = require('../utils/browser')\n  ;\n\nfunction XhrStreamingTransport(transUrl) {\n  if (!XHRLocalObject.enabled && !XHRCorsObject.enabled) {\n    throw new Error('Transport created when disabled');\n  }\n  AjaxBasedTransport.call(this, transUrl, '/xhr_streaming', XhrReceiver, XHRCorsObject);\n}\n\ninherits(XhrStreamingTransport, AjaxBasedTransport);\n\nXhrStreamingTransport.enabled = function(info) {\n  if (info.nullOrigin) {\n    return false;\n  }\n  // Opera doesn't support xhr-streaming #60\n  // But it might be able to #92\n  if (browser.isOpera()) {\n    return false;\n  }\n\n  return XHRCorsObject.enabled;\n};\n\nXhrStreamingTransport.transportName = 'xhr-streaming';\nXhrStreamingTransport.roundTrips = 2; // preflight, ajax\n\n// Safari gets confused when a streaming ajax request is started\n// before onload. This causes the load indicator to spin indefinetely.\n// Only require body when used in a browser\nXhrStreamingTransport.needBody = !!global.document;\n\nmodule.exports = XhrStreamingTransport;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"../utils/browser\":44,\"./lib/ajax-based\":24,\"./receiver/xhr\":32,\"./sender/xhr-cors\":35,\"./sender/xhr-local\":37,\"inherits\":57}],43:[function(require,module,exports){\n(function (global){\n'use strict';\n\nif (global.crypto && global.crypto.getRandomValues) {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Uint8Array(length);\n    global.crypto.getRandomValues(bytes);\n    return bytes;\n  };\n} else {\n  module.exports.randomBytes = function(length) {\n    var bytes = new Array(length);\n    for (var i = 0; i < length; i++) {\n      bytes[i] = Math.floor(Math.random() * 256);\n    }\n    return bytes;\n  };\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],44:[function(require,module,exports){\n(function (global){\n'use strict';\n\nmodule.exports = {\n  isOpera: function() {\n    return global.navigator &&\n      /opera/i.test(global.navigator.userAgent);\n  }\n\n, isKonqueror: function() {\n    return global.navigator &&\n      /konqueror/i.test(global.navigator.userAgent);\n  }\n\n  // #187 wrap document.domain in try/catch because of WP8 from file:///\n, hasDomain: function () {\n    // non-browser client always has a domain\n    if (!global.document) {\n      return true;\n    }\n\n    try {\n      return !!global.document.domain;\n    } catch (e) {\n      return false;\n    }\n  }\n};\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],45:[function(require,module,exports){\n'use strict';\n\nvar JSON3 = require('json3');\n\n// Some extra characters that Chrome gets wrong, and substitutes with\n// something else on the wire.\n// eslint-disable-next-line no-control-regex, no-misleading-character-class\nvar extraEscapable = /[\\x00-\\x1f\\ud800-\\udfff\\ufffe\\uffff\\u0300-\\u0333\\u033d-\\u0346\\u034a-\\u034c\\u0350-\\u0352\\u0357-\\u0358\\u035c-\\u0362\\u0374\\u037e\\u0387\\u0591-\\u05af\\u05c4\\u0610-\\u0617\\u0653-\\u0654\\u0657-\\u065b\\u065d-\\u065e\\u06df-\\u06e2\\u06eb-\\u06ec\\u0730\\u0732-\\u0733\\u0735-\\u0736\\u073a\\u073d\\u073f-\\u0741\\u0743\\u0745\\u0747\\u07eb-\\u07f1\\u0951\\u0958-\\u095f\\u09dc-\\u09dd\\u09df\\u0a33\\u0a36\\u0a59-\\u0a5b\\u0a5e\\u0b5c-\\u0b5d\\u0e38-\\u0e39\\u0f43\\u0f4d\\u0f52\\u0f57\\u0f5c\\u0f69\\u0f72-\\u0f76\\u0f78\\u0f80-\\u0f83\\u0f93\\u0f9d\\u0fa2\\u0fa7\\u0fac\\u0fb9\\u1939-\\u193a\\u1a17\\u1b6b\\u1cda-\\u1cdb\\u1dc0-\\u1dcf\\u1dfc\\u1dfe\\u1f71\\u1f73\\u1f75\\u1f77\\u1f79\\u1f7b\\u1f7d\\u1fbb\\u1fbe\\u1fc9\\u1fcb\\u1fd3\\u1fdb\\u1fe3\\u1feb\\u1fee-\\u1fef\\u1ff9\\u1ffb\\u1ffd\\u2000-\\u2001\\u20d0-\\u20d1\\u20d4-\\u20d7\\u20e7-\\u20e9\\u2126\\u212a-\\u212b\\u2329-\\u232a\\u2adc\\u302b-\\u302c\\uaab2-\\uaab3\\uf900-\\ufa0d\\ufa10\\ufa12\\ufa15-\\ufa1e\\ufa20\\ufa22\\ufa25-\\ufa26\\ufa2a-\\ufa2d\\ufa30-\\ufa6d\\ufa70-\\ufad9\\ufb1d\\ufb1f\\ufb2a-\\ufb36\\ufb38-\\ufb3c\\ufb3e\\ufb40-\\ufb41\\ufb43-\\ufb44\\ufb46-\\ufb4e\\ufff0-\\uffff]/g\n  , extraLookup;\n\n// This may be quite slow, so let's delay until user actually uses bad\n// characters.\nvar unrollLookup = function(escapable) {\n  var i;\n  var unrolled = {};\n  var c = [];\n  for (i = 0; i < 65536; i++) {\n    c.push( String.fromCharCode(i) );\n  }\n  escapable.lastIndex = 0;\n  c.join('').replace(escapable, function(a) {\n    unrolled[ a ] = '\\\\u' + ('0000' + a.charCodeAt(0).toString(16)).slice(-4);\n    return '';\n  });\n  escapable.lastIndex = 0;\n  return unrolled;\n};\n\n// Quote string, also taking care of unicode characters that browsers\n// often break. Especially, take care of unicode surrogates:\n// http://en.wikipedia.org/wiki/Mapping_of_Unicode_characters#Surrogates\nmodule.exports = {\n  quote: function(string) {\n    var quoted = JSON3.stringify(string);\n\n    // In most cases this should be very fast and good enough.\n    extraEscapable.lastIndex = 0;\n    if (!extraEscapable.test(quoted)) {\n      return quoted;\n    }\n\n    if (!extraLookup) {\n      extraLookup = unrollLookup(extraEscapable);\n    }\n\n    return quoted.replace(extraEscapable, function(a) {\n      return extraLookup[a];\n    });\n  }\n};\n\n},{\"json3\":58}],46:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar random = require('./random');\n\nvar onUnload = {}\n  , afterUnload = false\n    // detect google chrome packaged apps because they don't allow the 'unload' event\n  , isChromePackagedApp = global.chrome && global.chrome.app && global.chrome.app.runtime\n  ;\n\nmodule.exports = {\n  attachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.addEventListener(event, listener, false);\n    } else if (global.document && global.attachEvent) {\n      // IE quirks.\n      // According to: http://stevesouders.com/misc/test-postmessage.php\n      // the message gets delivered only to 'document', not 'window'.\n      global.document.attachEvent('on' + event, listener);\n      // I get 'window' for ie8.\n      global.attachEvent('on' + event, listener);\n    }\n  }\n\n, detachEvent: function(event, listener) {\n    if (typeof global.addEventListener !== 'undefined') {\n      global.removeEventListener(event, listener, false);\n    } else if (global.document && global.detachEvent) {\n      global.document.detachEvent('on' + event, listener);\n      global.detachEvent('on' + event, listener);\n    }\n  }\n\n, unloadAdd: function(listener) {\n    if (isChromePackagedApp) {\n      return null;\n    }\n\n    var ref = random.string(8);\n    onUnload[ref] = listener;\n    if (afterUnload) {\n      setTimeout(this.triggerUnloadCallbacks, 0);\n    }\n    return ref;\n  }\n\n, unloadDel: function(ref) {\n    if (ref in onUnload) {\n      delete onUnload[ref];\n    }\n  }\n\n, triggerUnloadCallbacks: function() {\n    for (var ref in onUnload) {\n      onUnload[ref]();\n      delete onUnload[ref];\n    }\n  }\n};\n\nvar unloadTriggered = function() {\n  if (afterUnload) {\n    return;\n  }\n  afterUnload = true;\n  module.exports.triggerUnloadCallbacks();\n};\n\n// 'unload' alone is not reliable in opera within an iframe, but we\n// can't use `beforeunload` as IE fires it on javascript: links.\nif (!isChromePackagedApp) {\n  module.exports.attachEvent('unload', unloadTriggered);\n}\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./random\":50}],47:[function(require,module,exports){\n(function (process,global){\n'use strict';\n\nvar eventUtils = require('./event')\n  , JSON3 = require('json3')\n  , browser = require('./browser')\n  ;\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:iframe');\n}\n\nmodule.exports = {\n  WPrefix: '_jp'\n, currentWindowId: null\n\n, polluteGlobalNamespace: function() {\n    if (!(module.exports.WPrefix in global)) {\n      global[module.exports.WPrefix] = {};\n    }\n  }\n\n, postMessage: function(type, data) {\n    if (global.parent !== global) {\n      global.parent.postMessage(JSON3.stringify({\n        windowId: module.exports.currentWindowId\n      , type: type\n      , data: data || ''\n      }), '*');\n    } else {\n      debug('Cannot postMessage, no parent window.', type, data);\n    }\n  }\n\n, createIframe: function(iframeUrl, errorCallback) {\n    var iframe = global.document.createElement('iframe');\n    var tref, unloadRef;\n    var unattach = function() {\n      debug('unattach');\n      clearTimeout(tref);\n      // Explorer had problems with that.\n      try {\n        iframe.onload = null;\n      } catch (x) {\n        // intentionally empty\n      }\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      debug('cleanup');\n      if (iframe) {\n        unattach();\n        // This timeout makes chrome fire onbeforeunload event\n        // within iframe. Without the timeout it goes straight to\n        // onunload.\n        setTimeout(function() {\n          if (iframe) {\n            iframe.parentNode.removeChild(iframe);\n          }\n          iframe = null;\n        }, 0);\n        eventUtils.unloadDel(unloadRef);\n      }\n    };\n    var onerror = function(err) {\n      debug('onerror', err);\n      if (iframe) {\n        cleanup();\n        errorCallback(err);\n      }\n    };\n    var post = function(msg, origin) {\n      debug('post', msg, origin);\n      setTimeout(function() {\n        try {\n          // When the iframe is not loaded, IE raises an exception\n          // on 'contentWindow'.\n          if (iframe && iframe.contentWindow) {\n            iframe.contentWindow.postMessage(msg, origin);\n          }\n        } catch (x) {\n          // intentionally empty\n        }\n      }, 0);\n    };\n\n    iframe.src = iframeUrl;\n    iframe.style.display = 'none';\n    iframe.style.position = 'absolute';\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    iframe.onload = function() {\n      debug('onload');\n      // `onload` is triggered before scripts on the iframe are\n      // executed. Give it few seconds to actually load stuff.\n      clearTimeout(tref);\n      tref = setTimeout(function() {\n        onerror('onload timeout');\n      }, 2000);\n    };\n    global.document.body.appendChild(iframe);\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n\n/* eslint no-undef: \"off\", new-cap: \"off\" */\n, createHtmlfile: function(iframeUrl, errorCallback) {\n    var axo = ['Active'].concat('Object').join('X');\n    var doc = new global[axo]('htmlfile');\n    var tref, unloadRef;\n    var iframe;\n    var unattach = function() {\n      clearTimeout(tref);\n      iframe.onerror = null;\n    };\n    var cleanup = function() {\n      if (doc) {\n        unattach();\n        eventUtils.unloadDel(unloadRef);\n        iframe.parentNode.removeChild(iframe);\n        iframe = doc = null;\n        CollectGarbage();\n      }\n    };\n    var onerror = function(r) {\n      debug('onerror', r);\n      if (doc) {\n        cleanup();\n        errorCallback(r);\n      }\n    };\n    var post = function(msg, origin) {\n      try {\n        // When the iframe is not loaded, IE raises an exception\n        // on 'contentWindow'.\n        setTimeout(function() {\n          if (iframe && iframe.contentWindow) {\n              iframe.contentWindow.postMessage(msg, origin);\n          }\n        }, 0);\n      } catch (x) {\n        // intentionally empty\n      }\n    };\n\n    doc.open();\n    doc.write('<html><s' + 'cript>' +\n              'document.domain=\"' + global.document.domain + '\";' +\n              '</s' + 'cript></html>');\n    doc.close();\n    doc.parentWindow[module.exports.WPrefix] = global[module.exports.WPrefix];\n    var c = doc.createElement('div');\n    doc.body.appendChild(c);\n    iframe = doc.createElement('iframe');\n    c.appendChild(iframe);\n    iframe.src = iframeUrl;\n    iframe.onerror = function() {\n      onerror('onerror');\n    };\n    tref = setTimeout(function() {\n      onerror('timeout');\n    }, 15000);\n    unloadRef = eventUtils.unloadAdd(cleanup);\n    return {\n      post: post\n    , cleanup: cleanup\n    , loaded: unattach\n    };\n  }\n};\n\nmodule.exports.iframeEnabled = false;\nif (global.document) {\n  // postMessage misbehaves in konqueror 4.6.5 - the messages are delivered with\n  // huge delay, or not at all.\n  module.exports.iframeEnabled = (typeof global.postMessage === 'function' ||\n    typeof global.postMessage === 'object') && (!browser.isKonqueror());\n}\n\n}).call(this,{ env: {} },typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"./browser\":44,\"./event\":46,\"debug\":55,\"json3\":58}],48:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar logObject = {};\n['log', 'debug', 'warn'].forEach(function (level) {\n  var levelExists;\n\n  try {\n    levelExists = global.console && global.console[level] && global.console[level].apply;\n  } catch(e) {\n    // do nothing\n  }\n\n  logObject[level] = levelExists ? function () {\n    return global.console[level].apply(global.console, arguments);\n  } : (level === 'log' ? function () {} : logObject.log);\n});\n\nmodule.exports = logObject;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],49:[function(require,module,exports){\n'use strict';\n\nmodule.exports = {\n  isObject: function(obj) {\n    var type = typeof obj;\n    return type === 'function' || type === 'object' && !!obj;\n  }\n\n, extend: function(obj) {\n    if (!this.isObject(obj)) {\n      return obj;\n    }\n    var source, prop;\n    for (var i = 1, length = arguments.length; i < length; i++) {\n      source = arguments[i];\n      for (prop in source) {\n        if (Object.prototype.hasOwnProperty.call(source, prop)) {\n          obj[prop] = source[prop];\n        }\n      }\n    }\n    return obj;\n  }\n};\n\n},{}],50:[function(require,module,exports){\n'use strict';\n\nvar crypto = require('crypto');\n\n// This string has length 32, a power of 2, so the modulus doesn't introduce a\n// bias.\nvar _randomStringChars = 'abcdefghijklmnopqrstuvwxyz012345';\nmodule.exports = {\n  string: function(length) {\n    var max = _randomStringChars.length;\n    var bytes = crypto.randomBytes(length);\n    var ret = [];\n    for (var i = 0; i < length; i++) {\n      ret.push(_randomStringChars.substr(bytes[i] % max, 1));\n    }\n    return ret.join('');\n  }\n\n, number: function(max) {\n    return Math.floor(Math.random() * max);\n  }\n\n, numberString: function(max) {\n    var t = ('' + (max - 1)).length;\n    var p = new Array(t + 1).join('0');\n    return (p + this.number(max)).slice(-t);\n  }\n};\n\n},{\"crypto\":43}],51:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:transport');\n}\n\nmodule.exports = function(availableTransports) {\n  return {\n    filterToEnabled: function(transportsWhitelist, info) {\n      var transports = {\n        main: []\n      , facade: []\n      };\n      if (!transportsWhitelist) {\n        transportsWhitelist = [];\n      } else if (typeof transportsWhitelist === 'string') {\n        transportsWhitelist = [transportsWhitelist];\n      }\n\n      availableTransports.forEach(function(trans) {\n        if (!trans) {\n          return;\n        }\n\n        if (trans.transportName === 'websocket' && info.websocket === false) {\n          debug('disabled from server', 'websocket');\n          return;\n        }\n\n        if (transportsWhitelist.length &&\n            transportsWhitelist.indexOf(trans.transportName) === -1) {\n          debug('not in whitelist', trans.transportName);\n          return;\n        }\n\n        if (trans.enabled(info)) {\n          debug('enabled', trans.transportName);\n          transports.main.push(trans);\n          if (trans.facadeTransport) {\n            transports.facade.push(trans.facadeTransport);\n          }\n        } else {\n          debug('disabled', trans.transportName);\n        }\n      });\n      return transports;\n    }\n  };\n};\n\n}).call(this,{ env: {} })\n\n},{\"debug\":55}],52:[function(require,module,exports){\n(function (process){\n'use strict';\n\nvar URL = require('url-parse');\n\nvar debug = function() {};\nif (process.env.NODE_ENV !== 'production') {\n  debug = require('debug')('sockjs-client:utils:url');\n}\n\nmodule.exports = {\n  getOrigin: function(url) {\n    if (!url) {\n      return null;\n    }\n\n    var p = new URL(url);\n    if (p.protocol === 'file:') {\n      return null;\n    }\n\n    var port = p.port;\n    if (!port) {\n      port = (p.protocol === 'https:') ? '443' : '80';\n    }\n\n    return p.protocol + '//' + p.hostname + ':' + port;\n  }\n\n, isOriginEqual: function(a, b) {\n    var res = this.getOrigin(a) === this.getOrigin(b);\n    debug('same', a, b, res);\n    return res;\n  }\n\n, isSchemeEqual: function(a, b) {\n    return (a.split(':')[0] === b.split(':')[0]);\n  }\n\n, addPath: function (url, path) {\n    var qs = url.split('?');\n    return qs[0] + path + (qs[1] ? '?' + qs[1] : '');\n  }\n\n, addQuery: function (url, q) {\n    return url + (url.indexOf('?') === -1 ? ('?' + q) : ('&' + q));\n  }\n\n, isLoopbackAddr: function (addr) {\n    return /^127\\.([0-9]{1,3})\\.([0-9]{1,3})\\.([0-9]{1,3})$/i.test(addr) || /^\\[::1\\]$/.test(addr);\n  }\n};\n\n}).call(this,{ env: {} })\n\n},{\"debug\":55,\"url-parse\":61}],53:[function(require,module,exports){\nmodule.exports = '1.5.2';\n\n},{}],54:[function(require,module,exports){\n/**\n * Helpers.\n */\n\nvar s = 1000;\nvar m = s * 60;\nvar h = m * 60;\nvar d = h * 24;\nvar w = d * 7;\nvar y = d * 365.25;\n\n/**\n * Parse or format the given `val`.\n *\n * Options:\n *\n *  - `long` verbose formatting [false]\n *\n * @param {String|Number} val\n * @param {Object} [options]\n * @throws {Error} throw an error if val is not a non-empty string or a number\n * @return {String|Number}\n * @api public\n */\n\nmodule.exports = function(val, options) {\n  options = options || {};\n  var type = typeof val;\n  if (type === 'string' && val.length > 0) {\n    return parse(val);\n  } else if (type === 'number' && isFinite(val)) {\n    return options.long ? fmtLong(val) : fmtShort(val);\n  }\n  throw new Error(\n    'val is not a non-empty string or a valid number. val=' +\n      JSON.stringify(val)\n  );\n};\n\n/**\n * Parse the given `str` and return milliseconds.\n *\n * @param {String} str\n * @return {Number}\n * @api private\n */\n\nfunction parse(str) {\n  str = String(str);\n  if (str.length > 100) {\n    return;\n  }\n  var match = /^(-?(?:\\d+)?\\.?\\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(\n    str\n  );\n  if (!match) {\n    return;\n  }\n  var n = parseFloat(match[1]);\n  var type = (match[2] || 'ms').toLowerCase();\n  switch (type) {\n    case 'years':\n    case 'year':\n    case 'yrs':\n    case 'yr':\n    case 'y':\n      return n * y;\n    case 'weeks':\n    case 'week':\n    case 'w':\n      return n * w;\n    case 'days':\n    case 'day':\n    case 'd':\n      return n * d;\n    case 'hours':\n    case 'hour':\n    case 'hrs':\n    case 'hr':\n    case 'h':\n      return n * h;\n    case 'minutes':\n    case 'minute':\n    case 'mins':\n    case 'min':\n    case 'm':\n      return n * m;\n    case 'seconds':\n    case 'second':\n    case 'secs':\n    case 'sec':\n    case 's':\n      return n * s;\n    case 'milliseconds':\n    case 'millisecond':\n    case 'msecs':\n    case 'msec':\n    case 'ms':\n      return n;\n    default:\n      return undefined;\n  }\n}\n\n/**\n * Short format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtShort(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return Math.round(ms / d) + 'd';\n  }\n  if (msAbs >= h) {\n    return Math.round(ms / h) + 'h';\n  }\n  if (msAbs >= m) {\n    return Math.round(ms / m) + 'm';\n  }\n  if (msAbs >= s) {\n    return Math.round(ms / s) + 's';\n  }\n  return ms + 'ms';\n}\n\n/**\n * Long format for `ms`.\n *\n * @param {Number} ms\n * @return {String}\n * @api private\n */\n\nfunction fmtLong(ms) {\n  var msAbs = Math.abs(ms);\n  if (msAbs >= d) {\n    return plural(ms, msAbs, d, 'day');\n  }\n  if (msAbs >= h) {\n    return plural(ms, msAbs, h, 'hour');\n  }\n  if (msAbs >= m) {\n    return plural(ms, msAbs, m, 'minute');\n  }\n  if (msAbs >= s) {\n    return plural(ms, msAbs, s, 'second');\n  }\n  return ms + ' ms';\n}\n\n/**\n * Pluralization helper.\n */\n\nfunction plural(ms, msAbs, n, name) {\n  var isPlural = msAbs >= n * 1.5;\n  return Math.round(ms / n) + ' ' + name + (isPlural ? 's' : '');\n}\n\n},{}],55:[function(require,module,exports){\n(function (process){\n\"use strict\";\n\nfunction _typeof(obj) { if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\n/* eslint-env browser */\n\n/**\n * This is the web browser implementation of `debug()`.\n */\nexports.log = log;\nexports.formatArgs = formatArgs;\nexports.save = save;\nexports.load = load;\nexports.useColors = useColors;\nexports.storage = localstorage();\n/**\n * Colors.\n */\n\nexports.colors = ['#0000CC', '#0000FF', '#0033CC', '#0033FF', '#0066CC', '#0066FF', '#0099CC', '#0099FF', '#00CC00', '#00CC33', '#00CC66', '#00CC99', '#00CCCC', '#00CCFF', '#3300CC', '#3300FF', '#3333CC', '#3333FF', '#3366CC', '#3366FF', '#3399CC', '#3399FF', '#33CC00', '#33CC33', '#33CC66', '#33CC99', '#33CCCC', '#33CCFF', '#6600CC', '#6600FF', '#6633CC', '#6633FF', '#66CC00', '#66CC33', '#9900CC', '#9900FF', '#9933CC', '#9933FF', '#99CC00', '#99CC33', '#CC0000', '#CC0033', '#CC0066', '#CC0099', '#CC00CC', '#CC00FF', '#CC3300', '#CC3333', '#CC3366', '#CC3399', '#CC33CC', '#CC33FF', '#CC6600', '#CC6633', '#CC9900', '#CC9933', '#CCCC00', '#CCCC33', '#FF0000', '#FF0033', '#FF0066', '#FF0099', '#FF00CC', '#FF00FF', '#FF3300', '#FF3333', '#FF3366', '#FF3399', '#FF33CC', '#FF33FF', '#FF6600', '#FF6633', '#FF9900', '#FF9933', '#FFCC00', '#FFCC33'];\n/**\n * Currently only WebKit-based Web Inspectors, Firefox >= v31,\n * and the Firebug extension (any Firefox version) are known\n * to support \"%c\" CSS customizations.\n *\n * TODO: add a `localStorage` variable to explicitly enable/disable colors\n */\n// eslint-disable-next-line complexity\n\nfunction useColors() {\n  // NB: In an Electron preload script, document will be defined but not fully\n  // initialized. Since we know we're in Chrome, we'll just detect this case\n  // explicitly\n  if (typeof window !== 'undefined' && window.process && (window.process.type === 'renderer' || window.process.__nwjs)) {\n    return true;\n  } // Internet Explorer and Edge do not support colors.\n\n\n  if (typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/(edge|trident)\\/(\\d+)/)) {\n    return false;\n  } // Is webkit? http://stackoverflow.com/a/16459606/376773\n  // document is undefined in react-native: https://github.com/facebook/react-native/pull/1632\n\n\n  return typeof document !== 'undefined' && document.documentElement && document.documentElement.style && document.documentElement.style.WebkitAppearance || // Is firebug? http://stackoverflow.com/a/398120/376773\n  typeof window !== 'undefined' && window.console && (window.console.firebug || window.console.exception && window.console.table) || // Is firefox >= v31?\n  // https://developer.mozilla.org/en-US/docs/Tools/Web_Console#Styling_messages\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/firefox\\/(\\d+)/) && parseInt(RegExp.$1, 10) >= 31 || // Double check webkit in userAgent just in case we are in a worker\n  typeof navigator !== 'undefined' && navigator.userAgent && navigator.userAgent.toLowerCase().match(/applewebkit\\/(\\d+)/);\n}\n/**\n * Colorize log arguments if enabled.\n *\n * @api public\n */\n\n\nfunction formatArgs(args) {\n  args[0] = (this.useColors ? '%c' : '') + this.namespace + (this.useColors ? ' %c' : ' ') + args[0] + (this.useColors ? '%c ' : ' ') + '+' + module.exports.humanize(this.diff);\n\n  if (!this.useColors) {\n    return;\n  }\n\n  var c = 'color: ' + this.color;\n  args.splice(1, 0, c, 'color: inherit'); // The final \"%c\" is somewhat tricky, because there could be other\n  // arguments passed either before or after the %c, so we need to\n  // figure out the correct index to insert the CSS into\n\n  var index = 0;\n  var lastC = 0;\n  args[0].replace(/%[a-zA-Z%]/g, function (match) {\n    if (match === '%%') {\n      return;\n    }\n\n    index++;\n\n    if (match === '%c') {\n      // We only are interested in the *last* %c\n      // (the user may have provided their own)\n      lastC = index;\n    }\n  });\n  args.splice(lastC, 0, c);\n}\n/**\n * Invokes `console.log()` when available.\n * No-op when `console.log` is not a \"function\".\n *\n * @api public\n */\n\n\nfunction log() {\n  var _console;\n\n  // This hackery is required for IE8/9, where\n  // the `console.log` function doesn't have 'apply'\n  return (typeof console === \"undefined\" ? \"undefined\" : _typeof(console)) === 'object' && console.log && (_console = console).log.apply(_console, arguments);\n}\n/**\n * Save `namespaces`.\n *\n * @param {String} namespaces\n * @api private\n */\n\n\nfunction save(namespaces) {\n  try {\n    if (namespaces) {\n      exports.storage.setItem('debug', namespaces);\n    } else {\n      exports.storage.removeItem('debug');\n    }\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n/**\n * Load `namespaces`.\n *\n * @return {String} returns the previously persisted debug modes\n * @api private\n */\n\n\nfunction load() {\n  var r;\n\n  try {\n    r = exports.storage.getItem('debug');\n  } catch (error) {} // Swallow\n  // XXX (@Qix-) should we be logging these?\n  // If debug isn't set in LS, and we're in Electron, try to load $DEBUG\n\n\n  if (!r && typeof process !== 'undefined' && 'env' in process) {\n    r = process.env.DEBUG;\n  }\n\n  return r;\n}\n/**\n * Localstorage attempts to return the localstorage.\n *\n * This is necessary because safari throws\n * when a user disables cookies/localstorage\n * and you attempt to access it.\n *\n * @return {LocalStorage}\n * @api private\n */\n\n\nfunction localstorage() {\n  try {\n    // TVMLKit (Apple TV JS Runtime) does not have a window object, just localStorage in the global context\n    // The Browser also has localStorage in the global context.\n    return localStorage;\n  } catch (error) {// Swallow\n    // XXX (@Qix-) should we be logging these?\n  }\n}\n\nmodule.exports = require('./common')(exports);\nvar formatters = module.exports.formatters;\n/**\n * Map %j to `JSON.stringify()`, since no Web Inspectors do that by default.\n */\n\nformatters.j = function (v) {\n  try {\n    return JSON.stringify(v);\n  } catch (error) {\n    return '[UnexpectedJSONParseError]: ' + error.message;\n  }\n};\n\n\n}).call(this,{ env: {} })\n\n},{\"./common\":56}],56:[function(require,module,exports){\n\"use strict\";\n\n/**\n * This is the common logic for both the Node.js and web browser\n * implementations of `debug()`.\n */\nfunction setup(env) {\n  createDebug.debug = createDebug;\n  createDebug.default = createDebug;\n  createDebug.coerce = coerce;\n  createDebug.disable = disable;\n  createDebug.enable = enable;\n  createDebug.enabled = enabled;\n  createDebug.humanize = require('ms');\n  Object.keys(env).forEach(function (key) {\n    createDebug[key] = env[key];\n  });\n  /**\n  * Active `debug` instances.\n  */\n\n  createDebug.instances = [];\n  /**\n  * The currently active debug mode names, and names to skip.\n  */\n\n  createDebug.names = [];\n  createDebug.skips = [];\n  /**\n  * Map of special \"%n\" handling functions, for the debug \"format\" argument.\n  *\n  * Valid key names are a single, lower or upper-case letter, i.e. \"n\" and \"N\".\n  */\n\n  createDebug.formatters = {};\n  /**\n  * Selects a color for a debug namespace\n  * @param {String} namespace The namespace string for the for the debug instance to be colored\n  * @return {Number|String} An ANSI color code for the given namespace\n  * @api private\n  */\n\n  function selectColor(namespace) {\n    var hash = 0;\n\n    for (var i = 0; i < namespace.length; i++) {\n      hash = (hash << 5) - hash + namespace.charCodeAt(i);\n      hash |= 0; // Convert to 32bit integer\n    }\n\n    return createDebug.colors[Math.abs(hash) % createDebug.colors.length];\n  }\n\n  createDebug.selectColor = selectColor;\n  /**\n  * Create a debugger with the given `namespace`.\n  *\n  * @param {String} namespace\n  * @return {Function}\n  * @api public\n  */\n\n  function createDebug(namespace) {\n    var prevTime;\n\n    function debug() {\n      // Disabled?\n      if (!debug.enabled) {\n        return;\n      }\n\n      for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n        args[_key] = arguments[_key];\n      }\n\n      var self = debug; // Set `diff` timestamp\n\n      var curr = Number(new Date());\n      var ms = curr - (prevTime || curr);\n      self.diff = ms;\n      self.prev = prevTime;\n      self.curr = curr;\n      prevTime = curr;\n      args[0] = createDebug.coerce(args[0]);\n\n      if (typeof args[0] !== 'string') {\n        // Anything else let's inspect with %O\n        args.unshift('%O');\n      } // Apply any `formatters` transformations\n\n\n      var index = 0;\n      args[0] = args[0].replace(/%([a-zA-Z%])/g, function (match, format) {\n        // If we encounter an escaped % then don't increase the array index\n        if (match === '%%') {\n          return match;\n        }\n\n        index++;\n        var formatter = createDebug.formatters[format];\n\n        if (typeof formatter === 'function') {\n          var val = args[index];\n          match = formatter.call(self, val); // Now we need to remove `args[index]` since it's inlined in the `format`\n\n          args.splice(index, 1);\n          index--;\n        }\n\n        return match;\n      }); // Apply env-specific formatting (colors, etc.)\n\n      createDebug.formatArgs.call(self, args);\n      var logFn = self.log || createDebug.log;\n      logFn.apply(self, args);\n    }\n\n    debug.namespace = namespace;\n    debug.enabled = createDebug.enabled(namespace);\n    debug.useColors = createDebug.useColors();\n    debug.color = selectColor(namespace);\n    debug.destroy = destroy;\n    debug.extend = extend; // Debug.formatArgs = formatArgs;\n    // debug.rawLog = rawLog;\n    // env-specific initialization logic for debug instances\n\n    if (typeof createDebug.init === 'function') {\n      createDebug.init(debug);\n    }\n\n    createDebug.instances.push(debug);\n    return debug;\n  }\n\n  function destroy() {\n    var index = createDebug.instances.indexOf(this);\n\n    if (index !== -1) {\n      createDebug.instances.splice(index, 1);\n      return true;\n    }\n\n    return false;\n  }\n\n  function extend(namespace, delimiter) {\n    return createDebug(this.namespace + (typeof delimiter === 'undefined' ? ':' : delimiter) + namespace);\n  }\n  /**\n  * Enables a debug mode by namespaces. This can include modes\n  * separated by a colon and wildcards.\n  *\n  * @param {String} namespaces\n  * @api public\n  */\n\n\n  function enable(namespaces) {\n    createDebug.save(namespaces);\n    createDebug.names = [];\n    createDebug.skips = [];\n    var i;\n    var split = (typeof namespaces === 'string' ? namespaces : '').split(/[\\s,]+/);\n    var len = split.length;\n\n    for (i = 0; i < len; i++) {\n      if (!split[i]) {\n        // ignore empty strings\n        continue;\n      }\n\n      namespaces = split[i].replace(/\\*/g, '.*?');\n\n      if (namespaces[0] === '-') {\n        createDebug.skips.push(new RegExp('^' + namespaces.substr(1) + '$'));\n      } else {\n        createDebug.names.push(new RegExp('^' + namespaces + '$'));\n      }\n    }\n\n    for (i = 0; i < createDebug.instances.length; i++) {\n      var instance = createDebug.instances[i];\n      instance.enabled = createDebug.enabled(instance.namespace);\n    }\n  }\n  /**\n  * Disable debug output.\n  *\n  * @api public\n  */\n\n\n  function disable() {\n    createDebug.enable('');\n  }\n  /**\n  * Returns true if the given mode name is enabled, false otherwise.\n  *\n  * @param {String} name\n  * @return {Boolean}\n  * @api public\n  */\n\n\n  function enabled(name) {\n    if (name[name.length - 1] === '*') {\n      return true;\n    }\n\n    var i;\n    var len;\n\n    for (i = 0, len = createDebug.skips.length; i < len; i++) {\n      if (createDebug.skips[i].test(name)) {\n        return false;\n      }\n    }\n\n    for (i = 0, len = createDebug.names.length; i < len; i++) {\n      if (createDebug.names[i].test(name)) {\n        return true;\n      }\n    }\n\n    return false;\n  }\n  /**\n  * Coerce `val`.\n  *\n  * @param {Mixed} val\n  * @return {Mixed}\n  * @api private\n  */\n\n\n  function coerce(val) {\n    if (val instanceof Error) {\n      return val.stack || val.message;\n    }\n\n    return val;\n  }\n\n  createDebug.enable(createDebug.load());\n  return createDebug;\n}\n\nmodule.exports = setup;\n\n\n},{\"ms\":54}],57:[function(require,module,exports){\nif (typeof Object.create === 'function') {\n  // implementation from standard node.js 'util' module\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      ctor.prototype = Object.create(superCtor.prototype, {\n        constructor: {\n          value: ctor,\n          enumerable: false,\n          writable: true,\n          configurable: true\n        }\n      })\n    }\n  };\n} else {\n  // old school shim for old browsers\n  module.exports = function inherits(ctor, superCtor) {\n    if (superCtor) {\n      ctor.super_ = superCtor\n      var TempCtor = function () {}\n      TempCtor.prototype = superCtor.prototype\n      ctor.prototype = new TempCtor()\n      ctor.prototype.constructor = ctor\n    }\n  }\n}\n\n},{}],58:[function(require,module,exports){\n(function (global){\n/*! JSON v3.3.2 | https://bestiejs.github.io/json3 | Copyright 2012-2015, Kit Cambridge, Benjamin Tan | http://kit.mit-license.org */\n;(function () {\n  // Detect the `define` function exposed by asynchronous module loaders. The\n  // strict `define` check is necessary for compatibility with `r.js`.\n  var isLoader = typeof define === \"function\" && define.amd;\n\n  // A set of types used to distinguish objects from primitives.\n  var objectTypes = {\n    \"function\": true,\n    \"object\": true\n  };\n\n  // Detect the `exports` object exposed by CommonJS implementations.\n  var freeExports = objectTypes[typeof exports] && exports && !exports.nodeType && exports;\n\n  // Use the `global` object exposed by Node (including Browserify via\n  // `insert-module-globals`), Narwhal, and Ringo as the default context,\n  // and the `window` object in browsers. Rhino exports a `global` function\n  // instead.\n  var root = objectTypes[typeof window] && window || this,\n      freeGlobal = freeExports && objectTypes[typeof module] && module && !module.nodeType && typeof global == \"object\" && global;\n\n  if (freeGlobal && (freeGlobal.global === freeGlobal || freeGlobal.window === freeGlobal || freeGlobal.self === freeGlobal)) {\n    root = freeGlobal;\n  }\n\n  // Public: Initializes JSON 3 using the given `context` object, attaching the\n  // `stringify` and `parse` functions to the specified `exports` object.\n  function runInContext(context, exports) {\n    context || (context = root.Object());\n    exports || (exports = root.Object());\n\n    // Native constructor aliases.\n    var Number = context.Number || root.Number,\n        String = context.String || root.String,\n        Object = context.Object || root.Object,\n        Date = context.Date || root.Date,\n        SyntaxError = context.SyntaxError || root.SyntaxError,\n        TypeError = context.TypeError || root.TypeError,\n        Math = context.Math || root.Math,\n        nativeJSON = context.JSON || root.JSON;\n\n    // Delegate to the native `stringify` and `parse` implementations.\n    if (typeof nativeJSON == \"object\" && nativeJSON) {\n      exports.stringify = nativeJSON.stringify;\n      exports.parse = nativeJSON.parse;\n    }\n\n    // Convenience aliases.\n    var objectProto = Object.prototype,\n        getClass = objectProto.toString,\n        isProperty = objectProto.hasOwnProperty,\n        undefined;\n\n    // Internal: Contains `try...catch` logic used by other functions.\n    // This prevents other functions from being deoptimized.\n    function attempt(func, errorFunc) {\n      try {\n        func();\n      } catch (exception) {\n        if (errorFunc) {\n          errorFunc();\n        }\n      }\n    }\n\n    // Test the `Date#getUTC*` methods. Based on work by @Yaffle.\n    var isExtended = new Date(-3509827334573292);\n    attempt(function () {\n      // The `getUTCFullYear`, `Month`, and `Date` methods return nonsensical\n      // results for certain dates in Opera >= 10.53.\n      isExtended = isExtended.getUTCFullYear() == -109252 && isExtended.getUTCMonth() === 0 && isExtended.getUTCDate() === 1 &&\n        isExtended.getUTCHours() == 10 && isExtended.getUTCMinutes() == 37 && isExtended.getUTCSeconds() == 6 && isExtended.getUTCMilliseconds() == 708;\n    });\n\n    // Internal: Determines whether the native `JSON.stringify` and `parse`\n    // implementations are spec-compliant. Based on work by Ken Snyder.\n    function has(name) {\n      if (has[name] != null) {\n        // Return cached feature test result.\n        return has[name];\n      }\n      var isSupported;\n      if (name == \"bug-string-char-index\") {\n        // IE <= 7 doesn't support accessing string characters using square\n        // bracket notation. IE 8 only supports this for primitives.\n        isSupported = \"a\"[0] != \"a\";\n      } else if (name == \"json\") {\n        // Indicates whether both `JSON.stringify` and `JSON.parse` are\n        // supported.\n        isSupported = has(\"json-stringify\") && has(\"date-serialization\") && has(\"json-parse\");\n      } else if (name == \"date-serialization\") {\n        // Indicates whether `Date`s can be serialized accurately by `JSON.stringify`.\n        isSupported = has(\"json-stringify\") && isExtended;\n        if (isSupported) {\n          var stringify = exports.stringify;\n          attempt(function () {\n            isSupported =\n              // JSON 2, Prototype <= 1.7, and older WebKit builds incorrectly\n              // serialize extended years.\n              stringify(new Date(-8.64e15)) == '\"-271821-04-20T00:00:00.000Z\"' &&\n              // The milliseconds are optional in ES 5, but required in 5.1.\n              stringify(new Date(8.64e15)) == '\"+275760-09-13T00:00:00.000Z\"' &&\n              // Firefox <= 11.0 incorrectly serializes years prior to 0 as negative\n              // four-digit years instead of six-digit years. Credits: @Yaffle.\n              stringify(new Date(-621987552e5)) == '\"-000001-01-01T00:00:00.000Z\"' &&\n              // Safari <= 5.1.5 and Opera >= 10.53 incorrectly serialize millisecond\n              // values less than 1000. Credits: @Yaffle.\n              stringify(new Date(-1)) == '\"1969-12-31T23:59:59.999Z\"';\n          });\n        }\n      } else {\n        var value, serialized = '{\"a\":[1,true,false,null,\"\\\\u0000\\\\b\\\\n\\\\f\\\\r\\\\t\"]}';\n        // Test `JSON.stringify`.\n        if (name == \"json-stringify\") {\n          var stringify = exports.stringify, stringifySupported = typeof stringify == \"function\";\n          if (stringifySupported) {\n            // A test function object with a custom `toJSON` method.\n            (value = function () {\n              return 1;\n            }).toJSON = value;\n            attempt(function () {\n              stringifySupported =\n                // Firefox 3.1b1 and b2 serialize string, number, and boolean\n                // primitives as object literals.\n                stringify(0) === \"0\" &&\n                // FF 3.1b1, b2, and JSON 2 serialize wrapped primitives as object\n                // literals.\n                stringify(new Number()) === \"0\" &&\n                stringify(new String()) == '\"\"' &&\n                // FF 3.1b1, 2 throw an error if the value is `null`, `undefined`, or\n                // does not define a canonical JSON representation (this applies to\n                // objects with `toJSON` properties as well, *unless* they are nested\n                // within an object or array).\n                stringify(getClass) === undefined &&\n                // IE 8 serializes `undefined` as `\"undefined\"`. Safari <= 5.1.7 and\n                // FF 3.1b3 pass this test.\n                stringify(undefined) === undefined &&\n                // Safari <= 5.1.7 and FF 3.1b3 throw `Error`s and `TypeError`s,\n                // respectively, if the value is omitted entirely.\n                stringify() === undefined &&\n                // FF 3.1b1, 2 throw an error if the given value is not a number,\n                // string, array, object, Boolean, or `null` literal. This applies to\n                // objects with custom `toJSON` methods as well, unless they are nested\n                // inside object or array literals. YUI 3.0.0b1 ignores custom `toJSON`\n                // methods entirely.\n                stringify(value) === \"1\" &&\n                stringify([value]) == \"[1]\" &&\n                // Prototype <= 1.6.1 serializes `[undefined]` as `\"[]\"` instead of\n                // `\"[null]\"`.\n                stringify([undefined]) == \"[null]\" &&\n                // YUI 3.0.0b1 fails to serialize `null` literals.\n                stringify(null) == \"null\" &&\n                // FF 3.1b1, 2 halts serialization if an array contains a function:\n                // `[1, true, getClass, 1]` serializes as \"[1,true,],\". FF 3.1b3\n                // elides non-JSON values from objects and arrays, unless they\n                // define custom `toJSON` methods.\n                stringify([undefined, getClass, null]) == \"[null,null,null]\" &&\n                // Simple serialization test. FF 3.1b1 uses Unicode escape sequences\n                // where character escape codes are expected (e.g., `\\b` => `\\u0008`).\n                stringify({ \"a\": [value, true, false, null, \"\\x00\\b\\n\\f\\r\\t\"] }) == serialized &&\n                // FF 3.1b1 and b2 ignore the `filter` and `width` arguments.\n                stringify(null, value) === \"1\" &&\n                stringify([1, 2], null, 1) == \"[\\n 1,\\n 2\\n]\";\n            }, function () {\n              stringifySupported = false;\n            });\n          }\n          isSupported = stringifySupported;\n        }\n        // Test `JSON.parse`.\n        if (name == \"json-parse\") {\n          var parse = exports.parse, parseSupported;\n          if (typeof parse == \"function\") {\n            attempt(function () {\n              // FF 3.1b1, b2 will throw an exception if a bare literal is provided.\n              // Conforming implementations should also coerce the initial argument to\n              // a string prior to parsing.\n              if (parse(\"0\") === 0 && !parse(false)) {\n                // Simple parsing test.\n                value = parse(serialized);\n                parseSupported = value[\"a\"].length == 5 && value[\"a\"][0] === 1;\n                if (parseSupported) {\n                  attempt(function () {\n                    // Safari <= 5.1.2 and FF 3.1b1 allow unescaped tabs in strings.\n                    parseSupported = !parse('\"\\t\"');\n                  });\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0 and 4.0.1 allow leading `+` signs and leading\n                      // decimal points. FF 4.0, 4.0.1, and IE 9-10 also allow\n                      // certain octal literals.\n                      parseSupported = parse(\"01\") !== 1;\n                    });\n                  }\n                  if (parseSupported) {\n                    attempt(function () {\n                      // FF 4.0, 4.0.1, and Rhino 1.7R3-R4 allow trailing decimal\n                      // points. These environments, along with FF 3.1b1 and 2,\n                      // also allow trailing commas in JSON objects and arrays.\n                      parseSupported = parse(\"1.\") !== 1;\n                    });\n                  }\n                }\n              }\n            }, function () {\n              parseSupported = false;\n            });\n          }\n          isSupported = parseSupported;\n        }\n      }\n      return has[name] = !!isSupported;\n    }\n    has[\"bug-string-char-index\"] = has[\"date-serialization\"] = has[\"json\"] = has[\"json-stringify\"] = has[\"json-parse\"] = null;\n\n    if (!has(\"json\")) {\n      // Common `[[Class]]` name aliases.\n      var functionClass = \"[object Function]\",\n          dateClass = \"[object Date]\",\n          numberClass = \"[object Number]\",\n          stringClass = \"[object String]\",\n          arrayClass = \"[object Array]\",\n          booleanClass = \"[object Boolean]\";\n\n      // Detect incomplete support for accessing string characters by index.\n      var charIndexBuggy = has(\"bug-string-char-index\");\n\n      // Internal: Normalizes the `for...in` iteration algorithm across\n      // environments. Each enumerated key is yielded to a `callback` function.\n      var forOwn = function (object, callback) {\n        var size = 0, Properties, dontEnums, property;\n\n        // Tests for bugs in the current environment's `for...in` algorithm. The\n        // `valueOf` property inherits the non-enumerable flag from\n        // `Object.prototype` in older versions of IE, Netscape, and Mozilla.\n        (Properties = function () {\n          this.valueOf = 0;\n        }).prototype.valueOf = 0;\n\n        // Iterate over a new instance of the `Properties` class.\n        dontEnums = new Properties();\n        for (property in dontEnums) {\n          // Ignore all properties inherited from `Object.prototype`.\n          if (isProperty.call(dontEnums, property)) {\n            size++;\n          }\n        }\n        Properties = dontEnums = null;\n\n        // Normalize the iteration algorithm.\n        if (!size) {\n          // A list of non-enumerable properties inherited from `Object.prototype`.\n          dontEnums = [\"valueOf\", \"toString\", \"toLocaleString\", \"propertyIsEnumerable\", \"isPrototypeOf\", \"hasOwnProperty\", \"constructor\"];\n          // IE <= 8, Mozilla 1.0, and Netscape 6.2 ignore shadowed non-enumerable\n          // properties.\n          forOwn = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, length;\n            var hasProperty = !isFunction && typeof object.constructor != \"function\" && objectTypes[typeof object.hasOwnProperty] && object.hasOwnProperty || isProperty;\n            for (property in object) {\n              // Gecko <= 1.0 enumerates the `prototype` property of functions under\n              // certain conditions; IE does not.\n              if (!(isFunction && property == \"prototype\") && hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for each non-enumerable property.\n            for (length = dontEnums.length; property = dontEnums[--length];) {\n              if (hasProperty.call(object, property)) {\n                callback(property);\n              }\n            }\n          };\n        } else {\n          // No bugs detected; use the standard `for...in` algorithm.\n          forOwn = function (object, callback) {\n            var isFunction = getClass.call(object) == functionClass, property, isConstructor;\n            for (property in object) {\n              if (!(isFunction && property == \"prototype\") && isProperty.call(object, property) && !(isConstructor = property === \"constructor\")) {\n                callback(property);\n              }\n            }\n            // Manually invoke the callback for the `constructor` property due to\n            // cross-environment inconsistencies.\n            if (isConstructor || isProperty.call(object, (property = \"constructor\"))) {\n              callback(property);\n            }\n          };\n        }\n        return forOwn(object, callback);\n      };\n\n      // Public: Serializes a JavaScript `value` as a JSON string. The optional\n      // `filter` argument may specify either a function that alters how object and\n      // array members are serialized, or an array of strings and numbers that\n      // indicates which properties should be serialized. The optional `width`\n      // argument may be either a string or number that specifies the indentation\n      // level of the output.\n      if (!has(\"json-stringify\") && !has(\"date-serialization\")) {\n        // Internal: A map of control characters and their escaped equivalents.\n        var Escapes = {\n          92: \"\\\\\\\\\",\n          34: '\\\\\"',\n          8: \"\\\\b\",\n          12: \"\\\\f\",\n          10: \"\\\\n\",\n          13: \"\\\\r\",\n          9: \"\\\\t\"\n        };\n\n        // Internal: Converts `value` into a zero-padded string such that its\n        // length is at least equal to `width`. The `width` must be <= 6.\n        var leadingZeroes = \"000000\";\n        var toPaddedString = function (width, value) {\n          // The `|| 0` expression is necessary to work around a bug in\n          // Opera <= 7.54u2 where `0 == -0`, but `String(-0) !== \"0\"`.\n          return (leadingZeroes + (value || 0)).slice(-width);\n        };\n\n        // Internal: Serializes a date object.\n        var serializeDate = function (value) {\n          var getData, year, month, date, time, hours, minutes, seconds, milliseconds;\n          // Define additional utility methods if the `Date` methods are buggy.\n          if (!isExtended) {\n            var floor = Math.floor;\n            // A mapping between the months of the year and the number of days between\n            // January 1st and the first of the respective month.\n            var Months = [0, 31, 59, 90, 120, 151, 181, 212, 243, 273, 304, 334];\n            // Internal: Calculates the number of days between the Unix epoch and the\n            // first day of the given month.\n            var getDay = function (year, month) {\n              return Months[month] + 365 * (year - 1970) + floor((year - 1969 + (month = +(month > 1))) / 4) - floor((year - 1901 + month) / 100) + floor((year - 1601 + month) / 400);\n            };\n            getData = function (value) {\n              // Manually compute the year, month, date, hours, minutes,\n              // seconds, and milliseconds if the `getUTC*` methods are\n              // buggy. Adapted from @Yaffle's `date-shim` project.\n              date = floor(value / 864e5);\n              for (year = floor(date / 365.2425) + 1970 - 1; getDay(year + 1, 0) <= date; year++);\n              for (month = floor((date - getDay(year, 0)) / 30.42); getDay(year, month + 1) <= date; month++);\n              date = 1 + date - getDay(year, month);\n              // The `time` value specifies the time within the day (see ES\n              // 5.1 section 15.9.1.2). The formula `(A % B + B) % B` is used\n              // to compute `A modulo B`, as the `%` operator does not\n              // correspond to the `modulo` operation for negative numbers.\n              time = (value % 864e5 + 864e5) % 864e5;\n              // The hours, minutes, seconds, and milliseconds are obtained by\n              // decomposing the time within the day. See section 15.9.1.10.\n              hours = floor(time / 36e5) % 24;\n              minutes = floor(time / 6e4) % 60;\n              seconds = floor(time / 1e3) % 60;\n              milliseconds = time % 1e3;\n            };\n          } else {\n            getData = function (value) {\n              year = value.getUTCFullYear();\n              month = value.getUTCMonth();\n              date = value.getUTCDate();\n              hours = value.getUTCHours();\n              minutes = value.getUTCMinutes();\n              seconds = value.getUTCSeconds();\n              milliseconds = value.getUTCMilliseconds();\n            };\n          }\n          serializeDate = function (value) {\n            if (value > -1 / 0 && value < 1 / 0) {\n              // Dates are serialized according to the `Date#toJSON` method\n              // specified in ES 5.1 section 15.9.5.44. See section 15.9.1.15\n              // for the ISO 8601 date time string format.\n              getData(value);\n              // Serialize extended years correctly.\n              value = (year <= 0 || year >= 1e4 ? (year < 0 ? \"-\" : \"+\") + toPaddedString(6, year < 0 ? -year : year) : toPaddedString(4, year)) +\n              \"-\" + toPaddedString(2, month + 1) + \"-\" + toPaddedString(2, date) +\n              // Months, dates, hours, minutes, and seconds should have two\n              // digits; milliseconds should have three.\n              \"T\" + toPaddedString(2, hours) + \":\" + toPaddedString(2, minutes) + \":\" + toPaddedString(2, seconds) +\n              // Milliseconds are optional in ES 5.0, but required in 5.1.\n              \".\" + toPaddedString(3, milliseconds) + \"Z\";\n              year = month = date = hours = minutes = seconds = milliseconds = null;\n            } else {\n              value = null;\n            }\n            return value;\n          };\n          return serializeDate(value);\n        };\n\n        // For environments with `JSON.stringify` but buggy date serialization,\n        // we override the native `Date#toJSON` implementation with a\n        // spec-compliant one.\n        if (has(\"json-stringify\") && !has(\"date-serialization\")) {\n          // Internal: the `Date#toJSON` implementation used to override the native one.\n          function dateToJSON (key) {\n            return serializeDate(this);\n          }\n\n          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n          var nativeStringify = exports.stringify;\n          exports.stringify = function (source, filter, width) {\n            var nativeToJSON = Date.prototype.toJSON;\n            Date.prototype.toJSON = dateToJSON;\n            var result = nativeStringify(source, filter, width);\n            Date.prototype.toJSON = nativeToJSON;\n            return result;\n          }\n        } else {\n          // Internal: Double-quotes a string `value`, replacing all ASCII control\n          // characters (characters with code unit values between 0 and 31) with\n          // their escaped equivalents. This is an implementation of the\n          // `Quote(value)` operation defined in ES 5.1 section 15.12.3.\n          var unicodePrefix = \"\\\\u00\";\n          var escapeChar = function (character) {\n            var charCode = character.charCodeAt(0), escaped = Escapes[charCode];\n            if (escaped) {\n              return escaped;\n            }\n            return unicodePrefix + toPaddedString(2, charCode.toString(16));\n          };\n          var reEscape = /[\\x00-\\x1f\\x22\\x5c]/g;\n          var quote = function (value) {\n            reEscape.lastIndex = 0;\n            return '\"' +\n              (\n                reEscape.test(value)\n                  ? value.replace(reEscape, escapeChar)\n                  : value\n              ) +\n              '\"';\n          };\n\n          // Internal: Recursively serializes an object. Implements the\n          // `Str(key, holder)`, `JO(value)`, and `JA(value)` operations.\n          var serialize = function (property, object, callback, properties, whitespace, indentation, stack) {\n            var value, type, className, results, element, index, length, prefix, result;\n            attempt(function () {\n              // Necessary for host object support.\n              value = object[property];\n            });\n            if (typeof value == \"object\" && value) {\n              if (value.getUTCFullYear && getClass.call(value) == dateClass && value.toJSON === Date.prototype.toJSON) {\n                value = serializeDate(value);\n              } else if (typeof value.toJSON == \"function\") {\n                value = value.toJSON(property);\n              }\n            }\n            if (callback) {\n              // If a replacement function was provided, call it to obtain the value\n              // for serialization.\n              value = callback.call(object, property, value);\n            }\n            // Exit early if value is `undefined` or `null`.\n            if (value == undefined) {\n              return value === undefined ? value : \"null\";\n            }\n            type = typeof value;\n            // Only call `getClass` if the value is an object.\n            if (type == \"object\") {\n              className = getClass.call(value);\n            }\n            switch (className || type) {\n              case \"boolean\":\n              case booleanClass:\n                // Booleans are represented literally.\n                return \"\" + value;\n              case \"number\":\n              case numberClass:\n                // JSON numbers must be finite. `Infinity` and `NaN` are serialized as\n                // `\"null\"`.\n                return value > -1 / 0 && value < 1 / 0 ? \"\" + value : \"null\";\n              case \"string\":\n              case stringClass:\n                // Strings are double-quoted and escaped.\n                return quote(\"\" + value);\n            }\n            // Recursively serialize objects and arrays.\n            if (typeof value == \"object\") {\n              // Check for cyclic structures. This is a linear search; performance\n              // is inversely proportional to the number of unique nested objects.\n              for (length = stack.length; length--;) {\n                if (stack[length] === value) {\n                  // Cyclic structures cannot be serialized by `JSON.stringify`.\n                  throw TypeError();\n                }\n              }\n              // Add the object to the stack of traversed objects.\n              stack.push(value);\n              results = [];\n              // Save the current indentation level and indent one additional level.\n              prefix = indentation;\n              indentation += whitespace;\n              if (className == arrayClass) {\n                // Recursively serialize array elements.\n                for (index = 0, length = value.length; index < length; index++) {\n                  element = serialize(index, value, callback, properties, whitespace, indentation, stack);\n                  results.push(element === undefined ? \"null\" : element);\n                }\n                result = results.length ? (whitespace ? \"[\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"]\" : (\"[\" + results.join(\",\") + \"]\")) : \"[]\";\n              } else {\n                // Recursively serialize object members. Members are selected from\n                // either a user-specified list of property names, or the object\n                // itself.\n                forOwn(properties || value, function (property) {\n                  var element = serialize(property, value, callback, properties, whitespace, indentation, stack);\n                  if (element !== undefined) {\n                    // According to ES 5.1 section 15.12.3: \"If `gap` {whitespace}\n                    // is not the empty string, let `member` {quote(property) + \":\"}\n                    // be the concatenation of `member` and the `space` character.\"\n                    // The \"`space` character\" refers to the literal space\n                    // character, not the `space` {width} argument provided to\n                    // `JSON.stringify`.\n                    results.push(quote(property) + \":\" + (whitespace ? \" \" : \"\") + element);\n                  }\n                });\n                result = results.length ? (whitespace ? \"{\\n\" + indentation + results.join(\",\\n\" + indentation) + \"\\n\" + prefix + \"}\" : (\"{\" + results.join(\",\") + \"}\")) : \"{}\";\n              }\n              // Remove the object from the traversed object stack.\n              stack.pop();\n              return result;\n            }\n          };\n\n          // Public: `JSON.stringify`. See ES 5.1 section 15.12.3.\n          exports.stringify = function (source, filter, width) {\n            var whitespace, callback, properties, className;\n            if (objectTypes[typeof filter] && filter) {\n              className = getClass.call(filter);\n              if (className == functionClass) {\n                callback = filter;\n              } else if (className == arrayClass) {\n                // Convert the property names array into a makeshift set.\n                properties = {};\n                for (var index = 0, length = filter.length, value; index < length;) {\n                  value = filter[index++];\n                  className = getClass.call(value);\n                  if (className == \"[object String]\" || className == \"[object Number]\") {\n                    properties[value] = 1;\n                  }\n                }\n              }\n            }\n            if (width) {\n              className = getClass.call(width);\n              if (className == numberClass) {\n                // Convert the `width` to an integer and create a string containing\n                // `width` number of space characters.\n                if ((width -= width % 1) > 0) {\n                  if (width > 10) {\n                    width = 10;\n                  }\n                  for (whitespace = \"\"; whitespace.length < width;) {\n                    whitespace += \" \";\n                  }\n                }\n              } else if (className == stringClass) {\n                whitespace = width.length <= 10 ? width : width.slice(0, 10);\n              }\n            }\n            // Opera <= 7.54u2 discards the values associated with empty string keys\n            // (`\"\"`) only if they are used directly within an object member list\n            // (e.g., `!(\"\" in { \"\": 1})`).\n            return serialize(\"\", (value = {}, value[\"\"] = source, value), callback, properties, whitespace, \"\", []);\n          };\n        }\n      }\n\n      // Public: Parses a JSON source string.\n      if (!has(\"json-parse\")) {\n        var fromCharCode = String.fromCharCode;\n\n        // Internal: A map of escaped control characters and their unescaped\n        // equivalents.\n        var Unescapes = {\n          92: \"\\\\\",\n          34: '\"',\n          47: \"/\",\n          98: \"\\b\",\n          116: \"\\t\",\n          110: \"\\n\",\n          102: \"\\f\",\n          114: \"\\r\"\n        };\n\n        // Internal: Stores the parser state.\n        var Index, Source;\n\n        // Internal: Resets the parser state and throws a `SyntaxError`.\n        var abort = function () {\n          Index = Source = null;\n          throw SyntaxError();\n        };\n\n        // Internal: Returns the next token, or `\"$\"` if the parser has reached\n        // the end of the source string. A token may be a string, number, `null`\n        // literal, or Boolean literal.\n        var lex = function () {\n          var source = Source, length = source.length, value, begin, position, isSigned, charCode;\n          while (Index < length) {\n            charCode = source.charCodeAt(Index);\n            switch (charCode) {\n              case 9: case 10: case 13: case 32:\n                // Skip whitespace tokens, including tabs, carriage returns, line\n                // feeds, and space characters.\n                Index++;\n                break;\n              case 123: case 125: case 91: case 93: case 58: case 44:\n                // Parse a punctuator token (`{`, `}`, `[`, `]`, `:`, or `,`) at\n                // the current position.\n                value = charIndexBuggy ? source.charAt(Index) : source[Index];\n                Index++;\n                return value;\n              case 34:\n                // `\"` delimits a JSON string; advance to the next character and\n                // begin parsing the string. String tokens are prefixed with the\n                // sentinel `@` character to distinguish them from punctuators and\n                // end-of-string tokens.\n                for (value = \"@\", Index++; Index < length;) {\n                  charCode = source.charCodeAt(Index);\n                  if (charCode < 32) {\n                    // Unescaped ASCII control characters (those with a code unit\n                    // less than the space character) are not permitted.\n                    abort();\n                  } else if (charCode == 92) {\n                    // A reverse solidus (`\\`) marks the beginning of an escaped\n                    // control character (including `\"`, `\\`, and `/`) or Unicode\n                    // escape sequence.\n                    charCode = source.charCodeAt(++Index);\n                    switch (charCode) {\n                      case 92: case 34: case 47: case 98: case 116: case 110: case 102: case 114:\n                        // Revive escaped control characters.\n                        value += Unescapes[charCode];\n                        Index++;\n                        break;\n                      case 117:\n                        // `\\u` marks the beginning of a Unicode escape sequence.\n                        // Advance to the first character and validate the\n                        // four-digit code point.\n                        begin = ++Index;\n                        for (position = Index + 4; Index < position; Index++) {\n                          charCode = source.charCodeAt(Index);\n                          // A valid sequence comprises four hexdigits (case-\n                          // insensitive) that form a single hexadecimal value.\n                          if (!(charCode >= 48 && charCode <= 57 || charCode >= 97 && charCode <= 102 || charCode >= 65 && charCode <= 70)) {\n                            // Invalid Unicode escape sequence.\n                            abort();\n                          }\n                        }\n                        // Revive the escaped character.\n                        value += fromCharCode(\"0x\" + source.slice(begin, Index));\n                        break;\n                      default:\n                        // Invalid escape sequence.\n                        abort();\n                    }\n                  } else {\n                    if (charCode == 34) {\n                      // An unescaped double-quote character marks the end of the\n                      // string.\n                      break;\n                    }\n                    charCode = source.charCodeAt(Index);\n                    begin = Index;\n                    // Optimize for the common case where a string is valid.\n                    while (charCode >= 32 && charCode != 92 && charCode != 34) {\n                      charCode = source.charCodeAt(++Index);\n                    }\n                    // Append the string as-is.\n                    value += source.slice(begin, Index);\n                  }\n                }\n                if (source.charCodeAt(Index) == 34) {\n                  // Advance to the next character and return the revived string.\n                  Index++;\n                  return value;\n                }\n                // Unterminated string.\n                abort();\n              default:\n                // Parse numbers and literals.\n                begin = Index;\n                // Advance past the negative sign, if one is specified.\n                if (charCode == 45) {\n                  isSigned = true;\n                  charCode = source.charCodeAt(++Index);\n                }\n                // Parse an integer or floating-point value.\n                if (charCode >= 48 && charCode <= 57) {\n                  // Leading zeroes are interpreted as octal literals.\n                  if (charCode == 48 && ((charCode = source.charCodeAt(Index + 1)), charCode >= 48 && charCode <= 57)) {\n                    // Illegal octal literal.\n                    abort();\n                  }\n                  isSigned = false;\n                  // Parse the integer component.\n                  for (; Index < length && ((charCode = source.charCodeAt(Index)), charCode >= 48 && charCode <= 57); Index++);\n                  // Floats cannot contain a leading decimal point; however, this\n                  // case is already accounted for by the parser.\n                  if (source.charCodeAt(Index) == 46) {\n                    position = ++Index;\n                    // Parse the decimal component.\n                    for (; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n                    if (position == Index) {\n                      // Illegal trailing decimal.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Parse exponents. The `e` denoting the exponent is\n                  // case-insensitive.\n                  charCode = source.charCodeAt(Index);\n                  if (charCode == 101 || charCode == 69) {\n                    charCode = source.charCodeAt(++Index);\n                    // Skip past the sign following the exponent, if one is\n                    // specified.\n                    if (charCode == 43 || charCode == 45) {\n                      Index++;\n                    }\n                    // Parse the exponential component.\n                    for (position = Index; position < length; position++) {\n                      charCode = source.charCodeAt(position);\n                      if (charCode < 48 || charCode > 57) {\n                        break;\n                      }\n                    }\n                    if (position == Index) {\n                      // Illegal empty exponent.\n                      abort();\n                    }\n                    Index = position;\n                  }\n                  // Coerce the parsed value to a JavaScript number.\n                  return +source.slice(begin, Index);\n                }\n                // A negative sign may only precede numbers.\n                if (isSigned) {\n                  abort();\n                }\n                // `true`, `false`, and `null` literals.\n                var temp = source.slice(Index, Index + 4);\n                if (temp == \"true\") {\n                  Index += 4;\n                  return true;\n                } else if (temp == \"fals\" && source.charCodeAt(Index + 4 ) == 101) {\n                  Index += 5;\n                  return false;\n                } else if (temp == \"null\") {\n                  Index += 4;\n                  return null;\n                }\n                // Unrecognized token.\n                abort();\n            }\n          }\n          // Return the sentinel `$` character if the parser has reached the end\n          // of the source string.\n          return \"$\";\n        };\n\n        // Internal: Parses a JSON `value` token.\n        var get = function (value) {\n          var results, hasMembers;\n          if (value == \"$\") {\n            // Unexpected end of input.\n            abort();\n          }\n          if (typeof value == \"string\") {\n            if ((charIndexBuggy ? value.charAt(0) : value[0]) == \"@\") {\n              // Remove the sentinel `@` character.\n              return value.slice(1);\n            }\n            // Parse object and array literals.\n            if (value == \"[\") {\n              // Parses a JSON array, returning a new JavaScript array.\n              results = [];\n              for (;;) {\n                value = lex();\n                // A closing square bracket marks the end of the array literal.\n                if (value == \"]\") {\n                  break;\n                }\n                // If the array literal contains elements, the current token\n                // should be a comma separating the previous element from the\n                // next.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"]\") {\n                      // Unexpected trailing `,` in array literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each array element.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                }\n                // Elisions and leading commas are not permitted.\n                if (value == \",\") {\n                  abort();\n                }\n                results.push(get(value));\n              }\n              return results;\n            } else if (value == \"{\") {\n              // Parses a JSON object, returning a new JavaScript object.\n              results = {};\n              for (;;) {\n                value = lex();\n                // A closing curly brace marks the end of the object literal.\n                if (value == \"}\") {\n                  break;\n                }\n                // If the object literal contains members, the current token\n                // should be a comma separator.\n                if (hasMembers) {\n                  if (value == \",\") {\n                    value = lex();\n                    if (value == \"}\") {\n                      // Unexpected trailing `,` in object literal.\n                      abort();\n                    }\n                  } else {\n                    // A `,` must separate each object member.\n                    abort();\n                  }\n                } else {\n                  hasMembers = true;\n                }\n                // Leading commas are not permitted, object property names must be\n                // double-quoted strings, and a `:` must separate each property\n                // name and value.\n                if (value == \",\" || typeof value != \"string\" || (charIndexBuggy ? value.charAt(0) : value[0]) != \"@\" || lex() != \":\") {\n                  abort();\n                }\n                results[value.slice(1)] = get(lex());\n              }\n              return results;\n            }\n            // Unexpected token encountered.\n            abort();\n          }\n          return value;\n        };\n\n        // Internal: Updates a traversed object member.\n        var update = function (source, property, callback) {\n          var element = walk(source, property, callback);\n          if (element === undefined) {\n            delete source[property];\n          } else {\n            source[property] = element;\n          }\n        };\n\n        // Internal: Recursively traverses a parsed JSON object, invoking the\n        // `callback` function for each value. This is an implementation of the\n        // `Walk(holder, name)` operation defined in ES 5.1 section 15.12.2.\n        var walk = function (source, property, callback) {\n          var value = source[property], length;\n          if (typeof value == \"object\" && value) {\n            // `forOwn` can't be used to traverse an array in Opera <= 8.54\n            // because its `Object#hasOwnProperty` implementation returns `false`\n            // for array indices (e.g., `![1, 2, 3].hasOwnProperty(\"0\")`).\n            if (getClass.call(value) == arrayClass) {\n              for (length = value.length; length--;) {\n                update(getClass, forOwn, value, length, callback);\n              }\n            } else {\n              forOwn(value, function (property) {\n                update(value, property, callback);\n              });\n            }\n          }\n          return callback.call(source, property, value);\n        };\n\n        // Public: `JSON.parse`. See ES 5.1 section 15.12.2.\n        exports.parse = function (source, callback) {\n          var result, value;\n          Index = 0;\n          Source = \"\" + source;\n          result = get(lex());\n          // If a JSON string contains multiple tokens, it is invalid.\n          if (lex() != \"$\") {\n            abort();\n          }\n          // Reset the parser state.\n          Index = Source = null;\n          return callback && getClass.call(callback) == functionClass ? walk((value = {}, value[\"\"] = result, value), \"\", callback) : result;\n        };\n      }\n    }\n\n    exports.runInContext = runInContext;\n    return exports;\n  }\n\n  if (freeExports && !isLoader) {\n    // Export for CommonJS environments.\n    runInContext(root, freeExports);\n  } else {\n    // Export for web browsers and JavaScript engines.\n    var nativeJSON = root.JSON,\n        previousJSON = root.JSON3,\n        isRestored = false;\n\n    var JSON3 = runInContext(root, (root.JSON3 = {\n      // Public: Restores the original value of the global `JSON` object and\n      // returns a reference to the `JSON3` object.\n      \"noConflict\": function () {\n        if (!isRestored) {\n          isRestored = true;\n          root.JSON = nativeJSON;\n          root.JSON3 = previousJSON;\n          nativeJSON = previousJSON = null;\n        }\n        return JSON3;\n      }\n    }));\n\n    root.JSON = {\n      \"parse\": JSON3.parse,\n      \"stringify\": JSON3.stringify\n    };\n  }\n\n  // Export for asynchronous module loaders.\n  if (isLoader) {\n    define(function () {\n      return JSON3;\n    });\n  }\n}).call(this);\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{}],59:[function(require,module,exports){\n'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encodeURIComponent(key);\n      value = encodeURIComponent(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n\n},{}],60:[function(require,module,exports){\n'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n\n},{}],61:[function(require,module,exports){\n(function (global){\n'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\\\/]+)?([\\S\\s]*)/i\n  , windowsDriveLetter = /^[a-zA-Z]:/\n  , whitespace = '[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]'\n  , left = new RegExp('^'+ whitespace +'+');\n\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address, url) {     // Sanitize what is left of the address\n    return isSpecial(url.protocol) ? address.replace(/\\\\/g, '/') : address;\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * Check whether a protocol scheme is special.\n *\n * @param {String} The protocol scheme of the URL\n * @return {Boolean} `true` if the protocol scheme is special, else `false`\n * @private\n */\nfunction isSpecial(scheme) {\n  return (\n    scheme === 'file:' ||\n    scheme === 'ftp:' ||\n    scheme === 'http:' ||\n    scheme === 'https:' ||\n    scheme === 'ws:' ||\n    scheme === 'wss:'\n  );\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @param {Object} location\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address, location) {\n  address = trimLeft(address);\n  location = location || {};\n\n  var match = protocolre.exec(address);\n  var protocol = match[1] ? match[1].toLowerCase() : '';\n  var forwardSlashes = !!match[2];\n  var otherSlashes = !!match[3];\n  var slashesCount = 0;\n  var rest;\n\n  if (forwardSlashes) {\n    if (otherSlashes) {\n      rest = match[2] + match[3] + match[4];\n      slashesCount = match[2].length + match[3].length;\n    } else {\n      rest = match[2] + match[4];\n      slashesCount = match[2].length;\n    }\n  } else {\n    if (otherSlashes) {\n      rest = match[3] + match[4];\n      slashesCount = match[3].length;\n    } else {\n      rest = match[4]\n    }\n  }\n\n  if (protocol === 'file:') {\n    if (slashesCount >= 2) {\n      rest = rest.slice(2);\n    }\n  } else if (isSpecial(protocol)) {\n    rest = match[4];\n  } else if (protocol) {\n    if (forwardSlashes) {\n      rest = rest.slice(2);\n    }\n  } else if (slashesCount >= 2 && isSpecial(location.protocol)) {\n    rest = match[4];\n  }\n\n  return {\n    protocol: protocol,\n    slashes: forwardSlashes || isSpecial(protocol),\n    slashesCount: slashesCount,\n    rest: rest\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '', location);\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (\n    extracted.protocol === 'file:' && (\n      extracted.slashesCount !== 2 || windowsDriveLetter.test(address)) ||\n    (!extracted.slashes &&\n      (extracted.protocol ||\n        extracted.slashesCount < 2 ||\n        !isSpecial(url.protocol)))\n  ) {\n    instructions[3] = [/(.*)/, 'pathname'];\n  }\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address, url);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // Default to a / for pathname if none exists. This normalizes the URL\n  // to always have a /\n  //\n  if (url.pathname.charAt(0) !== '/' && isSpecial(url.protocol)) {\n    url.pathname = '/' + url.pathname;\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol !== 'file:' && isSpecial(url.protocol) && url.host\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result = protocol + (url.slashes || isSpecial(url.protocol) ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n\n}).call(this,typeof global !== \"undefined\" ? global : typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : {})\n\n},{\"querystringify\":59,\"requires-port\":60}]},{},[1])(1)\n});\n\n\n//# sourceMappingURL=sockjs.js.map\n","'use strict';\nvar ansiRegex = require('ansi-regex')();\n\nmodule.exports = function (str) {\n\treturn typeof str === 'string' ? str.replace(ansiRegex, '') : str;\n};\n","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nvar __spreadArrays = (this && this.__spreadArrays) || function () {\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n            r[k] = a[j];\n    return r;\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nrequire(\"select-pure/dist/index.js\");\nvar H = require(\"../src/index\");\nvar debugCs_1 = require(\"./debugCs\");\nvar MODEL_SRC = '/assets/models/walls/scene.gltf';\nvar MAX_SAMPLERS = 256;\nfunction addSelect(onChange) {\n    var domText = \"\\n<select-pure name=\\\"View Mode\\\" id=\\\"view-mode\\\" style=\\\"position:absolute;right:0;width:128px;\\\">\\n  <option-pure value=\\\"result\\\">Result</option-pure>\\n  <option-pure value=\\\"bvh\\\">Show BVH</option-pure>\\n  <option-pure value=\\\"gbuffer\\\">Show GBuffer</option-pure>\\n  <option-pure value=\\\"origin\\\">Origin</option-pure>\\n</select-pure>\\n  \";\n    var dom = document.createElement('div');\n    dom.innerHTML = domText;\n    document.body.appendChild(dom);\n    var selectPure = document.querySelector('select-pure');\n    selectPure.addEventListener('change', function (event) {\n        var value = event.target.value;\n        onChange(value);\n    });\n    return dom;\n}\nvar RayTracingApp = (function () {\n    function RayTracingApp() {\n        this._frameCount = 0;\n        this._viewMode = 'result';\n    }\n    RayTracingApp.prototype.init = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var renderEnv, _scene, rootNode, _a, model, _b;\n            var _this = this;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        addSelect(function (value) {\n                            console.log(value);\n                            _this._viewMode = value;\n                            _this._frameCount = 0;\n                        });\n                        renderEnv = H.renderEnv;\n                        _scene = this._scene = new H.Scene();\n                        rootNode = this._scene.rootNode = new H.Node();\n                        this._camControl = new H.NodeControl('free');\n                        rootNode.addChild(this._camera = new H.Camera({ clearColor: [0, 1, 0, 1] }, { near: 0.01, far: 100, fov: Math.PI / 3 }));\n                        this._camera.pos.set([0, 0, 6]);\n                        _a = this;\n                        return [4, H.resource.load({ type: 'texture', name: 'noise.tex', src: '/assets/textures/noise-rgba.webp' })];\n                    case 1:\n                        _a._noiseTex = _c.sent();\n                        _b = this;\n                        return [4, H.resource.load({ type: 'gltf', name: 'scene.gltf', src: MODEL_SRC })];\n                    case 2:\n                        model = _b._model = _c.sent();\n                        if (model.cameras.length) {\n                            this._camera = model.cameras[0];\n                        }\n                        _scene.rootNode.addChild(model.rootNode);\n                        this._gBufferRT = new H.RenderTexture({\n                            width: renderEnv.width,\n                            height: renderEnv.height,\n                            colors: [\n                                { name: 'positionMetalOrSpec', format: 'rgba16float' },\n                                { name: 'baseColorRoughOrGloss', format: 'rgba16float' },\n                                { name: 'normalGlass', format: 'rgba16float' },\n                                { name: 'meshIndexMatIndexMatType', format: 'rgba8uint' }\n                            ],\n                            depthStencil: { needStencil: false }\n                        });\n                        this._gbufferLightMaterial = new H.Material(H.buildinEffects.rRTGBufferLight);\n                        this._gBufferDebugMesh = new H.ImageMesh(new H.Material(H.buildinEffects.iRTGShow));\n                        this._connectGBufferRenderTexture(this._gBufferDebugMesh.material);\n                        this._rtOutput = new H.RenderTexture({\n                            width: renderEnv.width,\n                            height: renderEnv.height,\n                            forCompute: true,\n                            colors: [{ name: 'color', format: 'rgba16float' }]\n                        });\n                        this._denoiseRTs = {\n                            current: new H.RenderTexture({\n                                width: renderEnv.width,\n                                height: renderEnv.height,\n                                forCompute: true,\n                                colors: [{ name: 'color', format: 'rgba16float' }]\n                            }),\n                            pre: new H.RenderTexture({\n                                width: renderEnv.width,\n                                height: renderEnv.height,\n                                forCompute: true,\n                                colors: [{ name: 'color', format: 'rgba16float' }]\n                            }),\n                            final: new H.RenderTexture({\n                                width: renderEnv.width,\n                                height: renderEnv.height,\n                                forCompute: true,\n                                colors: [{ name: 'color', format: 'rgba16float' }]\n                            })\n                        };\n                        this._denoiseSpaceUnit = new H.ComputeUnit(H.buildinEffects.cRTDenoiseSpace, { x: Math.ceil(renderEnv.width / 16), y: Math.ceil(renderEnv.height / 16) }, undefined, { WINDOW_SIZE: 7 });\n                        this._denoiseTemporUnit = new H.ComputeUnit(H.buildinEffects.cRTDenoiseTempor, { x: Math.ceil(renderEnv.width / 16), y: Math.ceil(renderEnv.height / 16) });\n                        this._connectGBufferRenderTexture(this._denoiseSpaceUnit);\n                        this._rtTone = new H.ImageMesh(new H.Material(H.buildinEffects.iTone));\n                        this._rtDebugInfo = new debugCs_1.DebugInfo();\n                        this._camControl.control(this._camera, new H.Node());\n                        this._camControl.onChange = function () {\n                            _this._frameCount = 0;\n                        };\n                        return [4, this._frame(16)];\n                    case 3:\n                        _c.sent();\n                        return [2];\n                }\n            });\n        });\n    };\n    RayTracingApp.prototype.update = function (dt) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4, this._frame(dt)];\n                    case 1:\n                        _a.sent();\n                        return [2];\n                }\n            });\n        });\n    };\n    RayTracingApp.prototype._frame = function (dt) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _scene, preWeight, first;\n            return __generator(this, function (_a) {\n                _scene = this._scene;\n                this._frameCount += 1;\n                preWeight = (this._frameCount - 1) / this._frameCount;\n                if (preWeight > .999) {\n                    return [2];\n                }\n                _scene.startFrame(dt);\n                first = !this._rtManager;\n                if (first) {\n                    this._rtManager = new H.RayTracingManager();\n                    this._rtManager.process(this._scene.cullCamera(this._camera), this._rtOutput);\n                    this._rtManager.rtUnit.setUniform('u_noise', this._noiseTex);\n                    this._connectGBufferRenderTexture(this._rtManager.rtUnit);\n                }\n                this._rtManager.rtUnit.setUniform('u_randoms', new Float32Array(16).map(function (v) { return Math.random(); }));\n                this._denoiseTemporUnit.setUniform('u_preWeight', new Float32Array([preWeight]));\n                if (this._viewMode === 'bvh') {\n                    this._showBVH();\n                }\n                else if (this._viewMode === 'gbuffer') {\n                    this._renderGBuffer();\n                    this._showGBufferResult();\n                }\n                else {\n                    this._renderGBuffer();\n                    this._scene.setRenderTarget(null);\n                    this._computeRTSS();\n                    if (this._viewMode === 'result') {\n                        this._computeDenoise();\n                    }\n                    else {\n                        this._rtTone.material.setUniform('u_texture', this._rtOutput);\n                    }\n                    this._scene.renderImages([this._rtTone]);\n                }\n                if (this._rtDebugMesh) {\n                    _scene.renderCamera(this._camera, [this._rtDebugMesh], false);\n                }\n                _scene.endFrame();\n                return [2];\n            });\n        });\n    };\n    RayTracingApp.prototype._renderGBuffer = function () {\n        var _this = this;\n        this._scene.setRenderTarget(this._gBufferRT);\n        var lightMeshes = this._scene.lights.map(function (light) { return light.requireLightMesh(_this._gbufferLightMaterial); }).filter(function (m) { return !!m; });\n        this._scene.renderCamera(this._camera, __spreadArrays([\n            this._rtManager.gBufferMesh\n        ], lightMeshes));\n    };\n    RayTracingApp.prototype._computeRTSS = function () {\n        this._scene.computeUnits([this._rtManager.rtUnit]);\n    };\n    RayTracingApp.prototype._computeDenoise = function () {\n        var _a = this._denoiseRTs, current = _a.current, pre = _a.pre, final = _a.final;\n        this._denoiseTemporUnit.setUniform('u_pre', pre);\n        this._denoiseTemporUnit.setUniform('u_current', this._rtOutput);\n        this._denoiseTemporUnit.setUniform('u_output', current);\n        this._denoiseSpaceUnit.setUniform('u_preFilter', current);\n        this._denoiseSpaceUnit.setUniform('u_output', final);\n        this._scene.computeUnits([this._denoiseTemporUnit, this._denoiseSpaceUnit]);\n        this._denoiseRTs.pre = final;\n        this._denoiseRTs.final = pre;\n        this._rtTone.material.setUniform('u_texture', final);\n    };\n    RayTracingApp.prototype._showGBufferResult = function () {\n        this._scene.setRenderTarget(null);\n        this._scene.renderImages([this._gBufferDebugMesh]);\n    };\n    RayTracingApp.prototype._showBVH = function () {\n        this._scene.setRenderTarget(null);\n        this._scene.renderCamera(this._camera, __spreadArrays(this._scene.cullCamera(this._camera), [\n            this._rtManager.bvhDebugMesh\n        ]));\n    };\n    RayTracingApp.prototype._connectGBufferRenderTexture = function (material) {\n        material.setUniform('u_gbPositionMetalOrSpec', this._gBufferRT, 'positionMetalOrSpec');\n        material.setUniform('u_gbBaseColorRoughOrGloss', this._gBufferRT, 'baseColorRoughOrGloss');\n        material.setUniform('u_gbNormalGlass', this._gBufferRT, 'normalGlass');\n        material.setUniform('u_gbMeshIndexMatIndexMatType', this._gBufferRT, 'meshIndexMatIndexMatType');\n    };\n    return RayTracingApp;\n}());\nexports.default = RayTracingApp;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmF5VHJhY2luZ0FwcC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlJheVRyYWNpbmdBcHAudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUEscUNBQW1DO0FBQ25DLGdDQUFrQztBQUNsQyxxQ0FBNkY7QUFFN0YsSUFBTSxTQUFTLEdBQUcsaUNBQWlDLENBQUM7QUFDcEQsSUFBTSxZQUFZLEdBQUcsR0FBRyxDQUFDO0FBRXpCLFNBQVMsU0FBUyxDQUFDLFFBQW1DO0lBQ3BELElBQU0sT0FBTyxHQUFHLHdWQU9mLENBQUM7SUFFRixJQUFNLEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzFDLEdBQUcsQ0FBQyxTQUFTLEdBQUcsT0FBTyxDQUFDO0lBQ3hCLFFBQVEsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBRS9CLElBQU0sVUFBVSxHQUFHLFFBQVEsQ0FBQyxhQUFhLENBQUMsYUFBYSxDQUFRLENBQUM7SUFDaEUsVUFBVSxDQUFDLGdCQUFnQixDQUFDLFFBQVEsRUFBRSxVQUFDLEtBQVU7UUFDL0MsSUFBTSxLQUFLLEdBQVcsS0FBSyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUM7UUFDekMsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQ2xCLENBQUMsQ0FBQyxDQUFDO0lBRUgsT0FBTyxHQUFHLENBQUM7QUFDYixDQUFDO0FBRUQ7SUFBQTtRQWlCVSxnQkFBVyxHQUFXLENBQUMsQ0FBQztRQUN4QixjQUFTLEdBQVcsUUFBUSxDQUFDO0lBNk52QyxDQUFDO0lBM05jLDRCQUFJLEdBQWpCOzs7Ozs7O3dCQUNFLFNBQVMsQ0FBQyxVQUFDLEtBQUs7NEJBQ2QsT0FBTyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQTs0QkFDbEIsS0FBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7NEJB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QUFVLENBQUMsMkJBQTJCLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSx1QkFBdUIsQ0FBQyxDQUFDO1FBQzNGLFFBQVEsQ0FBQyxVQUFVLENBQUMsaUJBQWlCLEVBQUUsSUFBSSxDQUFDLFVBQVUsRUFBRSxhQUFhLENBQUMsQ0FBQztRQUN2RSxRQUFRLENBQUMsVUFBVSxDQUFDLDhCQUE4QixFQUFFLElBQUksQ0FBQyxVQUFVLEVBQUUsMEJBQTBCLENBQUMsQ0FBQztJQUNuRyxDQUFDO0lBQ0gsb0JBQUM7QUFBRCxDQUFDLEFBL09ELElBK09DIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBSYXlUcmFjaW5nQXBwLnRzXG4gKiBcbiAqIEBBdXRob3IgIDogaGlrYXJpZGFpKGhpa2FyaWRhaUB0ZW5jZW50LmNvbSlcbiAqIEBEYXRlICAgIDogNi8xMS8yMDIxLCA1OjU2OjMwIFBNXG4qL1xuaW1wb3J0ICdzZWxlY3QtcHVyZS9kaXN0L2luZGV4LmpzJztcbmltcG9ydCAqIGFzIEggZnJvbSAnLi4vc3JjL2luZGV4JztcbmltcG9ydCB7RGVidWdJbmZvLCBkZWJ1Z1JheSwgZGVidWdSYXlTaGFkb3csIGRlYnVnUmF5U2hhZG93cywgc2FtcGxlQ2lyY2xlfSBmcm9tICcuL2RlYnVnQ3MnO1xuXG5jb25zdCBNT0RFTF9TUkMgPSAnL2Fzc2V0cy9tb2RlbHMvd2FsbHMvc2NlbmUuZ2x0Zic7XG5jb25zdCBNQVhfU0FNUExFUlMgPSAyNTY7XG5cbmZ1bmN0aW9uIGFkZFNlbGVjdChvbkNoYW5nZTogKG9wdGlvbnM6IHN0cmluZykgPT4gdm9pZCkge1xuICBjb25zdCBkb21UZXh0ID0gYFxuPHNlbGVjdC1wdXJlIG5hbWU9XCJWaWV3IE1vZGVcIiBpZD1cInZpZXctbW9kZVwiIHN0eWxlPVwicG9zaXRpb246YWJzb2x1dGU7cmlnaHQ6MDt3aWR0aDoxMjhweDtcIj5cbiAgPG9wdGlvbi1wdXJlIHZhbHVlPVwicmVzdWx0XCI+UmVzdWx0PC9vcHRpb24tcHVyZT5cbiAgPG9wdGlvbi1wdXJlIHZhbHVlPVwiYnZoXCI+U2hvdyBCVkg8L29wdGlvbi1wdXJlPlxuICA8b3B0aW9uLXB1cmUgdmFsdWU9XCJnYnVmZmVyXCI+U2hvdyBHQnVmZmVyPC9vcHRpb24tcHVyZT5cbiAgPG9wdGlvbi1wdXJlIHZhbHVlPVwib3JpZ2luXCI+T3JpZ2luPC9vcHRpb24tcHVyZT5cbjwvc2VsZWN0LXB1cmU+XG4gIGA7XG5cbiAgY29uc3QgZG9tID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG4gIGRvbS5pbm5lckhUTUwgPSBkb21UZXh0O1xuICBkb2N1bWVudC5ib2R5LmFwcGVuZENoaWxkKGRvbSk7XG5cbiAgY29uc3Qgc2VsZWN0UHVyZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJ3NlbGVjdC1wdXJlJykgYXMgYW55O1xuICBzZWxlY3RQdXJlLmFkZEV2ZW50TGlzdGVuZXIoJ2NoYW5nZScsIChldmVudDogYW55KSA9PiB7XG4gICAgY29uc3QgdmFsdWU6IHN0cmluZyA9IGV2ZW50LnRhcmdldC52YWx1ZTtcbiAgICBvbkNoYW5nZSh2YWx1ZSk7XG4gIH0pO1xuXG4gIHJldHVybiBkb207XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFJheVRyYWNpbmdBcHAge1xuICBwcml2YXRlIF9zY2VuZTogSC5TY2VuZTtcbiAgcHJpdmF0ZSBfY2FtQ29udHJvbDogSC5Ob2RlQ29udHJvbDtcbiAgcHJpdmF0ZSBfY2FtZXJhOiBILkNhbWVyYTtcbiAgcHJpdmF0ZSBfbW9kZWw6IEguSUdsVEZSZXNvdXJjZTtcbiAgcHJpdmF0ZSBfbm9pc2VUZXg6IEguVGV4dHVyZTtcbiAgcHJpdmF0ZSBfZ0J1ZmZlclJUOiBILlJlbmRlclRleHR1cmU7XG4gIHByaXZhdGUgX2didWZmZXJMaWdodE1hdGVyaWFsOiBILk1hdGVyaWFsO1xuICBwcml2YXRlIF9nQnVmZmVyRGVidWdNZXNoOiBILkltYWdlTWVzaDtcbiAgcHJpdmF0ZSBfcnRNYW5hZ2VyOiBILlJheVRyYWNpbmdNYW5hZ2VyO1xuICBwcml2YXRlIF9ydE91dHB1dDogSC5SZW5kZXJUZXh0dXJlO1xuICBwcml2YXRlIF9kZW5vaXNlUlRzOiB7Y3VycmVudDogSC5SZW5kZXJUZXh0dXJlLCBwcmU6IEguUmVuZGVyVGV4dHVyZSwgZmluYWw6IEguUmVuZGVyVGV4dHVyZX07XG4gIHByaXZhdGUgX2Rlbm9pc2VUZW1wb3JVbml0OiBILkNvbXB1dGVVbml0O1xuICBwcml2YXRlIF9kZW5vaXNlU3BhY2VVbml0OiBILkNvbXB1dGVVbml0O1xuICBwcml2YXRlIF9ydFRvbmU6IEguSW1hZ2VNZXNoO1xuICBwcml2YXRlIF9ydERlYnVnSW5mbzogRGVidWdJbmZvO1xuICBwcml2YXRlIF9ydERlYnVnTWVzaDogSC5NZXNoO1xuICBwcml2YXRlIF9mcmFtZUNvdW50OiBudW1iZXIgPSAwO1xuICBwcml2YXRlIF92aWV3TW9kZTogc3RyaW5nID0gJ3Jlc3VsdCc7XG5cbiAgcHVibGljIGFzeW5jIGluaXQoKSB7XG4gICAgYWRkU2VsZWN0KCh2YWx1ZSkgPT4ge1xuICAgICAgY29uc29sZS5sb2codmFsdWUpXG4gICAgICB0aGlzLl92aWV3TW9kZSA9IHZhbHVlO1xuICAgICAgdGhpcy5fZnJhbWVDb3VudCA9IDA7XG4gICAgfSk7XG5cbiAgICBjb25zdCB7cmVuZGVyRW52fSA9IEg7XG5cbiAgICBjb25zdCBfc2NlbmUgPSB0aGlzLl9zY2VuZSA9IG5ldyBILlNjZW5lKCk7XG4gICAgY29uc3Qgcm9vdE5vZGUgPSB0aGlzLl9zY2VuZS5yb290Tm9kZSA9IG5ldyBILk5vZGUoKTtcbiAgICB0aGlzLl9jYW1Db250cm9sID0gbmV3IEguTm9kZUNvbnRyb2woJ2ZyZWUnKTtcblxuICAgIHJvb3ROb2RlLmFkZENoaWxkKHRoaXMuX2NhbWVyYSA9IG5ldyBILkNhbWVyYShcbiAgICAgIHtjbGVhckNvbG9yOiBbMCwgMSwgMCwgMV19LFxuICAgICAge25lYXI6IDAuMDEsIGZhcjogMTAwLCBmb3Y6IE1hdGguUEkgLyAzfVxuICAgICkpO1xuICAgIHRoaXMuX2NhbWVyYS5wb3Muc2V0KFswLCAwLCA2XSk7XG5cbiAgICB0aGlzLl9ub2lzZVRleCA9IGF3YWl0IEgucmVzb3VyY2UubG9hZCh7dHlwZTogJ3RleHR1cmUnLCBuYW1lOiAnbm9pc2UudGV4Jywgc3JjOiAnL2Fzc2V0cy90ZXh0dXJlcy9ub2lzZS1yZ2JhLndlYnAnfSk7XG4gICAgY29uc3QgbW9kZWwgPSB0aGlzLl9tb2RlbCA9IGF3YWl0IEgucmVzb3VyY2UubG9hZCh7dHlwZTogJ2dsdGYnLCBuYW1lOiAnc2NlbmUuZ2x0ZicsIHNyYzogTU9ERUxfU1JDfSk7XG4gICAgaWYgKG1vZGVsLmNhbWVyYXMubGVuZ3RoKSB7XG4gICAgICB0aGlzLl9jYW1lcmEgPSBtb2RlbC5jYW1lcmFzWzBdO1xuICAgIH1cbiAgICBfc2NlbmUucm9vdE5vZGUuYWRkQ2hpbGQobW9kZWwucm9vdE5vZGUpO1xuXG4gICAgdGhpcy5fZ0J1ZmZlclJUID0gbmV3IEguUmVuZGVyVGV4dHVyZSh7XG4gICAgICB3aWR0aDogcmVuZGVyRW52LndpZHRoLFxuICAgICAgaGVpZ2h0OiByZW5kZXJFbnYuaGVpZ2h0LFxuICAgICAgY29sb3JzOiBbXG4gICAgICAgIHtuYW1lOiAncG9zaXRpb25NZXRhbE9yU3BlYycsIGZvcm1hdDogJ3JnYmExNmZsb2F0J30sXG4gICAgICAgIHtuYW1lOiAnYmFzZUNvbG9yUm91Z2hPckdsb3NzJywgZm9ybWF0OiAncmdiYTE2ZmxvYXQnfSxcbiAgICAgICAge25hbWU6ICdub3JtYWxHbGFzcycsIGZvcm1hdDogJ3JnYmExNmZsb2F0J30sXG4gICAgICAgIHtuYW1lOiAnbWVzaEluZGV4TWF0SW5kZXhNYXRUeXBlJywgZm9ybWF0OiAncmdiYTh1aW50J31cbiAgICAgIF0sXG4gICAgICBkZXB0aFN0ZW5jaWw6IHtuZWVkU3RlbmNpbDogZmFsc2V9XG4gICAgfSk7XG5cbiAgICB0aGlzLl9nYnVmZmVyTGlnaHRNYXRlcmlhbCA9IG5ldyBILk1hdGVyaWFsKEguYnVpbGRpbkVmZmVjdHMuclJUR0J1ZmZlckxpZ2h0KTtcbiAgICB0aGlzLl9nQnVmZmVyRGVidWdNZXNoID0gbmV3IEguSW1hZ2VNZXNoKG5ldyBILk1hdGVyaWFsKEguYnVpbGRpbkVmZmVjdHMuaVJUR1Nob3cpKTtcbiAgICB0aGlzLl9jb25uZWN0R0J1ZmZlclJlbmRlclRleHR1cmUodGhpcy5fZ0J1ZmZlckRlYnVnTWVzaC5tYXRlcmlhbCk7XG5cbiAgICB0aGlzLl9ydE91dHB1dCA9IG5ldyBILlJlbmRlclRleHR1cmUoe1xuICAgICAgd2lkdGg6IHJlbmRlckVudi53aWR0aCxcbiAgICAgIGhlaWdodDogcmVuZGVyRW52LmhlaWdodCxcbiAgICAgIGZvckNvbXB1dGU6IHRydWUsXG4gICAgICBjb2xvcnM6IFt7bmFtZTogJ2NvbG9yJywgZm9ybWF0OiAncmdiYTE2ZmxvYXQnfV1cbiAgICB9KTtcblxuICAgIHRoaXMuX2Rlbm9pc2VSVHMgPSB7XG4gICAgICBjdXJyZW50OiBuZXcgSC5SZW5kZXJUZXh0dXJlKHtcbiAgICAgICAgd2lkdGg6IHJlbmRlckVudi53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiByZW5kZXJFbnYuaGVpZ2h0LFxuICAgICAgICBmb3JDb21wdXRlOiB0cnVlLFxuICAgICAgICBjb2xvcnM6IFt7bmFtZTogJ2NvbG9yJywgZm9ybWF0OiAncmdiYTE2ZmxvYXQnfV1cbiAgICAgIH0pLFxuICAgICAgcHJlOiBuZXcgSC5SZW5kZXJUZXh0dXJlKHtcbiAgICAgICAgd2lkdGg6IHJlbmRlckVudi53aWR0aCxcbiAgICAgICAgaGVpZ2h0OiByZW5kZXJFbnYuaGVpZ2h0LFxuICAgICAgICBmb3JDb21wdXRlOiB0cnVlLFxuICAgICAgICBjb2xvcnM6IFt7bmFtZTogJ2NvbG9yJywgZm9ybWF0OiAncmdiYTE2ZmxvYXQnfV1cbiAgICAgIH0pLFxuICAgICAgZmluYWw6IG5ldyBILlJlbmRlclRleHR1cmUoe1xuICAgICAgICB3aWR0aDogcmVuZGVyRW52LndpZHRoLFxuICAgICAgICBoZWlnaHQ6IHJlbmRlckVudi5oZWlnaHQsXG4gICAgICAgIGZvckNvbXB1dGU6IHRydWUsXG4gICAgICAgIGNvbG9yczogW3tuYW1lOiAnY29sb3InLCBmb3JtYXQ6ICdyZ2JhMTZmbG9hdCd9XVxuICAgICAgfSlcbiAgICB9O1xuICAgIHRoaXMuX2Rlbm9pc2VTcGFjZVVuaXQgPSBuZXcgSC5Db21wdXRlVW5pdChcbiAgICAgIEguYnVpbGRpbkVmZmVjdHMuY1JURGVub2lzZVNwYWNlLFxuICAgICAge3g6IE1hdGguY2VpbChyZW5kZXJFbnYud2lkdGggLyAxNiksIHk6IE1hdGguY2VpbChyZW5kZXJFbnYuaGVpZ2h0IC8gMTYpfSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHtXSU5ET1dfU0laRTogN31cbiAgICApO1xuICAgIHRoaXMuX2Rlbm9pc2VUZW1wb3JVbml0ID0gbmV3IEguQ29tcHV0ZVVuaXQoXG4gICAgICBILmJ1aWxkaW5FZmZlY3RzLmNSVERlbm9pc2VUZW1wb3IsXG4gICAgICB7eDogTWF0aC5jZWlsKHJlbmRlckVudi53aWR0aCAvIDE2KSwgeTogTWF0aC5jZWlsKHJlbmRlckVudi5oZWlnaHQgLyAxNil9XG4gICAgKTtcbiAgICB0aGlzLl9jb25uZWN0R0J1ZmZlclJlbmRlclRleHR1cmUodGhpcy5fZGVub2lzZVNwYWNlVW5pdCk7XG5cbiAgICB0aGlzLl9ydFRvbmUgPSBuZXcgSC5JbWFnZU1lc2gobmV3IEguTWF0ZXJpYWwoSC5idWlsZGluRWZmZWN0cy5pVG9uZSkpO1xuXG4gICAgdGhpcy5fcnREZWJ1Z0luZm8gPSBuZXcgRGVidWdJbmZvKCk7XG4gICAgXG4gICAgdGhpcy5fY2FtQ29udHJvbC5jb250cm9sKHRoaXMuX2NhbWVyYSwgbmV3IEguTm9kZSgpKTtcbiAgICB0aGlzLl9jYW1Db250cm9sLm9uQ2hhbmdlID0gKCkgPT4ge1xuICAgICAgdGhpcy5fZnJhbWVDb3VudCA9IDA7XG4gICAgfTtcblxuICAgIGF3YWl0IHRoaXMuX2ZyYW1lKDE2KTtcblxuICAgIC8vIEgucmVuZGVyRW52LmNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgYXN5bmMgKGUpID0+IHtcbiAgICAgIC8vIGNvbnN0IHtjbGllbnRYLCBjbGllbnRZfSA9IGU7XG4gICAgICAvLyBjb25zdCB7cmF5cywgbWVzaH0gPSBhd2FpdCB0aGlzLl9ydERlYnVnSW5mby5zaG93RGVidWdJbmZvKFtjbGllbnRYLCBjbGllbnRZXSwgWzEwLCAxMF0sIFs0LCAyXSk7XG4gICAgICAvLyBjb25zb2xlLmxvZyhyYXlzKTtcbiAgICAgIC8vIHRoaXMuX3J0RGVidWdNZXNoID0gbWVzaDtcbiAgICAgIC8vIGF3YWl0IHRoaXMuX2ZyYW1lKDE2KTtcbiAgICAgIC8vIHJheXMuc2xpY2UoMCwgMSkuZm9yRWFjaChyYXkgPT4gZGVidWdSYXkocmF5LCB0aGlzLl9ydE1hbmFnZXIuYnZoLCB0aGlzLl9ydE1hbmFnZXIuZ0J1ZmZlck1lc2guZ2VvbWV0cnkuZ2V0VmFsdWVzKCdwb3NpdGlvbicpLmNwdSBhcyBGbG9hdDMyQXJyYXkpKTtcbiAgICAvLyB9KVxuXG4gICAgLy8gZGVidWdSYXlTaGFkb3dzKHJheXMuZmlsdGVyKHJheSA9PiByYXkub3JpZ2luWzNdKS5zbGljZSgwLCAxKSwgdGhpcy5fcnRNYW5hZ2VyLmJ2aCwgdGhpcy5fcnRNYW5hZ2VyLmdCdWZmZXJNZXNoLmdlb21ldHJ5LmdldFZhbHVlcygncG9zaXRpb24nKS5jcHUgYXMgRmxvYXQzMkFycmF5KTtcbiAgICAvLyBjb25zdCB7cmF5cywgbWVzaH0gPSBhd2FpdCB0aGlzLl9ydERlYnVnSW5mby5zaG93RGVidWdJbmZvKFsxNjAsIDM2MF0sIFsyMDAsIDQwMF0pO1xuICAgIC8vIGNvbnNvbGUubG9nKHJheXMpXG4gICAgLy8gZGVidWdSYXlTaGFkb3dzKHJheXMuZmlsdGVyKHJheSA9PiByYXkub3JpZ2luWzNdKS5zbGljZSgwLCAxKSwgdGhpcy5fcnRNYW5hZ2VyLmJ2aCwgdGhpcy5fcnRNYW5hZ2VyLmdCdWZmZXJNZXNoLmdlb21ldHJ5LmdldFZhbHVlcygncG9zaXRpb24nKS5jcHUgYXMgRmxvYXQzMkFycmF5KTtcbiAgICAvLyB0aGlzLl9ydERlYnVnTWVzaCA9IG1lc2g7XG4gICAgLy8gcmF5cy5mb3JFYWNoKHJheSA9PiBkZWJ1Z1JheShyYXksIHRoaXMuX3J0TWFuYWdlci5idmgsIHRoaXMuX3J0TWFuYWdlci5nQnVmZmVyTWVzaC5nZW9tZXRyeS5nZXRWYWx1ZXMoJ3Bvc2l0aW9uJykuY3B1IGFzIEZsb2F0MzJBcnJheSkpO1xuICAgIC8vIGF3YWl0IHRoaXMuX2ZyYW1lKCk7XG5cbiAgICAvLyBhd2FpdCB0aGlzLl9mcmFtZSgxNik7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgdXBkYXRlKGR0OiBudW1iZXIpIHtcbiAgICBhd2FpdCB0aGlzLl9mcmFtZShkdCk7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9mcmFtZShkdDogbnVtYmVyKSB7XG4gICAgY29uc3Qge19zY2VuZX0gPSB0aGlzO1xuICAgIHRoaXMuX2ZyYW1lQ291bnQgKz0gMTtcbiAgICBjb25zdCBwcmVXZWlnaHQgPSAodGhpcy5fZnJhbWVDb3VudCAtIDEpIC8gdGhpcy5fZnJhbWVDb3VudDtcblxuICAgIGlmIChwcmVXZWlnaHQgPiAuOTk5KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgX3NjZW5lLnN0YXJ0RnJhbWUoZHQpO1xuICAgIFxuICAgIGNvbnN0IGZpcnN0ID0gIXRoaXMuX3J0TWFuYWdlcjtcbiAgICBpZiAoZmlyc3QpIHtcbiAgICAgIHRoaXMuX3J0TWFuYWdlciA9IG5ldyBILlJheVRyYWNpbmdNYW5hZ2VyKCk7XG4gICAgICB0aGlzLl9ydE1hbmFnZXIucHJvY2Vzcyh0aGlzLl9zY2VuZS5jdWxsQ2FtZXJhKHRoaXMuX2NhbWVyYSksIHRoaXMuX3J0T3V0cHV0KTtcbiAgICAgIHRoaXMuX3J0TWFuYWdlci5ydFVuaXQuc2V0VW5pZm9ybSgndV9ub2lzZScsIHRoaXMuX25vaXNlVGV4KTtcbiAgICAgIHRoaXMuX2Nvbm5lY3RHQnVmZmVyUmVuZGVyVGV4dHVyZSh0aGlzLl9ydE1hbmFnZXIucnRVbml0KTtcbiAgICAgIC8vIHRoaXMuX3J0RGVidWdJbmZvLnNldHVwKHRoaXMuX3J0TWFuYWdlcik7XG4gICAgfVxuXG4gICAgdGhpcy5fcnRNYW5hZ2VyLnJ0VW5pdC5zZXRVbmlmb3JtKCd1X3JhbmRvbXMnLCBuZXcgRmxvYXQzMkFycmF5KDE2KS5tYXAodiA9PiBNYXRoLnJhbmRvbSgpKSk7XG4gICAgdGhpcy5fZGVub2lzZVRlbXBvclVuaXQuc2V0VW5pZm9ybSgndV9wcmVXZWlnaHQnLCBuZXcgRmxvYXQzMkFycmF5KFtwcmVXZWlnaHRdKSk7XG5cbiAgICBpZiAodGhpcy5fdmlld01vZGUgPT09ICdidmgnKSB7XG4gICAgICB0aGlzLl9zaG93QlZIKCk7XG4gICAgfSBlbHNlIGlmICh0aGlzLl92aWV3TW9kZSA9PT0gJ2didWZmZXInKSB7XG4gICAgICB0aGlzLl9yZW5kZXJHQnVmZmVyKCk7XG4gICAgICB0aGlzLl9zaG93R0J1ZmZlclJlc3VsdCgpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9yZW5kZXJHQnVmZmVyKCk7XG4gICAgICB0aGlzLl9zY2VuZS5zZXRSZW5kZXJUYXJnZXQobnVsbCk7ICBcbiAgICAgIHRoaXMuX2NvbXB1dGVSVFNTKCk7XG5cbiAgICAgIGlmICh0aGlzLl92aWV3TW9kZSA9PT0gJ3Jlc3VsdCcpIHtcbiAgICAgICAgdGhpcy5fY29tcHV0ZURlbm9pc2UoKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMuX3J0VG9uZS5tYXRlcmlhbC5zZXRVbmlmb3JtKCd1X3RleHR1cmUnLCB0aGlzLl9ydE91dHB1dCk7XG4gICAgICB9XG5cbiAgICAgIHRoaXMuX3NjZW5lLnJlbmRlckltYWdlcyhbdGhpcy5fcnRUb25lXSk7XG4gICAgfVxuICAgIFxuXG4gICAgLy8gaWYgKGZpcnN0KSB7XG4gICAgLy8gICB0aGlzLl9ydERlYnVnSW5mby5ydW4oX3NjZW5lKTtcbiAgICAvLyB9XG5cbiAgICBpZiAodGhpcy5fcnREZWJ1Z01lc2gpIHtcbiAgICAgIF9zY2VuZS5yZW5kZXJDYW1lcmEodGhpcy5fY2FtZXJhLCBbdGhpcy5fcnREZWJ1Z01lc2hdLCBmYWxzZSk7XG4gICAgfVxuXG4gICAgX3NjZW5lLmVuZEZyYW1lKCk7XG4gIH1cblxuICBwcml2YXRlIF9yZW5kZXJHQnVmZmVyKCkge1xuICAgIHRoaXMuX3NjZW5lLnNldFJlbmRlclRhcmdldCh0aGlzLl9nQnVmZmVyUlQpO1xuICAgIGNvbnN0IGxpZ2h0TWVzaGVzID0gdGhpcy5fc2NlbmUubGlnaHRzLm1hcChsaWdodCA9PiBsaWdodC5yZXF1aXJlTGlnaHRNZXNoKHRoaXMuX2didWZmZXJMaWdodE1hdGVyaWFsKSkuZmlsdGVyKG0gPT4gISFtKTtcbiAgICB0aGlzLl9zY2VuZS5yZW5kZXJDYW1lcmEodGhpcy5fY2FtZXJhLCBbXG4gICAgICB0aGlzLl9ydE1hbmFnZXIuZ0J1ZmZlck1lc2gsXG4gICAgICAuLi5saWdodE1lc2hlc1xuICAgIF0pO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jb21wdXRlUlRTUygpIHtcbiAgICB0aGlzLl9zY2VuZS5jb21wdXRlVW5pdHMoW3RoaXMuX3J0TWFuYWdlci5ydFVuaXRdKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY29tcHV0ZURlbm9pc2UoKSB7XG4gICAgY29uc3Qge2N1cnJlbnQsIHByZSwgZmluYWx9ID0gdGhpcy5fZGVub2lzZVJUcztcbiAgICB0aGlzLl9kZW5vaXNlVGVtcG9yVW5pdC5zZXRVbmlmb3JtKCd1X3ByZScsIHByZSk7XG4gICAgdGhpcy5fZGVub2lzZVRlbXBvclVuaXQuc2V0VW5pZm9ybSgndV9jdXJyZW50JywgdGhpcy5fcnRPdXRwdXQpO1xuICAgIHRoaXMuX2Rlbm9pc2VUZW1wb3JVbml0LnNldFVuaWZvcm0oJ3Vfb3V0cHV0JywgY3VycmVudCk7XG5cbiAgICB0aGlzLl9kZW5vaXNlU3BhY2VVbml0LnNldFVuaWZvcm0oJ3VfcHJlRmlsdGVyJywgY3VycmVudCk7XG4gICAgdGhpcy5fZGVub2lzZVNwYWNlVW5pdC5zZXRVbmlmb3JtKCd1X291dHB1dCcsIGZpbmFsKTtcblxuICAgIHRoaXMuX3NjZW5lLmNvbXB1dGVVbml0cyhbdGhpcy5fZGVub2lzZVRlbXBvclVuaXQsIHRoaXMuX2Rlbm9pc2VTcGFjZVVuaXRdKTtcblxuICAgIHRoaXMuX2Rlbm9pc2VSVHMucHJlID0gZmluYWw7XG4gICAgdGhpcy5fZGVub2lzZVJUcy5maW5hbCA9IHByZTtcblxuICAgIHRoaXMuX3J0VG9uZS5tYXRlcmlhbC5zZXRVbmlmb3JtKCd1X3RleHR1cmUnLCBmaW5hbCk7XG4gIH1cblxuICBwcml2YXRlIF9zaG93R0J1ZmZlclJlc3VsdCgpIHtcbiAgICB0aGlzLl9zY2VuZS5zZXRSZW5kZXJUYXJnZXQobnVsbCk7XG4gICAgdGhpcy5fc2NlbmUucmVuZGVySW1hZ2VzKFt0aGlzLl9nQnVmZmVyRGVidWdNZXNoXSk7XG4gIH1cblxuICBwcml2YXRlIF9zaG93QlZIKCkge1xuICAgIHRoaXMuX3NjZW5lLnNldFJlbmRlclRhcmdldChudWxsKTtcbiAgICB0aGlzLl9zY2VuZS5yZW5kZXJDYW1lcmEodGhpcy5fY2FtZXJhLCBbXG4gICAgICAuLi50aGlzLl9zY2VuZS5jdWxsQ2FtZXJhKHRoaXMuX2NhbWVyYSksXG4gICAgICB0aGlzLl9ydE1hbmFnZXIuYnZoRGVidWdNZXNoXG4gICAgXSk7XG4gIH1cblxuICBwcml2YXRlIF9jb25uZWN0R0J1ZmZlclJlbmRlclRleHR1cmUobWF0ZXJpYWw6IEguTWF0ZXJpYWwgfCBILkNvbXB1dGVVbml0KSB7XG4gICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgndV9nYlBvc2l0aW9uTWV0YWxPclNwZWMnLCB0aGlzLl9nQnVmZmVyUlQsICdwb3NpdGlvbk1ldGFsT3JTcGVjJyk7XG4gICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgndV9nYkJhc2VDb2xvclJvdWdoT3JHbG9zcycsIHRoaXMuX2dCdWZmZXJSVCwgJ2Jhc2VDb2xvclJvdWdoT3JHbG9zcycpO1xuICAgIG1hdGVyaWFsLnNldFVuaWZvcm0oJ3VfZ2JOb3JtYWxHbGFzcycsIHRoaXMuX2dCdWZmZXJSVCwgJ25vcm1hbEdsYXNzJyk7XG4gICAgbWF0ZXJpYWwuc2V0VW5pZm9ybSgndV9nYk1lc2hJbmRleE1hdEluZGV4TWF0VHlwZScsIHRoaXMuX2dCdWZmZXJSVCwgJ21lc2hJbmRleE1hdEluZGV4TWF0VHlwZScpO1xuICB9XG59XG4iXX0=","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sampleCircle = exports.debugRayShadow = exports.debugRayShadows = exports.debugRay = exports.DebugInfo = void 0;\nvar H = require(\"../src\");\nvar DebugInfo = (function () {\n    function DebugInfo() {\n    }\n    DebugInfo.prototype.setup = function (rtManager) {\n        var renderEnv = H.renderEnv;\n        var size = this._size = 4 * 7;\n        this._cpu = new Float32Array(size * renderEnv.width * renderEnv.height);\n        this._gpu = H.createGPUBuffer(this._cpu, GPUBufferUsage.STORAGE | GPUBufferUsage.COPY_SRC);\n        this._view = H.createGPUBufferBySize(size * renderEnv.width * renderEnv.height * 4, GPUBufferUsage.MAP_READ | GPUBufferUsage.COPY_DST);\n        this._rtManager = rtManager;\n        this._rtManager.rtUnit.setUniform('u_debugInfo', this._cpu, this._gpu);\n    };\n    DebugInfo.prototype.run = function (scene) {\n        scene.copyBuffer(this._gpu, this._view, this._cpu.byteLength);\n    };\n    DebugInfo.prototype.showDebugInfo = function (point1, len, step) {\n        return __awaiter(this, void 0, void 0, function () {\n            var data, rays, positions, colors, indexes, geometry, material, mesh;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4, this._view.mapAsync(GPUMapMode.READ)];\n                    case 1:\n                        _a.sent();\n                        data = new Float32Array(this._view.getMappedRange());\n                        rays = this._decodeDebugInfo(data, point1, len, step);\n                        positions = new Float32Array(rays.length * 6 * 3);\n                        colors = new Float32Array(rays.length * 6 * 3);\n                        indexes = new Uint32Array(rays.length * 6);\n                        rays.forEach(function (_a, index) {\n                            var preOrigin = _a.preOrigin, preDir = _a.preDir, origin = _a.origin, dir = _a.dir, nextOrigin = _a.nextOrigin, nextDir = _a.nextDir;\n                            var po = index * 3 * 6;\n                            var io = index * 6;\n                            positions.set(preOrigin.slice(0, 3), po);\n                            positions.set(preDir.slice(0, 3), po + 3);\n                            colors.set([1, 0, 0], po);\n                            colors.set([1, 0, 0], po + 3);\n                            positions.set(origin.slice(0, 3), po + 6);\n                            positions.set(dir.slice(0, 3), po + 9);\n                            colors.set([0, 1, 0], po + 6);\n                            colors.set([0, 1, 0], po + 9);\n                            positions.set(nextOrigin.slice(0, 3), po + 12);\n                            positions.set(nextDir.slice(0, 3), po + 15);\n                            colors.set([0, 0, 1], po + 12);\n                            colors.set([0, 0, 1], po + 15);\n                            indexes.set([index * 3, index * 3 + 1, index * 3 + 2, index * 3 + 3, index * 3 + 4, index * 3 + 5], io);\n                        });\n                        geometry = new H.Geometry([\n                            {\n                                layout: {\n                                    arrayStride: 3 * 4,\n                                    attributes: [{\n                                            name: 'position',\n                                            shaderLocation: 0,\n                                            offset: 0,\n                                            format: 'float32x3'\n                                        }],\n                                },\n                                data: positions\n                            },\n                            {\n                                layout: {\n                                    arrayStride: 3 * 4,\n                                    attributes: [{\n                                            name: 'color_0',\n                                            shaderLocation: 1,\n                                            offset: 0,\n                                            format: 'float32x3'\n                                        }],\n                                },\n                                data: colors\n                            }\n                        ], indexes, rays.length * 6);\n                        material = new H.Material(H.buildinEffects.rColor, { u_color: new Float32Array([1, 1, 1]) }, undefined, { cullMode: 'none', primitiveType: 'line-list', depthCompare: 'always' });\n                        mesh = new H.Mesh(geometry, material);\n                        this._view.unmap();\n                        return [2, { rays: rays, mesh: mesh }];\n                }\n            });\n        });\n    };\n    DebugInfo.prototype._decodeDebugInfo = function (view, point1, len, step) {\n        var res = [];\n        var logs = [];\n        for (var y = point1[1]; y < point1[1] + len[1] * step[1]; y += step[1]) {\n            for (var x = point1[0]; x < point1[0] + len[0] * step[0]; x += step[0]) {\n                var index = y * H.renderEnv.width + x;\n                var offset = index * this._size;\n                res.push({\n                    preOrigin: view.slice(offset, offset + 4),\n                    preDir: view.slice(offset + 4, offset + 8),\n                    origin: view.slice(offset + 8, offset + 12),\n                    dir: view.slice(offset + 12, offset + 16),\n                    nextOrigin: view.slice(offset + 16, offset + 20),\n                    nextDir: view.slice(offset + 20, offset + 24),\n                    normal: view.slice(offset + 24, offset + 28)\n                });\n            }\n        }\n        console.log(logs.join('\\n'));\n        return res;\n    };\n    return DebugInfo;\n}());\nexports.DebugInfo = DebugInfo;\nvar plotS = [];\nfunction debugRay(rayInfo, bvh, positions) {\n    var ray = {\n        origin: rayInfo.origin,\n        dir: rayInfo.dir,\n        invDir: new Float32Array(3)\n    };\n    H.math.vec3.div(ray.invDir, new Float32Array([1, 1, 1]), ray.dir);\n    console.log('ray info', rayInfo);\n    console.log('ray', ray);\n    var fragInfo = hitTest(bvh, ray, positions);\n    console.log(fragInfo);\n}\nexports.debugRay = debugRay;\nfunction debugRayShadows(rayInfos, bvh, positions) {\n    plotS = [];\n    rayInfos.forEach(function (ray) { return debugRayShadow(ray, bvh, positions); });\n    console.log('Show[\\n' + plotS.join(',\\n') + '\\n]');\n}\nexports.debugRayShadows = debugRayShadows;\nfunction debugRayShadow(rayInfo, bvh, positions) {\n    var ray = {\n        origin: rayInfo.origin,\n        dir: rayInfo.dir,\n        invDir: new Float32Array(3)\n    };\n    H.math.vec3.div(ray.invDir, new Float32Array([1, 1, 1]), ray.dir);\n    var maxT = rayInfo.dir[3];\n    console.log('rayInfo', rayInfo);\n    console.log('ray maxT', ray, maxT);\n    console.log(ray.origin.map(function (v, i) { return v + ray.dir[i] * maxT; }));\n    plotS.push(\"ParametricPlot3D[{\" + ray.dir[0] + \"t + \" + ray.origin[0] + \", \" + ray.dir[1] + \"t + \" + ray.origin[1] + \", \" + ray.dir[2] + \"t + \" + ray.origin[2] + \"}, {t, 0, \" + maxT + \"}]\");\n    var fragInfo = hitTestShadow(bvh, ray, rayInfo.preOrigin[0], positions);\n    console.log(fragInfo);\n}\nexports.debugRayShadow = debugRayShadow;\nfunction sampleCircle(pi) {\n    var p = [2.0 * pi[0] - 1.0, 2.0 * pi[1] - 1.0,];\n    console.log('start', pi.slice(0, 2), p);\n    var greater = Math.abs(p[0]) > Math.abs(p[1]);\n    var r;\n    var theta;\n    if (greater) {\n        r = p[0];\n        theta = 0.25 * Math.PI * p[1] / p[0];\n    }\n    else {\n        r = p[1];\n        theta = Math.PI * (0.5 - 0.25 * p[0] / p[1]);\n    }\n    var x = r * Math.cos(theta);\n    var y = r * Math.sin(theta);\n    console.log(r, theta, Math.cos(theta), Math.sin(theta));\n    console.log(x, y, Math.sqrt(1 - x * x - y * y));\n}\nexports.sampleCircle = sampleCircle;\nvar EPS = 0.005;\n;\n;\n;\n;\nfunction boxHitTest(ray, max, min) {\n    var t1 = H.math.vec3.sub(new Float32Array(3), min, ray.origin);\n    H.math.vec3.mul(t1, t1, ray.invDir);\n    var t2 = H.math.vec3.sub(new Float32Array(3), max, ray.origin);\n    H.math.vec3.mul(t2, t2, ray.invDir);\n    var tvmin = H.math.vec3.min(new Float32Array(3), t1, t2);\n    var tvmax = H.math.vec3.max(new Float32Array(3), t1, t2);\n    var tmin = Math.max(tvmin[0], Math.max(tvmin[1], tvmin[2]));\n    var tmax = Math.min(tvmax[0], Math.min(tvmax[1], tvmax[2]));\n    if (tmax - tmin < -EPS) {\n        return -1.;\n    }\n    if (tmin > -EPS) {\n        return tmin + EPS;\n    }\n    return tmax + EPS;\n}\nfunction decodeChild(index) {\n    return {\n        isLeaf: (index >> 31) !== 0,\n        offset: (index << 1) >> 1,\n    };\n}\nfunction getBVHNodeInfo(bvh, index) {\n    var realOffset = index * 4;\n    var data0 = bvh.buffer.slice(realOffset, realOffset + 4);\n    var data1 = bvh.buffer.slice(realOffset + 4, realOffset + 8);\n    var child0 = new Uint32Array(data0.buffer, 0, 1)[0];\n    var child1 = new Uint32Array(data1.buffer, 0, 1)[0];\n    return {\n        child0Index: child0,\n        child1Index: child1,\n        min: data0.slice(1),\n        max: data1.slice(1)\n    };\n}\nfunction hitTest(bvh, ray, positions) {\n    var fragInfo = {\n        hit: false,\n        t: Infinity,\n        hitPoint: null,\n        weights: null\n    };\n    var nodeStack = Array(bvh.maxDepth);\n    nodeStack[0] = 0;\n    var stackDepth = 0;\n    while (stackDepth >= 0) {\n        var _a = decodeChild(nodeStack[stackDepth]), isLeaf = _a.isLeaf, offset = _a.offset;\n        stackDepth -= 1;\n        if (isLeaf) {\n            var info = leafHitTest(bvh, ray, positions, offset);\n            console.log('leaf hit', info.hit && info.t < fragInfo.t);\n            if (info.hit && info.t < fragInfo.t) {\n                fragInfo = info;\n            }\n            continue;\n        }\n        var node = getBVHNodeInfo(bvh, offset);\n        var hited = boxHitTest(ray, node.max, node.min);\n        console.log('box hit', offset, node, hited, !(hited < 0 || hited > fragInfo.t));\n        if (hited < 0) {\n            continue;\n        }\n        stackDepth += 1;\n        nodeStack[stackDepth] = node.child0Index;\n        stackDepth += 1;\n        nodeStack[stackDepth] = node.child1Index;\n    }\n    return fragInfo;\n}\nfunction getBVHLeafInfo(bvh, offset) {\n    var realOffset = offset * 4;\n    var data = new Uint32Array(bvh.buffer.buffer, realOffset * 4, 4);\n    return {\n        primitives: data[0],\n        indexes: data.slice(1)\n    };\n}\nfunction triangleHitTest(ray, leaf, positions) {\n    var info = {\n        hit: false,\n        t: Infinity,\n        hitPoint: null,\n        weights: null\n    };\n    var indexes = leaf.indexes;\n    var p0 = positions.slice(indexes[0] * 4, indexes[0] * 4 + 4);\n    var p1 = positions.slice(indexes[1] * 4, indexes[1] * 4 + 4);\n    var p2 = positions.slice(indexes[2] * 4, indexes[2] * 4 + 4);\n    var e0 = H.math.vec3.sub(new Float32Array(3), p1, p0);\n    var e1 = H.math.vec3.sub(new Float32Array(3), p2, p0);\n    var p = H.math.vec3.cross(new Float32Array(3), ray.dir, e1);\n    var det = H.math.vec3.dot(e0, p);\n    var t = H.math.vec3.sub(new Float32Array(3), ray.origin, p0);\n    if (det < 0) {\n        H.math.vec3.scale(t, t, -1);\n        det = -det;\n    }\n    if (det < 0.0001) {\n        return info;\n    }\n    var u = H.math.vec3.dot(t, p);\n    if (u < 0. || u > det) {\n        return info;\n    }\n    var q = H.math.vec3.cross(new Float32Array(3), t, e0);\n    var v = H.math.vec3.dot(ray.dir, q);\n    if (v < 0 || v + u - det > 0) {\n        return info;\n    }\n    var lt = H.math.vec3.dot(e1, q);\n    if (lt < 0.) {\n        return info;\n    }\n    var invDet = 1. / det;\n    var hitPoint = H.math.vec3.add(new Float32Array(3), ray.origin, H.math.vec3.scale(new Float32Array(3), ray.dir, lt * invDet));\n    var weights = H.math.vec3.scale(new Float32Array(3), new Float32Array([0., u, v]), invDet);\n    weights[0] = 1. - weights[1] - weights[2];\n    info.hit = true;\n    info.weights = weights;\n    info.hitPoint = hitPoint;\n    info.t = lt * invDet;\n    return info;\n}\nfunction leafHitTest(bvh, ray, positions, offset) {\n    var leaf = getBVHLeafInfo(bvh, offset);\n    var info = {\n        hit: false,\n        t: Infinity,\n        hitPoint: null,\n        weights: null\n    };\n    console.log(new Uint32Array([(offset + 0) | 0x80000000])[0], leaf);\n    for (var i = 0; i < leaf.primitives; i = i + 1) {\n        leaf = getBVHLeafInfo(bvh, offset + i);\n        var cInfo = triangleHitTest(ray, leaf, positions);\n        console.log('triangle hit', new Uint32Array([(offset + i) | 0x80000000])[0], cInfo, cInfo.hit && cInfo.t < info.t);\n        if (cInfo.hit && cInfo.t < info.t) {\n            info = cInfo;\n        }\n    }\n    return info;\n}\nfunction hitTestShadow(bvh, ray, maxT, positions) {\n    var fragInfo = {\n        hit: false,\n        t: maxT,\n        hitPoint: null,\n        weights: null\n    };\n    var nodeStack = Array(bvh.maxDepth);\n    nodeStack[0] = 0;\n    var stackDepth = 0;\n    while (stackDepth >= 0) {\n        var _a = decodeChild(nodeStack[stackDepth]), isLeaf = _a.isLeaf, offset = _a.offset;\n        stackDepth -= 1;\n        if (isLeaf) {\n            var info = leafHitTest(bvh, ray, positions, offset);\n            console.log('leaf hit', info.hit);\n            if (info.hit && info.t < maxT) {\n                return info;\n            }\n            continue;\n        }\n        var node = getBVHNodeInfo(bvh, offset);\n        var hited = boxHitTest(ray, node.max, node.min);\n        console.log('box hit', offset, node.child0Index, node.child1Index, node.max, node.min, hited);\n        if (hited < 0) {\n            continue;\n        }\n        stackDepth += 1;\n        nodeStack[stackDepth] = node.child0Index;\n        stackDepth += 1;\n        nodeStack[stackDepth] = node.child1Index;\n    }\n    return fragInfo;\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGVidWdDcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImRlYnVnQ3MudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0EsMEJBQTRCO0FBYTVCO0lBQUE7SUF3SUEsQ0FBQztJQWpJUSx5QkFBSyxHQUFaLFVBQWEsU0FBOEI7UUFDbEMsSUFBQSxTQUFTLEdBQUksQ0FBQyxVQUFMLENBQU07UUFDdEIsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWhDLElBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxZQUFZLENBQUMsSUFBSSxHQUFHLFNBQVMsQ0FBQyxLQUFLLEdBQUcsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3hFLElBQUksQ0FBQyxJQUFJLEdBQUcsQ0FBQyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsSUFBSSxFQUFFLGNBQWMsQ0FBQyxPQUFPLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBQzNGLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLHFCQUFxQixDQUFDLElBQUksR0FBRyxTQUFTLENBQUMsS0FBSyxHQUFHLFNBQVMsQ0FBQyxNQUFNLEdBQUcsQ0FBQyxFQUFFLGNBQWMsQ0FBQyxRQUFRLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDO1FBRXZJLElBQUksQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFDO1FBQzVCLElBQUksQ0FBQyxVQUFVLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUE7SUFDeEUsQ0FBQztJQUVNLHVCQUFHLEdBQVYsVUFBVyxLQUFjO1FBQ3ZCLEtBQUssQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsS0FBSyxFQUFFLElBQUksQ0FBQyxJQUFJLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDaEUsQ0FBQztJQUVZLGlDQUFhLEdBQTFCLFVBQ0UsTUFBd0IsRUFDeEIsR0FBcUIsRUFDckIsSUFBc0I7Ozs7OzRCQUt0QixXQUFNLElBQUksQ0FBQyxLQUFLLENBQUMsUUFBUSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsRUFBQTs7d0JBQTFDLFNBQTBDLENBQUM7d0JBQ3JDLElBQUksR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsS0FBSyxDQUFDLGNBQWMsRUFBRSxDQUFDLENBQUM7d0JBQ3JELElBQUksR0FBRyxJQUFJLENBQUMsZ0JBQWdCLENBQUMsSUFBSSxFQUFFLE1BQU0sRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7d0JBRXRELFNBQVMsR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFDbEQsTUFBTSxHQUFHLElBQUksWUFBWSxDQUFDLElBQUksQ0FBQyxNQUFNLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO3dCQUMvQyxPQUFPLEdBQUcsSUFBSSxXQUFXLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLENBQUMsQ0FBQzt3QkFFakQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFDLEVBQXFELEVBQUUsS0FBSztnQ0FBM0QsU0FBUyxlQUFBLEVBQUUsTUFBTSxZQUFBLEVBQUUsTUFBTSxZQUFBLEVBQUUsR0FBRyxTQUFBLEVBQUUsVUFBVSxnQkFBQSxFQUFFLE9BQU8sYUFBQTs0QkFDaEUsSUFBTSxFQUFFLEdBQUcsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7NEJBQ3pCLElBQU0sRUFBRSxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7NEJBRXJCLFNBQVMsQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7NEJBQ3pDLFNBQVMsQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUMxQyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQzs0QkFDMUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUM5QixTQUFTLENBQUMsR0FBRyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFDMUMsU0FBUyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUM7NEJBQ3ZDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQzs0QkFDOUIsTUFBTSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLEVBQUUsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDOzRCQUM5QixTQUFTLENBQUMsR0FBRyxDQUFDLFVBQVUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FBRyxFQUFFLENBQUMsQ0FBQzs0QkFDL0MsU0FBUyxDQUFDLEdBQUcsQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUMsRUFBRSxDQUFDLENBQUMsRUFBRSxFQUFFLEdBQUcsRUFBRSxDQUFDLENBQUM7NEJBQzVDLE1BQU0sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxFQUFFLEVBQUUsR0FB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Q0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdEQsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUN0RCxJQUFJLENBQUMsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsR0FBRyxDQUFDLEdBQUcsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUM1RCxJQUFJLEdBQUcsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQyxDQUFDO0lBQ2pDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsTUFBTSxFQUFFLEVBQUUsQ0FBQyxDQUFDO0lBRTdELElBQUksR0FBRyxHQUFHLENBQUMsRUFBRTtRQUNYLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDNUIsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDO0tBQ1o7SUFFRCxJQUFJLEdBQUcsR0FBRyxNQUFNLEVBQUU7UUFDaEIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUVELElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFFOUIsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxHQUFHLEVBQUU7UUFDckIsT0FBTyxJQUFJLENBQUM7S0FDYjtJQUVELElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUM7SUFDdEQsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFLcEMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsRUFBRTtRQUM1QixPQUFPLElBQUksQ0FBQztLQUNiO0lBRUQsSUFBSSxFQUFFLEdBQUcsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsRUFBRSxDQUFDLENBQUMsQ0FBQztJQUVoQyxJQUFJLEVBQUUsR0FBRyxFQUFFLEVBQUU7UUFDWCxPQUFPLElBQUksQ0FBQztLQUNiO0lBRUQsSUFBSSxNQUFNLEdBQUcsRUFBRSxHQUFHLEdBQUcsQ0FBQztJQUN0QixJQUFJLFFBQVEsR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxHQUFHLENBQzVCLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxNQUFNLEVBQy9CLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxFQUFFLEVBQUUsR0FBRyxNQUFNLENBQUMsQ0FDN0MsQ0FBQztJQUNsQixJQUFJLE9BQU8sR0FBRyxDQUFDLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxLQUFLLENBQUMsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsSUFBSSxZQUFZLENBQUMsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLEVBQUUsTUFBTSxDQUFpQixD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LENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQyxDQUFDLEdBQUcsSUFBSSxFQUFFO2dCQUM3QixPQUFPLElBQUksQ0FBQzthQUNiO1lBRUQsU0FBUztTQUNWO1FBRUQsSUFBTSxJQUFJLEdBQUcsY0FBYyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsQ0FBQztRQUN6QyxJQUFNLEtBQUssR0FBRyxVQUFVLENBQUMsR0FBRyxFQUFFLElBQUksQ0FBQyxHQUFHLEVBQUUsSUFBSSxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBRWxELE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxFQUFFLE1BQU0sRUFBRSxJQUFJLENBQUMsV0FBVyxFQUFFLElBQUksQ0FBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLEdBQUcsRUFBRSxJQUFJLENBQUMsR0FBRyxFQUFFLEtBQUssQ0FBQyxDQUFDO1FBRTlGLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRTtZQUNiLFNBQVM7U0FDVjtRQUVELFVBQVUsSUFBSSxDQUFDLENBQUM7UUFDaEIsU0FBUyxDQUFDLFVBQVUsQ0FBQyxHQUFHLElBQUksQ0FBQyxXQUFXLENBQUM7UUFDekMsVUFBVSxJQUFJLENBQUMsQ0FBQztRQUNoQixTQUFTLENBQUMsVUFBVSxDQUFDLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQztLQUMxQztJQUVELE9BQU8sUUFBUSxDQUFDO0FBQ2xCLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBGaWxlICAgOiBkZWJ1Z0NTLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDYvMjYvMjAyMSwgNzo0MDozMiBQTVxuICovXG5pbXBvcnQgeyB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCAqIGFzIEggZnJvbSAnLi4vc3JjJztcbmltcG9ydCB7IEJvdW5kcyB9IGZyb20gJy4uL3NyYy9leHRlbnNpb24vQlZIJztcblxuaW50ZXJmYWNlIElEZWJ1Z1BpeGVsIHtcbiAgcHJlT3JpZ2luOiBGbG9hdDMyQXJyYXk7XG4gIHByZURpcjogRmxvYXQzMkFycmF5O1xuICBvcmlnaW46IEZsb2F0MzJBcnJheTtcbiAgZGlyOiBGbG9hdDMyQXJyYXk7XG4gIG5leHRPcmlnaW46IEZsb2F0MzJBcnJheTtcbiAgbmV4dERpcjogRmxvYXQzMkFycmF5O1xuICBub3JtYWw6IEZsb2F0MzJBcnJheTtcbn1cblxuZXhwb3J0IGNsYXNzIERlYnVnSW5mbyB7XG4gIHByb3RlY3RlZCBfY3B1OiBGbG9hdDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfZ3B1OiBHUFVCdWZmZXI7XG4gIHByb3RlY3RlZCBfdmlldzogR1BVQnVmZmVyO1xuICBwcm90ZWN0ZWQgX3NpemU6IG51bWJlcjtcbiAgcHJvdGVjdGVkIF9ydE1hbmFnZXI6IEguUmF5VHJhY2luZ01hbmFnZXJcblxuICBwdWJsaWMgc2V0dXAocnRNYW5hZ2VyOiBILlJheVRyYWNpbmdNYW5hZ2VyKSB7XG4gICAgY29uc3Qge3JlbmRlckVudn0gPSBIO1xuICAgIGNvbnN0IHNpemUgPSB0aGlzLl9zaXplID0gNCAqIDc7XG5cbiAgICB0aGlzLl9jcHUgPSBuZXcgRmxvYXQzMkFycmF5KHNpemUgKiByZW5kZXJFbnYud2lkdGggKiByZW5kZXJFbnYuaGVpZ2h0KTtcbiAgICB0aGlzLl9ncHUgPSBILmNyZWF0ZUdQVUJ1ZmZlcih0aGlzLl9jcHUsIEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX1NSQyk7XG4gICAgdGhpcy5fdmlldyA9IEguY3JlYXRlR1BVQnVmZmVyQnlTaXplKHNpemUgKiByZW5kZXJFbnYud2lkdGggKiByZW5kZXJFbnYuaGVpZ2h0ICogNCwgR1BVQnVmZmVyVXNhZ2UuTUFQX1JFQUQgfCBHUFVCdWZmZXJVc2FnZS5DT1BZX0RTVCk7XG5cbiAgICB0aGlzLl9ydE1hbmFnZXIgPSBydE1hbmFnZXI7XG4gICAgdGhpcy5fcnRNYW5hZ2VyLnJ0VW5pdC5zZXRVbmlmb3JtKCd1X2RlYnVnSW5mbycsIHRoaXMuX2NwdSwgdGhpcy5fZ3B1KVxuICB9XG5cbiAgcHVibGljIHJ1bihzY2VuZTogSC5TY2VuZSkge1xuICAgIHNjZW5lLmNvcHlCdWZmZXIodGhpcy5fZ3B1LCB0aGlzLl92aWV3LCB0aGlzLl9jcHUuYnl0ZUxlbmd0aCk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgc2hvd0RlYnVnSW5mbyhcbiAgICBwb2ludDE6IFtudW1iZXIsIG51bWJlcl0sXG4gICAgbGVuOiBbbnVtYmVyLCBudW1iZXJdLFxuICAgIHN0ZXA6IFtudW1iZXIsIG51bWJlcl1cbiAgKTogUHJvbWlzZTx7XG4gICAgcmF5czogSURlYnVnUGl4ZWxbXSxcbiAgICBtZXNoOiBILk1lc2hcbiAgfT4ge1xuICAgIGF3YWl0IHRoaXMuX3ZpZXcubWFwQXN5bmMoR1BVTWFwTW9kZS5SRUFEKTtcbiAgICBjb25zdCBkYXRhID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLl92aWV3LmdldE1hcHBlZFJhbmdlKCkpO1xuICAgIGNvbnN0IHJheXMgPSB0aGlzLl9kZWNvZGVEZWJ1Z0luZm8oZGF0YSwgcG9pbnQxLCBsZW4sIHN0ZXApO1xuXG4gICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShyYXlzLmxlbmd0aCAqIDYgKiAzKTtcbiAgICBjb25zdCBjb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KHJheXMubGVuZ3RoICogNiAqIDMpO1xuICAgIGNvbnN0IGluZGV4ZXMgPSBuZXcgVWludDMyQXJyYXkocmF5cy5sZW5ndGggKiA2KTtcblxuICAgIHJheXMuZm9yRWFjaCgoe3ByZU9yaWdpbiwgcHJlRGlyLCBvcmlnaW4sIGRpciwgbmV4dE9yaWdpbiwgbmV4dERpcn0sIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBwbyA9IGluZGV4ICogMyAqIDY7XG4gICAgICBjb25zdCBpbyA9IGluZGV4ICogNjtcblxuICAgICAgcG9zaXRpb25zLnNldChwcmVPcmlnaW4uc2xpY2UoMCwgMyksIHBvKTtcbiAgICAgIHBvc2l0aW9ucy5zZXQocHJlRGlyLnNsaWNlKDAsIDMpLCBwbyArIDMpO1xuICAgICAgY29sb3JzLnNldChbMSwgMCwgMF0sIHBvKTtcbiAgICAgIGNvbG9ycy5zZXQoWzEsIDAsIDBdLCBwbyArIDMpO1xuICAgICAgcG9zaXRpb25zLnNldChvcmlnaW4uc2xpY2UoMCwgMyksIHBvICsgNik7XG4gICAgICBwb3NpdGlvbnMuc2V0KGRpci5zbGljZSgwLCAzKSwgcG8gKyA5KTtcbiAgICAgIGNvbG9ycy5zZXQoWzAsIDEsIDBdLCBwbyArIDYpO1xuICAgICAgY29sb3JzLnNldChbMCwgMSwgMF0sIHBvICsgOSk7XG4gICAgICBwb3NpdGlvbnMuc2V0KG5leHRPcmlnaW4uc2xpY2UoMCwgMyksIHBvICsgMTIpO1xuICAgICAgcG9zaXRpb25zLnNldChuZXh0RGlyLnNsaWNlKDAsIDMpLCBwbyArIDE1KTtcbiAgICAgIGNvbG9ycy5zZXQoWzAsIDAsIDFdLCBwbyArIDEyKTtcbiAgICAgIGNvbG9ycy5zZXQoWzAsIDAsIDFdLCBwbyArIDE1KTtcbiAgICAgIGluZGV4ZXMuc2V0KFtpbmRleCAqIDMsIGluZGV4ICogMyArIDEsIGluZGV4ICogMyArIDIsIGluZGV4ICogMyArIDMsIGluZGV4ICogMyArIDQsIGluZGV4ICogMyArIDVdLCBpbyk7XG4gICAgfSk7XG5cbiAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBILkdlb21ldHJ5KFxuICAgICAgW1xuICAgICAgICB7XG4gICAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgICBhcnJheVN0cmlkZTogMyAqIDQsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbe1xuICAgICAgICAgICAgICBuYW1lOiAncG9zaXRpb24nLFxuICAgICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMCxcbiAgICAgICAgICAgICAgb2Zmc2V0OiAwLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDMnXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICB9LFxuICAgICAgICAgIGRhdGE6IHBvc2l0aW9uc1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgICBhcnJheVN0cmlkZTogMyAqIDQsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbe1xuICAgICAgICAgICAgICBuYW1lOiAnY29sb3JfMCcsXG4gICAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAxLFxuICAgICAgICAgICAgICBvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2Zsb2F0MzJ4MydcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YTogY29sb3JzXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBpbmRleGVzLFxuICAgICAgcmF5cy5sZW5ndGggKiA2XG4gICAgKTtcbiAgICBjb25zdCBtYXRlcmlhbCA9IG5ldyBILk1hdGVyaWFsKFxuICAgICAgSC5idWlsZGluRWZmZWN0cy5yQ29sb3IsXG4gICAgICB7dV9jb2xvcjogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgMV0pfSxcbiAgICAgIHVuZGVmaW5lZCxcbiAgICAgIHtjdWxsTW9kZTogJ25vbmUnLCBwcmltaXRpdmVUeXBlOiAnbGluZS1saXN0JywgZGVwdGhDb21wYXJlOiAnYWx3YXlzJ31cbiAgICApO1xuICAgIGNvbnN0IG1lc2ggPSBuZXcgSC5NZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG5cbiAgICB0aGlzLl92aWV3LnVubWFwKCk7XG5cbiAgICByZXR1cm4ge3JheXMsIG1lc2h9O1xuICB9XG5cbiAgcHJvdGVjdGVkIF9kZWNvZGVEZWJ1Z0luZm8oXG4gICAgdmlldzogRmxvYXQzMkFycmF5LFxuICAgIHBvaW50MTogW251bWJlciwgbnVtYmVyXSxcbiAgICBsZW46IFtudW1iZXIsIG51bWJlcl0sXG4gICAgc3RlcDogW251bWJlciwgbnVtYmVyXVxuICApIHtcbiAgICBjb25zdCByZXM6IElEZWJ1Z1BpeGVsW10gPSBbXTtcbiAgICBjb25zdCBsb2dzID0gW107XG5cbiAgICBmb3IgKGxldCB5ID0gcG9pbnQxWzFdOyB5IDwgcG9pbnQxWzFdICsgbGVuWzFdICogc3RlcFsxXTsgeSArPSBzdGVwWzFdKSB7XG4gICAgICBmb3IgKGxldCB4ID0gcG9pbnQxWzBdOyB4IDwgIHBvaW50MVswXSArIGxlblswXSAqIHN0ZXBbMF07IHggKz0gc3RlcFswXSkge1xuICAgICAgICBjb25zdCBpbmRleCA9IHkgKiBILnJlbmRlckVudi53aWR0aCArIHg7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGluZGV4ICogdGhpcy5fc2l6ZTtcbiAgICAgICAgcmVzLnB1c2goe1xuICAgICAgICAgIHByZU9yaWdpbjogdmlldy5zbGljZShvZmZzZXQsIG9mZnNldCArIDQpLFxuICAgICAgICAgIHByZURpcjogdmlldy5zbGljZShvZmZzZXQgKyA0LCBvZmZzZXQgKyA4KSxcbiAgICAgICAgICBvcmlnaW46IHZpZXcuc2xpY2Uob2Zmc2V0ICsgOCwgb2Zmc2V0ICsgMTIpLFxuICAgICAgICAgIGRpcjogdmlldy5zbGljZShvZmZzZXQgKyAxMiwgb2Zmc2V0ICsgMTYpLFxuICAgICAgICAgIG5leHRPcmlnaW46IHZpZXcuc2xpY2Uob2Zmc2V0ICsgMTYsIG9mZnNldCArIDIwKSxcbiAgICAgICAgICBuZXh0RGlyOiB2aWV3LnNsaWNlKG9mZnNldCArIDIwLCBvZmZzZXQgKyAyNCksXG4gICAgICAgICAgbm9ybWFsOiB2aWV3LnNsaWNlKG9mZnNldCArIDI0LCBvZmZzZXQgKyAyOClcbiAgICAgICAgfSBhcyBJRGVidWdQaXhlbCk7XG4gIFxuICAgICAgICAvLyBpZiAodmlld1tvZmZzZXQgKyAzXSkge1xuICAgICAgICAvLyAgIGxvZ3MucHVzaChgJ2hpdGVkJywgJHtbeCwgeV19LCAke1t2aWV3W29mZnNldCArIDE5XSwgdmlld1tvZmZzZXQgKyAyM11dfSwgJHt0aGlzLl9ydE1hbmFnZXIubWVzaGVzW3ZpZXdbb2Zmc2V0ICsgMTFdXS5uYW1lfSwgJHt2aWV3W29mZnNldCArIDE1XX0sICR7dGhpcy5fcnRNYW5hZ2VyLm1lc2hlc1t2aWV3W29mZnNldCArIDE5XV0ubmFtZX0sICR7dmlld1tvZmZzZXQgKyAyM119LCAke3ZpZXcuc2xpY2Uob2Zmc2V0ICsgMTYsIG9mZnNldCArIDE5KX1gKTtcbiAgICAgICAgLy8gfSBlbHNlIHtcbiAgICAgICAgLy8gICBsb2dzLnB1c2goYCdub3QgaGl0ZWQnLCAke1t4LCB5XX0sICR7W3ZpZXdbb2Zmc2V0ICsgMTldLCB2aWV3W29mZnNldCArIDIzXV19LCAke3ZpZXdbb2Zmc2V0ICsgN119YCk7XG4gICAgICAgIC8vIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBjb25zb2xlLmxvZyhsb2dzLmpvaW4oJ1xcbicpKTtcblxuICAgIHJldHVybiByZXM7XG4gIH1cbn1cblxubGV0IHBsb3RTOiBzdHJpbmdbXSA9IFtdO1xuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdSYXkocmF5SW5mbzoge29yaWdpbjogRmxvYXQzMkFycmF5LCBkaXI6IEZsb2F0MzJBcnJheX0sIGJ2aDogSC5CVkgsIHBvc2l0aW9uczogRmxvYXQzMkFycmF5KSB7XG4gIGNvbnN0IHJheTogUmF5ID0ge1xuICAgIG9yaWdpbjogcmF5SW5mby5vcmlnaW4sXG4gICAgZGlyOiByYXlJbmZvLmRpcixcbiAgICBpbnZEaXI6IG5ldyBGbG9hdDMyQXJyYXkoMylcbiAgfTtcbiAgSC5tYXRoLnZlYzMuZGl2KHJheS5pbnZEaXIsIG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIDFdKSwgcmF5LmRpcik7XG5cbiAgY29uc29sZS5sb2coJ3JheSBpbmZvJywgcmF5SW5mbyk7XG4gIGNvbnNvbGUubG9nKCdyYXknLCByYXkpO1xuXG4gIGNvbnN0IGZyYWdJbmZvID0gaGl0VGVzdChidmgsIHJheSwgcG9zaXRpb25zKTtcbiAgY29uc29sZS5sb2coZnJhZ0luZm8pO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVidWdSYXlTaGFkb3dzKFxuICByYXlJbmZvczoge29yaWdpbjogRmxvYXQzMkFycmF5LCBkaXI6IEZsb2F0MzJBcnJheSwgcHJlT3JpZ2luOiBGbG9hdDMyQXJyYXl9W10sIGJ2aDogSC5CVkgsIHBvc2l0aW9uczogRmxvYXQzMkFycmF5XG4pIHtcbiAgcGxvdFMgPSBbXTtcbiAgcmF5SW5mb3MuZm9yRWFjaChyYXkgPT4gZGVidWdSYXlTaGFkb3cocmF5LCBidmgsIHBvc2l0aW9ucykpO1xuICBjb25zb2xlLmxvZygnU2hvd1tcXG4nICsgcGxvdFMuam9pbignLFxcbicpICsgJ1xcbl0nKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGRlYnVnUmF5U2hhZG93KHJheUluZm86IHtvcmlnaW46IEZsb2F0MzJBcnJheSwgZGlyOiBGbG9hdDMyQXJyYXksIHByZU9yaWdpbjogRmxvYXQzMkFycmF5fSwgYnZoOiBILkJWSCwgcG9zaXRpb25zOiBGbG9hdDMyQXJyYXkpIHtcbiAgY29uc3QgcmF5OiBSYXkgPSB7XG4gICAgb3JpZ2luOiByYXlJbmZvLm9yaWdpbixcbiAgICBkaXI6IHJheUluZm8uZGlyLFxuICAgIGludkRpcjogbmV3IEZsb2F0MzJBcnJheSgzKVxuICB9O1xuICBILm1hdGgudmVjMy5kaXYocmF5LmludkRpciwgbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgMV0pLCByYXkuZGlyKTtcblxuICAvLyBmdW5jdGlvbiBSU0koY2VudGVyOiBhbnksIHJhZGl1czogbnVtYmVyKSB7XG4gIC8vICAgY29uc3QgcmVzOiBhbnlbXSA9IFtdO1xuXG4gIC8vICAgY29uc3QgcHN1YmMgPSB2ZWMzLnN1YihuZXcgRmxvYXQzMkFycmF5KDMpLCByYXkub3JpZ2luLCBjZW50ZXIpO1xuICAvLyAgIGNvbnN0IGRkb3Rwc3ViYyA9IHZlYzMuZG90KHJheS5kaXIsIHBzdWJjKTtcbiAgLy8gICBjb25zdCBkZXQgPSBNYXRoLnBvdyhkZG90cHN1YmMsIDIpIC0gdmVjMy5kb3QocHN1YmMsIHBzdWJjKSArIHJhZGl1cyAqIHJhZGl1cztcblxuICAvLyAgIGlmIChkZXQgPCAwKSB7XG4gIC8vICAgICByZXR1cm4gcmVzO1xuICAvLyAgIH1cblxuICAvLyAgIGNvbnN0IGQgPSB2ZWMzLmxlbmd0aChyYXkuZGlyKSAqIHZlYzMubGVuZ3RoKHJheS5kaXIpO1xuXG4gIC8vICAgY29uc3QgdHMgPSBbKC1kZG90cHN1YmMgKyBNYXRoLnNxcnQoZGV0KSkgLyBkLCAoLWRkb3Rwc3ViYyAtIE1hdGguc3FydChkZXQpKSAvIGRdO1xuXG4gIC8vICAgdHMuZm9yRWFjaCh0ID0+IHtcbiAgLy8gICAgIHJlcy5wdXNoKHQsIHZlYzMuc2NhbGVBbmRBZGQobmV3IEZsb2F0MzJBcnJheSgzKSwgcmF5Lm9yaWdpbiwgcmF5LmRpciwgdCkpO1xuICAvLyAgIH0pXG5cbiAgLy8gICByZXR1cm4gcmVzO1xuICAvLyB9XG5cbiAgLy8gY29uc3QgcnNpUG9pbnRzID0gUlNJKFsxLjcxLCAxLCA2LjA5XSwgMSk7XG4gIC8vIGNvbnNvbGUubG9nKHJzaVBvaW50cyk7XG4gIC8vIHBsb3RTLnB1c2goYEdyYXBoaWNzM0Rbe1JlZCwgUG9pbnRTaXplWzAuMV0sIFBvaW50W3ske3JzaVBvaW50c1sxXS5qb2luKCcsJyl9fV19XWApO1xuXG4gIGNvbnN0IG1heFQgPSByYXlJbmZvLmRpclszXTtcbiAgY29uc29sZS5sb2coJ3JheUluZm8nLCByYXlJbmZvKTtcbiAgY29uc29sZS5sb2coJ3JheSBtYXhUJywgcmF5LCBtYXhUKTtcbiAgY29uc29sZS5sb2cocmF5Lm9yaWdpbi5tYXAoKHYsIGkpID0+IHYgKyByYXkuZGlyW2ldICogbWF4VCkpO1xuXG4gIHBsb3RTLnB1c2goYFBhcmFtZXRyaWNQbG90M0RbeyR7cmF5LmRpclswXX10ICsgJHtyYXkub3JpZ2luWzBdfSwgJHtyYXkuZGlyWzFdfXQgKyAke3JheS5vcmlnaW5bMV19LCAke3JheS5kaXJbMl19dCArICR7cmF5Lm9yaWdpblsyXX19LCB7dCwgMCwgJHttYXhUfX1dYCk7XG4gIGNvbnN0IGZyYWdJbmZvID0gaGl0VGVzdFNoYWRvdyhidmgsIHJheSwgcmF5SW5mby5wcmVPcmlnaW5bMF0sIHBvc2l0aW9ucyk7XG4gIGNvbnNvbGUubG9nKGZyYWdJbmZvKTtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNhbXBsZUNpcmNsZShwaTogRmxvYXQzMkFycmF5KSB7XG4gIGxldCBwID0gWzIuMCAqIHBpWzBdIC0gMS4wLCAyLjAgKiBwaVsxXSAtIDEuMCwgXTtcbiAgY29uc29sZS5sb2coJ3N0YXJ0JywgcGkuc2xpY2UoMCwgMiksIHApO1xuICBsZXQgZ3JlYXRlciA9IE1hdGguYWJzKHBbMF0pID4gTWF0aC5hYnMocFsxXSk7XG4gIGxldCByOiBudW1iZXI7XG4gIGxldCB0aGV0YTogbnVtYmVyO1xuXG4gIGlmIChncmVhdGVyKSB7XG4gICAgciA9IHBbMF07XG4gICAgdGhldGEgPSAwLjI1ICogTWF0aC5QSSAqIHBbMV0gLyBwWzBdO1xuICB9IGVsc2Uge1xuICAgIHIgPSBwWzFdO1xuICAgIHRoZXRhID0gTWF0aC5QSSAqICgwLjUgLSAwLjI1ICogcFswXSAvIHBbMV0pO1xuICB9XG5cbiAgY29uc3QgeCA9IHIgKiBNYXRoLmNvcyh0aGV0YSk7XG4gIGNvbnN0IHkgPSByICogTWF0aC5zaW4odGhldGEpO1xuICBjb25zb2xlLmxvZyhyLCB0aGV0YSwgTWF0aC5jb3ModGhldGEpLCBNYXRoLnNpbih0aGV0YSkpO1xuICBjb25zb2xlLmxvZyh4LCB5LCBNYXRoLnNxcnQoMSAtIHggKiB4IC0geSAqIHkpKTtcbn1cblxuLy8gZXhwb3J0IGZ1bmN0aW9uIGRlYnVnQ2FtZXJhKGNhbWVyYTogSC5DYW1lcmEsIGJ2aDogSC5CVkgsIHBvc2l0aW9uczogRmxvYXQzMkFycmF5KSB7XG4vLyAgIGZvciAobGV0IGkgPSAwOyBpIDwgMTA7IGkgKz0gMSkge1xuLy8gICAgIGNvbnN0IHV2ID0gbmV3IEZsb2F0MzJBcnJheShbTWF0aC5yYW5kb20oKSAvIDIsIE1hdGgucmFuZG9tKCkgLyAyXSk7XG4vLyAgICAgY29uc3Qgc3NQb3MgPSBuZXcgRmxvYXQzMkFycmF5KFt1dlswXSAqIDIgLSAxLCAxIC0gdXZbMV0gKiAyLCAwLCAxXSk7XG4vLyAgICAgY29uc3Qgd29ybGRQb3MgPSBILm1hdGgudmVjNC50cmFuc2Zvcm1NYXQ0KG5ldyBGbG9hdDMyQXJyYXkoNCksIHNzUG9zLCBjYW1lcmEuaW52UHJvak1hdCk7XG4vLyAgICAgSC5tYXRoLnZlYzQudHJhbnNmb3JtTWF0NCh3b3JsZFBvcywgd29ybGRQb3MsIGNhbWVyYS5pbnZWaWV3TWF0KTtcbi8vICAgICBjb25zb2xlLmxvZyh3b3JsZFBvcylcbi8vICAgICBILm1hdGgudmVjNC5zY2FsZSh3b3JsZFBvcywgd29ybGRQb3MsIDEgLyB3b3JsZFBvc1szXSk7XG4vLyAgICAgY29uc3QgZGlyID0gSC5tYXRoLnZlYzMuc3ViKG5ldyBGbG9hdDMyQXJyYXkoMyksIHdvcmxkUG9zLnNsaWNlKDAsIDMpIGFzIEZsb2F0MzJBcnJheSwgY2FtZXJhLnBvcykgYXMgRmxvYXQzMkFycmF5O1xuLy8gICAgIEgubWF0aC52ZWMzLm5vcm1hbGl6ZShkaXIsIGRpcik7XG5cbi8vICAgICBjb25zb2xlLmxvZygndXYsIHNzUG9zLCB3b3JsZFBvcycsIHV2LCBzc1Bvcywgd29ybGRQb3MpO1xuXG4vLyAgICAgY29uc3QgcmF5OiBSYXkgPSB7XG4vLyAgICAgICBvcmlnaW46IGNhbWVyYS5wb3MsXG4vLyAgICAgICBkaXIsXG4vLyAgICAgICBpbnZEaXI6IG5ldyBGbG9hdDMyQXJyYXkoMylcbi8vICAgICB9O1xuLy8gICAgIEgubWF0aC52ZWMzLmRpdihyYXkuaW52RGlyLCBuZXcgRmxvYXQzMkFycmF5KFsxLCAxLCAxXSksIHJheS5kaXIpO1xuXG4vLyAgICAgY29uc3QgaGl0ZWROb2RlID0gaGl0VGVzdChidmgsIHJheSk7XG4vLyAgICAgY29uc29sZS5sb2coaGl0ZWROb2RlKTtcblxuLy8gICAgIGlmICghaGl0ZWROb2RlKSB7XG4vLyAgICAgICBjb250aW51ZTtcbi8vICAgICB9XG5cbi8vICAgICBpZiAoaGl0ZWROb2RlLmlzQ2hpbGQwTGVhZikge1xuLy8gICAgICAgY29uc29sZS5sb2cobGVhZkhpdFRlc3QoYnZoLCByYXksIHBvc2l0aW9ucywgaGl0ZWROb2RlLmNoaWxkME9mZnNldCkpO1xuLy8gICAgICAgY29udGludWU7XG4vLyAgICAgfVxuXG4vLyAgICAgaWYgKGhpdGVkTm9kZS5pc0NoaWxkMUxlYWYpIHtcbi8vICAgICAgIGNvbnNvbGUubG9nKGxlYWZIaXRUZXN0KGJ2aCwgcmF5LCBwb3NpdGlvbnMsIGhpdGVkTm9kZS5jaGlsZDFPZmZzZXQpKTtcbi8vICAgICB9XG4vLyAgIH1cbi8vIH1cblxuY29uc3QgRVBTID0gMC4wMDU7XG5cbmludGVyZmFjZSBSYXkge1xuICBvcmlnaW46IEZsb2F0MzJBcnJheTtcbiAgZGlyOiBGbG9hdDMyQXJyYXk7XG4gIGludkRpcjogRmxvYXQzMkFycmF5O1xufTtcblxuXG5pbnRlcmZhY2UgQlZITm9kZSB7XG4gIGNoaWxkMEluZGV4OiBudW1iZXI7XG4gIGNoaWxkMUluZGV4OiBudW1iZXI7XG4gIG1heDogRmxvYXQzMkFycmF5O1xuICBtaW46IEZsb2F0MzJBcnJheTtcbn07XG5cbmludGVyZmFjZSBCVkhMZWFmIHtcbiAgcHJpbWl0aXZlczogbnVtYmVyO1xuICBpbmRleGVzOiBVaW50MzJBcnJheTtcbn07XG5cbmludGVyZmFjZSBGcmFnbWVudEluZm8ge1xuICBoaXQ6IGJvb2xlYW47XG4gIHQ6IG51bWJlcjtcbiAgaGl0UG9pbnQ6IEZsb2F0MzJBcnJheTtcbiAgLy8gYXJlYWwgY29vcmRpbmF0ZXNcbiAgd2VpZ2h0czogRmxvYXQzMkFycmF5O1xufTtcblxuZnVuY3Rpb24gYm94SGl0VGVzdChyYXk6IFJheSwgbWF4OiBGbG9hdDMyQXJyYXksIG1pbjogRmxvYXQzMkFycmF5KTogbnVtYmVyIHtcbiAgbGV0IHQxID0gSC5tYXRoLnZlYzMuc3ViKG5ldyBGbG9hdDMyQXJyYXkoMyksIG1pbiwgcmF5Lm9yaWdpbik7XG4gIEgubWF0aC52ZWMzLm11bCh0MSwgdDEsIHJheS5pbnZEaXIpO1xuICBsZXQgdDIgPSBILm1hdGgudmVjMy5zdWIobmV3IEZsb2F0MzJBcnJheSgzKSwgbWF4LCByYXkub3JpZ2luKTtcbiAgSC5tYXRoLnZlYzMubXVsKHQyLCB0MiwgcmF5LmludkRpcik7XG4gIGxldCB0dm1pbiA9IEgubWF0aC52ZWMzLm1pbihuZXcgRmxvYXQzMkFycmF5KDMpLCB0MSwgdDIpO1xuICBsZXQgdHZtYXggPSBILm1hdGgudmVjMy5tYXgobmV3IEZsb2F0MzJBcnJheSgzKSwgdDEsIHQyKTtcbiAgbGV0IHRtaW4gPSBNYXRoLm1heCh0dm1pblswXSwgTWF0aC5tYXgodHZtaW5bMV0sIHR2bWluWzJdKSk7XG4gIGxldCB0bWF4ID0gTWF0aC5taW4odHZtYXhbMF0sIE1hdGgubWluKHR2bWF4WzFdLCB0dm1heFsyXSkpO1xuXG4gIC8vIGNvbnNvbGUubG9nKCdib3ggaGl0IHRlc3QnLCBtYXgsIG1pbiwgdDEsIHQyLCB0dm1heCwgdHZtaW4sIHRtYXgsIHRtaW4pO1xuXG4gIGlmICh0bWF4IC0gdG1pbiA8IC1FUFMpIHtcbiAgICByZXR1cm4gLTEuO1xuICB9XG5cbiAgaWYgKHRtaW4gPiAtRVBTKSB7XG4gICAgcmV0dXJuIHRtaW4gKyBFUFM7XG4gIH1cblxuICByZXR1cm4gdG1heCArIEVQUztcbn1cblxuZnVuY3Rpb24gZGVjb2RlQ2hpbGQoaW5kZXg6IG51bWJlcik6IHtpc0xlYWY6IGJvb2xlYW4sIG9mZnNldDogbnVtYmVyfSB7XG4gIHJldHVybiB7XG4gICAgaXNMZWFmOiAoaW5kZXggPj4gMzEpICE9PSAwLFxuICAgIG9mZnNldDogKGluZGV4IDw8IDEpID4+IDEsXG4gIH07XG59XG5cbmZ1bmN0aW9uIGdldEJWSE5vZGVJbmZvKGJ2aDogSC5CVkgsIGluZGV4OiBudW1iZXIpOiBCVkhOb2RlIHtcbiAgbGV0IHJlYWxPZmZzZXQgPSBpbmRleCAqIDQ7XG4gIGxldCBkYXRhMCA9IGJ2aC5idWZmZXIuc2xpY2UocmVhbE9mZnNldCwgcmVhbE9mZnNldCArIDQpO1xuICBsZXQgZGF0YTEgPSBidmguYnVmZmVyLnNsaWNlKHJlYWxPZmZzZXQgKyA0LCByZWFsT2Zmc2V0ICsgOCk7XG4gIGxldCBjaGlsZDAgPSBuZXcgVWludDMyQXJyYXkoZGF0YTAuYnVmZmVyLCAwLCAxKVswXTtcbiAgbGV0IGNoaWxkMSA9IG5ldyBVaW50MzJBcnJheShkYXRhMS5idWZmZXIsIDAsIDEpWzBdO1xuXG4gIHJldHVybiB7XG4gICAgY2hpbGQwSW5kZXg6IGNoaWxkMCxcbiAgICBjaGlsZDFJbmRleDogY2hpbGQxLFxuICAgIG1pbjogZGF0YTAuc2xpY2UoMSksXG4gICAgbWF4OiBkYXRhMS5zbGljZSgxKVxuICB9O1xufVxuXG5mdW5jdGlvbiBoaXRUZXN0KGJ2aDogSC5CVkgsIHJheTogUmF5LCBwb3NpdGlvbnM6IEZsb2F0MzJBcnJheSk6IEZyYWdtZW50SW5mbyB7XG4gIGxldCBmcmFnSW5mbzogRnJhZ21lbnRJbmZvID0ge1xuICAgIGhpdDogZmFsc2UsXG4gICAgdDogSW5maW5pdHksXG4gICAgaGl0UG9pbnQ6IG51bGwsXG4gICAgd2VpZ2h0czogbnVsbFxuICB9O1xuICBsZXQgbm9kZVN0YWNrOiBudW1iZXJbXSA9IEFycmF5KGJ2aC5tYXhEZXB0aCk7XG4gIG5vZGVTdGFja1swXSA9IDA7XG4gIGxldCBzdGFja0RlcHRoOiBudW1iZXIgPSAwO1xuXG4gIHdoaWxlIChzdGFja0RlcHRoID49IDApIHtcbiAgICBjb25zdCB7aXNMZWFmLCBvZmZzZXR9ID0gZGVjb2RlQ2hpbGQobm9kZVN0YWNrW3N0YWNrRGVwdGhdKTtcbiAgICBzdGFja0RlcHRoIC09IDE7XG5cbiAgICBpZiAoaXNMZWFmKSB7XG4gICAgICBjb25zdCBpbmZvID0gbGVhZkhpdFRlc3QoYnZoLCByYXksIHBvc2l0aW9ucywgb2Zmc2V0KTtcbiAgICAgIGNvbnNvbGUubG9nKCdsZWFmIGhpdCcsIGluZm8uaGl0ICYmIGluZm8udCA8IGZyYWdJbmZvLnQpO1xuXG4gICAgICBpZiAoaW5mby5oaXQgJiYgaW5mby50IDwgZnJhZ0luZm8udCkge1xuICAgICAgICBmcmFnSW5mbyA9IGluZm87XG4gICAgICB9XG5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGUgPSBnZXRCVkhOb2RlSW5mbyhidmgsIG9mZnNldCk7XG4gICAgY29uc3QgaGl0ZWQgPSBib3hIaXRUZXN0KHJheSwgbm9kZS5tYXgsIG5vZGUubWluKTtcbiAgICBjb25zb2xlLmxvZygnYm94IGhpdCcsIG9mZnNldCwgbm9kZSwgaGl0ZWQsICEoaGl0ZWQgPCAwIHx8IGhpdGVkID4gZnJhZ0luZm8udCkpO1xuXG4gICAgaWYgKGhpdGVkIDwgMCkge1xuICAgICAgY29udGludWU7XG4gICAgfVxuXG4gICAgc3RhY2tEZXB0aCArPSAxO1xuICAgIG5vZGVTdGFja1tzdGFja0RlcHRoXSA9IG5vZGUuY2hpbGQwSW5kZXg7XG4gICAgc3RhY2tEZXB0aCArPSAxO1xuICAgIG5vZGVTdGFja1tzdGFja0RlcHRoXSA9IG5vZGUuY2hpbGQxSW5kZXg7XG4gIH1cblxuICByZXR1cm4gZnJhZ0luZm87XG59XG5cbmZ1bmN0aW9uIGdldEJWSExlYWZJbmZvKGJ2aDogSC5CVkgsIG9mZnNldDogbnVtYmVyKTogQlZITGVhZiB7XG4gIGxldCByZWFsT2Zmc2V0ID0gb2Zmc2V0ICogNDtcbiAgbGV0IGRhdGEgPSBuZXcgVWludDMyQXJyYXkoYnZoLmJ1ZmZlci5idWZmZXIsIHJlYWxPZmZzZXQgKiA0LCA0KTtcblxuICByZXR1cm4ge1xuICAgIHByaW1pdGl2ZXM6IGRhdGFbMF0sXG4gICAgaW5kZXhlczogZGF0YS5zbGljZSgxKVxuICB9O1xufVxuXG5mdW5jdGlvbiB0cmlhbmdsZUhpdFRlc3QocmF5OiBSYXksIGxlYWY6IEJWSExlYWYsIHBvc2l0aW9uczogRmxvYXQzMkFycmF5KTogRnJhZ21lbnRJbmZvIHtcbiAgY29uc3QgaW5mbzogRnJhZ21lbnRJbmZvID0ge1xuICAgIGhpdDogZmFsc2UsXG4gICAgdDogSW5maW5pdHksXG4gICAgaGl0UG9pbnQ6IG51bGwsXG4gICAgd2VpZ2h0czogbnVsbFxuICB9O1xuICBsZXQgaW5kZXhlcyA9IGxlYWYuaW5kZXhlcztcbiAgbGV0IHAwID0gcG9zaXRpb25zLnNsaWNlKGluZGV4ZXNbMF0gKiA0LCBpbmRleGVzWzBdICogNCArIDQpO1xuICBsZXQgcDEgPSBwb3NpdGlvbnMuc2xpY2UoaW5kZXhlc1sxXSAqIDQsIGluZGV4ZXNbMV0gKiA0ICsgNCk7XG4gIGxldCBwMiA9IHBvc2l0aW9ucy5zbGljZShpbmRleGVzWzJdICogNCwgaW5kZXhlc1syXSAqIDQgKyA0KTtcblxuICBsZXQgZTAgPSBILm1hdGgudmVjMy5zdWIobmV3IEZsb2F0MzJBcnJheSgzKSwgcDEsIHAwKTtcbiAgbGV0IGUxID0gSC5tYXRoLnZlYzMuc3ViKG5ldyBGbG9hdDMyQXJyYXkoMyksIHAyLCBwMCk7XG4gIGxldCBwID0gSC5tYXRoLnZlYzMuY3Jvc3MobmV3IEZsb2F0MzJBcnJheSgzKSwgcmF5LmRpciwgZTEpO1xuICBsZXQgZGV0ID0gSC5tYXRoLnZlYzMuZG90KGUwLCBwKTtcbiAgbGV0IHQgPSBILm1hdGgudmVjMy5zdWIobmV3IEZsb2F0MzJBcnJheSgzKSwgcmF5Lm9yaWdpbiwgcDApO1xuXG4gIGlmIChkZXQgPCAwKSB7XG4gICAgSC5tYXRoLnZlYzMuc2NhbGUodCwgdCwgLTEpO1xuICAgIGRldCA9IC1kZXQ7XG4gIH1cblxuICBpZiAoZGV0IDwgMC4wMDAxKSB7XG4gICAgcmV0dXJuIGluZm87XG4gIH1cblxuICBsZXQgdSA9IEgubWF0aC52ZWMzLmRvdCh0LCBwKTtcblxuICBpZiAodSA8IDAuIHx8IHUgPiBkZXQpIHtcbiAgICByZXR1cm4gaW5mbztcbiAgfVxuXG4gIGxldCBxID0gSC5tYXRoLnZlYzMuY3Jvc3MobmV3IEZsb2F0MzJBcnJheSgzKSwgdCwgZTApO1xuICBsZXQgdiA9IEgubWF0aC52ZWMzLmRvdChyYXkuZGlyLCBxKTtcblxuICAvLyBwbG90Uy5wdXNoKGBHcmFwaGljczNEW1RyaWFuZ2xlW3t7JHtwMC5qb2luKCcsJyl9fSwgeyR7cDEuam9pbignLCcpfX0sIHske3AyLmpvaW4oJywnKX19fV1dYCk7XG4gIC8vIGNvbnNvbGUubG9nKGRldCwgdSwgdiwgdiArIHUgLSBkZXQsIEgubWF0aC52ZWMzLmRvdChlMSwgcSkgLyBkZXQpXG5cbiAgaWYgKHYgPCAwIHx8IHYgKyB1IC0gZGV0ID4gMCkge1xuICAgIHJldHVybiBpbmZvO1xuICB9XG4gIFxuICBsZXQgbHQgPSBILm1hdGgudmVjMy5kb3QoZTEsIHEpO1xuXG4gIGlmIChsdCA8IDAuKSB7XG4gICAgcmV0dXJuIGluZm87XG4gIH1cblxuICBsZXQgaW52RGV0ID0gMS4gLyBkZXQ7XG4gIGxldCBoaXRQb2ludCA9IEgubWF0aC52ZWMzLmFkZChcbiAgICBuZXcgRmxvYXQzMkFycmF5KDMpLCByYXkub3JpZ2luLFxuICAgIEgubWF0aC52ZWMzLnNjYWxlKG5ldyBGbG9hdDMyQXJyYXkoMyksIHJheS5kaXIsIGx0ICogaW52RGV0KVxuICApIGFzIEZsb2F0MzJBcnJheTtcbiAgbGV0IHdlaWdodHMgPSBILm1hdGgudmVjMy5zY2FsZShuZXcgRmxvYXQzMkFycmF5KDMpLCBuZXcgRmxvYXQzMkFycmF5KFswLiwgdSwgdl0pLCBpbnZEZXQpIGFzIEZsb2F0MzJBcnJheTtcbiAgd2VpZ2h0c1swXSA9IDEuIC0gd2VpZ2h0c1sxXSAtIHdlaWdodHNbMl07XG4gIFxuICBpbmZvLmhpdCA9IHRydWU7XG4gIGluZm8ud2VpZ2h0cyA9IHdlaWdodHM7XG4gIGluZm8uaGl0UG9pbnQgPSBoaXRQb2ludDtcbiAgaW5mby50ID0gbHQgKiBpbnZEZXQ7XG5cbiAgcmV0dXJuIGluZm87XG59XG5cbmZ1bmN0aW9uIGxlYWZIaXRUZXN0KGJ2aDogSC5CVkgsIHJheTogUmF5LCBwb3NpdGlvbnM6IEZsb2F0MzJBcnJheSwgb2Zmc2V0OiBudW1iZXIpOiBGcmFnbWVudEluZm8ge1xuICBsZXQgbGVhZjogQlZITGVhZiA9IGdldEJWSExlYWZJbmZvKGJ2aCwgb2Zmc2V0KTtcbiAgbGV0IGluZm86IEZyYWdtZW50SW5mbyA9IHtcbiAgICBoaXQ6IGZhbHNlLFxuICAgIHQ6IEluZmluaXR5LFxuICAgIGhpdFBvaW50OiBudWxsLFxuICAgIHdlaWdodHM6IG51bGxcbiAgfTtcbiAgY29uc29sZS5sb2cobmV3IFVpbnQzMkFycmF5KFsob2Zmc2V0ICsgMCkgfCAweDgwMDAwMDAwXSlbMF0sIGxlYWYpO1xuXG4gIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBsZWFmLnByaW1pdGl2ZXM7IGkgPSBpICsgMSkge1xuICAgIGxlYWYgPSBnZXRCVkhMZWFmSW5mbyhidmgsIG9mZnNldCArIGkpO1xuICAgIGxldCBjSW5mbyA9IHRyaWFuZ2xlSGl0VGVzdChyYXksIGxlYWYsIHBvc2l0aW9ucyk7XG4gICAgY29uc29sZS5sb2coJ3RyaWFuZ2xlIGhpdCcsIG5ldyBVaW50MzJBcnJheShbKG9mZnNldCArIGkpIHwgMHg4MDAwMDAwMF0pWzBdLCBjSW5mbywgY0luZm8uaGl0ICYmIGNJbmZvLnQgPCBpbmZvLnQpO1xuXG4gICAgaWYgKGNJbmZvLmhpdCAmJiBjSW5mby50IDwgaW5mby50KSB7XG4gICAgICBpbmZvID0gY0luZm87XG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGluZm87XG59XG5cbmZ1bmN0aW9uIGhpdFRlc3RTaGFkb3coYnZoOiBILkJWSCwgcmF5OiBSYXksIG1heFQ6IG51bWJlciwgcG9zaXRpb25zOiBGbG9hdDMyQXJyYXkpOiBGcmFnbWVudEluZm8ge1xuICBsZXQgZnJhZ0luZm86IEZyYWdtZW50SW5mbyA9IHtcbiAgICBoaXQ6IGZhbHNlLFxuICAgIHQ6IG1heFQsXG4gICAgaGl0UG9pbnQ6IG51bGwsXG4gICAgd2VpZ2h0czogbnVsbFxuICB9O1xuICBsZXQgbm9kZVN0YWNrOiBudW1iZXJbXSA9IEFycmF5KGJ2aC5tYXhEZXB0aCk7XG4gIG5vZGVTdGFja1swXSA9IDA7XG4gIGxldCBzdGFja0RlcHRoOiBudW1iZXIgPSAwO1xuXG4gIHdoaWxlIChzdGFja0RlcHRoID49IDApIHtcbiAgICBjb25zdCB7aXNMZWFmLCBvZmZzZXR9ID0gZGVjb2RlQ2hpbGQobm9kZVN0YWNrW3N0YWNrRGVwdGhdKTtcbiAgICBzdGFja0RlcHRoIC09IDE7XG5cbiAgICBpZiAoaXNMZWFmKSB7XG4gICAgICBjb25zdCBpbmZvID0gbGVhZkhpdFRlc3QoYnZoLCByYXksIHBvc2l0aW9ucywgb2Zmc2V0KTtcbiAgICAgIGNvbnNvbGUubG9nKCdsZWFmIGhpdCcsIGluZm8uaGl0KTtcblxuICAgICAgaWYgKGluZm8uaGl0ICYmIGluZm8udCA8IG1heFQpIHtcbiAgICAgICAgcmV0dXJuIGluZm87XG4gICAgICB9XG5cbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIGNvbnN0IG5vZGUgPSBnZXRCVkhOb2RlSW5mbyhidmgsIG9mZnNldCk7XG4gICAgY29uc3QgaGl0ZWQgPSBib3hIaXRUZXN0KHJheSwgbm9kZS5tYXgsIG5vZGUubWluKTtcbiAgICAvLyBwbG90Uy5wdXNoKGBHcmFwaGljczNEW0N1Ym9pZFt7JHtub2RlLm1heC5qb2luKCcsJyl9fSwgeyR7bm9kZS5taW4uam9pbignLCcpfX1dXWApO1xuICAgIGNvbnNvbGUubG9nKCdib3ggaGl0Jywgb2Zmc2V0LCBub2RlLmNoaWxkMEluZGV4LCBub2RlLmNoaWxkMUluZGV4LCBub2RlLm1heCwgbm9kZS5taW4sIGhpdGVkKTtcblxuICAgIGlmIChoaXRlZCA8IDApIHtcbiAgICAgIGNvbnRpbnVlO1xuICAgIH1cblxuICAgIHN0YWNrRGVwdGggKz0gMTtcbiAgICBub2RlU3RhY2tbc3RhY2tEZXB0aF0gPSBub2RlLmNoaWxkMEluZGV4O1xuICAgIHN0YWNrRGVwdGggKz0gMTtcbiAgICBub2RlU3RhY2tbc3RhY2tEZXB0aF0gPSBub2RlLmNoaWxkMUluZGV4O1xuICB9XG5cbiAgcmV0dXJuIGZyYWdJbmZvO1xufVxuIl19","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar H = require(\"../src/index\");\nvar RayTracingApp_1 = require(\"./RayTracingApp\");\nvar fpsDom = document.createElement('div');\nfpsDom.style.position = 'fixed';\nfpsDom.style.left = fpsDom.style.top = '0';\nfpsDom.style.color = 'red';\nfpsDom.style.fontSize = '24px';\ndocument.body.append(fpsDom);\nvar app = new RayTracingApp_1.default();\nvar preFPS = 0;\nfunction update(dt) {\n    return __awaiter(this, void 0, void 0, function () {\n        var fps;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, app.update(dt)];\n                case 1:\n                    _a.sent();\n                    fps = 1000 / dt;\n                    if (Math.abs(fps - preFPS) > 2) {\n                        fpsDom.innerText = fps.toFixed(2) + \"fps\";\n                    }\n                    preFPS = fps;\n                    return [2];\n            }\n        });\n    });\n}\nfunction main() {\n    return __awaiter(this, void 0, void 0, function () {\n        function _loop(ct) {\n            return __awaiter(this, void 0, void 0, function () {\n                return __generator(this, function (_a) {\n                    switch (_a.label) {\n                        case 0: return [4, update(ct - t)];\n                        case 1:\n                            _a.sent();\n                            t = ct;\n                            requestAnimationFrame(_loop);\n                            return [2];\n                    }\n                });\n            });\n        }\n        var t;\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, H.init(document.querySelector('canvas#mainCanvas'))];\n                case 1:\n                    _a.sent();\n                    return [4, app.init()];\n                case 2:\n                    _a.sent();\n                    t = 0;\n                    return [4, _loop(performance.now())];\n                case 3:\n                    _a.sent();\n                    return [2];\n            }\n        });\n    });\n}\nmain();\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU1BLGdDQUFrQztBQUdsQyxpREFBNEM7QUFFNUMsSUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLGFBQWEsQ0FBQyxLQUFLLENBQUMsQ0FBQztBQUM3QyxNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxPQUFPLENBQUM7QUFDaEMsTUFBTSxDQUFDLEtBQUssQ0FBQyxJQUFJLEdBQUcsTUFBTSxDQUFDLEtBQUssQ0FBQyxHQUFHLEdBQUcsR0FBRyxDQUFDO0FBQzNDLE1BQU0sQ0FBQyxLQUFLLENBQUMsS0FBSyxHQUFHLEtBQUssQ0FBQztBQUMzQixNQUFNLENBQUMsS0FBSyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUM7QUFDL0IsUUFBUSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7QUFJN0IsSUFBTSxHQUFHLEdBQUcsSUFBSSx1QkFBYSxFQUFFLENBQUM7QUFFaEMsSUFBSSxNQUFNLEdBQUcsQ0FBQyxDQUFDO0FBQ2YsU0FBZSxNQUFNLENBQUMsRUFBVTs7Ozs7d0JBQzlCLFdBQU0sR0FBRyxDQUFDLE1BQU0sQ0FBQyxFQUFFLENBQUMsRUFBQTs7b0JBQXBCLFNBQW9CLENBQUM7b0JBRWYsR0FBRyxHQUFHLElBQUksR0FBRyxFQUFFLENBQUM7b0JBRXRCLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLEdBQUcsQ0FBQyxFQUFFO3dCQUM5QixNQUFNLENBQUMsU0FBUyxHQUFNLEdBQUcsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLFFBQUssQ0FBQztxQkFDM0M7b0JBRUQsTUFBTSxHQUFHLEdBQUcsQ0FBQzs7Ozs7Q0FDZDtBQUVELFNBQWUsSUFBSTs7UUFLakIsU0FBZSxLQUFLLENBQUMsRUFBVTs7OztnQ0FDN0IsV0FBTSxNQUFNLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQyxFQUFBOzs0QkFBcEIsU0FBb0IsQ0FBQzs0QkFDckIsQ0FBQyxHQUFHLEVBQUUsQ0FBQzs0QkFDUCxxQkFBcUIsQ0FBQyxLQUFLLENBQUMsQ0FBQzs7Ozs7U0FDOUI7Ozs7d0JBUkQsV0FBTSxDQUFDLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxhQUFhLENBQW9CLG1CQUFtQixDQUFDLENBQUMsRUFBQTs7b0JBQTVFLFNBQTRFLENBQUM7b0JBQzdFLFdBQU0sR0FBRyxDQUFDLElBQUksRUFBRSxFQUFBOztvQkFBaEIsU0FBZ0IsQ0FBQztvQkFFYixDQUFDLEdBQUcsQ0FBQyxDQUFDO29CQU9WLFdBQU0sS0FBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsQ0FBQyxFQUFBOztvQkFBOUIsU0FBOEIsQ0FBQzs7Ozs7Q0FDaEM7QUFFRCxJQUFJLEVBQUUsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IGluZGV4LnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi815LiL5Y2IMjo0NDoyOFxuICovXG5pbXBvcnQgKiBhcyBIIGZyb20gJy4uL3NyYy9pbmRleCc7XG5pbXBvcnQgU3VwZXJTaW1wbGVBcHAgZnJvbSAnLi9TdXBlclNpbXBsZUFwcCc7XG5pbXBvcnQgQmFzaWNUZXN0QXBwIGZyb20gJy4vQmFzaWNUZXN0QXBwJztcbmltcG9ydCBSYXlUcmFjaW5nQXBwIGZyb20gJy4vUmF5VHJhY2luZ0FwcCc7XG5cbmNvbnN0IGZwc0RvbSA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2RpdicpO1xuZnBzRG9tLnN0eWxlLnBvc2l0aW9uID0gJ2ZpeGVkJztcbmZwc0RvbS5zdHlsZS5sZWZ0ID0gZnBzRG9tLnN0eWxlLnRvcCA9ICcwJztcbmZwc0RvbS5zdHlsZS5jb2xvciA9ICdyZWQnO1xuZnBzRG9tLnN0eWxlLmZvbnRTaXplID0gJzI0cHgnO1xuZG9jdW1lbnQuYm9keS5hcHBlbmQoZnBzRG9tKTtcblxuLy8gY29uc3QgYXBwID0gbmV3IFN1cGVyU2ltcGxlQXBwKCk7XG4vLyBjb25zdCBhcHAgPSBuZXcgQmFzaWNUZXN0QXBwKCk7XG5jb25zdCBhcHAgPSBuZXcgUmF5VHJhY2luZ0FwcCgpO1xuXG5sZXQgcHJlRlBTID0gMDtcbmFzeW5jIGZ1bmN0aW9uIHVwZGF0ZShkdDogbnVtYmVyKSB7XG4gIGF3YWl0IGFwcC51cGRhdGUoZHQpO1xuXG4gIGNvbnN0IGZwcyA9IDEwMDAgLyBkdDtcblxuICBpZiAoTWF0aC5hYnMoZnBzIC0gcHJlRlBTKSA+IDIpIHtcbiAgICBmcHNEb20uaW5uZXJUZXh0ID0gYCR7ZnBzLnRvRml4ZWQoMil9ZnBzYDtcbiAgfVxuXG4gIHByZUZQUyA9IGZwcztcbn1cblxuYXN5bmMgZnVuY3Rpb24gbWFpbigpIHtcbiAgYXdhaXQgSC5pbml0KGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3I8SFRNTENhbnZhc0VsZW1lbnQ+KCdjYW52YXMjbWFpbkNhbnZhcycpKTtcbiAgYXdhaXQgYXBwLmluaXQoKTtcbiAgXG4gIGxldCB0ID0gMDtcbiAgYXN5bmMgZnVuY3Rpb24gX2xvb3AoY3Q6IG51bWJlcikge1xuICAgIGF3YWl0IHVwZGF0ZShjdCAtIHQpO1xuICAgIHQgPSBjdDtcbiAgICByZXF1ZXN0QW5pbWF0aW9uRnJhbWUoX2xvb3ApO1xuICB9XG5cbiAgYXdhaXQgX2xvb3AocGVyZm9ybWFuY2Uubm93KCkpO1xufVxuXG5tYWluKCk7XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = void 0;\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar Effect_1 = require(\"../core/Effect\");\nvar shared_1 = require(\"../core/shared\");\nvar textures_1 = require(\"./textures\");\nvar effects = {};\nexports.default = effects;\nvar commonMarcos = {\n    USE_TEXCOORD_0: false,\n    USE_NORMAL: false,\n    USE_TANGENT: false,\n    USE_COLOR_0: false,\n    USE_TEXCOORD_1: false\n};\nfunction init() {\n    var emptyStorageBuffer = {\n        value: new Float32Array(4),\n        gpuValue: shared_1.createGPUBuffer(new Float32Array(4), GPUBufferUsage.STORAGE)\n    };\n    effects.rColor = new Effect_1.default('rColor', {\n        vs: require('./shaders/basic/model.vert.wgsl'),\n        fs: require('./shaders/basic/color.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_color',\n                    type: 'vec4',\n                    defaultValue: new Float32Array([1, 0, 0, 1])\n                }\n            ]\n        },\n        marcos: commonMarcos\n    });\n    effects.rUnlit = new Effect_1.default('rUnlit', {\n        vs: require('./shaders/basic/model.vert.wgsl'),\n        fs: require('./shaders/basic/unlit.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_baseColorFactor',\n                    type: 'vec4',\n                    defaultValue: new Float32Array([1, 1, 1, 1])\n                }\n            ],\n            textures: [\n                {\n                    name: 'u_baseColorTexture',\n                    defaultValue: textures_1.default.white\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear', mipmapFilter: 'nearest' }\n                }\n            ]\n        },\n        marcos: commonMarcos\n    });\n    effects.rPBR = new Effect_1.default('rPBR', {\n        vs: require('./shaders/basic/model.vert.wgsl'),\n        fs: require('./shaders/basic/unlit.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_baseColorFactor',\n                    type: 'vec4',\n                    defaultValue: new Float32Array([1, 1, 1, 1])\n                },\n                {\n                    name: 'u_normalTextureScale',\n                    type: 'number',\n                    defaultValue: new Float32Array([1])\n                },\n                {\n                    name: 'u_metallicFactor',\n                    type: 'number',\n                    defaultValue: new Float32Array([1])\n                },\n                {\n                    name: 'u_roughnessFactor',\n                    type: 'number',\n                    defaultValue: new Float32Array([1])\n                },\n                {\n                    name: 'u_specularFactor',\n                    type: 'vec3',\n                    defaultValue: new Float32Array([3])\n                },\n                {\n                    name: 'u_glossinessFactor',\n                    type: 'number',\n                    defaultValue: new Float32Array([1])\n                },\n            ],\n            textures: [\n                {\n                    name: 'u_baseColorTexture',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_normalTexture',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_metallicRoughnessTexture',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_specularGlossinessTexture',\n                    defaultValue: textures_1.default.empty\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear', mipmapFilter: 'nearest' }\n                }\n            ]\n        },\n        marcos: Object.assign({}, commonMarcos, { USE_SPEC_GLOSS: false, USE_GLASS: false })\n    });\n    effects.rSkybox = new Effect_1.default('rSkybox', {\n        vs: require('./shaders/basic/skybox.vert.wgsl'),\n        fs: require('./shaders/basic/skybox.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_color',\n                    type: 'vec4',\n                    defaultValue: gl_matrix_1.mat4.identity(new Float32Array(4))\n                },\n                {\n                    name: 'u_factor',\n                    type: 'number',\n                    defaultValue: new Float32Array(1)\n                },\n                {\n                    name: 'u_rotation',\n                    type: 'number',\n                    defaultValue: new Float32Array(1)\n                },\n                {\n                    name: 'u_exposure',\n                    type: 'number',\n                    defaultValue: new Float32Array(1)\n                },\n            ],\n            textures: [\n                {\n                    name: 'u_cubeTexture',\n                    defaultValue: textures_1.default.cubeWhite\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear', mipmapFilter: 'nearest' }\n                }\n            ]\n        }\n    });\n    effects.rRTGBuffer = new Effect_1.default('rRTGBuffer', {\n        vs: require('./shaders/ray-tracing/gbuffer.vert.wgsl'),\n        fs: require('./shaders/ray-tracing/gbuffer.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_matId2TexturesId',\n                    type: 'vec4',\n                    format: 'i32',\n                    size: 128,\n                    defaultValue: new Int32Array(2 * 128)\n                },\n                {\n                    name: 'u_baseColorFactors',\n                    type: 'vec4',\n                    size: 128,\n                    defaultValue: new Float32Array(4 * 128)\n                },\n                {\n                    name: 'u_metallicRoughnessFactorNormalScaleMaterialTypes',\n                    type: 'vec4',\n                    size: 128,\n                    defaultValue: new Float32Array(128)\n                },\n                {\n                    name: 'u_specularGlossinessFactors',\n                    type: 'vec4',\n                    size: 128,\n                    defaultValue: new Float32Array(128)\n                }\n            ],\n            textures: [\n                {\n                    name: 'u_baseColorTextures',\n                    defaultValue: textures_1.default.array1white\n                },\n                {\n                    name: 'u_normalTextures',\n                    defaultValue: textures_1.default.array1white\n                },\n                {\n                    name: 'u_metalRoughOrSpecGlossTextures',\n                    defaultValue: textures_1.default.array1white\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear', mipmapFilter: 'nearest' }\n                }\n            ],\n        },\n        marcos: commonMarcos\n    });\n    effects.rRTGBufferLight = new Effect_1.default('rRTGBufferLight', {\n        vs: require('./shaders/basic/model.vert.wgsl'),\n        fs: require('./shaders/ray-tracing/gbufferLight.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_lightColor',\n                    type: 'vec4',\n                    defaultValue: new Float32Array(4)\n                },\n            ],\n            textures: [],\n            samplers: [],\n        },\n        marcos: commonMarcos\n    });\n    effects.cRTSS = new Effect_1.default('cRTSS', {\n        cs: require('./shaders/ray-tracing/rtss.comp.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_randoms',\n                    type: 'vec4',\n                    size: 4,\n                    defaultValue: new Float32Array(16)\n                },\n                {\n                    name: 'u_matId2TexturesId',\n                    type: 'vec4',\n                    format: 'i32',\n                    size: 128,\n                    defaultValue: new Int32Array(2 * 128)\n                },\n                {\n                    name: 'u_baseColorFactors',\n                    type: 'vec4',\n                    size: 128,\n                    defaultValue: new Float32Array(4 * 128)\n                },\n                {\n                    name: 'u_metallicRoughnessFactorNormalScaleMaterialTypes',\n                    type: 'vec4',\n                    size: 128,\n                    defaultValue: new Float32Array(128)\n                },\n                {\n                    name: 'u_specularGlossinessFactors',\n                    type: 'vec4',\n                    size: 128,\n                    defaultValue: new Float32Array(128)\n                }\n            ],\n            storages: [\n                {\n                    name: 'u_positions',\n                    type: 'vec3',\n                    defaultValue: emptyStorageBuffer.value,\n                    gpuValue: emptyStorageBuffer.gpuValue,\n                },\n                {\n                    name: 'u_normals',\n                    type: 'vec3',\n                    defaultValue: emptyStorageBuffer.value,\n                    gpuValue: emptyStorageBuffer.gpuValue,\n                },\n                {\n                    name: 'u_uvs',\n                    type: 'vec2',\n                    defaultValue: emptyStorageBuffer.value,\n                    gpuValue: emptyStorageBuffer.gpuValue,\n                },\n                {\n                    name: 'u_meshMatIndexes',\n                    type: 'vec2',\n                    format: 'u32',\n                    defaultValue: emptyStorageBuffer.value,\n                    gpuValue: emptyStorageBuffer.gpuValue,\n                },\n                {\n                    name: 'u_bvh',\n                    type: 'vec4',\n                    defaultValue: emptyStorageBuffer.value,\n                    gpuValue: emptyStorageBuffer.gpuValue,\n                },\n                {\n                    name: 'u_debugInfo',\n                    type: 'number',\n                    customStruct: { name: 'DebugInfo', code: \"\\nstruct DebugRay {\\n  preOrigin: vec4<f32>;\\n  preDir: vec4<f32>;\\n  origin: vec4<f32>;\\n  dir: vec4<f32>;\\n  nextOrigin: vec4<f32>;\\n  nextDir: vec4<f32>;\\n  normal: vec4<f32>;\\n};\\n\\n[[block]] struct DebugInfo {\\n  rays: array<DebugRay>;\\n};\"\n                    },\n                    writable: true,\n                    defaultValue: emptyStorageBuffer.value,\n                    gpuValue: emptyStorageBuffer.gpuValue\n                }\n            ],\n            textures: [\n                {\n                    name: 'u_output',\n                    defaultValue: textures_1.default.empty,\n                    storageAccess: 'write-only',\n                    storageFormat: 'rgba16float'\n                },\n                {\n                    name: 'u_noise',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbPositionMetalOrSpec',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbBaseColorRoughOrGloss',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbNormalGlass',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbMeshIndexMatIndexMatType',\n                    format: 'uint',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_baseColorTextures',\n                    defaultValue: textures_1.default.array1white\n                },\n                {\n                    name: 'u_normalTextures',\n                    defaultValue: textures_1.default.array1white\n                },\n                {\n                    name: 'u_metalRoughOrSpecGlossTextures',\n                    defaultValue: textures_1.default.array1white\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear', mipmapFilter: 'nearest' }\n                },\n                {\n                    name: 'u_samplerGB',\n                    defaultValue: { magFilter: 'nearest', minFilter: 'nearest' }\n                }\n            ]\n        },\n        marcos: { BVH_DEPTH: 0 }\n    });\n    effects.cRTDenoiseTempor = new Effect_1.default('cRTDenoiseTempor', {\n        cs: require('./shaders/ray-tracing/denoiseTempor.comp.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_preWeight',\n                    type: 'number',\n                    format: 'f32',\n                    defaultValue: new Float32Array([1])\n                }\n            ],\n            textures: [\n                {\n                    name: 'u_output',\n                    defaultValue: textures_1.default.empty,\n                    storageAccess: 'write-only',\n                    storageFormat: 'rgba16float'\n                },\n                {\n                    name: 'u_pre',\n                    defaultValue: textures_1.default.empty,\n                    storageAccess: 'read-only',\n                    storageFormat: 'rgba16float'\n                },\n                {\n                    name: 'u_current',\n                    defaultValue: textures_1.default.empty,\n                    storageAccess: 'read-only',\n                    storageFormat: 'rgba16float'\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear', mipmapFilter: 'nearest' }\n                }\n            ]\n        }\n    });\n    effects.cRTDenoiseSpace = new Effect_1.default('cRTDenoiseSpace', {\n        cs: require('./shaders/ray-tracing/denoiseSpace.comp.wgsl'),\n        uniformDesc: {\n            uniforms: [\n                {\n                    name: 'u_filterFactors',\n                    type: 'vec4',\n                    defaultValue: shared_1.genFilterParams(new Float32Array([3, 0.1, 2, 0.1]))\n                }\n            ],\n            textures: [\n                {\n                    name: 'u_output',\n                    defaultValue: textures_1.default.empty,\n                    storageAccess: 'write-only',\n                    storageFormat: 'rgba16float'\n                },\n                {\n                    name: 'u_preFilter',\n                    defaultValue: textures_1.default.empty,\n                    storageAccess: 'read-only',\n                    storageFormat: 'rgba16float'\n                },\n                {\n                    name: 'u_gbPositionMetalOrSpec',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbNormalGlass',\n                    defaultValue: textures_1.default.empty\n                },\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear', mipmapFilter: 'nearest' }\n                }\n            ]\n        },\n        marcos: { WINDOW_SIZE: 7 }\n    });\n    effects.iRTGShow = new Effect_1.default('iRTGShow', {\n        vs: require('./shaders/image/image.vert.wgsl'),\n        fs: require('./shaders/ray-tracing/gshow.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [],\n            textures: [\n                {\n                    name: 'u_gbPositionMetalOrSpec',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbBaseColorRoughOrGloss',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbNormalGlass',\n                    defaultValue: textures_1.default.empty\n                },\n                {\n                    name: 'u_gbMeshIndexMatIndexMatType',\n                    format: 'uint',\n                    defaultValue: textures_1.default.empty\n                },\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear' }\n                }\n            ]\n        },\n        marcos: { FLIP: false }\n    });\n    effects.iBlit = new Effect_1.default('iBlit', {\n        vs: require('./shaders/image/image.vert.wgsl'),\n        fs: require('./shaders/image/blit.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [],\n            textures: [\n                {\n                    name: 'u_texture',\n                    defaultValue: textures_1.default.white\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear' }\n                }\n            ]\n        },\n        marcos: { FLIP: false }\n    });\n    effects.iTone = new Effect_1.default('iTone', {\n        vs: require('./shaders/image/image.vert.wgsl'),\n        fs: require('./shaders/image/tone.frag.wgsl'),\n        uniformDesc: {\n            uniforms: [],\n            textures: [\n                {\n                    name: 'u_texture',\n                    defaultValue: textures_1.default.white\n                }\n            ],\n            samplers: [\n                {\n                    name: 'u_sampler',\n                    defaultValue: { magFilter: 'linear', minFilter: 'linear' }\n                }\n            ]\n        },\n        marcos: { FLIP: false }\n    });\n    effects.cCreateSimpleBlur = function (radius) {\n        var realKernelSize = Math.pow((radius * 2 + 1), 2);\n        var mod = realKernelSize % 4;\n        var kernelSize = realKernelSize + (4 - mod);\n        return new Effect_1.default('cSimpleBlur-' + radius, {\n            cs: require('./shaders/compute/blur.comp.wgsl'),\n            uniformDesc: {\n                uniforms: [\n                    {\n                        name: 'u_kernel',\n                        type: 'vec4',\n                        size: kernelSize / 4,\n                        defaultValue: new Float32Array(kernelSize).fill(1)\n                    }\n                ],\n                textures: [\n                    {\n                        name: 'u_input',\n                        defaultValue: textures_1.default.white\n                    },\n                    {\n                        name: 'u_output',\n                        defaultValue: textures_1.default.white,\n                        storageAccess: 'write-only'\n                    }\n                ],\n                samplers: [\n                    {\n                        name: 'u_sampler',\n                        defaultValue: { magFilter: 'linear', minFilter: 'linear' }\n                    }\n                ]\n            },\n            marcos: { RADIUS: radius, WINDOW_SIZE: radius * 2 + 1, TILE_SIZE: radius * 4 + 1 }\n        });\n    };\n}\nexports.init = init;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZWZmZWN0cy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImVmZmVjdHMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBTUEsdUNBQStCO0FBQy9CLHlDQUFvQztBQUNwQyx5Q0FBZ0U7QUFDaEUsdUNBQWtDO0FBRWxDLElBQU0sT0FBTyxHQWNULEVBQVMsQ0FBQztBQUVkLGtCQUFlLE9BQU8sQ0FBQztBQUV2QixJQUFNLFlBQVksR0FBRztJQUNuQixjQUFjLEVBQUUsS0FBSztJQUNyQixVQUFVLEVBQUUsS0FBSztJQUNqQixXQUFXLEVBQUUsS0FBSztJQUNsQixXQUFXLEVBQUUsS0FBSztJQUNsQixjQUFjLEVBQUUsS0FBSztDQUN0QixDQUFDO0FBRUYsU0FBZ0IsSUFBSTtJQUNsQixJQUFNLGtCQUFrQixHQUFHO1FBQ3pCLEtBQUssRUFBRSxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUM7UUFDMUIsUUFBUSxFQUFFLHdCQUFlLENBQUMsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsY0FBYyxDQUFDLE9BQU8sQ0FBQztLQUN2RSxDQUFDO0lBRUYsT0FBTyxDQUFDLE1BQU0sR0FBRyxJQUFJLGdCQUFNLENBQUMsUUFBUSxFQUFFO1FBQ3BDLEVBQUUsRUFBRSxPQUFPLENBQUMsaUNBQWlDLENBQUM7UUFDOUMsRUFBRSxFQUFFLE9BQU8sQ0FBQyxpQ0FBaUMsQ0FBQztRQUM5QyxXQUFXLEVBQUU7WUFDWCxRQUFRLEVBQUU7Z0JBQ1I7b0JBQ0UsSUFBSSxFQUFFLFNBQVM7b0JBQ2YsSUFBSSxFQUFFLE1BQU07b0JBQ1osWUFBWSxFQUFFLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7aUJBQzdDO2FBQ0Y7U0FDRjtRQUNELE1BQU0sRUFBRSxZQUFZO0tBQ3JCLENBQUMsQ0FBQztJQUVILE9BQU8sQ0FBQyxNQUFNLEdBQUcsSUFBSSxnQkFBTSxDQUFDLFFBQVEsRUFBRTtR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LENBQUMsR0FBRyxDQUFDLEVBQUUsU0FBUyxFQUFFLE1BQU0sR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFDO1NBQ2pGLENBQUMsQ0FBQztJQUNMLENBQUMsQ0FBQztBQUNKLENBQUM7QUF6akJELG9CQXlqQkMiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBGaWxlICAgOiBlZmZlY3RzLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi825LiL5Y2IODo1Njo0OVxuICovXG5pbXBvcnQge21hdDR9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgRWZmZWN0IGZyb20gJy4uL2NvcmUvRWZmZWN0JztcbmltcG9ydCB7Y3JlYXRlR1BVQnVmZmVyLCBnZW5GaWx0ZXJQYXJhbXN9IGZyb20gJy4uL2NvcmUvc2hhcmVkJztcbmltcG9ydCB0ZXh0dXJlcyBmcm9tICcuL3RleHR1cmVzJztcblxuY29uc3QgZWZmZWN0czoge1xuICByQ29sb3I6IEVmZmVjdCxcbiAgclVubGl0OiBFZmZlY3QsXG4gIHJQQlI6IEVmZmVjdCxcbiAgclNreWJveDogRWZmZWN0LFxuICBpQmxpdDogRWZmZWN0LFxuICBpVG9uZTogRWZmZWN0LFxuICByUlRHQnVmZmVyOiBFZmZlY3QsXG4gIHJSVEdCdWZmZXJMaWdodDogRWZmZWN0LFxuICBpUlRHU2hvdzogRWZmZWN0LFxuICBjUlRTUzogRWZmZWN0LFxuICBjUlREZW5vaXNlVGVtcG9yOiBFZmZlY3QsXG4gIGNSVERlbm9pc2VTcGFjZTogRWZmZWN0LFxuICBjQ3JlYXRlU2ltcGxlQmx1cjogKHJhZGl1czogbnVtYmVyKSA9PiBFZmZlY3Rcbn0gPSB7fSBhcyBhbnk7XG5cbmV4cG9ydCBkZWZhdWx0IGVmZmVjdHM7XG5cbmNvbnN0IGNvbW1vbk1hcmNvcyA9IHtcbiAgVVNFX1RFWENPT1JEXzA6IGZhbHNlLFxuICBVU0VfTk9STUFMOiBmYWxzZSxcbiAgVVNFX1RBTkdFTlQ6IGZhbHNlLFxuICBVU0VfQ09MT1JfMDogZmFsc2UsXG4gIFVTRV9URVhDT09SRF8xOiBmYWxzZVxufTtcblxuZXhwb3J0IGZ1bmN0aW9uIGluaXQoKSB7XG4gIGNvbnN0IGVtcHR5U3RvcmFnZUJ1ZmZlciA9IHtcbiAgICB2YWx1ZTogbmV3IEZsb2F0MzJBcnJheSg0KSxcbiAgICBncHVWYWx1ZTogY3JlYXRlR1BVQnVmZmVyKG5ldyBGbG9hdDMyQXJyYXkoNCksIEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UpXG4gIH07XG5cbiAgZWZmZWN0cy5yQ29sb3IgPSBuZXcgRWZmZWN0KCdyQ29sb3InLCB7XG4gICAgdnM6IHJlcXVpcmUoJy4vc2hhZGVycy9iYXNpYy9tb2RlbC52ZXJ0Lndnc2wnKSxcbiAgICBmczogcmVxdWlyZSgnLi9zaGFkZXJzL2Jhc2ljL2NvbG9yLmZyYWcud2dzbCcpLFxuICAgIHVuaWZvcm1EZXNjOiB7XG4gICAgICB1bmlmb3JtczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfY29sb3InLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDAsIDAsIDFdKVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICBtYXJjb3M6IGNvbW1vbk1hcmNvc1xuICB9KTtcblxuICBlZmZlY3RzLnJVbmxpdCA9IG5ldyBFZmZlY3QoJ3JVbmxpdCcsIHtcbiAgICB2czogcmVxdWlyZSgnLi9zaGFkZXJzL2Jhc2ljL21vZGVsLnZlcnQud2dzbCcpLFxuICAgIGZzOiByZXF1aXJlKCcuL3NoYWRlcnMvYmFzaWMvdW5saXQuZnJhZy53Z3NsJyksXG4gICAgdW5pZm9ybURlc2M6IHtcbiAgICAgIHVuaWZvcm1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9iYXNlQ29sb3JGYWN0b3InLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIDEsIDFdKVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgdGV4dHVyZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2Jhc2VDb2xvclRleHR1cmUnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMud2hpdGVcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhbXBsZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9zYW1wbGVyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHttYWdGaWx0ZXI6ICdsaW5lYXInLCBtaW5GaWx0ZXI6ICdsaW5lYXInLCBtaXBtYXBGaWx0ZXI6ICduZWFyZXN0J31cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAgbWFyY29zOiBjb21tb25NYXJjb3NcbiAgfSk7XG5cbiAgZWZmZWN0cy5yUEJSID0gbmV3IEVmZmVjdCgnclBCUicsIHtcbiAgICB2czogcmVxdWlyZSgnLi9zaGFkZXJzL2Jhc2ljL21vZGVsLnZlcnQud2dzbCcpLFxuICAgIGZzOiByZXF1aXJlKCcuL3NoYWRlcnMvYmFzaWMvdW5saXQuZnJhZy53Z3NsJyksXG4gICAgdW5pZm9ybURlc2M6IHtcbiAgICAgIHVuaWZvcm1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9iYXNlQ29sb3JGYWN0b3InLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoWzEsIDEsIDEsIDFdKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfbm9ybWFsVGV4dHVyZVNjYWxlJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoWzFdKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfbWV0YWxsaWNGYWN0b3InLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheShbMV0pXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9yb3VnaG5lc3NGYWN0b3InLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheShbMV0pXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9zcGVjdWxhckZhY3RvcicsXG4gICAgICAgICAgdHlwZTogJ3ZlYzMnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheShbM10pXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9nbG9zc2luZXNzRmFjdG9yJyxcbiAgICAgICAgICB0eXBlOiAnbnVtYmVyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoWzFdKVxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHRleHR1cmVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9iYXNlQ29sb3JUZXh0dXJlJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9ub3JtYWxUZXh0dXJlJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3NwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHlcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhbXBsZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9zYW1wbGVyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHttYWdGaWx0ZXI6ICdsaW5lYXInLCBtaW5GaWx0ZXI6ICdsaW5lYXInLCBtaXBtYXBGaWx0ZXI6ICduZWFyZXN0J31cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAgbWFyY29zOiBPYmplY3QuYXNzaWduKHt9LCBjb21tb25NYXJjb3MsIHtVU0VfU1BFQ19HTE9TUzogZmFsc2UsIFVTRV9HTEFTUzogZmFsc2V9KVxuICB9KTtcblxuICBlZmZlY3RzLnJTa3lib3ggPSBuZXcgRWZmZWN0KCdyU2t5Ym94Jywge1xuICAgIHZzOiByZXF1aXJlKCcuL3NoYWRlcnMvYmFzaWMvc2t5Ym94LnZlcnQud2dzbCcpLFxuICAgIGZzOiByZXF1aXJlKCcuL3NoYWRlcnMvYmFzaWMvc2t5Ym94LmZyYWcud2dzbCcpLFxuICAgIHVuaWZvcm1EZXNjOiB7XG4gICAgICB1bmlmb3JtczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfY29sb3InLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSg0KSkgYXMgRmxvYXQzMkFycmF5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9mYWN0b3InLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSgxKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfcm90YXRpb24nLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSgxKVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfZXhwb3N1cmUnLFxuICAgICAgICAgIHR5cGU6ICdudW1iZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSgxKVxuICAgICAgICB9LFxuICAgICAgXSxcbiAgICAgIHRleHR1cmVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9jdWJlVGV4dHVyZScsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5jdWJlV2hpdGVcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhbXBsZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9zYW1wbGVyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHttYWdGaWx0ZXI6ICdsaW5lYXInLCBtaW5GaWx0ZXI6ICdsaW5lYXInLCBtaXBtYXBGaWx0ZXI6ICduZWFyZXN0J31cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH1cbiAgfSk7XG5cbiAgZWZmZWN0cy5yUlRHQnVmZmVyID0gbmV3IEVmZmVjdCgnclJUR0J1ZmZlcicsIHtcbiAgICB2czogcmVxdWlyZSgnLi9zaGFkZXJzL3JheS10cmFjaW5nL2didWZmZXIudmVydC53Z3NsJyksXG4gICAgZnM6IHJlcXVpcmUoJy4vc2hhZGVycy9yYXktdHJhY2luZy9nYnVmZmVyLmZyYWcud2dzbCcpLFxuICAgIHVuaWZvcm1EZXNjOiB7XG4gICAgICB1bmlmb3JtczogW1xuICAgICAgICAvLyBzdXBwb3J0IG1hdGVyaWFscyB1cCB0byAxMjhcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X21hdElkMlRleHR1cmVzSWQnLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBmb3JtYXQ6ICdpMzInLFxuICAgICAgICAgIHNpemU6IDEyOCxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBJbnQzMkFycmF5KDIgKiAxMjgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9iYXNlQ29sb3JGYWN0b3JzJyxcbiAgICAgICAgICB0eXBlOiAndmVjNCcsXG4gICAgICAgICAgc2l6ZTogMTI4LFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSg0ICogMTI4KVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfbWV0YWxsaWNSb3VnaG5lc3NGYWN0b3JOb3JtYWxTY2FsZU1hdGVyaWFsVHlwZXMnLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBzaXplOiAxMjgsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KDEyOClcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3NwZWN1bGFyR2xvc3NpbmVzc0ZhY3RvcnMnLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBzaXplOiAxMjgsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KDEyOClcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHRleHR1cmVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9iYXNlQ29sb3JUZXh0dXJlcycsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5hcnJheTF3aGl0ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfbm9ybWFsVGV4dHVyZXMnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuYXJyYXkxd2hpdGVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X21ldGFsUm91Z2hPclNwZWNHbG9zc1RleHR1cmVzJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmFycmF5MXdoaXRlXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBzYW1wbGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfc2FtcGxlcicsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB7bWFnRmlsdGVyOiAnbGluZWFyJywgbWluRmlsdGVyOiAnbGluZWFyJywgbWlwbWFwRmlsdGVyOiAnbmVhcmVzdCd9XG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgfSxcbiAgICBtYXJjb3M6IGNvbW1vbk1hcmNvc1xuICB9KTtcbiAgXG4gIGVmZmVjdHMuclJUR0J1ZmZlckxpZ2h0ID0gbmV3IEVmZmVjdCgnclJUR0J1ZmZlckxpZ2h0Jywge1xuICAgIHZzOiByZXF1aXJlKCcuL3NoYWRlcnMvYmFzaWMvbW9kZWwudmVydC53Z3NsJyksXG4gICAgZnM6IHJlcXVpcmUoJy4vc2hhZGVycy9yYXktdHJhY2luZy9nYnVmZmVyTGlnaHQuZnJhZy53Z3NsJyksXG4gICAgdW5pZm9ybURlc2M6IHtcbiAgICAgIHVuaWZvcm1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9saWdodENvbG9yJyxcbiAgICAgICAgICB0eXBlOiAndmVjNCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KDQpXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgdGV4dHVyZXM6IFtdLFxuICAgICAgc2FtcGxlcnM6IFtdLFxuICAgIH0sXG4gICAgbWFyY29zOiBjb21tb25NYXJjb3NcbiAgfSk7XG5cbiAgZWZmZWN0cy5jUlRTUyA9IG5ldyBFZmZlY3QoJ2NSVFNTJywge1xuICAgIGNzOiByZXF1aXJlKCcuL3NoYWRlcnMvcmF5LXRyYWNpbmcvcnRzcy5jb21wLndnc2wnKSxcbiAgICB1bmlmb3JtRGVzYzoge1xuICAgICAgdW5pZm9ybXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3JhbmRvbXMnLFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBzaXplOiA0LFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSgxNilcbiAgICAgICAgfSxcbiAgICAgICAgLy8gc3VwcG9ydCBtYXRlcmlhbHMgdXAgdG8gMTI4XG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9tYXRJZDJUZXh0dXJlc0lkJyxcbiAgICAgICAgICB0eXBlOiAndmVjNCcsXG4gICAgICAgICAgZm9ybWF0OiAnaTMyJyxcbiAgICAgICAgICBzaXplOiAxMjgsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBuZXcgSW50MzJBcnJheSgyICogMTI4KVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfYmFzZUNvbG9yRmFjdG9ycycsXG4gICAgICAgICAgdHlwZTogJ3ZlYzQnLFxuICAgICAgICAgIHNpemU6IDEyOCxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoNCAqIDEyOClcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X21ldGFsbGljUm91Z2huZXNzRmFjdG9yTm9ybWFsU2NhbGVNYXRlcmlhbFR5cGVzJyxcbiAgICAgICAgICB0eXBlOiAndmVjNCcsXG4gICAgICAgICAgc2l6ZTogMTI4LFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSgxMjgpXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9zcGVjdWxhckdsb3NzaW5lc3NGYWN0b3JzJyxcbiAgICAgICAgICB0eXBlOiAndmVjNCcsXG4gICAgICAgICAgc2l6ZTogMTI4LFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSgxMjgpXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBzdG9yYWdlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfcG9zaXRpb25zJyxcbiAgICAgICAgICB0eXBlOiAndmVjMycsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBlbXB0eVN0b3JhZ2VCdWZmZXIudmFsdWUsXG4gICAgICAgICAgZ3B1VmFsdWU6IGVtcHR5U3RvcmFnZUJ1ZmZlci5ncHVWYWx1ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X25vcm1hbHMnLFxuICAgICAgICAgIHR5cGU6ICd2ZWMzJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IGVtcHR5U3RvcmFnZUJ1ZmZlci52YWx1ZSxcbiAgICAgICAgICBncHVWYWx1ZTogZW1wdHlTdG9yYWdlQnVmZmVyLmdwdVZhbHVlLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfdXZzJyxcbiAgICAgICAgICB0eXBlOiAndmVjMicsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBlbXB0eVN0b3JhZ2VCdWZmZXIudmFsdWUsXG4gICAgICAgICAgZ3B1VmFsdWU6IGVtcHR5U3RvcmFnZUJ1ZmZlci5ncHVWYWx1ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X21lc2hNYXRJbmRleGVzJyxcbiAgICAgICAgICB0eXBlOiAndmVjMicsXG4gICAgICAgICAgZm9ybWF0OiAndTMyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IGVtcHR5U3RvcmFnZUJ1ZmZlci52YWx1ZSxcbiAgICAgICAgICBncHVWYWx1ZTogZW1wdHlTdG9yYWdlQnVmZmVyLmdwdVZhbHVlLFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfYnZoJyxcbiAgICAgICAgICB0eXBlOiAndmVjNCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBlbXB0eVN0b3JhZ2VCdWZmZXIudmFsdWUsXG4gICAgICAgICAgZ3B1VmFsdWU6IGVtcHR5U3RvcmFnZUJ1ZmZlci5ncHVWYWx1ZSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2RlYnVnSW5mbycsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgY3VzdG9tU3RydWN0OiB7bmFtZTogJ0RlYnVnSW5mbycsIGNvZGU6IGBcbnN0cnVjdCBEZWJ1Z1JheSB7XG4gIHByZU9yaWdpbjogdmVjNDxmMzI+O1xuICBwcmVEaXI6IHZlYzQ8ZjMyPjtcbiAgb3JpZ2luOiB2ZWM0PGYzMj47XG4gIGRpcjogdmVjNDxmMzI+O1xuICBuZXh0T3JpZ2luOiB2ZWM0PGYzMj47XG4gIG5leHREaXI6IHZlYzQ8ZjMyPjtcbiAgbm9ybWFsOiB2ZWM0PGYzMj47XG59O1xuXG5bW2Jsb2NrXV0gc3RydWN0IERlYnVnSW5mbyB7XG4gIHJheXM6IGFycmF5PERlYnVnUmF5Pjtcbn07YFxuICAgICAgICAgIH0sXG4gICAgICAgICAgd3JpdGFibGU6IHRydWUsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBlbXB0eVN0b3JhZ2VCdWZmZXIudmFsdWUsXG4gICAgICAgICAgZ3B1VmFsdWU6IGVtcHR5U3RvcmFnZUJ1ZmZlci5ncHVWYWx1ZVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgdGV4dHVyZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X291dHB1dCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5lbXB0eSxcbiAgICAgICAgICBzdG9yYWdlQWNjZXNzOiAnd3JpdGUtb25seScsXG4gICAgICAgICAgc3RvcmFnZUZvcm1hdDogJ3JnYmExNmZsb2F0J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfbm9pc2UnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2diUG9zaXRpb25NZXRhbE9yU3BlYycsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5lbXB0eVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfZ2JCYXNlQ29sb3JSb3VnaE9yR2xvc3MnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2diTm9ybWFsR2xhc3MnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2diTWVzaEluZGV4TWF0SW5kZXhNYXRUeXBlJyxcbiAgICAgICAgICBmb3JtYXQ6ICd1aW50JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9iYXNlQ29sb3JUZXh0dXJlcycsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5hcnJheTF3aGl0ZVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfbm9ybWFsVGV4dHVyZXMnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuYXJyYXkxd2hpdGVcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X21ldGFsUm91Z2hPclNwZWNHbG9zc1RleHR1cmVzJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmFycmF5MXdoaXRlXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBzYW1wbGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfc2FtcGxlcicsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB7bWFnRmlsdGVyOiAnbGluZWFyJywgbWluRmlsdGVyOiAnbGluZWFyJywgbWlwbWFwRmlsdGVyOiAnbmVhcmVzdCd9XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9zYW1wbGVyR0InLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZToge21hZ0ZpbHRlcjogJ25lYXJlc3QnLCBtaW5GaWx0ZXI6ICduZWFyZXN0J31cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAgbWFyY29zOiB7QlZIX0RFUFRIOiAwfVxuICB9KTtcblxuICBlZmZlY3RzLmNSVERlbm9pc2VUZW1wb3IgPSBuZXcgRWZmZWN0KCdjUlREZW5vaXNlVGVtcG9yJywge1xuICAgIGNzOiByZXF1aXJlKCcuL3NoYWRlcnMvcmF5LXRyYWNpbmcvZGVub2lzZVRlbXBvci5jb21wLndnc2wnKSxcbiAgICB1bmlmb3JtRGVzYzoge1xuICAgICAgdW5pZm9ybXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3ByZVdlaWdodCcsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZm9ybWF0OiAnZjMyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkoWzFdKVxuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgdGV4dHVyZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X291dHB1dCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5lbXB0eSxcbiAgICAgICAgICBzdG9yYWdlQWNjZXNzOiAnd3JpdGUtb25seScsXG4gICAgICAgICAgc3RvcmFnZUZvcm1hdDogJ3JnYmExNmZsb2F0J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfcHJlJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5LFxuICAgICAgICAgIHN0b3JhZ2VBY2Nlc3M6ICdyZWFkLW9ubHknLFxuICAgICAgICAgIHN0b3JhZ2VGb3JtYXQ6ICdyZ2JhMTZmbG9hdCdcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2N1cnJlbnQnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHksXG4gICAgICAgICAgc3RvcmFnZUFjY2VzczogJ3JlYWQtb25seScsXG4gICAgICAgICAgc3RvcmFnZUZvcm1hdDogJ3JnYmExNmZsb2F0J1xuICAgICAgICB9XG4gICAgICBdLFxuICAgICAgc2FtcGxlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3NhbXBsZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZToge21hZ0ZpbHRlcjogJ2xpbmVhcicsIG1pbkZpbHRlcjogJ2xpbmVhcicsIG1pcG1hcEZpbHRlcjogJ25lYXJlc3QnfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfVxuICB9KTtcblxuICBlZmZlY3RzLmNSVERlbm9pc2VTcGFjZSA9IG5ldyBFZmZlY3QoJ2NSVERlbm9pc2VTcGFjZScsIHtcbiAgICBjczogcmVxdWlyZSgnLi9zaGFkZXJzL3JheS10cmFjaW5nL2Rlbm9pc2VTcGFjZS5jb21wLndnc2wnKSxcbiAgICB1bmlmb3JtRGVzYzoge1xuICAgICAgdW5pZm9ybXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIC8vIFtkaXN0YW5jZSwgY29sb3IsIGRlcHRoLCBub3JtYWxdXG4gICAgICAgICAgbmFtZTogJ3VfZmlsdGVyRmFjdG9ycycsXG4gICAgICAgICAgdHlwZTogJ3ZlYzQnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogZ2VuRmlsdGVyUGFyYW1zKG5ldyBGbG9hdDMyQXJyYXkoWzMsIDAuMSwgMiwgMC4xXSkpXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0ZXh0dXJlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfb3V0cHV0JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5LFxuICAgICAgICAgIHN0b3JhZ2VBY2Nlc3M6ICd3cml0ZS1vbmx5JyxcbiAgICAgICAgICBzdG9yYWdlRm9ybWF0OiAncmdiYTE2ZmxvYXQnXG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9wcmVGaWx0ZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHksXG4gICAgICAgICAgc3RvcmFnZUFjY2VzczogJ3JlYWQtb25seScsXG4gICAgICAgICAgc3RvcmFnZUZvcm1hdDogJ3JnYmExNmZsb2F0J1xuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfZ2JQb3NpdGlvbk1ldGFsT3JTcGVjJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9nYk5vcm1hbEdsYXNzJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5XG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgc2FtcGxlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3NhbXBsZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZToge21hZ0ZpbHRlcjogJ2xpbmVhcicsIG1pbkZpbHRlcjogJ2xpbmVhcicsIG1pcG1hcEZpbHRlcjogJ25lYXJlc3QnfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICBtYXJjb3M6IHtXSU5ET1dfU0laRTogN31cbiAgfSk7XG5cbiAgZWZmZWN0cy5pUlRHU2hvdyA9IG5ldyBFZmZlY3QoJ2lSVEdTaG93Jywge1xuICAgIHZzOiByZXF1aXJlKCcuL3NoYWRlcnMvaW1hZ2UvaW1hZ2UudmVydC53Z3NsJyksXG4gICAgZnM6IHJlcXVpcmUoJy4vc2hhZGVycy9yYXktdHJhY2luZy9nc2hvdy5mcmFnLndnc2wnKSxcbiAgICB1bmlmb3JtRGVzYzoge1xuICAgICAgdW5pZm9ybXM6IFtdLFxuICAgICAgdGV4dHVyZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2diUG9zaXRpb25NZXRhbE9yU3BlYycsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5lbXB0eVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfZ2JCYXNlQ29sb3JSb3VnaE9yR2xvc3MnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2diTm9ybWFsR2xhc3MnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMuZW1wdHlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2diTWVzaEluZGV4TWF0SW5kZXhNYXRUeXBlJyxcbiAgICAgICAgICBmb3JtYXQ6ICd1aW50JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLmVtcHR5XG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgICAgc2FtcGxlcnM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3NhbXBsZXInLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZToge21hZ0ZpbHRlcjogJ2xpbmVhcicsIG1pbkZpbHRlcjogJ2xpbmVhcid9XG4gICAgICAgIH1cbiAgICAgIF1cbiAgICB9LFxuICAgIG1hcmNvczoge0ZMSVA6IGZhbHNlfVxuICB9KTtcblxuICBlZmZlY3RzLmlCbGl0ID0gbmV3IEVmZmVjdCgnaUJsaXQnLCB7XG4gICAgdnM6IHJlcXVpcmUoJy4vc2hhZGVycy9pbWFnZS9pbWFnZS52ZXJ0Lndnc2wnKSxcbiAgICBmczogcmVxdWlyZSgnLi9zaGFkZXJzL2ltYWdlL2JsaXQuZnJhZy53Z3NsJyksXG4gICAgdW5pZm9ybURlc2M6IHtcbiAgICAgIHVuaWZvcm1zOiBbXSxcbiAgICAgIHRleHR1cmVzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV90ZXh0dXJlJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHRleHR1cmVzLndoaXRlXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICBzYW1wbGVyczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfc2FtcGxlcicsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB7bWFnRmlsdGVyOiAnbGluZWFyJywgbWluRmlsdGVyOiAnbGluZWFyJ31cbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAgbWFyY29zOiB7RkxJUDogZmFsc2V9XG4gIH0pO1xuXG4gIGVmZmVjdHMuaVRvbmUgPSBuZXcgRWZmZWN0KCdpVG9uZScsIHtcbiAgICB2czogcmVxdWlyZSgnLi9zaGFkZXJzL2ltYWdlL2ltYWdlLnZlcnQud2dzbCcpLFxuICAgIGZzOiByZXF1aXJlKCcuL3NoYWRlcnMvaW1hZ2UvdG9uZS5mcmFnLndnc2wnKSxcbiAgICB1bmlmb3JtRGVzYzoge1xuICAgICAgdW5pZm9ybXM6IFtdLFxuICAgICAgdGV4dHVyZXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3RleHR1cmUnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMud2hpdGVcbiAgICAgICAgfVxuICAgICAgXSxcbiAgICAgIHNhbXBsZXJzOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9zYW1wbGVyJyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IHttYWdGaWx0ZXI6ICdsaW5lYXInLCBtaW5GaWx0ZXI6ICdsaW5lYXInfVxuICAgICAgICB9XG4gICAgICBdXG4gICAgfSxcbiAgICBtYXJjb3M6IHtGTElQOiBmYWxzZX1cbiAgfSk7XG5cbiAgZWZmZWN0cy5jQ3JlYXRlU2ltcGxlQmx1ciA9IChyYWRpdXM6IG51bWJlcikgPT4ge1xuICAgIGNvbnN0IHJlYWxLZXJuZWxTaXplID0gTWF0aC5wb3coKHJhZGl1cyAqIDIgKyAxKSwgMik7XG4gICAgY29uc3QgbW9kID0gcmVhbEtlcm5lbFNpemUgJSA0O1xuICAgIGNvbnN0IGtlcm5lbFNpemUgPSByZWFsS2VybmVsU2l6ZSArICg0IC0gbW9kKTtcblxuICAgIHJldHVybiBuZXcgRWZmZWN0KCdjU2ltcGxlQmx1ci0nICsgcmFkaXVzLCB7XG4gICAgICBjczogcmVxdWlyZSgnLi9zaGFkZXJzL2NvbXB1dGUvYmx1ci5jb21wLndnc2wnKSxcbiAgICAgIHVuaWZvcm1EZXNjOiB7XG4gICAgICAgIHVuaWZvcm1zOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Vfa2VybmVsJyxcbiAgICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICAgIHNpemU6IGtlcm5lbFNpemUgLyA0LFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KGtlcm5lbFNpemUpLmZpbGwoMSlcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHRleHR1cmVzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3VfaW5wdXQnLFxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy53aGl0ZVxuICAgICAgICAgIH0sXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Vfb3V0cHV0JyxcbiAgICAgICAgICAgIGRlZmF1bHRWYWx1ZTogdGV4dHVyZXMud2hpdGUsXG4gICAgICAgICAgICBzdG9yYWdlQWNjZXNzOiAnd3JpdGUtb25seSdcbiAgICAgICAgICB9XG4gICAgICAgIF0sXG4gICAgICAgIHNhbXBsZXJzOiBbXG4gICAgICAgICAge1xuICAgICAgICAgICAgbmFtZTogJ3Vfc2FtcGxlcicsXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWU6IHttYWdGaWx0ZXI6ICdsaW5lYXInLCBtaW5GaWx0ZXI6ICdsaW5lYXInfVxuICAgICAgICAgIH1cbiAgICAgICAgXVxuICAgICAgfSxcbiAgICAgIG1hcmNvczoge1JBRElVUzogcmFkaXVzLCBXSU5ET1dfU0laRTogcmFkaXVzICogMiArIDEsIFRJTEVfU0laRTogcmFkaXVzICogNCArIDF9XG4gICAgfSk7XG4gIH07XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = void 0;\nvar Geometry_1 = require(\"../core/Geometry\");\nvar geometries = {};\nexports.default = geometries;\nfunction init() {\n    geometries.skybox = new Geometry_1.default([\n        {\n            layout: {\n                arrayStride: 8,\n                attributes: [\n                    {\n                        name: 'position',\n                        shaderLocation: 0, offset: 0,\n                        format: 'float32x2'\n                    },\n                ]\n            },\n            data: new Float32Array([\n                -1.0, -1.0,\n                1.0, -1.0,\n                -1.0, 1.0,\n                -1.0, 1.0,\n                1.0, -1.0,\n                1.0, 1.0\n            ]),\n        }\n    ], new Uint16Array([\n        0, 1, 2, 3, 4, 5,\n    ]), 6);\n    geometries.rectLight = new Geometry_1.default([\n        {\n            layout: {\n                arrayStride: 12,\n                attributes: [\n                    {\n                        name: 'position',\n                        shaderLocation: 0, offset: 0,\n                        format: 'float32x3'\n                    },\n                ]\n            },\n            data: new Float32Array([\n                -.5, -.5, 0,\n                .5, -.5, 0,\n                .5, .5, 0,\n                -.5, .5, 0\n            ]),\n        }\n    ], new Uint16Array([\n        0, 1, 2, 2, 3, 0\n    ]), 6);\n    var discLightData = createDisc(512);\n    geometries.discLight = new Geometry_1.default([\n        {\n            layout: {\n                arrayStride: 12,\n                attributes: [\n                    {\n                        name: 'position',\n                        shaderLocation: 0, offset: 0,\n                        format: 'float32x3'\n                    },\n                ]\n            },\n            data: discLightData.vertexes,\n        }\n    ], discLightData.indexes, discLightData.indexes.length);\n}\nexports.init = init;\nfunction createDisc(samples) {\n    var step = Math.PI * 2 / samples;\n    var vertexes = new Float32Array((1 + samples) * 3);\n    var indexes = new Uint16Array(samples * 3);\n    vertexes.set([0, 0, 0]);\n    var theta = 0;\n    for (var index = 0; index < samples; index += 1) {\n        vertexes[(index + 1) * 3] = Math.cos(theta);\n        vertexes[(index + 1) * 3 + 1] = Math.sin(theta);\n        vertexes[(index + 1) * 3 + 2] = 0;\n        indexes[index * 3] = 0;\n        indexes[index * 3 + 1] = index + 2;\n        indexes[index * 3 + 2] = index + 1;\n        theta += step;\n    }\n    return { vertexes: vertexes, indexes: indexes };\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZ2VvbWV0cmllcy5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbImdlb21ldHJpZXMudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7O0FBTUEsNkNBQXdDO0FBRXhDLElBQU0sVUFBVSxHQUlaLEVBQVMsQ0FBQztBQUVkLGtCQUFlLFVBQVUsQ0FBQztBQUUxQixTQUFnQixJQUFJO0lBQ2xCLFVBQVUsQ0FBQyxNQUFNLEdBQUcsSUFBSSxrQkFBUSxDQUM5QjtRQUNFO1lBQ0UsTUFBTSxFQUFFO2dCQUNOLFdBQVcsRUFBRSxDQUFDO2dCQUNkLFVBQVUsRUFBRTtvQkFDVjt3QkFDRSxJQUFJLEVBQUUsVUFBVTt3QkFDaEIsY0FBYyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQzt3QkFDNUIsTUFBTSxFQUFFLFdBQThCO3FCQUN2QztpQkFDRjthQUNGO1lBQ0QsSUFBSSxFQUFFLElBQUksWUFBWSxDQUFDO2dCQUNyQixDQUFDLEdBQUcsRUFBRSxDQUFDLEdBQUc7Z0JBQ1YsR0FBRyxFQUFFLENBQUMsR0FBRztnQkFDVCxDQUFDLEdBQUcsRUFBRSxHQUFHO2dCQUNULENBQUMsR0FBRyxFQUFFLEdBQUc7Z0JBQ1QsR0FBRyxFQUFFLENBQUMsR0FBRztnQkFDVCxHQUFHLEVBQUUsR0FBRzthQUNULENBQUM7U0FDSDtLQUNGLEVBQ0QsSUFBSSxXQUFXLENBQUM7UUFDZCxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUM7S0FDWixDQUFDLEVBQ0YsQ0FBQyxDQUNGLENBQUM7SUFFRixVQUFVLENBQUMsU0FBUyxHQUFHLElBQUksa0JBQVEsQ0FDakM7UUFDRTtZQUNFLE1BQU0sRUFBRTtnQkFDTixXQUFXLEVBQUUsRUFBRTtnQkFDZixVQUFVLEVBQUU7b0JBQ1Y7d0JBQ0UsSUFBSSxFQUFFLFVBQVU7d0JBQ2hCLGNBQWMsRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUM7d0JBQzVCLE1BQU0sRUFBRSxXQUE4QjtxQkFDdkM7aUJBQ0Y7YUFDRjtZQUNELElBQUksRUFBRSxJQUFJLFlBQVksQ0FBQztnQkFDckIsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDWCxFQUFFLEVBQUUsQ0FBQyxFQUFFLEVBQUUsQ0FBQztnQkFDVixFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7Z0JBQ1QsQ0FBQyxFQUFFLEVBQUUsRUFBRSxFQUFFLENBQUM7YUFDWCxDQUFDO1NBQ0g7S0FDRixFQUNELElBQUksV0FBVyxDQUFDO1FBQ2QsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDLEVBQUMsQ0FBQyxFQUFDLENBQUMsRUFBQyxDQUFDO0tBQ1osQ0FBQyxFQUNGLENBQUMsQ0FDRixDQUFDO0lBRUYsSUFBTSxhQUFhLEdBQUcsVUFBVSxDQUFDLEdBQUcsQ0FBQyxDQUFDO0lBQ3RDLFVBQVUsQ0FBQyxTQUFTLEdBQUcsSUFBSSxrQkFBUSxDQUNqQztRQUNFO1lBQ0UsTUFBTSxFQUFFO2dCQUNOLFdBQVcsRUFBRSxFQUFFO2dCQUNmLFVBQVUsRUFBRTtvQkFDVjt3QkFDRSxJQUFJLEVBQUUsVUFBVTt3QkFDaEIsY0FBYyxFQUFFLENBQUMsRUFBRSxNQUFNLEVBQUUsQ0FBQzt3QkFDNUIsTUFBTSxFQUFFLFdBQThCO3FCQUN2QztpQkFDRjthQUNGO1lBQ0QsSUFBSSxFQUFFLGFBQWEsQ0FBQyxRQUFRO1NBQzdCO0tBQ0YsRUFDRCxhQUFhLENBQUMsT0FBTyxFQUNyQixhQUFhLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FDN0IsQ0FBQztBQUNKLENBQUM7QUE3RUQsb0JBNkVDO0FBRUQsU0FBUyxVQUFVLENBQUMsT0FBZTtJQUNqQyxJQUFNLElBQUksR0FBVyxJQUFJLENBQUMsRUFBRSxHQUFHLENBQUMsR0FBRyxPQUFPLENBQUM7SUFDM0MsSUFBTSxRQUFRLEdBQWlCLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO0lBQ25FLElBQU0sT0FBTyxHQUFnQixJQUFJLFdBQVcsQ0FBQyxPQUFPLEdBQUcsQ0FBQyxDQUFDLENBQUM7SUFDMUQsUUFBUSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztJQUV4QixJQUFJLEtBQUssR0FBVyxDQUFDLENBQUM7SUFDdEIsS0FBSyxJQUFJLEtBQUssR0FBRyxDQUFDLEVBQUUsS0FBSyxHQUFHLE9BQU8sRUFBRSxLQUFLLElBQUksQ0FBQyxFQUFFO1FBQy9DLFFBQVEsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQzVDLFFBQVEsQ0FBQyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUNoRCxRQUFRLENBQUMsQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUVsQyxPQUFPLENBQUMsS0FBSyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUN2QixPQUFPLENBQUMsS0FBSyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLEdBQUcsQ0FBQyxDQUFDO1FBQ25DLE9BQU8sQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLEtBQUssR0FBRyxDQUFDLENBQUM7UUFFbkMsS0FBSyxJQUFJLElBQUksQ0FBQztLQUNmO0lBRUQsT0FBTyxFQUFDLFFBQVEsVUFBQSxFQUFFLE9BQU8sU0FBQSxFQUFDLENBQUM7QUFDN0IsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogZ2VvbWV0cmllcy50c1xuICogXG4gKiBAQXV0aG9yICA6ZHR5c2t5KGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBEYXRlICAgIDogNi85LzIwMjEsIDc6MTY6NTIgUE1cbiovXG5pbXBvcnQgR2VvbWV0cnkgZnJvbSBcIi4uL2NvcmUvR2VvbWV0cnlcIjtcblxuY29uc3QgZ2VvbWV0cmllczoge1xuICBza3lib3g6IEdlb21ldHJ5LFxuICBkaXNjTGlnaHQ6IEdlb21ldHJ5LFxuICByZWN0TGlnaHQ6IEdlb21ldHJ5XG59ID0ge30gYXMgYW55O1xuXG5leHBvcnQgZGVmYXVsdCBnZW9tZXRyaWVzO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgZ2VvbWV0cmllcy5za3lib3ggPSBuZXcgR2VvbWV0cnkoXG4gICAgW1xuICAgICAge1xuICAgICAgICBsYXlvdXQ6IHtcbiAgICAgICAgICBhcnJheVN0cmlkZTogOCxcbiAgICAgICAgICBhdHRyaWJ1dGVzOiBbXG4gICAgICAgICAgICB7XG4gICAgICAgICAgICAgIG5hbWU6ICdwb3NpdGlvbicsXG4gICAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLCBvZmZzZXQ6IDAsXG4gICAgICAgICAgICAgIGZvcm1hdDogJ2Zsb2F0MzJ4MicgYXMgR1BVVmVydGV4Rm9ybWF0XG4gICAgICAgICAgICB9LFxuICAgICAgICAgIF1cbiAgICAgICAgfSxcbiAgICAgICAgZGF0YTogbmV3IEZsb2F0MzJBcnJheShbXG4gICAgICAgICAgLTEuMCwgLTEuMCxcbiAgICAgICAgICAxLjAsIC0xLjAsXG4gICAgICAgICAgLTEuMCwgMS4wLFxuICAgICAgICAgIC0xLjAsIDEuMCxcbiAgICAgICAgICAxLjAsIC0xLjAsXG4gICAgICAgICAgMS4wLCAxLjBcbiAgICAgICAgXSksXG4gICAgICB9XG4gICAgXSxcbiAgICBuZXcgVWludDE2QXJyYXkoW1xuICAgICAgMCwxLDIsMyw0LDUsXG4gICAgXSksXG4gICAgNlxuICApO1xuXG4gIGdlb21ldHJpZXMucmVjdExpZ2h0ID0gbmV3IEdlb21ldHJ5KFxuICAgIFtcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgYXJyYXlTdHJpZGU6IDEyLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogJ3Bvc2l0aW9uJyxcbiAgICAgICAgICAgICAgc2hhZGVyTG9jYXRpb246IDAsIG9mZnNldDogMCxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJyBhcyBHUFVWZXJ0ZXhGb3JtYXRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBuZXcgRmxvYXQzMkFycmF5KFtcbiAgICAgICAgICAtLjUsIC0uNSwgMCxcbiAgICAgICAgICAuNSwgLS41LCAwLFxuICAgICAgICAgIC41LCAuNSwgMCxcbiAgICAgICAgICAtLjUsIC41LCAwXG4gICAgICAgIF0pLFxuICAgICAgfVxuICAgIF0sXG4gICAgbmV3IFVpbnQxNkFycmF5KFtcbiAgICAgIDAsMSwyLDIsMywwXG4gICAgXSksXG4gICAgNlxuICApO1xuXG4gIGNvbnN0IGRpc2NMaWdodERhdGEgPSBjcmVhdGVEaXNjKDUxMik7XG4gIGdlb21ldHJpZXMuZGlzY0xpZ2h0ID0gbmV3IEdlb21ldHJ5KFxuICAgIFtcbiAgICAgIHtcbiAgICAgICAgbGF5b3V0OiB7XG4gICAgICAgICAgYXJyYXlTdHJpZGU6IDEyLFxuICAgICAgICAgIGF0dHJpYnV0ZXM6IFtcbiAgICAgICAgICAgIHtcbiAgICAgICAgICAgICAgbmFtZTogJ3Bvc2l0aW9uJyxcbiAgICAgICAgICAgICAgc2hhZGVyTG9jYXRpb246IDAsIG9mZnNldDogMCxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJyBhcyBHUFVWZXJ0ZXhGb3JtYXRcbiAgICAgICAgICAgIH0sXG4gICAgICAgICAgXVxuICAgICAgICB9LFxuICAgICAgICBkYXRhOiBkaXNjTGlnaHREYXRhLnZlcnRleGVzLFxuICAgICAgfVxuICAgIF0sXG4gICAgZGlzY0xpZ2h0RGF0YS5pbmRleGVzLFxuICAgIGRpc2NMaWdodERhdGEuaW5kZXhlcy5sZW5ndGhcbiAgKTtcbn1cblxuZnVuY3Rpb24gY3JlYXRlRGlzYyhzYW1wbGVzOiBudW1iZXIpOiB7dmVydGV4ZXM6IEZsb2F0MzJBcnJheSwgaW5kZXhlczogVWludDE2QXJyYXl9IHtcbiAgY29uc3Qgc3RlcDogbnVtYmVyID0gTWF0aC5QSSAqIDIgLyBzYW1wbGVzO1xuICBjb25zdCB2ZXJ0ZXhlczogRmxvYXQzMkFycmF5ID0gbmV3IEZsb2F0MzJBcnJheSgoMSArIHNhbXBsZXMpICogMyk7XG4gIGNvbnN0IGluZGV4ZXM6IFVpbnQxNkFycmF5ID0gbmV3IFVpbnQxNkFycmF5KHNhbXBsZXMgKiAzKTtcbiAgdmVydGV4ZXMuc2V0KFswLCAwLCAwXSk7XG5cbiAgbGV0IHRoZXRhOiBudW1iZXIgPSAwO1xuICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgc2FtcGxlczsgaW5kZXggKz0gMSkge1xuICAgIHZlcnRleGVzWyhpbmRleCArIDEpICogM10gPSBNYXRoLmNvcyh0aGV0YSk7XG4gICAgdmVydGV4ZXNbKGluZGV4ICsgMSkgKiAzICsgMV0gPSBNYXRoLnNpbih0aGV0YSk7XG4gICAgdmVydGV4ZXNbKGluZGV4ICsgMSkgKiAzICsgMl0gPSAwO1xuXG4gICAgaW5kZXhlc1tpbmRleCAqIDNdID0gMDtcbiAgICBpbmRleGVzW2luZGV4ICogMyArIDFdID0gaW5kZXggKyAyO1xuICAgIGluZGV4ZXNbaW5kZXggKiAzICsgMl0gPSBpbmRleCArIDE7XG5cbiAgICB0aGV0YSArPSBzdGVwO1xuICB9XG5cbiAgcmV0dXJuIHt2ZXJ0ZXhlcywgaW5kZXhlc307XG59XG4iXX0=","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = exports.buildinUBTemplates = exports.buildinEffects = exports.buildinGeometries = exports.buildinTextures = void 0;\nvar textures_1 = require(\"./textures\");\nexports.buildinTextures = textures_1.default;\nvar geometries_1 = require(\"./geometries\");\nexports.buildinGeometries = geometries_1.default;\nvar effects_1 = require(\"./effects\");\nexports.buildinEffects = effects_1.default;\nvar ubTemplates_1 = require(\"./ubTemplates\");\nexports.buildinUBTemplates = ubTemplates_1.default;\nfunction init() {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, textures_1.init()];\n                case 1:\n                    _a.sent();\n                    ubTemplates_1.init();\n                    geometries_1.init();\n                    effects_1.init();\n                    return [2];\n            }\n        });\n    });\n}\nexports.init = init;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQSx1Q0FBaUU7QUFDekQsMEJBREQsa0JBQWUsQ0FDQztBQUN2QiwyQ0FBdUU7QUFDL0QsNEJBREQsb0JBQWlCLENBQ0M7QUFDekIscUNBQThEO0FBQ3RELHlCQURELGlCQUFjLENBQ0M7QUFDdEIsNkNBQTBFO0FBQ2xFLDZCQURELHFCQUFrQixDQUNDO0FBRTFCLFNBQXNCLElBQUk7Ozs7d0JBQ3hCLFdBQU0sZUFBWSxFQUFFLEVBQUE7O29CQUFwQixTQUFvQixDQUFDO29CQUNyQixrQkFBZSxFQUFFLENBQUM7b0JBQ2xCLGlCQUFjLEVBQUUsQ0FBQztvQkFDakIsY0FBVyxFQUFFLENBQUM7Ozs7O0NBQ2Y7QUFMRCxvQkFLQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IGluZGV4LnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi825LiL5Y2IODo1Njo0OVxuICovXG5pbXBvcnQgYnVpbGRpblRleHR1cmVzLCB7aW5pdCBhcyBpbml0VGV4dHVyZXN9IGZyb20gJy4vdGV4dHVyZXMnO1xuZXhwb3J0IHtidWlsZGluVGV4dHVyZXN9O1xuaW1wb3J0IGJ1aWxkaW5HZW9tZXRyaWVzLCB7aW5pdCBhcyBpbml0R2VvbWV0cmllc30gZnJvbSAnLi9nZW9tZXRyaWVzJztcbmV4cG9ydCB7YnVpbGRpbkdlb21ldHJpZXN9O1xuaW1wb3J0IGJ1aWxkaW5FZmZlY3RzLCB7aW5pdCBhcyBpbml0RWZmZWN0c30gZnJvbSAnLi9lZmZlY3RzJztcbmV4cG9ydCB7YnVpbGRpbkVmZmVjdHN9O1xuaW1wb3J0IGJ1aWxkaW5VQlRlbXBsYXRlcywge2luaXQgYXMgaW5pdFVCVGVtcGxhdGVzfSBmcm9tICcuL3ViVGVtcGxhdGVzJztcbmV4cG9ydCB7YnVpbGRpblVCVGVtcGxhdGVzfTtcblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXQoKSB7XG4gIGF3YWl0IGluaXRUZXh0dXJlcygpO1xuICBpbml0VUJUZW1wbGF0ZXMoKTtcbiAgaW5pdEdlb21ldHJpZXMoKTtcbiAgaW5pdEVmZmVjdHMoKTtcbn1cbiJdfQ==","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = void 0;\nvar CubeTexture_1 = require(\"../core/CubeTexture\");\nvar shared_1 = require(\"../core/shared\");\nvar Texture_1 = require(\"../core/Texture\");\nvar textures = {};\nexports.default = textures;\nfunction createTexture(width, height, buffer) {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, _b, _c, _d;\n        var _this = this;\n        return __generator(this, function (_e) {\n            switch (_e.label) {\n                case 0:\n                    if (!shared_1.isArray(buffer)) return [3, 2];\n                    _a = Texture_1.default.bind;\n                    _b = [void 0, width, height];\n                    return [4, Promise.all(buffer.map(function (b) { return __awaiter(_this, void 0, void 0, function () {\n                            return __generator(this, function (_a) {\n                                switch (_a.label) {\n                                    case 0: return [4, createImageBitmap(new ImageData(b, width, height))];\n                                    case 1: return [2, _a.sent()];\n                                }\n                            });\n                        }); }))];\n                case 1: return [2, new (_a.apply(Texture_1.default, _b.concat([_e.sent()])))()];\n                case 2:\n                    _c = Texture_1.default.bind;\n                    _d = [void 0, width, height];\n                    return [4, createImageBitmap(new ImageData(buffer, width, height))];\n                case 3: return [2, new (_c.apply(Texture_1.default, _d.concat([_e.sent()])))()];\n            }\n        });\n    });\n}\nfunction init() {\n    return __awaiter(this, void 0, void 0, function () {\n        var _a, _b, _c, _d, _e, _f, _g;\n        return __generator(this, function (_h) {\n            switch (_h.label) {\n                case 0:\n                    _a = textures;\n                    return [4, createTexture(1, 1, new Uint8ClampedArray([255, 255, 255, 255]))];\n                case 1:\n                    _a.empty = _h.sent();\n                    _b = textures;\n                    return [4, createTexture(1, 1, new Uint8ClampedArray([255, 255, 255, 255]))];\n                case 2:\n                    _b.white = _h.sent();\n                    _c = textures;\n                    return [4, createTexture(1, 1, new Uint8ClampedArray([0, 0, 0, 255]))];\n                case 3:\n                    _c.black = _h.sent();\n                    _d = textures;\n                    return [4, createTexture(1, 1, new Uint8ClampedArray([255, 0, 0, 255]))];\n                case 4:\n                    _d.red = _h.sent();\n                    _e = textures;\n                    return [4, createTexture(1, 1, new Uint8ClampedArray([0, 255, 0, 255]))];\n                case 5:\n                    _e.green = _h.sent();\n                    _f = textures;\n                    return [4, createTexture(1, 1, new Uint8ClampedArray([0, 0, 255, 255]))];\n                case 6:\n                    _f.blue = _h.sent();\n                    _g = textures;\n                    return [4, createTexture(1, 1, [\n                            new Uint8ClampedArray([255, 255, 255, 255]),\n                            new Uint8ClampedArray([255, 255, 255, 255])\n                        ])];\n                case 7:\n                    _g.array1white = _h.sent();\n                    textures.cubeWhite = new CubeTexture_1.default(1, 1, new Array(6).fill(new Uint8Array([255, 255, 255, 255]).buffer));\n                    textures.cubeBlack = new CubeTexture_1.default(1, 1, new Array(6).fill(new Uint8Array([0, 0, 0, 255]).buffer));\n                    return [2];\n            }\n        });\n    });\n}\nexports.init = init;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidGV4dHVyZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ0ZXh0dXJlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQSxtREFBOEM7QUFDOUMseUNBQXlDO0FBQ3pDLDJDQUFzQztBQUV0QyxJQUFNLFFBQVEsR0FhVixFQUFTLENBQUM7QUFFZCxrQkFBZSxRQUFRLENBQUM7QUFFeEIsU0FBZSxhQUFhLENBQUMsS0FBYSxFQUFFLE1BQWMsRUFBRSxNQUErQzs7Ozs7Ozt5QkFDckcsZ0JBQU8sQ0FBb0IsTUFBTSxDQUFDLEVBQWxDLGNBQWtDO3lCQUN6QixpQkFBTztrQ0FBQyxLQUFLLEVBQUUsTUFBTTtvQkFBRSxXQUFNLE9BQU8sQ0FBQyxHQUFHLENBQUMsTUFBTSxDQUFDLEdBQUcsQ0FBQyxVQUFNLENBQUM7Ozs0Q0FDN0QsV0FBTSxpQkFBaUIsQ0FBQyxJQUFJLFNBQVMsQ0FBQyxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLEVBQUE7NENBQS9ELFdBQU8sU0FBd0QsRUFBQzs7OzZCQUNqRSxDQUFDLENBQUMsRUFBQTt3QkFGSCxXQUFPLGNBQUksaUJBQU8sYUFBZ0IsU0FFL0IsTUFBQyxFQUFDOzt5QkFFTSxpQkFBTztrQ0FBQyxLQUFLLEVBQUUsTUFBTTtvQkFBRSxXQUFNLGlCQUFpQixDQUFDLElBQUksU0FBUyxDQUFDLE1BQU0sRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUMsRUFBQTt3QkFBL0YsV0FBTyxjQUFJLGlCQUFPLGFBQWdCLFNBQTZELE1BQUMsRUFBQzs7OztDQUVwRztBQUVELFNBQXNCLElBQUk7Ozs7OztvQkFDeEIsS0FBQSxRQUFRLENBQUE7b0JBQVMsV0FBTSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFBOztvQkFBdkYsR0FBUyxLQUFLLEdBQUcsU0FBc0UsQ0FBQztvQkFDeEYsS0FBQSxRQUFRLENBQUE7b0JBQVMsV0FBTSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFBOztvQkFBdkYsR0FBUyxLQUFLLEdBQUcsU0FBc0UsQ0FBQztvQkFDeEYsS0FBQSxRQUFRLENBQUE7b0JBQVMsV0FBTSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFBOztvQkFBakYsR0FBUyxLQUFLLEdBQUcsU0FBZ0UsQ0FBQztvQkFDbEYsS0FBQSxRQUFRLENBQUE7b0JBQU8sV0FBTSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsR0FBRyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFBOztvQkFBakYsR0FBUyxHQUFHLEdBQUcsU0FBa0UsQ0FBQztvQkFDbEYsS0FBQSxRQUFRLENBQUE7b0JBQVMsV0FBTSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFBOztvQkFBbkYsR0FBUyxLQUFLLEdBQUcsU0FBa0UsQ0FBQztvQkFDcEYsS0FBQSxRQUFRLENBQUE7b0JBQVEsV0FBTSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxJQUFJLGlCQUFpQixDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsQ0FBQyxFQUFBOztvQkFBbEYsR0FBUyxJQUFJLEdBQUcsU0FBa0UsQ0FBQztvQkFDbkYsS0FBQSxRQUFRLENBQUE7b0JBQWUsV0FBTSxhQUFhLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRTs0QkFDL0MsSUFBSSxpQkFBaUIsQ0FBQyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDOzRCQUMzQyxJQUFJLGlCQUFpQixDQUFDLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7eUJBQzVDLENBQUMsRUFBQTs7b0JBSEYsR0FBUyxXQUFXLEdBQUcsU0FHckIsQ0FBQztvQkFDSCxRQUFRLENBQUMsU0FBUyxHQUFHLElBQUkscUJBQVcsQ0FDbEMsQ0FBQyxFQUFFLENBQUMsRUFDSixJQUFJLEtBQUssQ0FBYyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsSUFBSSxVQUFVLENBQUMsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxDQUM1RSxDQUFDO29CQUNGLFFBQVEsQ0FBQyxTQUFTLEdBQUcsSUFBSSxxQkFBVyxDQUNsQyxDQUFDLEVBQUUsQ0FBQyxFQUNKLElBQUksS0FBSyxDQUFjLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLFVBQVUsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLENBQ3RFLENBQUM7Ozs7O0NBQ0g7QUFuQkQsb0JBbUJDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBARmlsZSAgIDogdGV4dHVyZXMudHNcbiAqIEBBdXRob3IgOiBkdHlza3kgKGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBMaW5rICAgOiBkdHlza3kubW9lXG4gKiBARGF0ZSAgIDogMjAyMS82LzbkuIvljYg4OjU2OjQ5XG4gKi9cbmltcG9ydCBDdWJlVGV4dHVyZSBmcm9tIFwiLi4vY29yZS9DdWJlVGV4dHVyZVwiO1xuaW1wb3J0IHsgaXNBcnJheSB9IGZyb20gXCIuLi9jb3JlL3NoYXJlZFwiO1xuaW1wb3J0IFRleHR1cmUgZnJvbSBcIi4uL2NvcmUvVGV4dHVyZVwiO1xuXG5jb25zdCB0ZXh0dXJlczoge1xuICAvKipcbiAgICogQSB0cmljayBmb3IgZGVmYXVsdFZhbHVlXG4gICAqL1xuICBlbXB0eTogVGV4dHVyZSxcbiAgd2hpdGU6IFRleHR1cmUsXG4gIHJlZDogVGV4dHVyZSxcbiAgZ3JlZW46IFRleHR1cmUsXG4gIGJsdWU6IFRleHR1cmUsXG4gIGJsYWNrOiBUZXh0dXJlLFxuICBhcnJheTF3aGl0ZTogVGV4dHVyZSxcbiAgY3ViZVdoaXRlOiBDdWJlVGV4dHVyZSxcbiAgY3ViZUJsYWNrOiBDdWJlVGV4dHVyZVxufSA9IHt9IGFzIGFueTtcblxuZXhwb3J0IGRlZmF1bHQgdGV4dHVyZXM7XG5cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZVRleHR1cmUod2lkdGg6IG51bWJlciwgaGVpZ2h0OiBudW1iZXIsIGJ1ZmZlcjogVWludDhDbGFtcGVkQXJyYXkgfCBVaW50OENsYW1wZWRBcnJheVtdKSB7XG4gIGlmIChpc0FycmF5PFVpbnQ4Q2xhbXBlZEFycmF5PihidWZmZXIpKSB7XG4gICAgcmV0dXJuIG5ldyBUZXh0dXJlKHdpZHRoLCBoZWlnaHQsIGF3YWl0IFByb21pc2UuYWxsKGJ1ZmZlci5tYXAoYXN5bmMgYiA9PiB7XG4gICAgICByZXR1cm4gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAobmV3IEltYWdlRGF0YShiLCB3aWR0aCwgaGVpZ2h0KSk7XG4gICAgfSkpKTtcbiAgfSBlbHNlIHtcbiAgICByZXR1cm4gbmV3IFRleHR1cmUod2lkdGgsIGhlaWdodCwgYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAobmV3IEltYWdlRGF0YShidWZmZXIsIHdpZHRoLCBoZWlnaHQpKSk7XG4gIH1cbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGluaXQoKSB7XG4gIHRleHR1cmVzLmVtcHR5ID0gYXdhaXQgY3JlYXRlVGV4dHVyZSgxLCAxLCBuZXcgVWludDhDbGFtcGVkQXJyYXkoWzI1NSwgMjU1LCAyNTUsIDI1NV0pKTtcbiAgdGV4dHVyZXMud2hpdGUgPSBhd2FpdCBjcmVhdGVUZXh0dXJlKDEsIDEsIG5ldyBVaW50OENsYW1wZWRBcnJheShbMjU1LCAyNTUsIDI1NSwgMjU1XSkpO1xuICB0ZXh0dXJlcy5ibGFjayA9IGF3YWl0IGNyZWF0ZVRleHR1cmUoMSwgMSwgbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KFswLCAwLCAwLCAyNTVdKSk7XG4gIHRleHR1cmVzLnJlZCA9IGF3YWl0IGNyZWF0ZVRleHR1cmUoMSwgMSwgbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KFsyNTUsIDAsIDAsIDI1NV0pKTtcbiAgdGV4dHVyZXMuZ3JlZW4gPSBhd2FpdCBjcmVhdGVUZXh0dXJlKDEsIDEsIG5ldyBVaW50OENsYW1wZWRBcnJheShbMCwgMjU1LCAwLCAyNTVdKSk7XG4gIHRleHR1cmVzLmJsdWUgPSBhd2FpdCBjcmVhdGVUZXh0dXJlKDEsIDEsIG5ldyBVaW50OENsYW1wZWRBcnJheShbMCwgMCwgMjU1LCAyNTVdKSk7XG4gIHRleHR1cmVzLmFycmF5MXdoaXRlID0gYXdhaXQgY3JlYXRlVGV4dHVyZSgxLCAxLCBbXG4gICAgbmV3IFVpbnQ4Q2xhbXBlZEFycmF5KFsyNTUsIDI1NSwgMjU1LCAyNTVdKSxcbiAgICBuZXcgVWludDhDbGFtcGVkQXJyYXkoWzI1NSwgMjU1LCAyNTUsIDI1NV0pXG4gIF0pO1xuICB0ZXh0dXJlcy5jdWJlV2hpdGUgPSBuZXcgQ3ViZVRleHR1cmUoXG4gICAgMSwgMSxcbiAgICBuZXcgQXJyYXk8QXJyYXlCdWZmZXI+KDYpLmZpbGwobmV3IFVpbnQ4QXJyYXkoWzI1NSwgMjU1LCAyNTUsIDI1NV0pLmJ1ZmZlcilcbiAgKTtcbiAgdGV4dHVyZXMuY3ViZUJsYWNrID0gbmV3IEN1YmVUZXh0dXJlKFxuICAgIDEsIDEsXG4gICAgbmV3IEFycmF5PEFycmF5QnVmZmVyPig2KS5maWxsKG5ldyBVaW50OEFycmF5KFswLCAwLCAwLCAyNTVdKS5idWZmZXIpXG4gICk7XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.init = void 0;\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar UBTemplate_1 = require(\"../core/UBTemplate\");\nvar textures_1 = require(\"./textures\");\nvar ubTemplates = {};\nexports.default = ubTemplates;\nfunction init() {\n    ubTemplates.global = new UBTemplate_1.default({\n        uniforms: [\n            {\n                name: 'u_vp',\n                type: 'mat4x4',\n                defaultValue: gl_matrix_1.mat4.identity(new Float32Array(16))\n            },\n            {\n                name: 'u_view',\n                type: 'mat4x4',\n                defaultValue: gl_matrix_1.mat4.identity(new Float32Array(16))\n            },\n            {\n                name: 'u_proj',\n                type: 'mat4x4',\n                defaultValue: gl_matrix_1.mat4.identity(new Float32Array(16))\n            },\n            {\n                name: 'u_viewInverse',\n                type: 'mat4x4',\n                defaultValue: gl_matrix_1.mat4.identity(new Float32Array(16))\n            },\n            {\n                name: 'u_projInverse',\n                type: 'mat4x4',\n                defaultValue: gl_matrix_1.mat4.identity(new Float32Array(16))\n            },\n            {\n                name: 'u_skyVP',\n                type: 'mat4x4',\n                defaultValue: gl_matrix_1.mat4.identity(new Float32Array(16))\n            },\n            {\n                name: 'u_gameTime',\n                type: 'number',\n                defaultValue: new Float32Array([0])\n            },\n            {\n                name: 'u_envColor',\n                type: 'vec4',\n                defaultValue: new Float32Array([0, 0, 0, 0])\n            },\n            {\n                name: 'u_lightInfos',\n                customType: {\n                    name: 'LightInfo',\n                    len: 40,\n                    code: \"\\nstruct LightInfo {\\n  lightType: u32;\\n  areaMode: u32;\\n  areaSize: vec2<f32>;\\n  color: vec4<f32>;\\n  worldTransform: mat4x4<f32>;\\n  worldTransformInverse: mat4x4<f32>;\\n};\"\n                },\n                type: 'vec4',\n                size: 4,\n                defaultValue: new Float32Array(40 * 4)\n            }\n        ],\n        textures: [\n            {\n                name: 'u_envTexture',\n                defaultValue: textures_1.default.cubeBlack\n            }\n        ]\n    }, UBTemplate_1.EUBGroup.Global);\n    ubTemplates.staticMesh = new UBTemplate_1.default({\n        uniforms: [\n            {\n                name: 'u_world',\n                type: 'mat4x4',\n                defaultValue: gl_matrix_1.mat4.identity(new Float32Array(16))\n            },\n        ]\n    }, UBTemplate_1.EUBGroup.Mesh);\n}\nexports.init = init;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoidWJUZW1wbGF0ZXMuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJ1YlRlbXBsYXRlcy50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7QUFNQSx1Q0FBK0I7QUFDL0IsaURBQTBEO0FBQzFELHVDQUFrQztBQUVsQyxJQUFNLFdBQVcsR0FHYixFQUFTLENBQUM7QUFFZCxrQkFBZSxXQUFXLENBQUM7QUFFM0IsU0FBZ0IsSUFBSTtJQUNsQixXQUFXLENBQUMsTUFBTSxHQUFHLElBQUksb0JBQVUsQ0FDakM7UUFDRSxRQUFRLEVBQUU7WUFDUjtnQkFDRSxJQUFJLEVBQUUsTUFBTTtnQkFDWixJQUFJLEVBQUUsUUFBUTtnQkFDZCxZQUFZLEVBQUUsZ0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxZQUFZLENBQUMsRUFBRSxDQUFDLENBQWlCO2FBQ2xFO1lBQ0Q7Z0JBQ0UsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsWUFBWSxFQUFFLGdCQUFJLENBQUMsUUFBUSxDQUFDLElBQUksWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFpQjthQUNsRTtZQUNEO2dCQUNFLElBQUksRUFBRSxRQUFRO2dCQUNkLElBQUksRUFBRSxRQUFRO2dCQUNkLFlBQVksRUFBRSxnQkFBSSxDQUFDLFFBQVEsQ0FBQyxJQUFJLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBaUI7YUFDbEU7WUFDRDtnQkFDRSxJQUFJLEVBQUUsZUFBZTtnQkFDckIsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsWUFBWSxFQUFFLGdCQUFJLENBQUMsUUFBUSxDQUFDLElBQUksWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFpQjthQUNsRTtZQUNEO2dCQUNFLElBQUksRUFBRSxlQUFlO2dCQUNyQixJQUFJLEVBQUUsUUFBUTtnQkFDZCxZQUFZLEVBQUUsZ0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxZQUFZLENBQUMsRUFBRSxDQUFDLENBQWlCO2FBQ2xFO1lBQ0Q7Z0JBQ0UsSUFBSSxFQUFFLFNBQVM7Z0JBQ2YsSUFBSSxFQUFFLFFBQVE7Z0JBQ2QsWUFBWSxFQUFFLGdCQUFJLENBQUMsUUFBUSxDQUFDLElBQUksWUFBWSxDQUFDLEVBQUUsQ0FBQyxDQUFpQjthQUNsRTtZQUNEO2dCQUNFLElBQUksRUFBRSxZQUFZO2dCQUNsQixJQUFJLEVBQUUsUUFBUTtnQkFDZCxZQUFZLEVBQUUsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQzthQUNwQztZQUNEO2dCQUNFLElBQUksRUFBRSxZQUFZO2dCQUNsQixJQUFJLEVBQUUsTUFBTTtnQkFDWixZQUFZLEVBQUUsSUFBSSxZQUFZLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQzthQUM3QztZQUNEO2dCQUVFLElBQUksRUFBRSxjQUFjO2dCQUNwQixVQUFVLEVBQUU7b0JBQ1YsSUFBSSxFQUFFLFdBQVc7b0JBQ2pCLEdBQUcsRUFBRSxFQUFFO29CQUNQLElBQUksRUFBRSxtTEFRZjtpQkFDUTtnQkFDRCxJQUFJLEVBQUUsTUFBTTtnQkFDWixJQUFJLEVBQUUsQ0FBQztnQkFDUCxZQUFZLEVBQUUsSUFBSSxZQUFZLENBQUMsRUFBRSxHQUFHLENBQUMsQ0FBQzthQUN2QztTQUNGO1FBQ0QsUUFBUSxFQUFFO1lBQ1I7Z0JBQ0UsSUFBSSxFQUFFLGNBQWM7Z0JBQ3BCLFlBQVksRUFBRSxrQkFBUSxDQUFDLFNBQVM7YUFDakM7U0FDRjtLQUNGLEVBQ0QscUJBQVEsQ0FBQyxNQUFNLENBQ2hCLENBQUM7SUFFRixXQUFXLENBQUMsVUFBVSxHQUFHLElBQUksb0JBQVUsQ0FDckM7UUFDRSxRQUFRLEVBQUU7WUFDUjtnQkFDRSxJQUFJLEVBQUUsU0FBUztnQkFDZixJQUFJLEVBQUUsUUFBUTtnQkFDZCxZQUFZLEVBQUUsZ0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxZQUFZLENBQUMsRUFBRSxDQUFDLENBQWlCO2FBQ2xFO1NBQ0Y7S0FDRixFQUNELHFCQUFRLENBQUMsSUFBSSxDQUNkLENBQUM7QUFDSixDQUFDO0FBdkZELG9CQXVGQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IHViVGVtcGxhdGVzLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICAgOiA2LzI0LzIwMjEsIDIzOjAwOjU1IFBNXG4gKi9cbmltcG9ydCB7bWF0NH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCBVQlRlbXBsYXRlLCB7IEVVQkdyb3VwIH0gZnJvbSBcIi4uL2NvcmUvVUJUZW1wbGF0ZVwiO1xuaW1wb3J0IHRleHR1cmVzIGZyb20gJy4vdGV4dHVyZXMnO1xuXG5jb25zdCB1YlRlbXBsYXRlczoge1xuICBnbG9iYWw6IFVCVGVtcGxhdGUsXG4gIHN0YXRpY01lc2g6IFVCVGVtcGxhdGVcbn0gPSB7fSBhcyBhbnk7XG5cbmV4cG9ydCBkZWZhdWx0IHViVGVtcGxhdGVzO1xuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCgpIHtcbiAgdWJUZW1wbGF0ZXMuZ2xvYmFsID0gbmV3IFVCVGVtcGxhdGUoXG4gICAge1xuICAgICAgdW5pZm9ybXM6IFtcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3ZwJyxcbiAgICAgICAgICB0eXBlOiAnbWF0NHg0JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpIGFzIEZsb2F0MzJBcnJheVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfdmlldycsXG4gICAgICAgICAgdHlwZTogJ21hdDR4NCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBtYXQ0LmlkZW50aXR5KG5ldyBGbG9hdDMyQXJyYXkoMTYpKSBhcyBGbG9hdDMyQXJyYXlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3Byb2onLFxuICAgICAgICAgIHR5cGU6ICdtYXQ0eDQnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbWF0NC5pZGVudGl0eShuZXcgRmxvYXQzMkFycmF5KDE2KSkgYXMgRmxvYXQzMkFycmF5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV92aWV3SW52ZXJzZScsXG4gICAgICAgICAgdHlwZTogJ21hdDR4NCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBtYXQ0LmlkZW50aXR5KG5ldyBGbG9hdDMyQXJyYXkoMTYpKSBhcyBGbG9hdDMyQXJyYXlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X3Byb2pJbnZlcnNlJyxcbiAgICAgICAgICB0eXBlOiAnbWF0NHg0JyxcbiAgICAgICAgICBkZWZhdWx0VmFsdWU6IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpIGFzIEZsb2F0MzJBcnJheVxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3Vfc2t5VlAnLFxuICAgICAgICAgIHR5cGU6ICdtYXQ0eDQnLFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbWF0NC5pZGVudGl0eShuZXcgRmxvYXQzMkFycmF5KDE2KSkgYXMgRmxvYXQzMkFycmF5XG4gICAgICAgIH0sXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV9nYW1lVGltZScsXG4gICAgICAgICAgdHlwZTogJ251bWJlcicsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KFswXSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIG5hbWU6ICd1X2VudkNvbG9yJyxcbiAgICAgICAgICB0eXBlOiAndmVjNCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KFswLCAwLCAwLCAwXSlcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIC8vIGluZm86IGJpdDEocGFjayAoNGJpdHMgdHlwZXw0Yml0cyBtb2RlKXxyfGd8YiksIGJpdDIoaW50ZW5zaXR5KSwgYml0My80KGFyZWFMaWdodFNpemUueHkpXG4gICAgICAgICAgbmFtZTogJ3VfbGlnaHRJbmZvcycsXG4gICAgICAgICAgY3VzdG9tVHlwZToge1xuICAgICAgICAgICAgbmFtZTogJ0xpZ2h0SW5mbycsXG4gICAgICAgICAgICBsZW46IDQwLFxuICAgICAgICAgICAgY29kZTogYFxuc3RydWN0IExpZ2h0SW5mbyB7XG4gIGxpZ2h0VHlwZTogdTMyO1xuICBhcmVhTW9kZTogdTMyO1xuICBhcmVhU2l6ZTogdmVjMjxmMzI+O1xuICBjb2xvcjogdmVjNDxmMzI+O1xuICB3b3JsZFRyYW5zZm9ybTogbWF0NHg0PGYzMj47XG4gIHdvcmxkVHJhbnNmb3JtSW52ZXJzZTogbWF0NHg0PGYzMj47XG59O2BcbiAgICAgICAgICB9LFxuICAgICAgICAgIHR5cGU6ICd2ZWM0JyxcbiAgICAgICAgICBzaXplOiA0LFxuICAgICAgICAgIGRlZmF1bHRWYWx1ZTogbmV3IEZsb2F0MzJBcnJheSg0MCAqIDQpXG4gICAgICAgIH1cbiAgICAgIF0sXG4gICAgICB0ZXh0dXJlczogW1xuICAgICAgICB7XG4gICAgICAgICAgbmFtZTogJ3VfZW52VGV4dHVyZScsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiB0ZXh0dXJlcy5jdWJlQmxhY2tcbiAgICAgICAgfVxuICAgICAgXVxuICAgIH0sXG4gICAgRVVCR3JvdXAuR2xvYmFsXG4gICk7XG5cbiAgdWJUZW1wbGF0ZXMuc3RhdGljTWVzaCA9IG5ldyBVQlRlbXBsYXRlKFxuICAgIHtcbiAgICAgIHVuaWZvcm1zOiBbXG4gICAgICAgIHtcbiAgICAgICAgICBuYW1lOiAndV93b3JsZCcsXG4gICAgICAgICAgdHlwZTogJ21hdDR4NCcsXG4gICAgICAgICAgZGVmYXVsdFZhbHVlOiBtYXQ0LmlkZW50aXR5KG5ldyBGbG9hdDMyQXJyYXkoMTYpKSBhcyBGbG9hdDMyQXJyYXlcbiAgICAgICAgfSxcbiAgICAgIF1cbiAgICB9LFxuICAgIEVVQkdyb3VwLk1lc2hcbiAgKTtcbn1cbiJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar buildin_1 = require(\"../buildin\");\nvar Mesh_1 = require(\"./Mesh\");\nvar Node_1 = require(\"./Node\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar Camera = (function (_super) {\n    __extends(Camera, _super);\n    function Camera(viewOptions, cameraOptions, _justAsView) {\n        if (_justAsView === void 0) { _justAsView = false; }\n        var _this = _super.call(this) || this;\n        _this._justAsView = _justAsView;\n        _this.isCamera = true;\n        _this.controlMode = 'free';\n        _this.drawSkybox = false;\n        cameraOptions = cameraOptions || {};\n        _this._near = cameraOptions.near || 0;\n        _this._far = cameraOptions.far || 1000;\n        _this._aspect = cameraOptions.aspect || (renderEnv_1.default.width / renderEnv_1.default.height);\n        if (cameraOptions.isOrth) {\n            var sizeX = cameraOptions.sizeX, sizeY = cameraOptions.sizeY;\n            if (cameraOptions.sizeX > cameraOptions.sizeY) {\n                sizeX = sizeY * _this._aspect;\n            }\n            else {\n                sizeY = sizeX / _this._aspect;\n            }\n            _this._sizeX = sizeX;\n            _this._sizeY = sizeY;\n            _this._isOrth = true;\n        }\n        else {\n            _this._fov = cameraOptions.fov || (Math.PI / 3);\n        }\n        _this.clearColor = viewOptions.clearColor || [0, 0, 0, 1];\n        _this.clearDepth = viewOptions.clearDepth !== undefined ? viewOptions.clearDepth : 1;\n        _this.clearStencil = viewOptions.clearStencil || 0;\n        _this.colorOp = viewOptions.colorOp || 'store';\n        _this.depthOp = viewOptions.depthOp || 'store';\n        _this.stencilOp = viewOptions.stencilOp || 'store';\n        _this.viewport = viewOptions.viewport || { x: 0, y: 0, w: 1, h: 1 };\n        _this._viewMat = gl_matrix_1.mat4.identity(new Float32Array(16));\n        _this._projMat = gl_matrix_1.mat4.identity(new Float32Array(16));\n        _this._projInverseMat = gl_matrix_1.mat4.identity(new Float32Array(16));\n        _this._vpMat = gl_matrix_1.mat4.identity(new Float32Array(16));\n        _this._skyVPMat = gl_matrix_1.mat4.identity(new Float32Array(16));\n        return _this;\n    }\n    Camera.IS = function (value) {\n        return !!value.isCamera;\n    };\n    Object.defineProperty(Camera.prototype, \"isOrth\", {\n        get: function () {\n            return this._isOrth;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Camera.prototype, \"skyboxMat\", {\n        get: function () {\n            return this._skyboxMat;\n        },\n        set: function (value) {\n            this._skyboxMat = value;\n            if (!this._skyboxMesh) {\n                this._skyboxMesh = new Mesh_1.default(buildin_1.buildinGeometries.skybox, value);\n            }\n            else {\n                this._skyboxMesh.material = value;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Camera.prototype, \"vpMat\", {\n        get: function () {\n            return this._vpMat;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Camera.prototype, \"invViewMat\", {\n        get: function () {\n            return this._worldMat;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Camera.prototype, \"invProjMat\", {\n        get: function () {\n            return this._projInverseMat;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Camera.prototype.updateMatrix = function () {\n        _super.prototype.updateMatrix.call(this);\n        this._updateViewMat();\n        this._updateProjMat();\n        gl_matrix_1.mat4.multiply(this._vpMat, this._projMat, this._viewMat);\n        if (this._skyboxMat) {\n            var mat = this._skyVPMat;\n            mat.set(this._viewMat);\n            var rotation = this._skyboxMat.getUniform('u_rotation')[0];\n            rotation && gl_matrix_1.mat4.rotateY(mat, mat, -rotation);\n            mat[12] = 0;\n            mat[13] = 0;\n            mat[14] = 0;\n            gl_matrix_1.mat4.multiply(mat, this._projMat, mat);\n            gl_matrix_1.mat4.invert(mat, mat);\n        }\n        renderEnv_1.default.setUniform('u_vp', this._vpMat);\n        renderEnv_1.default.setUniform('u_view', this._viewMat);\n        renderEnv_1.default.setUniform('u_proj', this._projMat);\n        renderEnv_1.default.setUniform('u_viewInverse', this._worldMat);\n        renderEnv_1.default.setUniform('u_projInverse', this._projInverseMat);\n        if (this._skyboxMat) {\n            renderEnv_1.default.setUniform('u_skyVP', this._skyVPMat);\n            renderEnv_1.default.setUniform('u_envTexture', this._skyboxMat.getUniform('u_cubeTexture'));\n            renderEnv_1.default.setUniform('u_envColor', this._skyboxMat.getUniform('u_color'));\n        }\n    };\n    Camera.prototype.render = function (cmd, rt, meshes, clear) {\n        var _this = this;\n        if (clear === void 0) { clear = false; }\n        var _a = this.clearColor, r = _a[0], g = _a[1], b = _a[2], a = _a[3];\n        var _b = this.viewport, x = _b.x, y = _b.y, w = _b.w, h = _b.h;\n        var width = rt.width, height = rt.height, colorViews = rt.colorViews, depthStencilView = rt.depthStencilView;\n        var renderPassDescriptor = {\n            colorAttachments: colorViews.map(function (view) { return ({\n                view: view,\n                loadValue: clear ? { r: r, g: g, b: b, a: a } : 'load',\n                storeOp: _this.colorOp\n            }); }),\n            depthStencilAttachment: depthStencilView && {\n                view: depthStencilView,\n                depthLoadValue: this.clearDepth,\n                stencilLoadValue: this.clearStencil,\n                depthStoreOp: this.depthOp,\n                stencilStoreOp: this.stencilOp\n            }\n        };\n        var pass = cmd.beginRenderPass(renderPassDescriptor);\n        pass.setViewport(x * width, y * height, w * width, h * height, 0, 1);\n        pass.setBindGroup(0, renderEnv_1.default.bindingGroup);\n        for (var _i = 0, meshes_1 = meshes; _i < meshes_1.length; _i++) {\n            var mesh = meshes_1[_i];\n            mesh.render(pass, rt);\n        }\n        if (this.drawSkybox && this._skyboxMesh) {\n            this._skyboxMesh.render(pass, rt);\n        }\n        pass.endPass();\n    };\n    Camera.prototype.cull = function (mesh) {\n        return 0;\n    };\n    Camera.prototype._updateViewMat = function () {\n        var _a = this, controlMode = _a.controlMode, target = _a.target, _worldMat = _a._worldMat;\n        if (controlMode === 'target' && !target) {\n            throw new Error('Camera with control mode \"target\" must has target!');\n        }\n        if (controlMode === 'target') {\n            var eye = gl_matrix_1.mat4.getTranslation(new Float32Array(3), _worldMat);\n            var center = gl_matrix_1.mat4.getTranslation(new Float32Array(3), target.worldMat);\n            var forward = gl_matrix_1.vec3.sub(new Float32Array(3), center, eye);\n            gl_matrix_1.vec3.normalize(forward, forward);\n            var up = this._worldMat.slice(4, 7);\n            gl_matrix_1.vec3.normalize(up, up);\n            if (gl_matrix_1.vec3.sqrLen(up) === 0) {\n                up.set([0, 1, 0]);\n            }\n            gl_matrix_1.mat4.lookAt(this._viewMat, eye, center, up);\n        }\n        else {\n            gl_matrix_1.mat4.invert(this._viewMat, this._worldMat);\n        }\n    };\n    Camera.prototype._updateProjMat = function () {\n        if (this._isOrth) {\n            this._orthHalfZ(this._projMat, -this._sizeX, this._sizeX, -this._sizeY, this._sizeY, this._near, this._far);\n        }\n        else {\n            gl_matrix_1.mat4.perspective(this._projMat, this._fov, this._aspect, this._near, this._far);\n        }\n        gl_matrix_1.mat4.invert(this._projInverseMat, this._projMat);\n    };\n    Camera.prototype._orthHalfZ = function (out, left, right, top, bottom, near, far) {\n        var w = 1.0 / (right - left);\n        var h = 1.0 / (top - bottom);\n        var p = 1.0 / (far - near);\n        var x = (right + left) * w;\n        var y = (top + bottom) * h;\n        var z = near * p;\n        out[0] = 2 * w;\n        out[4] = 0;\n        out[8] = 0;\n        out[12] = -x;\n        out[1] = 0;\n        out[5] = 2 * h;\n        out[9] = 0;\n        out[13] = -y;\n        out[2] = 0;\n        out[6] = 0;\n        out[10] = -1 * p;\n        out[14] = -z;\n        out[3] = 0;\n        out[7] = 0;\n        out[11] = 0;\n        out[15] = 1;\n    };\n    Camera.CLASS_NAME = 'Node';\n    return Camera;\n}(Node_1.default));\nexports.default = Camera;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ2FtZXJhLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQ2FtZXJhLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQU1BLHVDQUFxQztBQUNyQyxzQ0FBNkM7QUFFN0MsK0JBQTBCO0FBQzFCLCtCQUEwQjtBQUMxQix5Q0FBb0M7QUFHcEM7SUFBb0MsMEJBQUk7SUFpRXRDLGdCQUNFLFdBUUMsRUFDRCxhQVFDLEVBQ1MsV0FBNEI7UUFBNUIsNEJBQUEsRUFBQSxtQkFBNEI7UUFuQnhDLFlBcUJFLGlCQUFPLFNBbUNSO1FBckNXLGlCQUFXLEdBQVgsV0FBVyxDQUFpQjtRQTdFakMsY0FBUSxHQUFZLElBQUksQ0FBQztRQUV6QixpQkFBVyxHQUFzQixNQUFNLENBQUM7UUFTeEMsZ0JBQVUsR0FBWSxLQUFLLENBQUM7UUFzRWpDLGFBQWEsR0FBRyxhQUFhLElBQUksRUFBRSxDQUFDO1FBQ3BDLEtBQUksQ0FBQyxLQUFLLEdBQUcsYUFBYSxDQUFDLElBQUksSUFBSSxDQUFDLENBQUM7UUFDckMsS0FBSSxDQUFDLElBQUksR0FBRyxhQUFhLENBQUMsR0FBRyxJQUFJLElBQUksQ0FBQztRQUN0QyxLQUFJLENBQUMsT0FBTyxHQUFHLGFBQWEsQ0FBQyxNQUFNLElBQUksQ0FBQyxtQkFBUyxDQUFDLEtBQUssR0FBRyxtQkFBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRTVFLElBQUksYUFBYSxDQUFDLE1BQU0sRUFBRTtZQUNuQixJQUFBLEtBQUssR0FBVyxhQUFhLE1BQXhCLEVBQUUsS0FBSyxHQUFJLGFBQWEsTUFBakIsQ0FBa0I7WUFFbkMsSUFBSSxhQUFhLENBQUMsS0FBSyxHQUFHLGFBQWEsQ0FBQyxLQUFLLEVBQUU7Z0JBQzdDLEtBQUssR0FBRyxLQUFLLEdBQUcsS0FBSSxDQUFDLE9BQU8sQ0FBQzthQUM5QjtpQkFBTTtnQkFDTCxLQUFLLEdBQUcsS0FBSyxHQUFHLEtBQUksQ0FBQyxPQUFPLENBQUM7YUFDOUI7WUFFRCxL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RyxHQUFHLEdBQUcsQ0FBQyxHQUFHLEdBQUcsTUFBTSxDQUFDLENBQUM7UUFDL0IsSUFBTSxDQUFDLEdBQUcsR0FBRyxHQUFHLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQyxDQUFDO1FBRTdCLElBQU0sQ0FBQyxHQUFHLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUM3QixJQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDN0IsSUFBTSxDQUFDLEdBQUcsSUFBSSxHQUFHLENBQUMsQ0FBQztRQUVuQixHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3JELEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDckQsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFBQyxHQUFHLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDO1FBQ3ZELEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUM7UUFBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDO1FBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLENBQUMsQ0FBQztRQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLENBQUM7SUFDbkQsQ0FBQztJQXpQYSxpQkFBVSxHQUFXLE1BQU0sQ0FBQztJQTBQNUMsYUFBQztDQUFBLEFBM1BELENBQW9DLGNBQUksR0EyUHZDO2tCQTNQb0IsTUFBTSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IENhbWVyYS50c1xuICogQEF1dGhvciA6IGR0eXNreSAoZHR5c2t5QG91dGxvb2suY29tKVxuICogQExpbmsgICA6IGR0eXNreS5tb2VcbiAqIEBEYXRlICAgOiAyMDIxLzYvNuS4i+WNiDc6MjQ6NTFcbiAqL1xuaW1wb3J0IHttYXQ0LCB2ZWMzfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHtidWlsZGluR2VvbWV0cmllc30gZnJvbSAnLi4vYnVpbGRpbic7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi9NYXRlcmlhbCc7XG5pbXBvcnQgTWVzaCBmcm9tICcuL01lc2gnO1xuaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJztcbmltcG9ydCByZW5kZXJFbnYgZnJvbSAnLi9yZW5kZXJFbnYnO1xuaW1wb3J0IFJlbmRlclRleHR1cmUgZnJvbSAnLi9SZW5kZXJUZXh0dXJlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgQ2FtZXJhIGV4dGVuZHMgTm9kZSB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ05vZGUnO1xuXG4gIHB1YmxpYyBzdGF0aWMgSVModmFsdWU6IGFueSk6IHZhbHVlIGlzIENhbWVyYSB7XG4gICAgcmV0dXJuICEhKHZhbHVlIGFzIENhbWVyYSkuaXNDYW1lcmE7XG4gIH1cblxuICBwdWJsaWMgaXNDYW1lcmE6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHB1YmxpYyBjb250cm9sTW9kZTogJ2ZyZWUnIHwgJ3RhcmdldCcgPSAnZnJlZSc7XG4gIHB1YmxpYyB0YXJnZXQ6IE5vZGU7XG4gIHB1YmxpYyB2aWV3cG9ydDogeyB4OiBudW1iZXIsIHk6IG51bWJlciwgdzogbnVtYmVyLCBoOiBudW1iZXIgfTtcbiAgcHVibGljIGNsZWFyQ29sb3I6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICBwdWJsaWMgY29sb3JPcDogR1BVU3RvcmVPcDtcbiAgcHVibGljIGNsZWFyRGVwdGg6IG51bWJlcjtcbiAgcHVibGljIGRlcHRoT3A6IEdQVVN0b3JlT3A7XG4gIHB1YmxpYyBjbGVhclN0ZW5jaWw6IG51bWJlcjtcbiAgcHVibGljIHN0ZW5jaWxPcDogR1BVU3RvcmVPcDtcbiAgcHVibGljIGRyYXdTa3lib3g6IGJvb2xlYW4gPSBmYWxzZTtcblxuICBwcm90ZWN0ZWQgX3NreWJveE1hdDogTWF0ZXJpYWw7XG4gIHByb3RlY3RlZCBfc2t5Ym94TWVzaDogTWVzaDtcbiAgcHJvdGVjdGVkIF9uZWFyOiBudW1iZXI7XG4gIHByb3RlY3RlZCBfZmFyOiBudW1iZXI7XG4gIHByb3RlY3RlZCBfZm92OiBudW1iZXI7XG4gIHByb3RlY3RlZCBfYXNwZWN0OiBudW1iZXI7XG4gIHByb3RlY3RlZCBfc2l6ZVg6IG51bWJlcjtcbiAgcHJvdGVjdGVkIF9zaXplWTogbnVtYmVyO1xuICBwcm90ZWN0ZWQgX2lzT3J0aDogYm9vbGVhbjtcbiAgcHJvdGVjdGVkIF92aWV3TWF0OiBGbG9hdDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfcHJvak1hdDogRmxvYXQzMkFycmF5O1xuICBwcm90ZWN0ZWQgX3Byb2pJbnZlcnNlTWF0OiBGbG9hdDMyQXJyYXk7XG4gIHByb3RlY3RlZCBfdnBNYXQ6IEZsb2F0MzJBcnJheTtcbiAgcHJvdGVjdGVkIF9za3lWUE1hdDogRmxvYXQzMkFycmF5O1xuXG4gIGdldCBpc09ydGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lzT3J0aDtcbiAgfVxuXG4gIGdldCBza3lib3hNYXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3NreWJveE1hdDtcbiAgfVxuXG4gIHNldCBza3lib3hNYXQodmFsdWU6IE1hdGVyaWFsKSB7XG4gICAgdGhpcy5fc2t5Ym94TWF0ID0gdmFsdWU7XG5cbiAgICBpZiAoIXRoaXMuX3NreWJveE1lc2gpIHtcbiAgICAgIHRoaXMuX3NreWJveE1lc2ggPSBuZXcgTWVzaChidWlsZGluR2VvbWV0cmllcy5za3lib3gsIHZhbHVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fc2t5Ym94TWVzaC5tYXRlcmlhbCA9IHZhbHVlO1xuICAgIH1cbiAgfVxuXG4gIGdldCB2cE1hdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdnBNYXQ7XG4gIH1cblxuICBnZXQgaW52Vmlld01hdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd29ybGRNYXQ7XG4gIH1cblxuICBnZXQgaW52UHJvak1hdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcHJvakludmVyc2VNYXQ7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICB2aWV3T3B0aW9uczoge1xuICAgICAgdmlld3BvcnQ/OiB7IHg6IG51bWJlciwgeTogbnVtYmVyLCB3OiBudW1iZXIsIGg6IG51bWJlciB9LFxuICAgICAgY2xlYXJDb2xvcj86IFtudW1iZXIsIG51bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgICAgY29sb3JPcD86IEdQVVN0b3JlT3AsXG4gICAgICBjbGVhckRlcHRoPzogbnVtYmVyLFxuICAgICAgZGVwdGhPcD86IEdQVVN0b3JlT3AsXG4gICAgICBjbGVhclN0ZW5jaWw/OiBudW1iZXIsXG4gICAgICBzdGVuY2lsT3A/OiBHUFVTdG9yZU9wLFxuICAgIH0sXG4gICAgY2FtZXJhT3B0aW9ucz86IHtcbiAgICAgIG5lYXI/OiBudW1iZXIsXG4gICAgICBmYXI/OiBudW1iZXIsXG4gICAgICBmb3Y/OiBudW1iZXIsXG4gICAgICBhc3BlY3Q/OiBudW1iZXIsXG4gICAgICBpc09ydGg/OiBib29sZWFuLFxuICAgICAgc2l6ZVg/OiBudW1iZXIsXG4gICAgICBzaXplWT86IG51bWJlclxuICAgIH0sXG4gICAgcHJvdGVjdGVkIF9qdXN0QXNWaWV3OiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNhbWVyYU9wdGlvbnMgPSBjYW1lcmFPcHRpb25zIHx8IHt9O1xuICAgIHRoaXMuX25lYXIgPSBjYW1lcmFPcHRpb25zLm5lYXIgfHwgMDtcbiAgICB0aGlzLl9mYXIgPSBjYW1lcmFPcHRpb25zLmZhciB8fCAxMDAwO1xuICAgIHRoaXMuX2FzcGVjdCA9IGNhbWVyYU9wdGlvbnMuYXNwZWN0IHx8IChyZW5kZXJFbnYud2lkdGggLyByZW5kZXJFbnYuaGVpZ2h0KTtcblxuICAgIGlmIChjYW1lcmFPcHRpb25zLmlzT3J0aCkge1xuICAgICAgbGV0IHtzaXplWCwgc2l6ZVl9ID0gY2FtZXJhT3B0aW9ucztcblxuICAgICAgaWYgKGNhbWVyYU9wdGlvbnMuc2l6ZVggPiBjYW1lcmFPcHRpb25zLnNpemVZKSB7XG4gICAgICAgIHNpemVYID0gc2l6ZVkgKiB0aGlzLl9hc3BlY3Q7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBzaXplWSA9IHNpemVYIC8gdGhpcy5fYXNwZWN0O1xuICAgICAgfVxuXG4gICAgICB0aGlzLl9zaXplWCA9IHNpemVYO1xuICAgICAgdGhpcy5fc2l6ZVkgPSBzaXplWTtcbiAgICAgIHRoaXMuX2lzT3J0aCA9IHRydWU7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2ZvdiA9IGNhbWVyYU9wdGlvbnMuZm92IHx8IChNYXRoLlBJIC8gMyk7XG4gICAgfVxuXG4gICAgdGhpcy5jbGVhckNvbG9yID0gdmlld09wdGlvbnMuY2xlYXJDb2xvciB8fCBbMCwgMCwgMCwgMV07XG4gICAgdGhpcy5jbGVhckRlcHRoID0gdmlld09wdGlvbnMuY2xlYXJEZXB0aCAhPT0gdW5kZWZpbmVkID8gdmlld09wdGlvbnMuY2xlYXJEZXB0aCA6IDE7XG4gICAgdGhpcy5jbGVhclN0ZW5jaWwgPSB2aWV3T3B0aW9ucy5jbGVhclN0ZW5jaWwgfHwgMDtcbiAgICB0aGlzLmNvbG9yT3AgPSB2aWV3T3B0aW9ucy5jb2xvck9wIHx8ICdzdG9yZSc7XG4gICAgdGhpcy5kZXB0aE9wID0gdmlld09wdGlvbnMuZGVwdGhPcCB8fCAnc3RvcmUnO1xuICAgIHRoaXMuc3RlbmNpbE9wID0gdmlld09wdGlvbnMuc3RlbmNpbE9wIHx8ICdzdG9yZSc7XG4gICAgdGhpcy52aWV3cG9ydCA9IHZpZXdPcHRpb25zLnZpZXdwb3J0IHx8IHsgeDogMCwgeTogMCwgdzogMSwgaDogMSB9O1xuICAgIHRoaXMuX3ZpZXdNYXQgPSBtYXQ0LmlkZW50aXR5KG5ldyBGbG9hdDMyQXJyYXkoMTYpKSBhcyBGbG9hdDMyQXJyYXk7XG4gICAgdGhpcy5fcHJvak1hdCA9IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpIGFzIEZsb2F0MzJBcnJheTtcbiAgICB0aGlzLl9wcm9qSW52ZXJzZU1hdCA9IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpIGFzIEZsb2F0MzJBcnJheTtcbiAgICB0aGlzLl92cE1hdCA9IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpIGFzIEZsb2F0MzJBcnJheTtcbiAgICB0aGlzLl9za3lWUE1hdCA9IG1hdDQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSgxNikpIGFzIEZsb2F0MzJBcnJheTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVNYXRyaXgoKSB7XG4gICAgc3VwZXIudXBkYXRlTWF0cml4KCk7XG5cbiAgICB0aGlzLl91cGRhdGVWaWV3TWF0KCk7XG4gICAgdGhpcy5fdXBkYXRlUHJvak1hdCgpO1xuICAgIG1hdDQubXVsdGlwbHkodGhpcy5fdnBNYXQsIHRoaXMuX3Byb2pNYXQsIHRoaXMuX3ZpZXdNYXQpO1xuXG4gICAgaWYgKHRoaXMuX3NreWJveE1hdCkge1xuICAgICAgY29uc3QgbWF0ID0gdGhpcy5fc2t5VlBNYXQ7XG4gICAgICBtYXQuc2V0KHRoaXMuX3ZpZXdNYXQpO1xuICAgICAgY29uc3Qgcm90YXRpb24gPSAodGhpcy5fc2t5Ym94TWF0LmdldFVuaWZvcm0oJ3Vfcm90YXRpb24nKSBhcyBGbG9hdDMyQXJyYXkpWzBdO1xuICAgICAgcm90YXRpb24gJiYgbWF0NC5yb3RhdGVZKG1hdCwgbWF0LCAtcm90YXRpb24pO1xuXG4gICAgICBtYXRbMTJdID0gMDtcbiAgICAgIG1hdFsxM10gPSAwO1xuICAgICAgbWF0WzE0XSA9IDA7XG5cbiAgICAgIG1hdDQubXVsdGlwbHkobWF0LCB0aGlzLl9wcm9qTWF0LCBtYXQpO1xuICAgICAgbWF0NC5pbnZlcnQobWF0LCBtYXQpO1xuICAgIH1cblxuICAgIHJlbmRlckVudi5zZXRVbmlmb3JtKCd1X3ZwJywgdGhpcy5fdnBNYXQpO1xuICAgIHJlbmRlckVudi5zZXRVbmlmb3JtKCd1X3ZpZXcnLCB0aGlzLl92aWV3TWF0KTtcbiAgICByZW5kZXJFbnYuc2V0VW5pZm9ybSgndV9wcm9qJywgdGhpcy5fcHJvak1hdCk7XG4gICAgcmVuZGVyRW52LnNldFVuaWZvcm0oJ3Vfdmlld0ludmVyc2UnLCB0aGlzLl93b3JsZE1hdCk7XG4gICAgcmVuZGVyRW52LnNldFVuaWZvcm0oJ3VfcHJvakludmVyc2UnLCB0aGlzLl9wcm9qSW52ZXJzZU1hdCk7XG5cbiAgICBpZiAodGhpcy5fc2t5Ym94TWF0KSB7XG4gICAgICByZW5kZXJFbnYuc2V0VW5pZm9ybSgndV9za3lWUCcsIHRoaXMuX3NreVZQTWF0KTtcbiAgICAgIHJlbmRlckVudi5zZXRVbmlmb3JtKCd1X2VudlRleHR1cmUnLCB0aGlzLl9za3lib3hNYXQuZ2V0VW5pZm9ybSgndV9jdWJlVGV4dHVyZScpKTtcbiAgICAgIHJlbmRlckVudi5zZXRVbmlmb3JtKCd1X2VudkNvbG9yJywgdGhpcy5fc2t5Ym94TWF0LmdldFVuaWZvcm0oJ3VfY29sb3InKSk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHJlbmRlcihcbiAgICBjbWQ6IEdQVUNvbW1hbmRFbmNvZGVyLFxuICAgIHJ0OiBSZW5kZXJUZXh0dXJlLFxuICAgIG1lc2hlczogTWVzaFtdLFxuICAgIGNsZWFyOiBib29sZWFuID0gZmFsc2VcbiAgKSB7XG4gICAgY29uc3QgW3IsIGcsIGIsIGFdID0gdGhpcy5jbGVhckNvbG9yO1xuICAgIGNvbnN0IHsgeCwgeSwgdywgaCB9ID0gdGhpcy52aWV3cG9ydDtcbiAgICBjb25zdCB7IHdpZHRoLCBoZWlnaHQsIGNvbG9yVmlld3MsIGRlcHRoU3RlbmNpbFZpZXcgfSA9IHJ0O1xuXG4gICAgY29uc3QgcmVuZGVyUGFzc0Rlc2NyaXB0b3I6IEdQVVJlbmRlclBhc3NEZXNjcmlwdG9yID0ge1xuICAgICAgY29sb3JBdHRhY2htZW50czogY29sb3JWaWV3cy5tYXAodmlldyA9PiAoe1xuICAgICAgICB2aWV3LFxuICAgICAgICBsb2FkVmFsdWU6IGNsZWFyID8geyByLCBnLCBiLCBhIH0gOiAnbG9hZCcgYXMgR1BVTG9hZE9wLFxuICAgICAgICBzdG9yZU9wOiB0aGlzLmNvbG9yT3BcbiAgICAgIH0pKSxcbiAgICAgIGRlcHRoU3RlbmNpbEF0dGFjaG1lbnQ6IGRlcHRoU3RlbmNpbFZpZXcgJiYge1xuICAgICAgICB2aWV3OiBkZXB0aFN0ZW5jaWxWaWV3LFxuICAgICAgICBkZXB0aExvYWRWYWx1ZTogdGhpcy5jbGVhckRlcHRoLFxuICAgICAgICBzdGVuY2lsTG9hZFZhbHVlOiB0aGlzLmNsZWFyU3RlbmNpbCxcbiAgICAgICAgZGVwdGhTdG9yZU9wOiB0aGlzLmRlcHRoT3AsXG4gICAgICAgIHN0ZW5jaWxTdG9yZU9wOiB0aGlzLnN0ZW5jaWxPcFxuICAgICAgfVxuICAgIH07XG5cbiAgICBjb25zdCBwYXNzID0gY21kLmJlZ2luUmVuZGVyUGFzcyhyZW5kZXJQYXNzRGVzY3JpcHRvcik7XG4gICAgcGFzcy5zZXRWaWV3cG9ydCh4ICogd2lkdGgsIHkgKiBoZWlnaHQsIHcgKiB3aWR0aCwgaCAqIGhlaWdodCwgMCwgMSk7XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgcmVuZGVyRW52LmJpbmRpbmdHcm91cCk7XG5cbiAgICBmb3IgKGNvbnN0IG1lc2ggb2YgbWVzaGVzKSB7XG4gICAgICBtZXNoLnJlbmRlcihwYXNzLCBydCk7XG4gICAgfVxuXG4gICAgaWYgKHRoaXMuZHJhd1NreWJveCAmJiB0aGlzLl9za3lib3hNZXNoKSB7XG4gICAgICB0aGlzLl9za3lib3hNZXNoLnJlbmRlcihwYXNzLCBydCk7XG4gICAgfVxuXG4gICAgcGFzcy5lbmRQYXNzKCk7XG4gIH1cblxuICBwdWJsaWMgY3VsbChtZXNoOiBNZXNoKTogbnVtYmVyIHtcbiAgICByZXR1cm4gMDtcbiAgfVxuXG4gIHByb3RlY3RlZCBfdXBkYXRlVmlld01hdCgpIHtcbiAgICBjb25zdCB7Y29udHJvbE1vZGUsIHRhcmdldCwgX3dvcmxkTWF0fSA9IHRoaXM7XG5cbiAgICBpZiAoY29udHJvbE1vZGUgPT09ICd0YXJnZXQnICYmICF0YXJnZXQpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ2FtZXJhIHdpdGggY29udHJvbCBtb2RlIFwidGFyZ2V0XCIgbXVzdCBoYXMgdGFyZ2V0IScpO1xuICAgIH1cblxuICAgIGlmIChjb250cm9sTW9kZSA9PT0gJ3RhcmdldCcpIHtcbiAgICAgIGNvbnN0IGV5ZSA9IG1hdDQuZ2V0VHJhbnNsYXRpb24obmV3IEZsb2F0MzJBcnJheSgzKSwgX3dvcmxkTWF0KSBhcyBGbG9hdDMyQXJyYXk7XG4gICAgICBjb25zdCBjZW50ZXIgPSBtYXQ0LmdldFRyYW5zbGF0aW9uKG5ldyBGbG9hdDMyQXJyYXkoMyksIHRhcmdldC53b3JsZE1hdCkgYXMgRmxvYXQzMkFycmF5O1xuXG4gICAgICBjb25zdCBmb3J3YXJkID0gdmVjMy5zdWIobmV3IEZsb2F0MzJBcnJheSgzKSwgY2VudGVyLCBleWUpIGFzIEZsb2F0MzJBcnJheTtcbiAgICAgIHZlYzMubm9ybWFsaXplKGZvcndhcmQsIGZvcndhcmQpO1xuICAgICAgY29uc3QgdXAgPSB0aGlzLl93b3JsZE1hdC5zbGljZSg0LCA3KTtcbiAgICAgIHZlYzMubm9ybWFsaXplKHVwLCB1cCk7XG5cbiAgICAgIGlmICh2ZWMzLnNxckxlbih1cCkgPT09IDApIHtcbiAgICAgICAgdXAuc2V0KFswLCAxLCAwXSk7XG4gICAgICB9XG5cbiAgICAgIG1hdDQubG9va0F0KHRoaXMuX3ZpZXdNYXQsIGV5ZSwgY2VudGVyLCB1cCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIG1hdDQuaW52ZXJ0KHRoaXMuX3ZpZXdNYXQsIHRoaXMuX3dvcmxkTWF0KTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX3VwZGF0ZVByb2pNYXQoKSB7XG4gICAgaWYgKHRoaXMuX2lzT3J0aCkge1xuICAgICAgLy8gd2ViZ3B1IGhhcyBoYWxmIHpcbiAgICAgIHRoaXMuX29ydGhIYWxmWih0aGlzLl9wcm9qTWF0LCAtdGhpcy5fc2l6ZVgsIHRoaXMuX3NpemVYLCAtdGhpcy5fc2l6ZVksIHRoaXMuX3NpemVZLCB0aGlzLl9uZWFyLCB0aGlzLl9mYXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXQ0LnBlcnNwZWN0aXZlKHRoaXMuX3Byb2pNYXQsIHRoaXMuX2ZvdiwgdGhpcy5fYXNwZWN0LCB0aGlzLl9uZWFyLCB0aGlzLl9mYXIpO1xuICAgIH1cbiAgICBtYXQ0LmludmVydCh0aGlzLl9wcm9qSW52ZXJzZU1hdCwgdGhpcy5fcHJvak1hdCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX29ydGhIYWxmWihvdXQ6IEZsb2F0MzJBcnJheSwgbGVmdDogbnVtYmVyLCByaWdodDogbnVtYmVyLCB0b3A6IG51bWJlciwgYm90dG9tOiBudW1iZXIsIG5lYXI6IG51bWJlciwgZmFyOiBudW1iZXIpIHtcbiAgICBjb25zdCB3ID0gMS4wIC8gKHJpZ2h0IC0gbGVmdCk7XG4gICAgY29uc3QgaCA9IDEuMCAvICh0b3AgLSBib3R0b20pO1xuICAgIGNvbnN0IHAgPSAxLjAgLyAoZmFyIC0gbmVhcik7XG4gIFxuICAgIGNvbnN0IHggPSAocmlnaHQgKyBsZWZ0KSAqIHc7XG4gICAgY29uc3QgeSA9ICh0b3AgKyBib3R0b20pICogaDtcbiAgICBjb25zdCB6ID0gbmVhciAqIHA7XG4gIFxuICAgIG91dFswXSA9IDIgKiB3O1x0b3V0WzRdID0gMDtcdG91dFs4XSA9IDA7XHRvdXRbMTJdID0gLXg7XG4gICAgb3V0WzFdID0gMDtcdG91dFs1XSA9IDIgKiBoO1x0b3V0WzldID0gMDtcdG91dFsxM10gPSAteTtcbiAgICBvdXRbMl0gPSAwO1x0b3V0WzZdID0gMDtcdG91dFsxMF0gPSAtMSAqIHA7XHRvdXRbMTRdID0gLXo7XG4gICAgb3V0WzNdID0gMDtcdG91dFs3XSA9IDA7XHRvdXRbMTFdID0gMDtcdG91dFsxNV0gPSAxO1xuICB9XG59Il19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"./HObject\");\nvar Material_1 = require(\"./Material\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar ComputeUnit = (function (_super) {\n    __extends(ComputeUnit, _super);\n    function ComputeUnit(_effect, _groups, values, marcos) {\n        var _this = _super.call(this) || this;\n        _this._effect = _effect;\n        _this._groups = _groups;\n        _this.isComputeUnite = true;\n        _this._matVersion = -1;\n        if (!_effect.isCompute) {\n            throw new Error('ComputeUnit can only receive effect has compute shader!');\n        }\n        _this._material = new Material_1.default(_effect, values, marcos);\n        return _this;\n    }\n    Object.defineProperty(ComputeUnit.prototype, \"groups\", {\n        get: function () {\n            return this._groups;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ComputeUnit.prototype.compute = function (pass) {\n        var _a = this, _material = _a._material, _groups = _a._groups;\n        if (_material.version !== this._matVersion) {\n            this._createPipeline();\n            this._matVersion = _material.version;\n        }\n        pass.setPipeline(this._pipeline);\n        pass.setBindGroup(1, _material.bindingGroup);\n        pass.dispatch(_groups.x, _groups.y, _groups.z);\n    };\n    ComputeUnit.prototype.setUniform = function (name, value, rtSubNameOrGPUBuffer) {\n        this._material.setUniform(name, value, rtSubNameOrGPUBuffer);\n    };\n    ComputeUnit.prototype.getUniform = function (name) {\n        return this._material.getUniform(name);\n    };\n    ComputeUnit.prototype.setGroups = function (x, y, z) {\n        this._groups = { x: x, y: y, z: z };\n    };\n    ComputeUnit.prototype._createPipeline = function () {\n        var device = renderEnv_1.default.device;\n        var _material = this._material;\n        var marcos = Object.assign({}, _material.marcos);\n        var cs = _material.effect.getShader(marcos, '', renderEnv_1.default.shaderPrefix, '').cs;\n        this._pipeline = device.createComputePipeline({\n            layout: device.createPipelineLayout({ bindGroupLayouts: [\n                    renderEnv_1.default.uniformLayout,\n                    _material.effect.uniformLayout\n                ] }),\n            compute: {\n                module: cs,\n                entryPoint: \"main\"\n            }\n        });\n    };\n    ComputeUnit.CLASS_NAME = 'ComputeUnit';\n    return ComputeUnit;\n}(HObject_1.default));\nexports.default = ComputeUnit;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ29tcHV0ZVVuaXQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJDb21wdXRlVW5pdC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFPQSxxQ0FBZ0M7QUFFaEMsdUNBQWtDO0FBQ2xDLHlDQUFvQztBQUdwQztJQUF5QywrQkFBTztJQVk5QyxxQkFDWSxPQUFlLEVBQ2YsT0FBNEMsRUFDdEQsTUFBd0MsRUFDeEMsTUFBMkM7UUFKN0MsWUFNRSxpQkFBTyxTQU9SO1FBWlcsYUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUNmLGFBQU8sR0FBUCxPQUFPLENBQXFDO1FBWmpELG9CQUFjLEdBQVksSUFBSSxDQUFDO1FBRzVCLGlCQUFXLEdBQVcsQ0FBQyxDQUFDLENBQUM7UUFlakMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxTQUFTLEVBQUU7WUFDdEIsTUFBTSxJQUFJLEtBQUssQ0FBQyx5REFBeUQsQ0FBQyxDQUFDO1NBQzVFO1FBRUQsS0FBSSxDQUFDLFNBQVMsR0FBRyxJQUFJLGtCQUFRLENBQUMsT0FBTyxFQUFFLE1BQU0sRUFBRSxNQUFNLENBQUMsQ0FBQzs7SUFDekQsQ0FBQztJQWpCRCxzQkFBSSwrQkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7OztPQUFBO0lBaUJNLDZCQUFPLEdBQWQsVUFBZSxJQUEyQjtRQUNsQyxJQUFBLEtBQXVCLElBQUksRUFBMUIsU0FBUyxlQUFBLEVBQUUsT0FBTyxhQUFRLENBQUM7UUFFbEMsSUFBSSxTQUFTLENBQUMsT0FBTyxLQUFLLElBQUksQ0FBQyxXQUFXLEVBQUU7WUFDMUMsSUFBSSxDQUFDLGVBQWUsRUFBRSxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxXQUFXLEdBQUcsU0FBUyxDQUFDLE9BQU8sQ0FBQztTQUN0QztRQUVELElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxZQUFZLENBQUMsQ0FBQyxFQUFFLFNBQVMsQ0FBQyxZQUFZLENBQUMsQ0FBQztRQUM3QyxJQUFJLENBQUMsUUFBUSxDQUFDLE9BQU8sQ0FBQyxDQUFDLEVBQUUsT0FBTyxDQUFDLENBQUMsRUFBRSxPQUFPLENBQUMsQ0FBQyxDQUFDLENBQUM7SUFDakQsQ0FBQztJQUVNLGdDQUFVLEdBQWpCLFVBQWtCLElBQVksRUFBRSxLQUFvQixFQUFFLG9CQUF5QztRQUM3RixJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLEVBQUUsS0FBSyxFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFDL0QsQ0FBQztJQUVNLGdDQUFVLEdBQWpCLFVBQWtCLElBQVk7UUFDNUIsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUN6QyxDQUFDO0lBRU0sK0JBQVMsR0FBaEIsVUFBaUIsQ0FBUyxFQUFFLENBQVUsRUFBRSxDQUFVO1FBQ2hELElBQUksQ0FBQyxPQUFPLEdBQUcsRUFBQyxDQUFDLEdBQUEsRUFBRSxDQUFDLEdBQUEsRUFBRSxDQUFDLEdBQUEsRUFBQyxDQUFDO0lBQzNCLENBQUM7SUFFUyxxQ0FBZSxHQUF6QjtRQUNTLElBQUEsTUFBTSxHQUFJLG1CQUFTLE9BQWIsQ0FBYztRQUNwQixJQUFBLFNBQVMsR0FBSSxJQUFJLFVBQVIsQ0FBUztRQUV6QixJQUFNLE1BQU0sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUFDLEVBQUUsRUFBRSxTQUFTLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUMsSUFBQSxFQUFFLEdBQUksU0FBUyxDQUFDLE1BQU0sQ0FBQyxTQUFTLENBQUMsTUFBTSxFQUFFLEVBQUUsRUFBRSxtQkFBUyxDQUFDLFlBQVksRUFBRSxFQUFFLENBQUMsR0FBdEUsQ0FBdUU7UUFFaEYsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMscUJBQXFCLENBQUM7WUFDNUMsTUFBTSxFQUFFLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFDLGdCQUFnQixFQUFFO29CQUNyRCxtQkFBUyxDQUFDLGFBQWE7b0JBQ3ZCLFNBQVMsQ0FBQyxNQUFNLENBQUMsYUFBYTtpQkFDL0IsRUFBQyxDQUFDO1lBRUgsT0FBTyxFQUFFO2dCQUNQLE1BQU0sRUFBRSxFQUFFO2dCQUNWLFVBQVUsRUFBRSxNQUFNO2FBQ25CO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQXJFYSxzQkFBVSxHQUFHLGFBQWEsQ0FBQztJQXNFM0Msa0JBQUM7Q0FBQSxBQXZFRCxDQUF5QyxpQkFBTyxHQXVFL0M7a0JBdkVvQixXQUFXIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBARmlsZSAgIDogQ29tcHV0ZVVuaXQudHNcbiAqIEBBdXRob3IgOiBkdHlza3kgKGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBMaW5rICAgOiBkdHlza3kubW9lXG4gKiBARGF0ZSAgIDogMjAyMS82LzbkuIvljYg4OjU2OjQ5XG4gKi9cblxuaW1wb3J0IEhPYmplY3QgZnJvbSBcIi4vSE9iamVjdFwiO1xuaW1wb3J0IEVmZmVjdCBmcm9tIFwiLi9FZmZlY3RcIjtcbmltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi9NYXRlcmlhbFwiO1xuaW1wb3J0IHJlbmRlckVudiBmcm9tIFwiLi9yZW5kZXJFbnZcIjtcbmltcG9ydCB7IFRVbmlmb3JtVmFsdWUgfSBmcm9tIFwiLi9VQlRlbXBsYXRlXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIENvbXB1dGVVbml0IGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRSA9ICdDb21wdXRlVW5pdCc7XG4gIHB1YmxpYyBpc0NvbXB1dGVVbml0ZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJvdGVjdGVkIF9tYXRlcmlhbDogTWF0ZXJpYWw7XG4gIHByb3RlY3RlZCBfbWF0VmVyc2lvbjogbnVtYmVyID0gLTE7XG4gIHByb3RlY3RlZCBfcGlwZWxpbmU6IEdQVUNvbXB1dGVQaXBlbGluZTtcblxuICBnZXQgZ3JvdXBzKCkge1xuICAgIHJldHVybiB0aGlzLl9ncm91cHM7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgX2VmZmVjdDogRWZmZWN0LFxuICAgIHByb3RlY3RlZCBfZ3JvdXBzOiB7eDogbnVtYmVyLCB5PzogbnVtYmVyLCB6PzogbnVtYmVyfSxcbiAgICB2YWx1ZXM/OiB7W25hbWU6IHN0cmluZ106IFRVbmlmb3JtVmFsdWV9LFxuICAgIG1hcmNvcz86IHtbbmFtZTogc3RyaW5nXTogbnVtYmVyIHwgYm9vbGVhbn1cbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmICghX2VmZmVjdC5pc0NvbXB1dGUpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ29tcHV0ZVVuaXQgY2FuIG9ubHkgcmVjZWl2ZSBlZmZlY3QgaGFzIGNvbXB1dGUgc2hhZGVyIScpO1xuICAgIH1cblxuICAgIHRoaXMuX21hdGVyaWFsID0gbmV3IE1hdGVyaWFsKF9lZmZlY3QsIHZhbHVlcywgbWFyY29zKTtcbiAgfVxuXG4gIHB1YmxpYyBjb21wdXRlKHBhc3M6IEdQVUNvbXB1dGVQYXNzRW5jb2Rlcikge1xuICAgIGNvbnN0IHtfbWF0ZXJpYWwsIF9ncm91cHN9ID0gdGhpcztcblxuICAgIGlmIChfbWF0ZXJpYWwudmVyc2lvbiAhPT0gdGhpcy5fbWF0VmVyc2lvbikge1xuICAgICAgdGhpcy5fY3JlYXRlUGlwZWxpbmUoKTtcbiAgICAgIHRoaXMuX21hdFZlcnNpb24gPSBfbWF0ZXJpYWwudmVyc2lvbjtcbiAgICB9XG5cbiAgICBwYXNzLnNldFBpcGVsaW5lKHRoaXMuX3BpcGVsaW5lKTtcbiAgICBwYXNzLnNldEJpbmRHcm91cCgxLCBfbWF0ZXJpYWwuYmluZGluZ0dyb3VwKTtcbiAgICBwYXNzLmRpc3BhdGNoKF9ncm91cHMueCwgX2dyb3Vwcy55LCBfZ3JvdXBzLnopO1xuICB9XG5cbiAgcHVibGljIHNldFVuaWZvcm0obmFtZTogc3RyaW5nLCB2YWx1ZTogVFVuaWZvcm1WYWx1ZSwgcnRTdWJOYW1lT3JHUFVCdWZmZXI/OiBzdHJpbmcgfCBHUFVCdWZmZXIpIHtcbiAgICB0aGlzLl9tYXRlcmlhbC5zZXRVbmlmb3JtKG5hbWUsIHZhbHVlLCBydFN1Yk5hbWVPckdQVUJ1ZmZlcik7XG4gIH1cblxuICBwdWJsaWMgZ2V0VW5pZm9ybShuYW1lOiBzdHJpbmcpOiBUVW5pZm9ybVZhbHVlIHtcbiAgICByZXR1cm4gdGhpcy5fbWF0ZXJpYWwuZ2V0VW5pZm9ybShuYW1lKTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRHcm91cHMoeDogbnVtYmVyLCB5PzogbnVtYmVyLCB6PzogbnVtYmVyKSB7XG4gICAgdGhpcy5fZ3JvdXBzID0ge3gsIHksIHp9O1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jcmVhdGVQaXBlbGluZSgpIHtcbiAgICBjb25zdCB7ZGV2aWNlfSA9IHJlbmRlckVudjtcbiAgICBjb25zdCB7X21hdGVyaWFsfSA9IHRoaXM7XG4gICAgXG4gICAgY29uc3QgbWFyY29zID0gT2JqZWN0LmFzc2lnbih7fSwgX21hdGVyaWFsLm1hcmNvcyk7XG4gICAgY29uc3Qge2NzfSA9IF9tYXRlcmlhbC5lZmZlY3QuZ2V0U2hhZGVyKG1hcmNvcywgJycsIHJlbmRlckVudi5zaGFkZXJQcmVmaXgsICcnKTtcblxuICAgIHRoaXMuX3BpcGVsaW5lID0gZGV2aWNlLmNyZWF0ZUNvbXB1dGVQaXBlbGluZSh7XG4gICAgICBsYXlvdXQ6IGRldmljZS5jcmVhdGVQaXBlbGluZUxheW91dCh7YmluZEdyb3VwTGF5b3V0czogW1xuICAgICAgICByZW5kZXJFbnYudW5pZm9ybUxheW91dCxcbiAgICAgICAgX21hdGVyaWFsLmVmZmVjdC51bmlmb3JtTGF5b3V0XG4gICAgICBdfSksXG4gIFxuICAgICAgY29tcHV0ZToge1xuICAgICAgICBtb2R1bGU6IGNzLFxuICAgICAgICBlbnRyeVBvaW50OiBcIm1haW5cIlxuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iXX0=","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"./HObject\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar CubeTexture = (function (_super) {\n    __extends(CubeTexture, _super);\n    function CubeTexture(_width, _height, _src, _format) {\n        if (_format === void 0) { _format = 'rgba8unorm'; }\n        var _this = _super.call(this) || this;\n        _this._width = _width;\n        _this._height = _height;\n        _this._src = _src;\n        _this._format = _format;\n        _this.isCubeTexture = true;\n        if (_src.length < 6) {\n            throw new Error('CubeTexture must has 6 slice');\n        }\n        _this._gpuTexture = renderEnv_1.default.device.createTexture({\n            size: { width: _width, height: _height, depthOrArrayLayers: 6 },\n            format: _format,\n            usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT\n        });\n        _this._view = _this._gpuTexture.createView({\n            dimension: 'cube'\n        });\n        if (_src[0] instanceof ImageBitmap) {\n            _this._loadImg();\n        }\n        else {\n            _this._loadBuffer();\n        }\n        return _this;\n    }\n    CubeTexture.IS = function (value) {\n        return !!value.isCubeTexture;\n    };\n    Object.defineProperty(CubeTexture.prototype, \"view\", {\n        get: function () {\n            return this._view;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    CubeTexture.prototype._loadImg = function () {\n        var _this = this;\n        this._src.forEach(function (img, index) {\n            renderEnv_1.default.device.queue.copyExternalImageToTexture({ source: img }, { texture: _this._gpuTexture, origin: { x: 0, y: 0, z: index } }, { width: _this._width, height: _this._height, depthOrArrayLayers: 1 });\n        });\n    };\n    CubeTexture.prototype._loadBuffer = function () {\n        var _this = this;\n        this._src.forEach(function (img, index) {\n            renderEnv_1.default.device.queue.writeTexture({ texture: _this._gpuTexture, origin: { x: 0, y: 0, z: index } }, img, {}, { width: _this._width, height: _this._height, depthOrArrayLayers: 1 });\n        });\n    };\n    CubeTexture.CLASS_NAME = 'CubeTexture';\n    return CubeTexture;\n}(HObject_1.default));\nexports.default = CubeTexture;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQ3ViZVRleHR1cmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJDdWJlVGV4dHVyZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFNQSxxQ0FBZ0M7QUFDaEMseUNBQW9DO0FBRXBDO0lBQXlDLCtCQUFPO0lBZTlDLHFCQUNZLE1BQWMsRUFDZCxPQUFlLEVBQ2YsSUFBbUMsRUFDbkMsT0FBd0M7UUFBeEMsd0JBQUEsRUFBQSxzQkFBd0M7UUFKcEQsWUFNRSxpQkFBTyxTQXFCUjtRQTFCVyxZQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsYUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUNmLFVBQUksR0FBSixJQUFJLENBQStCO1FBQ25DLGFBQU8sR0FBUCxPQUFPLENBQWlDO1FBakI3QyxtQkFBYSxHQUFZLElBQUksQ0FBQztRQXFCbkMsSUFBSSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRTtZQUNuQixNQUFNLElBQUksS0FBSyxDQUFDLDhCQUE4QixDQUFDLENBQUM7U0FDakQ7UUFFRCxLQUFJLENBQUMsV0FBVyxHQUFHLG1CQUFTLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztZQUNoRCxJQUFJLEVBQUUsRUFBQyxLQUFLLEVBQUUsTUFBTSxFQUFFLE1BQU0sRUFBRSxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxFQUFDO1lBQzdELE1BQU0sRUFBRSxPQUFPO1lBQ2YsS0FBSyxFQUFFLGVBQWUsQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDLFFBQVEsR0FBRyxlQUFlLENBQUMsaUJBQWlCO1NBQ3RHLENBQUMsQ0FBQztRQUVILEtBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUM7WUFDdkMsU0FBUyxFQUFFLE1BQU07U0FDbEIsQ0FBQyxDQUFDO1FBRUgsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLFlBQVksV0FBVyxFQUFFO1lBQ2xDLEtBQUksQ0FBQyxRQUFRLEVBQUUsQ0FBQztTQUNqQjthQUFNO1lBQ0wsS0FBSSxDQUFDLFdBQVcsRUFBRSxDQUFDO1NBQ3BCOztJQUNILENBQUM7SUF0Q2EsY0FBRSxHQUFoQixVQUFpQixLQUFVO1FBQ3pCLE9BQU8sQ0FBQyxDQUFFLEtBQXFCLENBQUMsYUFBYSxDQUFDO0lBQ2hELENBQUM7SUFLRCxzQkFBSSw2QkFBSTthQUFSO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7OztPQUFBO0lBK0JTLDhCQUFRLEdBQWxCO1FBQUEsaUJBUUM7UUFQRSxJQUFJLENBQUMsSUFBc0IsQ0FBQyxPQUFPLENBQUMsVUFBQyxHQUFHLEVBQUUsS0FBSztZQUM5QyxtQkFBUyxDQUFDLE1BQU0sQ0FBQyxLQUFLLENBQUMsMEJBQTBCLENBQy9DLEVBQUMsTUFBTSxFQUFFLEdBQUcsRUFBQyxFQUNiLEVBQUMsT0FBTyxFQUFFLEtBQUksQ0FBQyxXQUFXLEVBQUUsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUMsRUFBQyxFQUMzRCxFQUFDLEtBQUssRUFBRSxLQUFJLENBQUMsTUFBTSxFQUFFLE1BQU0sRUFBRSxLQUFJLENBQUMsT0FBTyxFQUFFLGtCQUFrQixFQUFFLENBQUMsRUFBQyxDQUNsRSxDQUFDO1FBQ0osQ0FBQyxDQUFDLENBQUE7SUFDSixDQUFDO0lBRVMsaUNBQVcsR0FBckI7UUFBQSxpQkFTQztRQVJFLElBQUksQ0FBQyxJQUFzQixDQUFDLE9BQU8sQ0FBQyxVQUFDLEdBQUcsRUFBRSxLQUFLO1lBQzlDLG1CQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxZQUFZLENBQ2pDLEVBQUMsT0FBTyxFQUFFLEtBQUksQ0FBQyxXQUFXLEVBQUUsTUFBTSxFQUFFLEVBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUMsRUFBQyxFQUMzRCxHQUFHLEVBQ0gsRUFBRSxFQUNGLEVBQUMsS0FBSyxFQUFFLEtBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUksQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsQ0FBQyxFQUFDLENBQ2xFLENBQUM7UUFDSixDQUFDLENBQUMsQ0FBQTtJQUNKLENBQUM7SUE5RGEsc0JBQVUsR0FBVyxhQUFhLENBQUM7SUErRG5ELGtCQUFDO0NBQUEsQUFoRUQsQ0FBeUMsaUJBQU8sR0FnRS9DO2tCQWhFb0IsV0FBVyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQ3ViZVRleHR1cmUudHNcbiAqIFxuICogQEF1dGhvciAgOmR0eXNreShkdHlza3lAb3V0bG9vay5jb20pXG4gKiBARGF0ZSAgICA6IDYvMTMvMjAyMSwgMTI6MTA6MDcgQU1cbiovXG5pbXBvcnQgSE9iamVjdCBmcm9tICcuL0hPYmplY3QnO1xuaW1wb3J0IHJlbmRlckVudiBmcm9tICcuL3JlbmRlckVudic7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEN1YmVUZXh0dXJlIGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ0N1YmVUZXh0dXJlJztcbiAgcHVibGljIGlzQ3ViZVRleHR1cmU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHB1YmxpYyBzdGF0aWMgSVModmFsdWU6IGFueSk6IHZhbHVlIGlzIEN1YmVUZXh0dXJlIHtcbiAgICByZXR1cm4gISEodmFsdWUgYXMgQ3ViZVRleHR1cmUpLmlzQ3ViZVRleHR1cmU7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2dwdVRleHR1cmU6IEdQVVRleHR1cmU7XG4gIHByb3RlY3RlZCBfdmlldzogR1BVVGV4dHVyZVZpZXc7XG5cbiAgZ2V0IHZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ZpZXc7XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgX3dpZHRoOiBudW1iZXIsXG4gICAgcHJvdGVjdGVkIF9oZWlnaHQ6IG51bWJlcixcbiAgICBwcm90ZWN0ZWQgX3NyYzogQXJyYXlCdWZmZXJbXSB8IEltYWdlQml0bWFwW10sXG4gICAgcHJvdGVjdGVkIF9mb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQgPSAncmdiYTh1bm9ybSdcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmIChfc3JjLmxlbmd0aCA8IDYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignQ3ViZVRleHR1cmUgbXVzdCBoYXMgNiBzbGljZScpO1xuICAgIH1cblxuICAgIHRoaXMuX2dwdVRleHR1cmUgPSByZW5kZXJFbnYuZGV2aWNlLmNyZWF0ZVRleHR1cmUoe1xuICAgICAgc2l6ZToge3dpZHRoOiBfd2lkdGgsIGhlaWdodDogX2hlaWdodCwgZGVwdGhPckFycmF5TGF5ZXJzOiA2fSxcbiAgICAgIGZvcm1hdDogX2Zvcm1hdCxcbiAgICAgIHVzYWdlOiBHUFVUZXh0dXJlVXNhZ2UuVEVYVFVSRV9CSU5ESU5HIHwgR1BVVGV4dHVyZVVzYWdlLkNPUFlfRFNUIHwgR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UXG4gICAgfSk7XG5cbiAgICB0aGlzLl92aWV3ID0gdGhpcy5fZ3B1VGV4dHVyZS5jcmVhdGVWaWV3KHtcbiAgICAgIGRpbWVuc2lvbjogJ2N1YmUnXG4gICAgfSk7XG5cbiAgICBpZiAoX3NyY1swXSBpbnN0YW5jZW9mIEltYWdlQml0bWFwKSB7XG4gICAgICB0aGlzLl9sb2FkSW1nKCk7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2xvYWRCdWZmZXIoKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2xvYWRJbWcoKSB7XG4gICAgKHRoaXMuX3NyYyBhcyBJbWFnZUJpdG1hcFtdKS5mb3JFYWNoKChpbWcsIGluZGV4KSA9PiB7XG4gICAgICByZW5kZXJFbnYuZGV2aWNlLnF1ZXVlLmNvcHlFeHRlcm5hbEltYWdlVG9UZXh0dXJlKFxuICAgICAgICB7c291cmNlOiBpbWd9LFxuICAgICAgICB7dGV4dHVyZTogdGhpcy5fZ3B1VGV4dHVyZSwgb3JpZ2luOiB7eDogMCwgeTogMCwgejogaW5kZXh9fSxcbiAgICAgICAge3dpZHRoOiB0aGlzLl93aWR0aCwgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsIGRlcHRoT3JBcnJheUxheWVyczogMX1cbiAgICAgICk7XG4gICAgfSlcbiAgfVxuXG4gIHByb3RlY3RlZCBfbG9hZEJ1ZmZlcigpIHtcbiAgICAodGhpcy5fc3JjIGFzIEFycmF5QnVmZmVyW10pLmZvckVhY2goKGltZywgaW5kZXgpID0+IHtcbiAgICAgIHJlbmRlckVudi5kZXZpY2UucXVldWUud3JpdGVUZXh0dXJlKFxuICAgICAgICB7dGV4dHVyZTogdGhpcy5fZ3B1VGV4dHVyZSwgb3JpZ2luOiB7eDogMCwgeTogMCwgejogaW5kZXh9fSxcbiAgICAgICAgaW1nLFxuICAgICAgICB7fSxcbiAgICAgICAge3dpZHRoOiB0aGlzLl93aWR0aCwgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsIGRlcHRoT3JBcnJheUxheWVyczogMX1cbiAgICAgICk7XG4gICAgfSlcbiAgfVxufSJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DEFAULT_RENDER_STATES = void 0;\nvar shared_1 = require(\"./shared\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar HObject_1 = require(\"./HObject\");\nvar UBTemplate_1 = require(\"./UBTemplate\");\nexports.DEFAULT_RENDER_STATES = {\n    cullMode: 'back',\n    primitiveType: 'triangle-list',\n    depthCompare: 'less-equal'\n};\nfunction isComputeOptions(value) {\n    return !!value.cs;\n}\nvar Effect = (function (_super) {\n    __extends(Effect, _super);\n    function Effect(name, _options) {\n        var _this = _super.call(this) || this;\n        _this._options = _options;\n        _this.isEffect = true;\n        _this._shaders = {};\n        _this.name = name;\n        var options = _options;\n        var visibility = options.cs ? GPUShaderStage.COMPUTE : GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT;\n        _this._ubTemplate = new UBTemplate_1.default(options.uniformDesc, UBTemplate_1.EUBGroup.Material, visibility);\n        _this._renderStates = Object.assign({}, exports.DEFAULT_RENDER_STATES, options.renderState || {});\n        _this._marcos = options.marcos || {};\n        _this._marcosRegex = {};\n        for (var key in _this._marcos) {\n            var value = _this._marcos[key];\n            if (typeof value === 'number') {\n                _this._marcosRegex[key] = new RegExp(\"\\\\$\\\\{\" + key + \"\\\\}\", 'g');\n            }\n            else {\n                _this._marcosRegex[key] = {\n                    hasElse: new RegExp(\"#if defined\\\\(\" + key + \"\\\\)([\\\\s\\\\S]+?)#else([\\\\s\\\\S]+?)#endif\", 'g'),\n                    noElse: new RegExp(\"#if defined\\\\(\" + key + \"\\\\)([\\\\s\\\\S]+?)#endif\", 'g'),\n                };\n            }\n        }\n        if (isComputeOptions(options)) {\n            _this._cs = options.cs;\n        }\n        else {\n            _this._vs = options.vs;\n            _this._fs = options.fs;\n        }\n        return _this;\n    }\n    Object.defineProperty(Effect.prototype, \"ubTemplate\", {\n        get: function () {\n            return this._ubTemplate;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Effect.prototype, \"uniformLayout\", {\n        get: function () {\n            return this._ubTemplate.uniformLayout;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Effect.prototype, \"renderStates\", {\n        get: function () {\n            return this._renderStates;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Effect.prototype, \"isCompute\", {\n        get: function () {\n            return !!this._cs;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Effect.prototype.createDefaultUniformBlock = function () {\n        return this._ubTemplate.createUniformBlock();\n    };\n    Effect.prototype.getShader = function (marcos, attributesDef, globalPrefix, objectPrefix) {\n        marcos = Object.assign({}, this._marcos, marcos);\n        var device = renderEnv_1.default.device;\n        var hash = this._calcHash(attributesDef, globalPrefix, objectPrefix, marcos);\n        var shaders = this._shaders[hash];\n        if (shaders) {\n            return shaders;\n        }\n        var tmp = [this._vs, this._fs, this._cs];\n        var _loop_1 = function (key) {\n            var value = marcos[key];\n            var regex = this_1._marcosRegex[key];\n            tmp.forEach(function (s, i) {\n                if (!s) {\n                    return;\n                }\n                if (typeof value === 'number') {\n                    tmp[i] = s.replace(regex, \"\" + value);\n                }\n                else {\n                    var _a = regex, hasElse = _a.hasElse, noElse = _a.noElse;\n                    hasElse.lastIndex = 0;\n                    noElse.lastIndex = 0;\n                    tmp[i] = s.replace(hasElse, value ? '$1' : '$2');\n                    tmp[i] = tmp[i].replace(noElse, value ? '$1' : '');\n                }\n            });\n        };\n        var this_1 = this;\n        for (var key in this._marcos) {\n            _loop_1(key);\n        }\n        var prefix = globalPrefix + '\\n' + objectPrefix + '\\n' + this._ubTemplate.shaderPrefix;\n        var vs = tmp[0], fs = tmp[1], cs = tmp[2];\n        var res = this._shaders[hash] = {\n            vs: vs && device.createShaderModule({ code: attributesDef + prefix + vs }),\n            fs: fs && device.createShaderModule({ code: prefix + fs }),\n            cs: cs && device.createShaderModule({ code: prefix + cs })\n        };\n        return res;\n    };\n    Effect.prototype._calcHash = function (def, globalPrefix, objectPrefix, marcos) {\n        var hash = shared_1.hashCode(def);\n        hash = (hash << 5) - hash + shared_1.hashCode(globalPrefix);\n        hash = (hash << 5) - hash + shared_1.hashCode(objectPrefix);\n        for (var key in this._marcos) {\n            var value = marcos[key];\n            var hashValue = typeof value === 'number' ? value : (value ? 1 : 0);\n            hash = (hash << 5) - hash + hashValue;\n        }\n        return hash;\n    };\n    Effect.CLASS_NAME = 'Effect';\n    return Effect;\n}(HObject_1.default));\nexports.default = Effect;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiRWZmZWN0LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiRWZmZWN0LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQSxtQ0FBa0M7QUFDbEMseUNBQW9DO0FBQ3BDLHFDQUFnQztBQUNoQywyQ0FBdUU7QUFVMUQsUUFBQSxxQkFBcUIsR0FBa0I7SUFDbEQsUUFBUSxFQUFFLE1BQU07SUFDaEIsYUFBYSxFQUFFLGVBQWU7SUFDOUIsWUFBWSxFQUFFLFlBQVk7Q0FDM0IsQ0FBQztBQWdCRixTQUFTLGdCQUFnQixDQUFDLEtBQXFCO0lBQzdDLE9BQU8sQ0FBQyxDQUFFLEtBQStCLENBQUMsRUFBRSxDQUFDO0FBQy9DLENBQUM7QUFFRDtJQUFvQywwQkFBTztJQWlDekMsZ0JBQ0UsSUFBWSxFQUNKLFFBQXdCO1FBRmxDLFlBSUUsaUJBQU8sU0E0QlI7UUE5QlMsY0FBUSxHQUFSLFFBQVEsQ0FBZ0I7UUFqQzNCLGNBQVEsR0FBWSxJQUFJLENBQUM7UUFRdEIsY0FBUSxHQUliLEVBQUUsQ0FBQztRQXlCTixLQUFJLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtRQUNoQixJQUFNLE9BQU8sR0FBRyxRQUFRLENBQUM7UUFDekIsSUFBTSxVQUFVLEdBQUksT0FBaUMsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxPQUFPLENBQUMsQ0FBQyxDQUFDLGNBQWMsQ0FBQyxNQUFNLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQztRQUNwSSxLQUFJLENBQUMsV0FBVyxHQUFHLElBQUksb0JBQVUsQ0FBQyxPQUFPLENBQUMsV0FBVyxFQUFFLHFCQUFRLENBQUMsUUFBUSxFQUFFLFVBQVUsQ0FBQyxDQUFDO1FBQ3RGLEtBQUksQ0FBQyxhQUFhLEdBQUcsTUFBTSxDQUFDLE1BQU0sQ0FBQyxFQUFFLEVBQUUsNkJBQXFCLEVBQUcsT0FBZ0MsQ0FBQyxXQUFXLElBQUksRUFBRSxDQUFDLENBQUM7UUFFbkgsS0FBSSxDQUFDLE9B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WyIvKipcbiAqIEVmZmVjdC50c1xuICogXG4gKiBAQXV0aG9yICA6ZHR5c2t5KGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBEYXRlICAgIDogMjAyMS82LzfkuIvljYgxOjUxOjExXG4gKi9cbmltcG9ydCB7aGFzaENvZGV9IGZyb20gXCIuL3NoYXJlZFwiO1xuaW1wb3J0IHJlbmRlckVudiBmcm9tIFwiLi9yZW5kZXJFbnZcIjtcbmltcG9ydCBIT2JqZWN0IGZyb20gXCIuL0hPYmplY3RcIjtcbmltcG9ydCBVQlRlbXBsYXRlLCB7RVVCR3JvdXAsIElVbmlmb3Jtc0Rlc2NyaXB0b3J9IGZyb20gXCIuL1VCVGVtcGxhdGVcIjtcblxuZXhwb3J0IGludGVyZmFjZSBJUmVuZGVyU3RhdGVzIHtcbiAgY3VsbE1vZGU/OiBHUFVDdWxsTW9kZTtcbiAgcHJpbWl0aXZlVHlwZT86IEdQVVByaW1pdGl2ZVRvcG9sb2d5O1xuICBibGVuZENvbG9yPzogR1BVQmxlbmRDb21wb25lbnQ7XG4gIGJsZW5kQWxwaGE/OiBHUFVCbGVuZENvbXBvbmVudDtcbiAgZGVwdGhDb21wYXJlPzogR1BVQ29tcGFyZUZ1bmN0aW9uO1xufVxuXG5leHBvcnQgY29uc3QgREVGQVVMVF9SRU5ERVJfU1RBVEVTOiBJUmVuZGVyU3RhdGVzID0ge1xuICBjdWxsTW9kZTogJ2JhY2snLFxuICBwcmltaXRpdmVUeXBlOiAndHJpYW5nbGUtbGlzdCcsXG4gIGRlcHRoQ29tcGFyZTogJ2xlc3MtZXF1YWwnXG59O1xuXG5leHBvcnQgaW50ZXJmYWNlIElFZmZlY3RPcHRpb25zUmVuZGVyIHtcbiAgdnM6IHN0cmluZztcbiAgZnM6IHN0cmluZztcbiAgdW5pZm9ybURlc2M6IElVbmlmb3Jtc0Rlc2NyaXB0b3I7XG4gIG1hcmNvcz86IHtba2V5OiBzdHJpbmddOiBudW1iZXIgfCBib29sZWFufTtcbiAgcmVuZGVyU3RhdGU/OiBJUmVuZGVyU3RhdGVzO1xufVxuZXhwb3J0IGludGVyZmFjZSBJRWZmZWN0T3B0aW9uc0NvbXB1dGUge1xuICBjczogc3RyaW5nO1xuICB1bmlmb3JtRGVzYzogSVVuaWZvcm1zRGVzY3JpcHRvcjtcbiAgbWFyY29zPzoge1trZXk6IHN0cmluZ106IG51bWJlciB8IGJvb2xlYW59O1xufVxuZXhwb3J0IHR5cGUgVEVmZmVjdE9wdGlvbnMgPSBJRWZmZWN0T3B0aW9uc1JlbmRlciB8IElFZmZlY3RPcHRpb25zQ29tcHV0ZTtcblxuZnVuY3Rpb24gaXNDb21wdXRlT3B0aW9ucyh2YWx1ZTogVEVmZmVjdE9wdGlvbnMpOiB2YWx1ZSBpcyBJRWZmZWN0T3B0aW9uc0NvbXB1dGUge1xuICByZXR1cm4gISEodmFsdWUgYXMgSUVmZmVjdE9wdGlvbnNDb21wdXRlKS5jcztcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRWZmZWN0IGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ0VmZmVjdCc7XG4gIHB1YmxpYyBpc0VmZmVjdDogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJvdGVjdGVkIF9tYXJjb3M/OiB7W2tleTogc3RyaW5nXTogbnVtYmVyIHwgYm9vbGVhbn07XG4gIHByb3RlY3RlZCBfcmVuZGVyU3RhdGVzOiBJUmVuZGVyU3RhdGVzO1xuICBwcm90ZWN0ZWQgX21hcmNvc1JlZ2V4OiB7W2tleTogc3RyaW5nXTogUmVnRXhwIHwge2hhc0Vsc2U6IFJlZ0V4cCwgbm9FbHNlOiBSZWdFeHB9fTtcbiAgcHJvdGVjdGVkIF92czogc3RyaW5nO1xuICBwcm90ZWN0ZWQgX2ZzOiBzdHJpbmc7XG4gIHByb3RlY3RlZCBfY3M6IHN0cmluZztcbiAgcHJvdGVjdGVkIF9zaGFkZXJzOiB7W2hhc2g6IG51bWJlcl06IHtcbiAgICB2cz86IEdQVVNoYWRlck1vZHVsZSxcbiAgICBmcz86IEdQVVNoYWRlck1vZHVsZSxcbiAgICBjcz86IEdQVVNoYWRlck1vZHVsZVxuICB9fSA9IHt9O1xuICBwcm90ZWN0ZWQgX3ViVGVtcGxhdGU6IFVCVGVtcGxhdGU7XG5cbiAgZ2V0IHViVGVtcGxhdGUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3ViVGVtcGxhdGU7XG4gIH1cblxuICBnZXQgdW5pZm9ybUxheW91dCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdWJUZW1wbGF0ZS51bmlmb3JtTGF5b3V0O1xuICB9XG5cbiAgZ2V0IHJlbmRlclN0YXRlcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyU3RhdGVzO1xuICB9XG5cbiAgZ2V0IGlzQ29tcHV0ZSgpIHtcbiAgICByZXR1cm4gISF0aGlzLl9jcztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIG5hbWU6IHN0cmluZyxcbiAgICBwcml2YXRlIF9vcHRpb25zOiBURWZmZWN0T3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5uYW1lID0gbmFtZVxuICAgIGNvbnN0IG9wdGlvbnMgPSBfb3B0aW9ucztcbiAgICBjb25zdCB2aXNpYmlsaXR5ID0gKG9wdGlvbnMgYXMgSUVmZmVjdE9wdGlvbnNDb21wdXRlKS5jcyA/IEdQVVNoYWRlclN0YWdlLkNPTVBVVEUgOiBHUFVTaGFkZXJTdGFnZS5WRVJURVggfCBHUFVTaGFkZXJTdGFnZS5GUkFHTUVOVDtcbiAgICB0aGlzLl91YlRlbXBsYXRlID0gbmV3IFVCVGVtcGxhdGUob3B0aW9ucy51bmlmb3JtRGVzYywgRVVCR3JvdXAuTWF0ZXJpYWwsIHZpc2liaWxpdHkpO1xuICAgIHRoaXMuX3JlbmRlclN0YXRlcyA9IE9iamVjdC5hc3NpZ24oe30sIERFRkFVTFRfUkVOREVSX1NUQVRFUywgKG9wdGlvbnMgYXMgSUVmZmVjdE9wdGlvbnNSZW5kZXIpLnJlbmRlclN0YXRlIHx8IHt9KTtcblxuICAgIHRoaXMuX21hcmNvcyA9IG9wdGlvbnMubWFyY29zIHx8IHt9O1xuICAgIHRoaXMuX21hcmNvc1JlZ2V4ID0ge307XG4gICAgZm9yIChjb25zdCBrZXkgaW4gdGhpcy5fbWFyY29zKSB7XG4gICAgICBjb25zdCB2YWx1ZSA9IHRoaXMuX21hcmNvc1trZXldO1xuICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgdGhpcy5fbWFyY29zUmVnZXhba2V5XSA9IG5ldyBSZWdFeHAoYFxcXFxcXCRcXFxceyR7a2V5fVxcXFxcXH1gLCAnZycpO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fbWFyY29zUmVnZXhba2V5XSA9IHtcbiAgICAgICAgICBoYXNFbHNlOiBuZXcgUmVnRXhwKGAjaWYgZGVmaW5lZFxcXFwoJHtrZXl9XFxcXCkoW1xcXFxzXFxcXFNdKz8pI2Vsc2UoW1xcXFxzXFxcXFNdKz8pI2VuZGlmYCwgJ2cnKSxcbiAgICAgICAgICBub0Vsc2U6IG5ldyBSZWdFeHAoYCNpZiBkZWZpbmVkXFxcXCgke2tleX1cXFxcKShbXFxcXHNcXFxcU10rPykjZW5kaWZgLCAnZycpLFxuICAgICAgICB9O1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChpc0NvbXB1dGVPcHRpb25zKG9wdGlvbnMpKSB7XG4gICAgICB0aGlzLl9jcyA9IG9wdGlvbnMuY3NcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fdnMgPSBvcHRpb25zLnZzO1xuICAgICAgdGhpcy5fZnMgPSBvcHRpb25zLmZzO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVEZWZhdWx0VW5pZm9ybUJsb2NrKCkge1xuICAgIHJldHVybiB0aGlzLl91YlRlbXBsYXRlLmNyZWF0ZVVuaWZvcm1CbG9jaygpO1xuICB9XG5cbiAgcHVibGljIGdldFNoYWRlcihcbiAgICBtYXJjb3M6IHtba2V5OiBzdHJpbmddOiBudW1iZXIgfCBib29sZWFufSxcbiAgICBhdHRyaWJ1dGVzRGVmOiBzdHJpbmcsIGdsb2JhbFByZWZpeDogc3RyaW5nLCBvYmplY3RQcmVmaXg6IHN0cmluZ1xuICApIHtcbiAgICBtYXJjb3MgPSBPYmplY3QuYXNzaWduKHt9LCB0aGlzLl9tYXJjb3MsIG1hcmNvcyk7XG4gICAgY29uc3Qge2RldmljZX0gPSByZW5kZXJFbnY7XG4gICAgY29uc3QgaGFzaCA9IHRoaXMuX2NhbGNIYXNoKGF0dHJpYnV0ZXNEZWYsIGdsb2JhbFByZWZpeCwgb2JqZWN0UHJlZml4LCBtYXJjb3MpO1xuICAgIGNvbnN0IHNoYWRlcnMgPSB0aGlzLl9zaGFkZXJzW2hhc2hdO1xuXG4gICAgaWYgKHNoYWRlcnMpIHtcbiAgICAgIHJldHVybiBzaGFkZXJzO1xuICAgIH1cblxuICAgIGNvbnN0IHRtcCA9IFt0aGlzLl92cywgdGhpcy5fZnMsIHRoaXMuX2NzXTtcblxuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX21hcmNvcykge1xuICAgICAgY29uc3QgdmFsdWUgPSBtYXJjb3Nba2V5XTtcbiAgICAgIGNvbnN0IHJlZ2V4ID0gdGhpcy5fbWFyY29zUmVnZXhba2V5XTtcblxuICAgICAgdG1wLmZvckVhY2goKHMsIGkpID0+IHtcbiAgICAgICAgaWYgKCFzKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcbiAgICAgICAgICB0bXBbaV0gPSBzLnJlcGxhY2UocmVnZXggYXMgUmVnRXhwLCBgJHt2YWx1ZX1gKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICBjb25zdCB7aGFzRWxzZSwgbm9FbHNlfSA9IHJlZ2V4IGFzIHtoYXNFbHNlOiBSZWdFeHAsIG5vRWxzZTogUmVnRXhwfTtcbiAgICAgICAgICBoYXNFbHNlLmxhc3RJbmRleCA9IDA7XG4gICAgICAgICAgbm9FbHNlLmxhc3RJbmRleCA9IDA7XG5cbiAgICAgICAgICB0bXBbaV0gPSBzLnJlcGxhY2UoaGFzRWxzZSwgdmFsdWUgPyAnJDEnIDogJyQyJyk7XG4gICAgICAgICAgdG1wW2ldID0gdG1wW2ldLnJlcGxhY2Uobm9FbHNlLCB2YWx1ZSA/ICckMScgOiAnJyk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgIH1cblxuICAgIGNvbnN0IHByZWZpeCA9IGdsb2JhbFByZWZpeCArICdcXG4nICsgb2JqZWN0UHJlZml4ICsgJ1xcbicgKyB0aGlzLl91YlRlbXBsYXRlLnNoYWRlclByZWZpeDtcbiAgICBjb25zdCBbdnMsIGZzLCBjc10gPSB0bXA7XG4gICAgY29uc3QgcmVzID0gdGhpcy5fc2hhZGVyc1toYXNoXSA9IHtcbiAgICAgIHZzOiB2cyAmJiBkZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtjb2RlOiBhdHRyaWJ1dGVzRGVmICsgcHJlZml4ICsgdnN9KSxcbiAgICAgIGZzOiBmcyAmJiBkZXZpY2UuY3JlYXRlU2hhZGVyTW9kdWxlKHtjb2RlOiBwcmVmaXggKyBmc30pLFxuICAgICAgY3M6IGNzICYmIGRldmljZS5jcmVhdGVTaGFkZXJNb2R1bGUoe2NvZGU6IHByZWZpeCArIGNzfSlcbiAgICB9O1xuXG4gICAgcmV0dXJuIHJlcztcbiAgfVxuXG4gIHByaXZhdGUgX2NhbGNIYXNoKFxuICAgIGRlZjogc3RyaW5nLCBnbG9iYWxQcmVmaXg6IHN0cmluZywgb2JqZWN0UHJlZml4OiBzdHJpbmcsXG4gICAgbWFyY29zOiB7W2tleTogc3RyaW5nXTogbnVtYmVyIHwgYm9vbGVhbn1cbiAgKTogbnVtYmVyIHtcbiAgICBsZXQgaGFzaDogbnVtYmVyID0gaGFzaENvZGUoZGVmKTtcbiAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgaGFzaENvZGUoZ2xvYmFsUHJlZml4KTtcbiAgICBoYXNoID0gKGhhc2ggPDwgNSkgLSBoYXNoICsgaGFzaENvZGUob2JqZWN0UHJlZml4KTtcblxuICAgIGZvciAoY29uc3Qga2V5IGluIHRoaXMuX21hcmNvcykge1xuICAgICAgY29uc3QgdmFsdWUgPSBtYXJjb3Nba2V5XTtcbiAgICAgIGNvbnN0IGhhc2hWYWx1ZSA9IHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyB2YWx1ZSA6ICh2YWx1ZSA/IDEgOiAwKTtcbiAgICAgIGhhc2ggPSAoaGFzaCA8PCA1KSAtIGhhc2ggKyBoYXNoVmFsdWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGhhc2g7XG4gIH1cbn1cbiJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar HObject_1 = require(\"./HObject\");\nvar shared_1 = require(\"./shared\");\nvar Geometry = (function (_super) {\n    __extends(Geometry, _super);\n    function Geometry(_vertexes, _indexData, count, _boundingBox) {\n        var _this = _super.call(this) || this;\n        _this._vertexes = _vertexes;\n        _this._indexData = _indexData;\n        _this.count = count;\n        _this._boundingBox = _boundingBox;\n        _this.isGeometry = true;\n        _this._iBuffer = shared_1.createGPUBuffer(_indexData, GPUBufferUsage.INDEX);\n        _this._vBuffers = new Array(_vertexes.length);\n        _this._vLayouts = new Array(_vertexes.length);\n        _this._indexFormat = _indexData instanceof Uint16Array ? 'uint16' : 'uint32';\n        _this._vInfo = {};\n        _this._marcos = {};\n        _this._attributesDef = 'struct Attrs {\\n';\n        _vertexes.forEach(function (_a, index) {\n            var layout = _a.layout, data = _a.data, usage = _a.usage;\n            var vBuffer = shared_1.createGPUBuffer(data, GPUBufferUsage.VERTEX | (usage | 0));\n            layout.attributes.forEach(function (attr) {\n                _this._marcos[\"USE_\" + attr.name.toUpperCase()] = true;\n                _this._attributesDef += \"  [[location(\" + attr.shaderLocation + \")]] \" + attr.name + \": \" + _this._convertFormat(attr.format) + \";\\n\";\n                _this._vInfo[attr.name.toLowerCase()] = {\n                    data: data, index: index,\n                    offset: attr.offset / 4, stride: layout.arrayStride / 4, length: _this._getLength(attr.format)\n                };\n            });\n            _this._vBuffers[index] = vBuffer;\n            _this._vLayouts[index] = layout;\n            _this._vertexCount = data.byteLength / layout.arrayStride;\n        });\n        _this._attributesDef += '};\\n\\n';\n        return _this;\n    }\n    Object.defineProperty(Geometry.prototype, \"indexes\", {\n        get: function () {\n            return this._iBuffer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"indexData\", {\n        get: function () {\n            return this._indexData;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"vertexes\", {\n        get: function () {\n            return this._vBuffers;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"vertexLayouts\", {\n        get: function () {\n            return this._vLayouts;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"vertexCount\", {\n        get: function () {\n            return this._vertexCount;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"vertexInfo\", {\n        get: function () {\n            return this._vInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"attributesDef\", {\n        get: function () {\n            return this._attributesDef;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"indexFormat\", {\n        get: function () {\n            return this._indexFormat;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Geometry.prototype, \"marcos\", {\n        get: function () {\n            return this._marcos;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Geometry.prototype.calculateNormals = function () {\n        var _a = this, _vInfo = _a._vInfo, _vertexCount = _a._vertexCount, _indexData = _a._indexData, count = _a.count;\n        if (_vInfo.normal) {\n            return;\n        }\n        var position = _vInfo.position;\n        var data = new Float32Array(_vertexCount * 3);\n        var boundingMin;\n        var boundingMax;\n        var calcBounding = !this._boundingBox;\n        if (calcBounding) {\n            boundingMax = [-Infinity, -Infinity, -Infinity];\n            boundingMin = [Infinity, Infinity, Infinity];\n        }\n        var vMultiFaceCount = new Uint8Array(_vertexCount);\n        var v31;\n        var v32;\n        var v33;\n        var offset;\n        for (var i = 0; i < count; i += 1) {\n            offset = position.offset + _indexData[i] * position.stride;\n            v31 = position.data.slice(offset, offset + position.length);\n            offset = position.offset + _indexData[i + 1] * position.stride;\n            v32 = position.data.slice(offset, offset + position.length);\n            offset = position.offset + _indexData[i + 2] * position.stride;\n            v33 = position.data.slice(offset, offset + position.length);\n            if (calcBounding) {\n                this._calcBonding(boundingMax, boundingMin, v31);\n                this._calcBonding(boundingMax, boundingMin, v32);\n                this._calcBonding(boundingMax, boundingMin, v33);\n            }\n            gl_matrix_1.vec3.sub(v32, v32, v31);\n            gl_matrix_1.vec3.sub(v33, v33, v31);\n            gl_matrix_1.vec3.cross(v32, v32, v33);\n            for (var vi = 0; vi < 3; vi += 1) {\n                var index = _indexData[i + vi];\n                if (vMultiFaceCount[index]) {\n                    var oldData = new Float32Array(data.buffer, index * 3 * 4, 3);\n                    gl_matrix_1.vec3.scale(oldData, oldData, vMultiFaceCount[index]);\n                    gl_matrix_1.vec3.add(oldData, oldData, v32);\n                    gl_matrix_1.vec3.scale(oldData, oldData, 1 / (vMultiFaceCount[i] + 1));\n                }\n                else {\n                    data.set(v32, index * 3);\n                }\n                vMultiFaceCount[index] += 1;\n            }\n        }\n        _vInfo.normal = { offset: 0, length: 3, stride: 3, data: data, index: 0 };\n        if (calcBounding) {\n            this._boundingBox = {\n                start: boundingMin,\n                center: boundingMax.map(function (v, i) { return (v + boundingMin[i]) / 2; }),\n                size: boundingMax.map(function (v, i) { return v - boundingMin[i]; })\n            };\n        }\n    };\n    Geometry.prototype.getValues = function (name) {\n        return {\n            cpu: this._vInfo[name].data,\n            gpu: this._vBuffers[this._vInfo[name].index]\n        };\n    };\n    Geometry.prototype._calcBonding = function (max, min, p) {\n        for (var index = 0; index < 3; index += 1) {\n            max[index] = Math.max(max[index], p[index]);\n            min[index] = Math.min(min[index], p[index]);\n        }\n    };\n    Geometry.prototype._convertFormat = function (f) {\n        switch (f) {\n            case 'float32':\n                return 'f32';\n            case 'float32x2':\n                return 'vec2<f32>';\n            case 'float32x3':\n                return 'vec3<f32>';\n            case 'float32x4':\n                return 'vec4<f32>';\n            case 'uint32':\n                return 'u32';\n            case 'uint32x2':\n                return 'vec2<u32>';\n            case 'uint32x3':\n                return 'vec3<u32>';\n            case 'uint32x4':\n                return 'vec4<u32>';\n        }\n        throw new Error(\"Not support format \" + f + \"!\");\n    };\n    Geometry.prototype._getLength = function (f) {\n        switch (f) {\n            case 'float32':\n            case 'uint32':\n                return 1;\n            case 'float32x2':\n            case 'uint32x2':\n                return 2;\n            case 'float32x3':\n            case 'uint32x3':\n                return 3;\n            case 'float32x4':\n            case 'uint32x4':\n                return 4;\n        }\n        throw new Error(\"Not support format \" + f + \"!\");\n    };\n    Geometry.prototype.updateVertexes = function () {\n        console.warn('Not implemented!');\n    };\n    Geometry.prototype.updateIndexes = function () {\n        console.warn('Not implemented!');\n    };\n    Geometry.CLASS_NAME = 'Geometry';\n    return Geometry;\n}(HObject_1.default));\nexports.default = Geometry;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2VvbWV0cnkuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJHZW9tZXRyeS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFPQSx1Q0FBaUM7QUFDakMscUNBQWdDO0FBQ2hDLG1DQUFzRDtBQVF0RDtJQUFzQyw0QkFBTztJQTBEM0Msa0JBQ1ksU0FPUCxFQUNPLFVBQXFDLEVBQ3hDLEtBQWEsRUFDVixZQUEyQjtRQVh2QyxZQWFFLGlCQUFPLFNBNkJSO1FBekNXLGVBQVMsR0FBVCxTQUFTLENBT2hCO1FBQ08sZ0JBQVUsR0FBVixVQUFVLENBQTJCO1FBQ3hDLFdBQUssR0FBTCxLQUFLLENBQVE7UUFDVixrQkFBWSxHQUFaLFlBQVksQ0FBZTtRQW5FaEMsZ0JBQVUsR0FBWSxJQUFJLENBQUM7UUF1RWhDLEtBQUksQ0FBQyxRQUFRLEdBQUcsd0JBQWUsQ0FBQyxVQUFVLEVBQUUsY0FBYyxDQUFDLEtBQUssQ0FBQyxDQUFDO1FBQ2xFLEtBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdDLEtBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxLQUFLLENBQUMsU0FBUyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQzdDLEtBQUksQ0FBQyxZQUFZLEdBQUcsVUFBVSxZQUFZLFdBQVcsQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFDLENBQUMsQ0FBQyxRQUFRLENBQUM7UUFDNUUsS0FBSSxDQUFDLE1BQU0sR0FBRyxFQUFFLENBQUM7UUFDakIsS0FBSSxDQUFDLE9BQU8sR0FBRyxFQUFFLENBQUM7UUFDbEIsS0FBSSxDQUFDLGNBQWMsR0FBRyxrQkFBa0IsQ0FBQztRQUV6QyxTQUFTLENBQUMsT0FBTyxDQUFDLFVBQUMsRUFBcUIsRUFBRSxLQUFLO2dCQUEzQixNQUFNLFlBQUEsRUFBRSxJQUFJLFVBQUEsRUFBRSxLQUFLLFdBQUE7WUFDckMsSUFBTSxPQUFPLEdBQUcsd0JBQWUsQ0FBQyxJQUFJLEVBQUUsY0FBYyxDQUFDLE1BQU0sR0FBRyxDQUFDLEtBQUssR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRTNFLE1BQU0sQ0FBQyxVQUFVLENBQUMsT0FBTyxDQUFDLFVBQUMsSUFBSTtnQkFDN0IsS0FBSSxDQUFDLE9BQU8sQ0FBQyxTQUFPLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFJLENBQUMsR0FBRyxJQUFJLENBQUM7Z0JBQ3RELEtBQUksQ0FBQyxjQUFjLElBQUksa0JBQWdCLElBQUksQ0FBQyxjQUFjLFlBQU8sSUFBSSxDQUFDLElBQUksVUFBSyxLQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBSyxDQUFDO2dCQUNySCxLQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsV0FBVyxFQUFFLENBQUMsR0FBRztvQkFDckMsSUFBSSxNQUFBLEVBQUUsS0FBSyxPQUFBO29CQUNYLE1BQU0sRUFBRSxJQUFJLENBQUMsTUFBTSxHQUFHLENBQUMsRUFBRSxNQUFNLEVBQUUsTUFBTSxDQUFDLFdBQVcsR0FBRyxDQUFDLEVBQUUsTUFBTSxFQUFFLEtBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQztpQkFDOUYsQ0FBQztZQUNKLENBQUMsQ0FBQyxDQUFDO1lBRUgsS0FBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxPQUFPLENBQUM7WUFDaEMsS0FBSSxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsR0FBRyxNQUFNLENBQUM7WUFFL0IsS0FBSSxDQUFDLFlBQVksR0FBRyxJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxXQUFXLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUM7UUFFSCxLQUFJLENBQUMsY0FBYyxJQUFJLFFBQVEsQ0FBQzs7SUFDbEMsQ0FBQztJQTlFRCxzQkFBSSw2QkFBTzthQUFYO1lBQ0UsT0FBTyxJQUFJLENBQUMsUUFBUSxDQUFDO1FBQ3ZCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksK0JBQVM7YUFBYjtZQUNFLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztRQUN6QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDhCQUFRO2FBQVo7WUFDRSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxtQ0FBYTthQUFqQjtZQUNFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUN4QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLGlDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDM0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxnQ0FBVTthQUFkO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksbUNBQWE7YUFBakI7WUFDRSxPQUFPLElBQUksQ0FBQyxjQUFjLENBQUM7UUFDN0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxpQ0FBVzthQUFmO1lBQ0UsT0FBTyxJQUFJLENBQUMsWUFBWSxDQUFDO1FBQzNCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNEJBQU07YUFBVjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDOzs7T0FBQTtJQThDTSxtQ0FBZ0IsR0FBdkI7UUFDUSxJQUFBLEtBQTRDLElBQUksRUFBL0MsTUFBTSxZQUFBLEVBQUUsWUFBWSxrQkFBQSxFQUFFLFVBQVUsZ0JBQUEsRUFBRSxLQUFLLFdBQVEsQ0FBQztRQUV2RCxJQUFJLE1BQU0sQ0FBQyxNQUFNLEVBQUU7WUFDakIsT0FBTztTQUNSO1FBRUQsSUFBTSxRQUFRLEdBQUcsTUFBTSxDQUFDLFFBQVEsQ0FBQztRQUNqQyxJQUFNLElBQUksR0FBRyxJQUFJLFlBQVksQ0FBQyxZQUFZLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFFaEQsSUFBSSxXQUFxQyxDQUFDO1FBQzFDLElBQUksV0FBcUMsQ0FBQztRQUMxQyxJQUFNLFlBQVksR0FBRyxDQUFDLElBQUksQ0FBQyxZQUFZLENBQUM7UUFDeEMsSUFBSSxZQUFZLEVBQUU7WUFDaEIsV0FBVyxHQUFHLENBQUMsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLEVBQUUsQ0FBQyxRQUFRLENBQUMsQ0FBQztZQUNoRCxXQUFXLEdBQUcsQ0FBQyxRQUFRLEVBQUUsUUFBUSxFQUFFLFFBQVEsQ0FBQyxDQUFDO1NBQzlDO1FBRUQsSUFBTSxlQUFlLEdBQUcsSUFBSSxVQUFVLENBQUMsWUFBWSxDQUFDLENBQUM7UUFDckQsSUFBSSxHQUFpQixDQUFDO1FBQ3RCLElBQUksR0FBaUIsQ0FBQztRQUN0QixJQUFJLEdBQWlCLENBQUM7UUFDdEIsSUFBSSxNQUFjLENBQUM7UUFDbkIsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLEtBQUssRUFBRSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ2pDLE1BQU0sR0FBRyxRQUFRLENBQUMsTUFBTSxHQUFHLFVBQVUsQ0FBQyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQzNELEdBQUcsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQWlCLENBQUM7WUFDNUUsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQy9ELEdBQUcsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQWlCLENBQUM7WUFDNUUsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLEdBQUcsVUFBVSxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsR0FBRyxRQUFRLENBQUMsTUFBTSxDQUFDO1lBQy9ELEdBQUcsR0FBRyxRQUFRLENBQUMsSUFBSSxDQUFDLEtBQUssQ0FBQyxNQUFNLEVBQUUsTUFBTSxHQUFHLFFBQVEsQ0FBQyxNQUFNLENBQWlCLENBQUM7WUFFNUUsSUFBSSxZQUFZLEVBQUU7Z0JBQ2hCLElBQUksQ0FBQyxZQUFZLENBQUMsV0FBVyxFQUFFLFdBQVcsRUFBRSxHQUFHLENBQUMsQ0FBQztnQkFDakQsSUFBSSxDQUFDLFlBQVksQ0FBQyxXQUFXLEVBQUUsV0FBVyxFQUFFLEdBQUcsQ0FBQyxDQUFDO2dCQUNqRCxJQUFJLENBQUMsWUFBWSxDQUFDLFdBQVcsRUFBRSxXQUFXLEVBQUUsR0FBRyxDQUFDLENBQUM7YUFDbEQ7WUFFRCxnQkFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxFQUFFLEdBQUcsQ0FBQyxDQUFDO1lBQ3hCLGdCQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUM7WUFDeEIsZ0JBQUksQ0FBQyxLQUFLLENBQUMsR0FBRyxFQUFFLEdBQUcsRUFBRSxHQUFHLENBQUMsQ0FBQztZQUUxQixLQUFLLElBQUksRUFBRSxHQUFHLENBQUMsRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsSUFBSSxDQUFDLEVBQUU7Z0JBQ2hDLElBQU0sS0FBSyxHQUFHLFVBQVUsQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLENBQUM7Z0JBRWpDLElBQUksZUFBZSxDQUFDLEtBQUssQ0FBQyxFQUFFO29CQUMxQixJQUFNLE9BQU8sR0FBRyxJQUFJLFlBQVksQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEtBQUssR0FBRyxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO29CQUNoRSxnQkFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLGVBQWUsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO29CQUNyRCxnQkFBSSxDQUFDLEdBQUcsQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLEdBQUcsQ0FBQyxDQUFDO29CQUNoQyxnQkFBSSxDQUFDLEtBQUssQ0FBQyxPQUFPLEVBQUUsT0FBTyxFQUFFLENBQUMsR0FBRyxDQUFDLGVBQWUsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDO2lCQUM1RDtxQkFBTTtvQkFDTCxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsRUFBRSxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUM7aUJBQzFCO2dCQUVELGVBQWUsQ0FBQyxLQUFLLENBQUMsSUFBSSxDQUFDLENBQUM7YUFDN0I7U0FDRjtRQUdELE1BQU0sQ0FBQyxNQUFNLEdBQUcsRUFBQyxNQUFNLEVBQUUsQ0FBQyxFQUFFLE1BQU0sRUFBRSxDQUFDLEVBQUUsTUFBTSxFQUFFLENBQUMsRUFBRSxJQUFJLE1BQUEsRUFBRSxLQUFLLEVBQUUsQ0FBQyxFQUFDLENBQUM7UUFDbEUsSUFBSSxZQUFZLEVBQUU7WUFDaEIsSUFBSSxDQUFDLFlBQVksR0FBRztnQkFDbEIsS0FBSyxFQUFFLFdBQVc7Z0JBQ2xCLE1BQU0sRUFBRSxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSyxPQUFBLENBQUMsQ0FBQyxHQUFHLFdBQVcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsRUFBeEIsQ0FBd0IsQ0FBNkI7Z0JBQ3ZGLElBQUksRUFBRSxXQUFXLENBQUMsR0FBRyxDQUFDLFVBQUMsQ0FBQyxFQUFFLENBQUMsSUFBSyxPQUFBLENBQUMsR0FBRyxXQUFXLENBQUMsQ0FBQyxDQUFDLEVBQWxCLENBQWtCLENBQTZCO2FBQ2hGLENBQUM7U0FDSDtJQUNILENBQUM7SUFFTSw0QkFBUyxHQUFoQixVQUFpQixJQUFZO1FBQzNCLE9BQU87WUFDTCxHQUFHLEVBQUUsSUFBSSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsQ0FBQyxJQUFJO1lBQzNCLEdBQUcsRUFBRSxJQUFJLENBQUMsU0FBUyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsS0FBSyxDQUFDO1NBQzdDLENBQUM7SUFDSixDQUFDO0lBRVMsK0JBQVksR0FBdEIsVUFBdUIsR0FBYSxFQUFFLEdBQWEsRUFBRSxDQUFvQjtRQUN2RSxLQUFLLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsQ0FBQyxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUU7WUFDekMsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLElBQUksQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLEtBQUssQ0FBQyxFQUFFLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDO1lBQzVDLEdBQUcsQ0FBQyxLQUFLLENBQUMsR0FBRyxJQUFJLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQztTQUM3QztJQUNILENBQUM7SUFFUyxpQ0FBYyxHQUF4QixVQUF5QixDQUFrQjtRQUN6QyxRQUFRLENBQUMsRUFBRTtZQUNULEtBQUssU0FBUztnQkFDWixPQUFPLEtBQUssQ0FBQztZQUNmLEtBQUssV0FBVztnQkFDZCxPQUFPLFdBQVcsQ0FBQztZQUNyQixLQUFLLFdBQVc7Z0JBQ2QsT0FBTyxXQUFXLENBQUM7WUFDckIsS0FBSyxXQUFXO2dCQUNkLE9BQU8sV0FBVyxDQUFDO1lBQ3JCLEtBQUssUUFBUTtnQkFDWCxPQUFPLEtBQUssQ0FBQztZQUNmLEtBQUssVUFBVTtnQkFDYixPQUFPLFdBQVcsQ0FBQztZQUNyQixLQUFLLFVBQVU7Z0JBQ2IsT0FBTyxXQUFXLENBQUM7WUFDckIsS0FBSyxVQUFVO2dCQUNiLE9BQU8sV0FBVyxDQUFDO1NBQ3RCO1FBRUQsTUFBTSxJQUFJLEtBQUssQ0FBQyx3QkFBc0IsQ0FBQyxNQUFHLENBQUMsQ0FBQTtJQUM3QyxDQUFDO0lBRVMsNkJBQVUsR0FBcEIsVUFBcUIsQ0FBa0I7UUFDckMsUUFBUSxDQUFDLEVBQUU7WUFDVCxLQUFLLFNBQVMsQ0FBQztZQUNmLEtBQUssUUFBUTtnQkFDWCxPQUFPLENBQUMsQ0FBQztZQUNYLEtBQUssV0FBVyxDQUFDO1lBQ2pCLEtBQUssVUFBVTtnQkFDYixPQUFPLENBQUMsQ0FBQztZQUNYLEtBQUssV0FBVyxDQUFDO1lBQ2pCLEtBQUssVUFBVTtnQkFDYixPQUFPLENBQUMsQ0FBQztZQUNYLEtBQUssV0FBVyxDQUFDO1lBQ2pCLEtBQUssVUFBVTtnQkFDYixPQUFPLENBQUMsQ0FBQztTQUNaO1FBRUQsTUFBTSxJQUFJLEtBQUssQ0FBQyx3QkFBc0IsQ0FBQyxNQUFHLENBQUMsQ0FBQTtJQUM3QyxDQUFDO0lBRU0saUNBQWMsR0FBckI7UUFDRSxPQUFPLENBQUMsSUFBSSxDQUFDLGtCQUFrQixDQUFDLENBQUM7SUFDbkMsQ0FBQztJQUVNLGdDQUFhLEdBQXBCO1FBQ0UsT0FBTyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUF2T2EsbUJBQVUsR0FBVyxVQUFVLENBQUM7SUF3T2hELGVBQUM7Q0FBQSxBQXpPRCxDQUFzQyxpQkFBTyxHQXlPNUM7a0JBek9vQixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEBGaWxlICAgOiBHZW9tZXRyeS50c1xuICogQEF1dGhvciA6IGR0eXNreSAoZHR5c2t5QG91dGxvb2suY29tKVxuICogQExpbmsgICA6IGR0eXNreS5tb2VcbiAqIEBEYXRlICAgOiAyMDIxLzYvNuS4i+WNiDg6NTY6NDlcbiAqL1xuaW1wb3J0IHsgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgSE9iamVjdCBmcm9tICcuL0hPYmplY3QnO1xuaW1wb3J0IHtjcmVhdGVHUFVCdWZmZXIsIFRUeXBlZEFycmF5fSBmcm9tICcuL3NoYXJlZCc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJvdW5kaW5nQm94IHtcbiAgc3RhcnQ6IFtudW1iZXIsIG51bWJlciwgbnVtYmVyXTtcbiAgY2VudGVyOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl07XG4gIHNpemU6IFtudW1iZXIsIG51bWJlciwgIG51bWJlcl07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIEdlb21ldHJ5IGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ0dlb21ldHJ5JztcbiAgcHVibGljIGlzR2VvbWV0cnk6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHByb3RlY3RlZCBfdkxheW91dHM6IHtcbiAgICBhdHRyaWJ1dGVzOiAoR1BVVmVydGV4QXR0cmlidXRlICYge25hbWU6IHN0cmluZ30pW10sXG4gICAgYXJyYXlTdHJpZGU6IG51bWJlclxuICB9W107XG4gIHByb3RlY3RlZCBfdkluZm86IHtcbiAgICBbbmFtZTogc3RyaW5nXToge1xuICAgICAgZGF0YTogVFR5cGVkQXJyYXksIGluZGV4OiBudW1iZXIsXG4gICAgICAvLyBvZmZzZXQgYW5kIHN0cmlkZSBpcyBiYXNlZCA0LWJ5dGVzXG4gICAgICBvZmZzZXQ6IG51bWJlciwgbGVuZ3RoOiBudW1iZXIsIHN0cmlkZTogbnVtYmVyXG4gICAgfVxuICB9O1xuICBwcm90ZWN0ZWQgX3ZCdWZmZXJzOiBHUFVCdWZmZXJbXTtcbiAgcHJvdGVjdGVkIF9pQnVmZmVyOiBHUFVCdWZmZXI7XG4gIHByb3RlY3RlZCBfaW5kZXhGb3JtYXQ6IEdQVUluZGV4Rm9ybWF0O1xuICBwcm90ZWN0ZWQgX3ZlcnRleENvdW50OiBudW1iZXI7XG4gIHByb3RlY3RlZCBfbWFyY29zOiB7W2tleTogc3RyaW5nXTogbnVtYmVyIHwgYm9vbGVhbn07XG4gIHByb3RlY3RlZCBfYXR0cmlidXRlc0RlZjogc3RyaW5nO1xuXG4gIGdldCBpbmRleGVzKCkge1xuICAgIHJldHVybiB0aGlzLl9pQnVmZmVyO1xuICB9XG5cbiAgZ2V0IGluZGV4RGF0YSgpIHtcbiAgICByZXR1cm4gdGhpcy5faW5kZXhEYXRhO1xuICB9XG5cbiAgZ2V0IHZlcnRleGVzKCkge1xuICAgIHJldHVybiB0aGlzLl92QnVmZmVycztcbiAgfVxuXG4gIGdldCB2ZXJ0ZXhMYXlvdXRzKCkge1xuICAgIHJldHVybiB0aGlzLl92TGF5b3V0cztcbiAgfVxuXG4gIGdldCB2ZXJ0ZXhDb3VudCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdmVydGV4Q291bnQ7XG4gIH1cblxuICBnZXQgdmVydGV4SW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fdkluZm87XG4gIH1cblxuICBnZXQgYXR0cmlidXRlc0RlZigpIHtcbiAgICByZXR1cm4gdGhpcy5fYXR0cmlidXRlc0RlZjtcbiAgfVxuXG4gIGdldCBpbmRleEZvcm1hdCgpOiBHUFVJbmRleEZvcm1hdCB7XG4gICAgcmV0dXJuIHRoaXMuX2luZGV4Rm9ybWF0O1xuICB9XG5cbiAgZ2V0IG1hcmNvcygpIHtcbiAgICByZXR1cm4gdGhpcy5fbWFyY29zO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIF92ZXJ0ZXhlczoge1xuICAgICAgbGF5b3V0OiB7XG4gICAgICAgIGF0dHJpYnV0ZXM6IChHUFVWZXJ0ZXhBdHRyaWJ1dGUgJiB7bmFtZTogc3RyaW5nfSlbXSxcbiAgICAgICAgYXJyYXlTdHJpZGU6IG51bWJlclxuICAgICAgfSxcbiAgICAgIGRhdGE6IFRUeXBlZEFycmF5LFxuICAgICAgdXNhZ2U/OiBudW1iZXJcbiAgICB9W10sXG4gICAgcHJvdGVjdGVkIF9pbmRleERhdGE6IFVpbnQxNkFycmF5IHwgVWludDMyQXJyYXksXG4gICAgcHVibGljIGNvdW50OiBudW1iZXIsXG4gICAgcHJvdGVjdGVkIF9ib3VuZGluZ0JveD86IElCb3VuZGluZ0JveFxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5faUJ1ZmZlciA9IGNyZWF0ZUdQVUJ1ZmZlcihfaW5kZXhEYXRhLCBHUFVCdWZmZXJVc2FnZS5JTkRFWCk7XG4gICAgdGhpcy5fdkJ1ZmZlcnMgPSBuZXcgQXJyYXkoX3ZlcnRleGVzLmxlbmd0aCk7XG4gICAgdGhpcy5fdkxheW91dHMgPSBuZXcgQXJyYXkoX3ZlcnRleGVzLmxlbmd0aCk7XG4gICAgdGhpcy5faW5kZXhGb3JtYXQgPSBfaW5kZXhEYXRhIGluc3RhbmNlb2YgVWludDE2QXJyYXkgPyAndWludDE2JyA6ICd1aW50MzInO1xuICAgIHRoaXMuX3ZJbmZvID0ge307XG4gICAgdGhpcy5fbWFyY29zID0ge307XG4gICAgdGhpcy5fYXR0cmlidXRlc0RlZiA9ICdzdHJ1Y3QgQXR0cnMge1xcbic7XG5cbiAgICBfdmVydGV4ZXMuZm9yRWFjaCgoe2xheW91dCwgZGF0YSwgdXNhZ2V9LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgdkJ1ZmZlciA9IGNyZWF0ZUdQVUJ1ZmZlcihkYXRhLCBHUFVCdWZmZXJVc2FnZS5WRVJURVggfCAodXNhZ2UgfCAwKSk7XG5cbiAgICAgIGxheW91dC5hdHRyaWJ1dGVzLmZvckVhY2goKGF0dHIpID0+IHtcbiAgICAgICAgdGhpcy5fbWFyY29zW2BVU0VfJHthdHRyLm5hbWUudG9VcHBlckNhc2UoKX1gXSA9IHRydWU7XG4gICAgICAgIHRoaXMuX2F0dHJpYnV0ZXNEZWYgKz0gYCAgW1tsb2NhdGlvbigke2F0dHIuc2hhZGVyTG9jYXRpb259KV1dICR7YXR0ci5uYW1lfTogJHt0aGlzLl9jb252ZXJ0Rm9ybWF0KGF0dHIuZm9ybWF0KX07XFxuYDtcbiAgICAgICAgdGhpcy5fdkluZm9bYXR0ci5uYW1lLnRvTG93ZXJDYXNlKCldID0ge1xuICAgICAgICAgIGRhdGEsIGluZGV4LFxuICAgICAgICAgIG9mZnNldDogYXR0ci5vZmZzZXQgLyA0LCBzdHJpZGU6IGxheW91dC5hcnJheVN0cmlkZSAvIDQsIGxlbmd0aDogdGhpcy5fZ2V0TGVuZ3RoKGF0dHIuZm9ybWF0KVxuICAgICAgICB9O1xuICAgICAgfSk7XG5cbiAgICAgIHRoaXMuX3ZCdWZmZXJzW2luZGV4XSA9IHZCdWZmZXI7XG4gICAgICB0aGlzLl92TGF5b3V0c1tpbmRleF0gPSBsYXlvdXQ7XG5cbiAgICAgIHRoaXMuX3ZlcnRleENvdW50ID0gZGF0YS5ieXRlTGVuZ3RoIC8gbGF5b3V0LmFycmF5U3RyaWRlO1xuICAgIH0pO1xuXG4gICAgdGhpcy5fYXR0cmlidXRlc0RlZiArPSAnfTtcXG5cXG4nO1xuICB9XG5cbiAgcHVibGljIGNhbGN1bGF0ZU5vcm1hbHMoKSB7XG4gICAgY29uc3Qge192SW5mbywgX3ZlcnRleENvdW50LCBfaW5kZXhEYXRhLCBjb3VudH0gPSB0aGlzO1xuXG4gICAgaWYgKF92SW5mby5ub3JtYWwpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBwb3NpdGlvbiA9IF92SW5mby5wb3NpdGlvbjtcbiAgICBjb25zdCBkYXRhID0gbmV3IEZsb2F0MzJBcnJheShfdmVydGV4Q291bnQgKiAzKTtcblxuICAgIGxldCBib3VuZGluZ01pbjogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICAgIGxldCBib3VuZGluZ01heDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdO1xuICAgIGNvbnN0IGNhbGNCb3VuZGluZyA9ICF0aGlzLl9ib3VuZGluZ0JveDtcbiAgICBpZiAoY2FsY0JvdW5kaW5nKSB7XG4gICAgICBib3VuZGluZ01heCA9IFstSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5XTtcbiAgICAgIGJvdW5kaW5nTWluID0gW0luZmluaXR5LCBJbmZpbml0eSwgSW5maW5pdHldO1xuICAgIH1cblxuICAgIGNvbnN0IHZNdWx0aUZhY2VDb3VudCA9IG5ldyBVaW50OEFycmF5KF92ZXJ0ZXhDb3VudCk7XG4gICAgbGV0IHYzMTogRmxvYXQzMkFycmF5O1xuICAgIGxldCB2MzI6IEZsb2F0MzJBcnJheTtcbiAgICBsZXQgdjMzOiBGbG9hdDMyQXJyYXk7XG4gICAgbGV0IG9mZnNldDogbnVtYmVyO1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgY291bnQ7IGkgKz0gMSkge1xuICAgICAgb2Zmc2V0ID0gcG9zaXRpb24ub2Zmc2V0ICsgX2luZGV4RGF0YVtpXSAqIHBvc2l0aW9uLnN0cmlkZTtcbiAgICAgIHYzMSA9IHBvc2l0aW9uLmRhdGEuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBwb3NpdGlvbi5sZW5ndGgpIGFzIEZsb2F0MzJBcnJheTtcbiAgICAgIG9mZnNldCA9IHBvc2l0aW9uLm9mZnNldCArIF9pbmRleERhdGFbaSArIDFdICogcG9zaXRpb24uc3RyaWRlO1xuICAgICAgdjMyID0gcG9zaXRpb24uZGF0YS5zbGljZShvZmZzZXQsIG9mZnNldCArIHBvc2l0aW9uLmxlbmd0aCkgYXMgRmxvYXQzMkFycmF5O1xuICAgICAgb2Zmc2V0ID0gcG9zaXRpb24ub2Zmc2V0ICsgX2luZGV4RGF0YVtpICsgMl0gKiBwb3NpdGlvbi5zdHJpZGU7XG4gICAgICB2MzMgPSBwb3NpdGlvbi5kYXRhLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgcG9zaXRpb24ubGVuZ3RoKSBhcyBGbG9hdDMyQXJyYXk7XG5cbiAgICAgIGlmIChjYWxjQm91bmRpbmcpIHtcbiAgICAgICAgdGhpcy5fY2FsY0JvbmRpbmcoYm91bmRpbmdNYXgsIGJvdW5kaW5nTWluLCB2MzEpO1xuICAgICAgICB0aGlzLl9jYWxjQm9uZGluZyhib3VuZGluZ01heCwgYm91bmRpbmdNaW4sIHYzMik7XG4gICAgICAgIHRoaXMuX2NhbGNCb25kaW5nKGJvdW5kaW5nTWF4LCBib3VuZGluZ01pbiwgdjMzKTtcbiAgICAgIH1cblxuICAgICAgdmVjMy5zdWIodjMyLCB2MzIsIHYzMSk7XG4gICAgICB2ZWMzLnN1Yih2MzMsIHYzMywgdjMxKTtcbiAgICAgIHZlYzMuY3Jvc3ModjMyLCB2MzIsIHYzMyk7XG5cbiAgICAgIGZvciAobGV0IHZpID0gMDsgdmkgPCAzOyB2aSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGluZGV4ID0gX2luZGV4RGF0YVtpICsgdmldO1xuXG4gICAgICAgIGlmICh2TXVsdGlGYWNlQ291bnRbaW5kZXhdKSB7XG4gICAgICAgICAgY29uc3Qgb2xkRGF0YSA9IG5ldyBGbG9hdDMyQXJyYXkoZGF0YS5idWZmZXIsIGluZGV4ICogMyAqIDQsIDMpO1xuICAgICAgICAgIHZlYzMuc2NhbGUob2xkRGF0YSwgb2xkRGF0YSwgdk11bHRpRmFjZUNvdW50W2luZGV4XSk7XG4gICAgICAgICAgdmVjMy5hZGQob2xkRGF0YSwgb2xkRGF0YSwgdjMyKTtcbiAgICAgICAgICB2ZWMzLnNjYWxlKG9sZERhdGEsIG9sZERhdGEsIDEgLyAodk11bHRpRmFjZUNvdW50W2ldICsgMSkpO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgIGRhdGEuc2V0KHYzMiwgaW5kZXggKiAzKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHZNdWx0aUZhY2VDb3VudFtpbmRleF0gKz0gMTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICAvLyB0b2RvOiBpbmRleFxuICAgIF92SW5mby5ub3JtYWwgPSB7b2Zmc2V0OiAwLCBsZW5ndGg6IDMsIHN0cmlkZTogMywgZGF0YSwgaW5kZXg6IDB9O1xuICAgIGlmIChjYWxjQm91bmRpbmcpIHtcbiAgICAgIHRoaXMuX2JvdW5kaW5nQm94ID0ge1xuICAgICAgICBzdGFydDogYm91bmRpbmdNaW4sXG4gICAgICAgIGNlbnRlcjogYm91bmRpbmdNYXgubWFwKCh2LCBpKSA9PiAodiArIGJvdW5kaW5nTWluW2ldKSAvIDIpIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgICAgICAgc2l6ZTogYm91bmRpbmdNYXgubWFwKCh2LCBpKSA9PiB2IC0gYm91bmRpbmdNaW5baV0pIGFzIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXVxuICAgICAgfTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgZ2V0VmFsdWVzKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB7XG4gICAgICBjcHU6IHRoaXMuX3ZJbmZvW25hbWVdLmRhdGEsXG4gICAgICBncHU6IHRoaXMuX3ZCdWZmZXJzW3RoaXMuX3ZJbmZvW25hbWVdLmluZGV4XVxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgX2NhbGNCb25kaW5nKG1heDogbnVtYmVyW10sIG1pbjogbnVtYmVyW10sIHA6IEFycmF5TGlrZTxudW1iZXI+KSB7XG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IDM7IGluZGV4ICs9IDEpIHtcbiAgICAgIG1heFtpbmRleF0gPSBNYXRoLm1heChtYXhbaW5kZXhdLCBwW2luZGV4XSk7XG4gICAgICBtaW5baW5kZXhdID0gTWF0aC5taW4obWluW2luZGV4XSwgcFtpbmRleF0pO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfY29udmVydEZvcm1hdChmOiBHUFVWZXJ0ZXhGb3JtYXQpIHtcbiAgICBzd2l0Y2ggKGYpIHtcbiAgICAgIGNhc2UgJ2Zsb2F0MzInOlxuICAgICAgICByZXR1cm4gJ2YzMic7XG4gICAgICBjYXNlICdmbG9hdDMyeDInOlxuICAgICAgICByZXR1cm4gJ3ZlYzI8ZjMyPic7XG4gICAgICBjYXNlICdmbG9hdDMyeDMnOlxuICAgICAgICByZXR1cm4gJ3ZlYzM8ZjMyPic7XG4gICAgICBjYXNlICdmbG9hdDMyeDQnOlxuICAgICAgICByZXR1cm4gJ3ZlYzQ8ZjMyPic7XG4gICAgICBjYXNlICd1aW50MzInOlxuICAgICAgICByZXR1cm4gJ3UzMic7XG4gICAgICBjYXNlICd1aW50MzJ4Mic6XG4gICAgICAgIHJldHVybiAndmVjMjx1MzI+JztcbiAgICAgIGNhc2UgJ3VpbnQzMngzJzpcbiAgICAgICAgcmV0dXJuICd2ZWMzPHUzMj4nO1xuICAgICAgY2FzZSAndWludDMyeDQnOlxuICAgICAgICByZXR1cm4gJ3ZlYzQ8dTMyPic7XG4gICAgfVxuXG4gICAgdGhyb3cgbmV3IEVycm9yKGBOb3Qgc3VwcG9ydCBmb3JtYXQgJHtmfSFgKVxuICB9XG5cbiAgcHJvdGVjdGVkIF9nZXRMZW5ndGgoZjogR1BVVmVydGV4Rm9ybWF0KSB7XG4gICAgc3dpdGNoIChmKSB7XG4gICAgICBjYXNlICdmbG9hdDMyJzpcbiAgICAgIGNhc2UgJ3VpbnQzMic6XG4gICAgICAgIHJldHVybiAxO1xuICAgICAgY2FzZSAnZmxvYXQzMngyJzpcbiAgICAgIGNhc2UgJ3VpbnQzMngyJzpcbiAgICAgICAgcmV0dXJuIDI7XG4gICAgICBjYXNlICdmbG9hdDMyeDMnOlxuICAgICAgY2FzZSAndWludDMyeDMnOlxuICAgICAgICByZXR1cm4gMztcbiAgICAgIGNhc2UgJ2Zsb2F0MzJ4NCc6XG4gICAgICBjYXNlICd1aW50MzJ4NCc6XG4gICAgICAgIHJldHVybiA0O1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihgTm90IHN1cHBvcnQgZm9ybWF0ICR7Zn0hYClcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVWZXJ0ZXhlcygpIHtcbiAgICBjb25zb2xlLndhcm4oJ05vdCBpbXBsZW1lbnRlZCEnKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVJbmRleGVzKCkge1xuICAgIGNvbnNvbGUud2FybignTm90IGltcGxlbWVudGVkIScpO1xuICB9XG59XG4iXX0=","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject = (function () {\n    function HObject() {\n        this.isHObject = true;\n        var className = this.constructor.CLASS_NAME;\n        if (typeof className !== 'string') {\n            throw new Error('Class must has a static member \"CLASS_NAME\" !');\n        }\n        HObject.IDS[className] = HObject.IDS[className] || 0;\n        this._id = ++HObject.IDS[className];\n        this._hash = className + \"_\" + this._id;\n    }\n    Object.defineProperty(HObject.prototype, \"id\", {\n        get: function () {\n            return this._id;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(HObject.prototype, \"hash\", {\n        get: function () {\n            return this._hash;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    HObject.IDS = {};\n    HObject.CLASS_NAME = 'HObject';\n    return HObject;\n}());\nexports.default = HObject;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSE9iamVjdC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkhPYmplY3QudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFPQTtJQWtCRTtRQWRPLGNBQVMsR0FBWSxJQUFJLENBQUM7UUFlL0IsSUFBTSxTQUFTLEdBQUksSUFBSSxDQUFDLFdBQThCLENBQUMsVUFBVSxDQUFDO1FBRWxFLElBQUksT0FBTyxTQUFTLEtBQUssUUFBUSxFQUFFO1lBQ2pDLE1BQU0sSUFBSSxLQUFLLENBQUMsK0NBQStDLENBQUMsQ0FBQztTQUNsRTtRQUVELE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLEdBQUcsT0FBTyxDQUFDLEdBQUcsQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFckQsSUFBSSxDQUFDLEdBQUcsR0FBRyxFQUFFLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxDQUFDLENBQUM7UUFDcEMsSUFBSSxDQUFDLEtBQUssR0FBTSxTQUFTLFNBQUksSUFBSSxDQUFDLEdBQUssQ0FBQztJQUMxQyxDQUFDO0lBbkJELHNCQUFJLHVCQUFFO2FBQU47WUFDRSxPQUFPLElBQUksQ0FBQyxHQUFHLENBQUM7UUFDbEIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx5QkFBSTthQUFSO1lBQ0UsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7OztPQUFBO0lBZmEsV0FBRyxHQUFrQyxFQUFFLENBQUM7SUFDeEMsa0JBQVUsR0FBVyxTQUFTLENBQUM7SUE0Qi9DLGNBQUM7Q0FBQSxBQTlCRCxJQThCQztrQkE5Qm9CLE9BQU8iLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogQEZpbGUgICA6IEhPYmplY3QudHNcbiAqIEBBdXRob3IgOiBkdHlza3kgKGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBMaW5rICAgOiBkdHlza3kubW9lXG4gKiBARGF0ZSAgIDogMjAyMS82LzbkuIvljYgxMToxNDoyMlxuICovXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBIT2JqZWN0IHtcbiAgcHVibGljIHN0YXRpYyBJRFM6IHtbY2xhc3NOYW1lOiBzdHJpbmddOiBudW1iZXJ9ID0ge307XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ0hPYmplY3QnO1xuICBcbiAgcHVibGljIGlzSE9iamVjdDogYm9vbGVhbiA9IHRydWU7XG4gIHB1YmxpYyBuYW1lOiBzdHJpbmc7XG5cbiAgcHJvdGVjdGVkIF9pZDogbnVtYmVyO1xuICBwcm90ZWN0ZWQgX2hhc2g6IHN0cmluZztcblxuICBnZXQgaWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2lkO1xuICB9XG4gIFxuICBnZXQgaGFzaCgpIHtcbiAgICByZXR1cm4gdGhpcy5faGFzaDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIGNvbnN0IGNsYXNzTmFtZSA9ICh0aGlzLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBIT2JqZWN0KS5DTEFTU19OQU1FO1xuXG4gICAgaWYgKHR5cGVvZiBjbGFzc05hbWUgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0NsYXNzIG11c3QgaGFzIGEgc3RhdGljIG1lbWJlciBcIkNMQVNTX05BTUVcIiAhJyk7XG4gICAgfVxuXG4gICAgSE9iamVjdC5JRFNbY2xhc3NOYW1lXSA9IEhPYmplY3QuSURTW2NsYXNzTmFtZV0gfHwgMDtcblxuICAgIHRoaXMuX2lkID0gKytIT2JqZWN0LklEU1tjbGFzc05hbWVdO1xuICAgIHRoaXMuX2hhc2ggPSBgJHtjbGFzc05hbWV9XyR7dGhpcy5faWR9YDtcbiAgfVxufVxuIl19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"./HObject\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar ImageMesh = (function (_super) {\n    __extends(ImageMesh, _super);\n    function ImageMesh(_material) {\n        var _this = _super.call(this) || this;\n        _this._material = _material;\n        _this.isImageMesh = true;\n        return _this;\n    }\n    Object.defineProperty(ImageMesh.prototype, \"material\", {\n        get: function () {\n            return this._material;\n        },\n        set: function (value) {\n            this._material = value;\n            this._pipeline = null;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ImageMesh.prototype.render = function (pass) {\n        var _material = this._material;\n        !this._pipeline && this._createPipeline();\n        pass.setBindGroup(1, _material.bindingGroup);\n        pass.setPipeline(this._pipeline);\n        pass.draw(6, 1, 0, 0);\n    };\n    ImageMesh.prototype._createPipeline = function () {\n        var device = renderEnv_1.default.device, swapChainFormat = renderEnv_1.default.swapChainFormat;\n        var _material = this._material;\n        var _a = _material.effect.getShader(_material.marcos, '', renderEnv_1.default.shaderPrefix, ''), vs = _a.vs, fs = _a.fs;\n        this._pipeline = device.createRenderPipeline({\n            layout: device.createPipelineLayout({ bindGroupLayouts: [\n                    renderEnv_1.default.uniformLayout,\n                    _material.effect.uniformLayout\n                ] }),\n            vertex: {\n                module: vs,\n                entryPoint: \"main\"\n            },\n            fragment: {\n                module: fs,\n                targets: [\n                    { format: swapChainFormat }\n                ],\n                entryPoint: \"main\"\n            },\n            primitive: {\n                topology: 'triangle-list'\n            }\n        });\n    };\n    ImageMesh.CLASS_NAME = 'ImageMesh';\n    return ImageMesh;\n}(HObject_1.default));\nexports.default = ImageMesh;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiSW1hZ2VNZXNoLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiSW1hZ2VNZXNoLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7OztBQU9BLHFDQUFnQztBQUdoQyx5Q0FBb0M7QUFFcEM7SUFBdUMsNkJBQU87SUFlNUMsbUJBQXNCLFNBQW1CO1FBQXpDLFlBQ0UsaUJBQU8sU0FDUjtRQUZxQixlQUFTLEdBQVQsU0FBUyxDQUFVO1FBYmxDLGlCQUFXLEdBQVksSUFBSSxDQUFDOztJQWVuQyxDQUFDO0lBWEQsc0JBQUksK0JBQVE7YUFBWjtZQUNFLE9BQU8sSUFBSSxDQUFDLFNBQVMsQ0FBQztRQUN4QixDQUFDO2FBRUQsVUFBYSxLQUFlO1lBQzFCLElBQUksQ0FBQyxTQUFTLEdBQUcsS0FBSyxDQUFDO1lBQ3ZCLElBQUksQ0FBQyxTQUFTLEdBQUcsSUFBSSxDQUFDO1FBQ3hCLENBQUM7OztPQUxBO0lBV00sMEJBQU0sR0FBYixVQUFjLElBQTBCO1FBQy9CLElBQUEsU0FBUyxHQUFJLElBQUksVUFBUixDQUFTO1FBRXpCLENBQUMsSUFBSSxDQUFDLFNBQVMsSUFBSSxJQUFJLENBQUMsZUFBZSxFQUFFLENBQUM7UUFFMUMsSUFBSSxDQUFDLFlBQVksQ0FBQyxDQUFDLEVBQUUsU0FBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxJQUFJLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7SUFDeEIsQ0FBQztJQUVTLG1DQUFlLEdBQXpCO1FBQ1MsSUFBQSxNQUFNLEdBQXFCLG1CQUFTLE9BQTlCLEVBQUUsZUFBZSxHQUFJLG1CQUFTLGdCQUFiLENBQWM7UUFDckMsSUFBQSxTQUFTLEdBQUksSUFBSSxVQUFSLENBQVM7UUFDbkIsSUFBQSxLQUFXLFNBQVMsQ0FBQyxNQUFNLENBQUMsU0FBUyxDQUFDLFNBQVMsQ0FBQyxNQUFNLEVBQUUsRUFBRSxFQUFFLG1CQUFTLENBQUMsWUFBWSxFQUFFLEVBQUUsQ0FBQyxFQUF0RixFQUFFLFFBQUEsRUFBRSxFQUFFLFFBQWdGLENBQUM7UUFFOUYsSUFBSSxDQUFDLFNBQVMsR0FBRyxNQUFNLENBQUMsb0JBQW9CLENBQUM7WUFDM0MsTUFBTSxFQUFFLE1BQU0sQ0FBQyxvQkFBb0IsQ0FBQyxFQUFDLGdCQUFnQixFQUFFO29CQUNyRCxtQkFBUyxDQUFDLGFBQWE7b0JBQ3ZCLFNBQVMsQ0FBQyxNQUFNLENBQUMsYUFBYTtpQkFDL0IsRUFBQyxDQUFDO1lBRUgsTUFBTSxFQUFFO2dCQUNOLE1BQU0sRUFBRSxFQUFFO2dCQUNWLFVBQVUsRUFBRSxNQUFNO2FBQ25CO1lBRUQsUUFBUSxFQUFFO2dCQUNSLE1BQU0sRUFBRSxFQUFFO2dCQUNWLE9BQU8sRUFBRTtvQkFDUCxFQUFDLE1BQU0sRUFBRSxlQUFlLEVBQUM7aUJBQzFCO2dCQUNELFVBQVUsRUFBRSxNQUFNO2FBQ25CO1lBRUQsU0FBUyxFQUFFO2dCQUNULFFBQVEsRUFBRSxlQUFlO2FBQzFCO1NBQ0YsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQXhEYSxvQkFBVSxHQUFXLFdBQVcsQ0FBQztJQXlEakQsZ0JBQUM7Q0FBQSxBQTFERCxDQUF1QyxpQkFBTyxHQTBEN0M7a0JBMURvQixTQUFTIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBARmlsZSAgIDogSW1hZ2VNZXNoLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi825LiL5Y2IODo1Njo0OVxuICovXG5pbXBvcnQgQ2FtZXJhIGZyb20gJy4vQ2FtZXJhJztcbmltcG9ydCBIT2JqZWN0IGZyb20gJy4vSE9iamVjdCc7XG5pbXBvcnQgTGlnaHQgZnJvbSAnLi9MaWdodCc7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi9NYXRlcmlhbCc7XG5pbXBvcnQgcmVuZGVyRW52IGZyb20gJy4vcmVuZGVyRW52JztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSW1hZ2VNZXNoIGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ0ltYWdlTWVzaCc7XG4gIHB1YmxpYyBpc0ltYWdlTWVzaDogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJvdGVjdGVkIF9waXBlbGluZTogR1BVUmVuZGVyUGlwZWxpbmU7XG5cbiAgZ2V0IG1hdGVyaWFsKCkge1xuICAgIHJldHVybiB0aGlzLl9tYXRlcmlhbDtcbiAgfVxuXG4gIHNldCBtYXRlcmlhbCh2YWx1ZTogTWF0ZXJpYWwpIHtcbiAgICB0aGlzLl9tYXRlcmlhbCA9IHZhbHVlO1xuICAgIHRoaXMuX3BpcGVsaW5lID0gbnVsbDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfbWF0ZXJpYWw6IE1hdGVyaWFsKSB7XG4gICAgc3VwZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIocGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIpIHtcbiAgICBjb25zdCB7X21hdGVyaWFsfSA9IHRoaXM7XG5cbiAgICAhdGhpcy5fcGlwZWxpbmUgJiYgdGhpcy5fY3JlYXRlUGlwZWxpbmUoKTtcblxuICAgIHBhc3Muc2V0QmluZEdyb3VwKDEsIF9tYXRlcmlhbC5iaW5kaW5nR3JvdXApO1xuICAgIHBhc3Muc2V0UGlwZWxpbmUodGhpcy5fcGlwZWxpbmUpO1xuICAgIHBhc3MuZHJhdyg2LCAxLCAwLCAwKTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfY3JlYXRlUGlwZWxpbmUoKSB7XG4gICAgY29uc3Qge2RldmljZSwgc3dhcENoYWluRm9ybWF0fSA9IHJlbmRlckVudjtcbiAgICBjb25zdCB7X21hdGVyaWFsfSA9IHRoaXM7XG4gICAgY29uc3Qge3ZzLCBmc30gPSBfbWF0ZXJpYWwuZWZmZWN0LmdldFNoYWRlcihfbWF0ZXJpYWwubWFyY29zLCAnJywgcmVuZGVyRW52LnNoYWRlclByZWZpeCwgJycpO1xuXG4gICAgdGhpcy5fcGlwZWxpbmUgPSBkZXZpY2UuY3JlYXRlUmVuZGVyUGlwZWxpbmUoe1xuICAgICAgbGF5b3V0OiBkZXZpY2UuY3JlYXRlUGlwZWxpbmVMYXlvdXQoe2JpbmRHcm91cExheW91dHM6IFtcbiAgICAgICAgcmVuZGVyRW52LnVuaWZvcm1MYXlvdXQsXG4gICAgICAgIF9tYXRlcmlhbC5lZmZlY3QudW5pZm9ybUxheW91dFxuICAgICAgXX0pLFxuICBcbiAgICAgIHZlcnRleDoge1xuICAgICAgICBtb2R1bGU6IHZzLFxuICAgICAgICBlbnRyeVBvaW50OiBcIm1haW5cIlxuICAgICAgfSxcbiAgXG4gICAgICBmcmFnbWVudDoge1xuICAgICAgICBtb2R1bGU6IGZzLFxuICAgICAgICB0YXJnZXRzOiBbXG4gICAgICAgICAge2Zvcm1hdDogc3dhcENoYWluRm9ybWF0fVxuICAgICAgICBdLFxuICAgICAgICBlbnRyeVBvaW50OiBcIm1haW5cIlxuICAgICAgfSxcbiAgXG4gICAgICBwcmltaXRpdmU6IHtcbiAgICAgICAgdG9wb2xvZ3k6ICd0cmlhbmdsZS1saXN0J1xuICAgICAgfVxuICAgIH0pO1xuICB9XG59XG4iXX0=","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EAreaLightMode = exports.ELightType = void 0;\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar geometries_1 = require(\"../buildin/geometries\");\nvar Mesh_1 = require(\"./Mesh\");\nvar Node_1 = require(\"./Node\");\nvar ELightType;\n(function (ELightType) {\n    ELightType[ELightType[\"INVALID\"] = 0] = \"INVALID\";\n    ELightType[ELightType[\"Area\"] = 1] = \"Area\";\n    ELightType[ELightType[\"Directional\"] = 2] = \"Directional\";\n    ELightType[ELightType[\"Point\"] = 3] = \"Point\";\n    ELightType[ELightType[\"Spot\"] = 4] = \"Spot\";\n})(ELightType = exports.ELightType || (exports.ELightType = {}));\nvar EAreaLightMode;\n(function (EAreaLightMode) {\n    EAreaLightMode[EAreaLightMode[\"Rect\"] = 0] = \"Rect\";\n    EAreaLightMode[EAreaLightMode[\"Disc\"] = 1] = \"Disc\";\n})(EAreaLightMode = exports.EAreaLightMode || (exports.EAreaLightMode = {}));\nvar Light = (function (_super) {\n    __extends(Light, _super);\n    function Light(_type, color, otherOptions) {\n        var _this = _super.call(this) || this;\n        _this._type = _type;\n        _this.isLight = true;\n        _this._worldPos = new Float32Array(3);\n        _this._worldDir = new Float32Array(3);\n        _this._color = new Float32Array(color);\n        _this._ubInfo = new Float32Array(40);\n        var u32View = new Uint32Array(_this._ubInfo.buffer);\n        u32View[0] = _type;\n        if (_type === ELightType.Area) {\n            _this._areaMode = otherOptions.mode;\n            _this._areaSize = new Float32Array(otherOptions.size);\n            u32View[1] = _this._areaMode;\n            _this._ubInfo.set(_this._areaSize, 2);\n        }\n        return _this;\n    }\n    Light.IS = function (value) {\n        return !!value.isLight;\n    };\n    Object.defineProperty(Light.prototype, \"ubInfo\", {\n        get: function () {\n            return this._ubInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Light.prototype.setColor = function (r, g, b) {\n        this._color.set(new Float32Array([r, g, b]));\n    };\n    Light.prototype.requireLightMesh = function (material) {\n        if (this._type !== ELightType.Area) {\n            throw new Error('Light mesh only support area!');\n        }\n        if (!this._mesh) {\n            this._mesh = new Mesh_1.default(this._areaMode === EAreaLightMode.Rect ? geometries_1.default.rectLight : geometries_1.default.discLight, material);\n        }\n        return this._mesh;\n    };\n    Light.prototype.updateMatrix = function () {\n        _super.prototype.updateMatrix.call(this);\n        gl_matrix_1.mat4.getTranslation(this._worldPos, this._worldMat);\n        gl_matrix_1.vec3.transformMat4(this._worldDir, [0, 0, 1], this._worldMat);\n        if (this._mesh) {\n            this._mesh.scale.set(this._areaMode === EAreaLightMode.Disc\n                ? [this._areaSize[0], this._areaSize[0], 0]\n                : [this._areaSize[0], this._areaSize[1], 0]);\n            this._mesh.updateWorldMatrix(this);\n            this._mesh.material.setUniform('u_lightColor', this._color);\n        }\n        this._ubInfo.set(this._color, 4);\n        this._ubInfo.set(this._worldMat, 8);\n        this._ubInfo.set(gl_matrix_1.mat4.invert(new Float32Array(16), this._worldMat), 24);\n    };\n    Light.CLASS_NAME = 'Light';\n    return Light;\n}(Node_1.default));\nexports.default = Light;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTGlnaHQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJMaWdodC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBTUEsdUNBQXVDO0FBQ3ZDLG9EQUErQztBQUUvQywrQkFBMEI7QUFDMUIsK0JBQTBCO0FBRTFCLElBQVksVUFNWDtBQU5ELFdBQVksVUFBVTtJQUNwQixpREFBVyxDQUFBO0lBQ1gsMkNBQUksQ0FBQTtJQUNKLHlEQUFXLENBQUE7SUFDWCw2Q0FBSyxDQUFBO0lBQ0wsMkNBQUksQ0FBQTtBQUNOLENBQUMsRUFOVyxVQUFVLEdBQVYsa0JBQVUsS0FBVixrQkFBVSxRQU1yQjtBQUVELElBQVksY0FHWDtBQUhELFdBQVksY0FBYztJQUN4QixtREFBSSxDQUFBO0lBQ0osbURBQUksQ0FBQTtBQUNOLENBQUMsRUFIVyxjQUFjLEdBQWQsc0JBQWMsS0FBZCxzQkFBYyxRQUd6QjtBQVNEO0lBQW1DLHlCQUFJO0lBcUJyQyxlQUNZLEtBQWlCLEVBQzNCLEtBQStCLEVBQy9CLFlBQTBEO1FBSDVELFlBS0UsaUJBQU8sU0FjUjtRQWxCVyxXQUFLLEdBQUwsS0FBSyxDQUFZO1FBZnRCLGFBQU8sR0FBWSxJQUFJLENBQUM7UUFLckIsZUFBUyxHQUFpQixJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztRQUM5QyxlQUFTLEdBQWlCLElBQUksWUFBWSxDQUFDLENBQUMsQ0FBQyxDQUFDO1FBZXRELEtBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxZQUFZLENBQUMsS0FBSyxDQUFDLENBQUM7UUFDdEMsS0FBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztRQUNwQyxJQUFNLE9BQU8sR0FBRyxJQUFJLFdBQVcsQ0FBQyxLQUFJLENBQUMsT0FBTyxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBQ3JELE9BQU8sQ0FBQyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUM7UUFFbkIsSUFBSSxLQUFLLEtB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Q0FBQyxPQUFPLENBQUMsR0FBRyxDQUFDLGdCQUFJLENBQUMsTUFBTSxDQUFDLElBQUksWUFBWSxDQUFDLEVBQUUsQ0FBQyxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsRUFBRSxFQUFFLENBQUMsQ0FBQztJQUMxRSxDQUFDO0lBOUVhLGdCQUFVLEdBQVcsT0FBTyxDQUFDO0lBK0U3QyxZQUFDO0NBQUEsQUFoRkQsQ0FBbUMsY0FBSSxHQWdGdEM7a0JBaEZvQixLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMaWdodC50c1xuICogXG4gKiBAQXV0aG9yICA6ZHR5c2t5KGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBEYXRlICAgIDogNi8xMS8yMDIxLCA5OjU3OjUyIFBNXG4qL1xuaW1wb3J0IHsgbWF0NCwgdmVjMyB9IGZyb20gJ2dsLW1hdHJpeCc7XG5pbXBvcnQgZ2VvbWV0cmllcyBmcm9tICcuLi9idWlsZGluL2dlb21ldHJpZXMnO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4vTWF0ZXJpYWwnO1xuaW1wb3J0IE1lc2ggZnJvbSAnLi9NZXNoJztcbmltcG9ydCBOb2RlIGZyb20gJy4vTm9kZSc7XG5cbmV4cG9ydCBlbnVtIEVMaWdodFR5cGUge1xuICBJTlZBTElEID0gMCxcbiAgQXJlYSxcbiAgRGlyZWN0aW9uYWwsXG4gIFBvaW50LFxuICBTcG90XG59XG5cbmV4cG9ydCBlbnVtIEVBcmVhTGlnaHRNb2RlIHtcbiAgUmVjdCxcbiAgRGlzY1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElEaXJlY3Rpb25hbExpZ2h0T3B0aW9ucyB7fVxuXG5leHBvcnQgaW50ZXJmYWNlIElBcmVhTGlnaHRPcHRpb25zIHtcbiAgbW9kZTogRUFyZWFMaWdodE1vZGU7XG4gIHNpemU6IFtudW1iZXIsIG51bWJlcl07XG59XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIExpZ2h0IGV4dGVuZHMgTm9kZSB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ0xpZ2h0JztcblxuICBwdWJsaWMgc3RhdGljIElTKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBMaWdodHtcbiAgICByZXR1cm4gISEodmFsdWUgYXMgTGlnaHQpLmlzTGlnaHQ7XG4gIH1cblxuICBwdWJsaWMgaXNMaWdodDogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJvdGVjdGVkIF9hcmVhTW9kZTogRUFyZWFMaWdodE1vZGU7XG4gIHByb3RlY3RlZCBfYXJlYVNpemU6IEZsb2F0MzJBcnJheTtcbiAgcHJvdGVjdGVkIF9jb2xvcjogRmxvYXQzMkFycmF5O1xuICBwcm90ZWN0ZWQgX3dvcmxkUG9zOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICBwcm90ZWN0ZWQgX3dvcmxkRGlyOiBGbG9hdDMyQXJyYXkgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuICBwcm90ZWN0ZWQgX3ViSW5mbzogRmxvYXQzMkFycmF5O1xuICBwcm90ZWN0ZWQgX21lc2g6IE1lc2g7XG5cbiAgZ2V0IHViSW5mbygpIHtcbiAgICByZXR1cm4gdGhpcy5fdWJJbmZvO1xuICB9XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJvdGVjdGVkIF90eXBlOiBFTGlnaHRUeXBlLFxuICAgIGNvbG9yOiBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl0sXG4gICAgb3RoZXJPcHRpb25zOiBJQXJlYUxpZ2h0T3B0aW9ucyB8IElEaXJlY3Rpb25hbExpZ2h0T3B0aW9uc1xuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fY29sb3IgPSBuZXcgRmxvYXQzMkFycmF5KGNvbG9yKTtcbiAgICB0aGlzLl91YkluZm8gPSBuZXcgRmxvYXQzMkFycmF5KDQwKTtcbiAgICBjb25zdCB1MzJWaWV3ID0gbmV3IFVpbnQzMkFycmF5KHRoaXMuX3ViSW5mby5idWZmZXIpO1xuICAgIHUzMlZpZXdbMF0gPSBfdHlwZTtcbiAgICBcbiAgICBpZiAoX3R5cGUgPT09IEVMaWdodFR5cGUuQXJlYSkge1xuICAgICAgdGhpcy5fYXJlYU1vZGUgPSAob3RoZXJPcHRpb25zIGFzIElBcmVhTGlnaHRPcHRpb25zKS5tb2RlO1xuICAgICAgdGhpcy5fYXJlYVNpemUgPSBuZXcgRmxvYXQzMkFycmF5KChvdGhlck9wdGlvbnMgYXMgSUFyZWFMaWdodE9wdGlvbnMpLnNpemUpO1xuXG4gICAgICB1MzJWaWV3WzFdID0gdGhpcy5fYXJlYU1vZGU7XG4gICAgICB0aGlzLl91YkluZm8uc2V0KHRoaXMuX2FyZWFTaXplLCAyKTtcbiAgICB9XG4gIH1cblxuICBwdWJsaWMgc2V0Q29sb3IocjogbnVtYmVyLCBnOiBudW1iZXIsIGI6IG51bWJlcikge1xuICAgIHRoaXMuX2NvbG9yLnNldChuZXcgRmxvYXQzMkFycmF5KFtyLCBnLCBiXSkpO1xuICB9XG5cbiAgcHVibGljIHJlcXVpcmVMaWdodE1lc2gobWF0ZXJpYWw6IE1hdGVyaWFsKSB7XG4gICAgaWYgKHRoaXMuX3R5cGUgIT09IEVMaWdodFR5cGUuQXJlYSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdMaWdodCBtZXNoIG9ubHkgc3VwcG9ydCBhcmVhIScpO1xuICAgIH1cblxuICAgIGlmICghdGhpcy5fbWVzaCkge1xuICAgICAgdGhpcy5fbWVzaCA9IG5ldyBNZXNoKFxuICAgICAgICB0aGlzLl9hcmVhTW9kZSA9PT0gRUFyZWFMaWdodE1vZGUuUmVjdCA/IGdlb21ldHJpZXMucmVjdExpZ2h0IDogZ2VvbWV0cmllcy5kaXNjTGlnaHQsXG4gICAgICAgIG1hdGVyaWFsXG4gICAgICApO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9tZXNoO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZU1hdHJpeCgpIHtcbiAgICBzdXBlci51cGRhdGVNYXRyaXgoKTtcbiAgICBcbiAgICBtYXQ0LmdldFRyYW5zbGF0aW9uKHRoaXMuX3dvcmxkUG9zLCB0aGlzLl93b3JsZE1hdCk7XG4gICAgdmVjMy50cmFuc2Zvcm1NYXQ0KHRoaXMuX3dvcmxkRGlyLCBbMCwgMCwgMV0sIHRoaXMuX3dvcmxkTWF0KTtcblxuICAgIGlmICh0aGlzLl9tZXNoKSB7XG4gICAgICB0aGlzLl9tZXNoLnNjYWxlLnNldCh0aGlzLl9hcmVhTW9kZSA9PT0gRUFyZWFMaWdodE1vZGUuRGlzY1xuICAgICAgICA/IFt0aGlzLl9hcmVhU2l6ZVswXSwgdGhpcy5fYXJlYVNpemVbMF0sIDBdXG4gICAgICAgIDogW3RoaXMuX2FyZWFTaXplWzBdLCB0aGlzLl9hcmVhU2l6ZVsxXSwgMF1cbiAgICAgICk7XG4gICAgICB0aGlzLl9tZXNoLnVwZGF0ZVdvcmxkTWF0cml4KHRoaXMpO1xuICAgICAgdGhpcy5fbWVzaC5tYXRlcmlhbC5zZXRVbmlmb3JtKCd1X2xpZ2h0Q29sb3InLCB0aGlzLl9jb2xvcik7XG4gICAgfVxuXG4gICAgdGhpcy5fdWJJbmZvLnNldCh0aGlzLl9jb2xvciwgNCk7XG4gICAgdGhpcy5fdWJJbmZvLnNldCh0aGlzLl93b3JsZE1hdCwgOCk7XG4gICAgdGhpcy5fdWJJbmZvLnNldChtYXQ0LmludmVydChuZXcgRmxvYXQzMkFycmF5KDE2KSwgdGhpcy5fd29ybGRNYXQpLCAyNCk7XG4gIH1cbn1cbiJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"./HObject\");\nvar Material = (function (_super) {\n    __extends(Material, _super);\n    function Material(_effect, values, marcos, renderStates) {\n        var _this = _super.call(this) || this;\n        _this._effect = _effect;\n        _this.isMaterial = true;\n        _this._version = 0;\n        _this._isBufferDirty = false;\n        _this._isDirty = true;\n        _this._uniformBlock = _effect.createDefaultUniformBlock();\n        if (values) {\n            Object.keys(values).forEach(function (name) { return _this.setUniform(name, values[name]); });\n        }\n        _this._marcos = marcos || {};\n        _this._renderStates = renderStates || {};\n        return _this;\n    }\n    Object.defineProperty(Material.prototype, \"effect\", {\n        get: function () {\n            return this._effect;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"marcos\", {\n        get: function () {\n            return this._marcos;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"version\", {\n        get: function () {\n            return this._version;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"bindingGroup\", {\n        get: function () {\n            this._bindingGroup = this._effect.ubTemplate.getBindingGroup(this._uniformBlock, this._bindingGroup);\n            return this._bindingGroup;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"primitiveType\", {\n        get: function () {\n            return this._renderStates.primitiveType || this._effect.renderStates.primitiveType;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"cullMode\", {\n        get: function () {\n            return this._renderStates.cullMode || this._effect.renderStates.cullMode;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"depthCompare\", {\n        get: function () {\n            return this._renderStates.depthCompare || this._effect.renderStates.depthCompare;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"blendColor\", {\n        get: function () {\n            return this._renderStates.blendColor || this._effect.renderStates.blendColor;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Material.prototype, \"blendAlpha\", {\n        get: function () {\n            return this._renderStates.blendAlpha || this._effect.renderStates.blendAlpha;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Material.prototype.setUniform = function (name, value, rtSubNameOrGPUBuffer) {\n        this._effect.ubTemplate.setUniform(this._uniformBlock, name, value, rtSubNameOrGPUBuffer);\n    };\n    Material.prototype.getUniform = function (name) {\n        return this._effect.ubTemplate.getUniform(this._uniformBlock, name);\n    };\n    Material.prototype.setMarcos = function (marcos) {\n        Object.assign(this._marcos, marcos);\n        this._version += 1;\n    };\n    Material.CLASS_NAME = 'Material';\n    return Material;\n}(HObject_1.default));\nexports.default = Material;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWF0ZXJpYWwuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJNYXRlcmlhbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFNQSxxQ0FBZ0M7QUFJaEM7SUFBc0MsNEJBQU87SUFpRDNDLGtCQUNZLE9BQWUsRUFDekIsTUFBd0MsRUFDeEMsTUFBMEMsRUFDMUMsWUFBNEI7UUFKOUIsWUFNRSxpQkFBTyxTQVVSO1FBZlcsYUFBTyxHQUFQLE9BQU8sQ0FBUTtRQWhEcEIsZ0JBQVUsR0FBWSxJQUFJLENBQUM7UUFFeEIsY0FBUSxHQUFXLENBQUMsQ0FBQztRQUNyQixvQkFBYyxHQUFZLEtBQUssQ0FBQztRQUNoQyxjQUFRLEdBQVksSUFBSSxDQUFDO1FBbURqQyxLQUFJLENBQUMsYUFBYSxHQUFHLE9BQU8sQ0FBQyx5QkFBeUIsRUFBRSxDQUFDO1FBRXpELElBQUksTUFBTSxFQUFFO1lBQ1YsTUFBTSxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsQ0FBQyxPQUFPLENBQUMsVUFBQSxJQUFJLElBQUksT0FBQSxLQUFJLENBQUMsVUFBVSxDQUFDLElBQUksRUFBRSxNQUFNLENBQUMsSUFBSSxDQUFDLENBQUMsRUFBbkMsQ0FBbUMsQ0FBQyxDQUFDO1NBQzFFO1FBRUQsS0FBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLElBQUksRUFBRSxDQUFDO1FBQzVCLEtBQUksQ0FBQyxhQUFhLEdBQUcsWUFBWSxJQUFJLEVBQUUsQ0FBQzs7SUFDMUMsQ0FBQztJQXJERCxzQkFBSSw0QkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNEJBQU07YUFBVjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDZCQUFPO2FBQVg7WUFDRSxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDdkIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxrQ0FBWTthQUFoQjtZQUNFLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLE9BQU8sQ0FBQyxVQUFVLENBQUMsZUFBZSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLGFBQWEsQ0FBQyxDQUFDO1lBQ3JHLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQztRQUM1QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLG1DQUFhO2FBQWpCO1lBQ0UsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLGFBQWEsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxhQUFhLENBQUM7UUFDckYsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw4QkFBUTthQUFaO1lBQ0UsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDLFlBQVksQ0FBQyxRQUFRLENBQUM7UUFDM0UsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxrQ0FBWTthQUFoQjtZQUNFLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxZQUFZLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsWUFBWSxDQUFDO1FBQ25GLENBQUM7OztPQUFBO0lBRUQsc0JBQUksZ0NBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQy9FLENBQUM7OztPQUFBO0lBRUQsc0JBQUksZ0NBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLGFBQWEsQ0FBQyxVQUFVLElBQUksSUFBSSxDQUFDLE9BQU8sQ0FBQyxZQUFZLENBQUMsVUFBVSxDQUFDO1FBQy9FLENBQUM7OztPQUFBO0lBb0JNLDZCQUFVLEdBQWpCLFVBQWtCLElBQVksRUFBRSxLQUFvQixFQUFFLG9CQUF5QztRQUM3RixJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLEVBQUUsS0FBSyxFQUFFLG9CQUFvQixDQUFDLENBQUM7SUFDNUYsQ0FBQztJQUVNLDZCQUFVLEdBQWpCLFVBQWtCLElBQVk7UUFDNUIsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLFVBQVUsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN0RSxDQUFDO0lBRU0sNEJBQVMsR0FBaEIsVUFBaUIsTUFBeUM7UUFDeEQsTUFBTSxDQUFDLE1BQU0sQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQ3BDLElBQUksQ0FBQyxRQUFRLElBQUksQ0FBQyxDQUFDO0lBQ3JCLENBQUM7SUE3RWMsbUJBQVUsR0FBVyxVQUFVLENBQUM7SUE4RWpELGVBQUM7Q0FBQSxBQS9FRCxDQUFzQyxpQkFBTyxHQStFNUM7a0JBL0VvQixRQUFRIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBARmlsZSAgIDogTWF0ZXJpYWwudHNcbiAqIEBBdXRob3IgOiBkdHlza3kgKGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBMaW5rICAgOiBkdHlza3kubW9lXG4gKiBARGF0ZSAgIDogMjAyMS82LzbkuIvljYg3OjI2OjMzXG4gKi9cbmltcG9ydCBIT2JqZWN0IGZyb20gXCIuL0hPYmplY3RcIjtcbmltcG9ydCBFZmZlY3QsIHtJUmVuZGVyU3RhdGVzfSBmcm9tIFwiLi9FZmZlY3RcIjtcbmltcG9ydCBVQlRlbXBsYXRlLCB7SVVuaWZvcm1CbG9jaywgVFVuaWZvcm1WYWx1ZX0gZnJvbSBcIi4vVUJUZW1wbGF0ZVwiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNYXRlcmlhbCBleHRlbmRzIEhPYmplY3Qge1xuICBwdWJsaWMgc3RhdGljICBDTEFTU19OQU1FOiBzdHJpbmcgPSAnTWF0ZXJpYWwnO1xuICBwdWJsaWMgaXNNYXRlcmlhbDogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJvdGVjdGVkIF92ZXJzaW9uOiBudW1iZXIgPSAwO1xuICBwcm90ZWN0ZWQgX2lzQnVmZmVyRGlydHk6IGJvb2xlYW4gPSBmYWxzZTtcbiAgcHJvdGVjdGVkIF9pc0RpcnR5OiBib29sZWFuID0gdHJ1ZTtcbiAgcHJvdGVjdGVkIF91bmlmb3JtQmxvY2s6IElVbmlmb3JtQmxvY2s7XG4gIHByb3RlY3RlZCBfYmluZGluZ0dyb3VwOiBHUFVCaW5kR3JvdXA7XG4gIHByb3RlY3RlZCBfbWFyY29zOiB7W2tleTogc3RyaW5nXTogbnVtYmVyIHwgYm9vbGVhbn07XG4gIHByb3RlY3RlZCBfcmVuZGVyU3RhdGVzOiBJUmVuZGVyU3RhdGVzO1xuXG4gIGdldCBlZmZlY3QoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2VmZmVjdDtcbiAgfVxuXG4gIGdldCBtYXJjb3MoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21hcmNvcztcbiAgfVxuXG4gIGdldCB2ZXJzaW9uKCkge1xuICAgIHJldHVybiB0aGlzLl92ZXJzaW9uO1xuICB9XG5cbiAgZ2V0IGJpbmRpbmdHcm91cCgpIHtcbiAgICB0aGlzLl9iaW5kaW5nR3JvdXAgPSB0aGlzLl9lZmZlY3QudWJUZW1wbGF0ZS5nZXRCaW5kaW5nR3JvdXAodGhpcy5fdW5pZm9ybUJsb2NrLCB0aGlzLl9iaW5kaW5nR3JvdXApO1xuICAgIHJldHVybiB0aGlzLl9iaW5kaW5nR3JvdXA7XG4gIH1cblxuICBnZXQgcHJpbWl0aXZlVHlwZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyU3RhdGVzLnByaW1pdGl2ZVR5cGUgfHwgdGhpcy5fZWZmZWN0LnJlbmRlclN0YXRlcy5wcmltaXRpdmVUeXBlO1xuICB9XG5cbiAgZ2V0IGN1bGxNb2RlKCkge1xuICAgIHJldHVybiB0aGlzLl9yZW5kZXJTdGF0ZXMuY3VsbE1vZGUgfHwgdGhpcy5fZWZmZWN0LnJlbmRlclN0YXRlcy5jdWxsTW9kZTtcbiAgfVxuXG4gIGdldCBkZXB0aENvbXBhcmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlclN0YXRlcy5kZXB0aENvbXBhcmUgfHwgdGhpcy5fZWZmZWN0LnJlbmRlclN0YXRlcy5kZXB0aENvbXBhcmU7XG4gIH1cblxuICBnZXQgYmxlbmRDb2xvcigpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVuZGVyU3RhdGVzLmJsZW5kQ29sb3IgfHwgdGhpcy5fZWZmZWN0LnJlbmRlclN0YXRlcy5ibGVuZENvbG9yO1xuICB9XG5cbiAgZ2V0IGJsZW5kQWxwaGEoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlbmRlclN0YXRlcy5ibGVuZEFscGhhIHx8IHRoaXMuX2VmZmVjdC5yZW5kZXJTdGF0ZXMuYmxlbmRBbHBoYTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBfZWZmZWN0OiBFZmZlY3QsXG4gICAgdmFsdWVzPzoge1tuYW1lOiBzdHJpbmddOiBUVW5pZm9ybVZhbHVlfSxcbiAgICBtYXJjb3M/OiB7W2tleTogc3RyaW5nXTogbnVtYmVyIHwgYm9vbGVhbn0sXG4gICAgcmVuZGVyU3RhdGVzPzogSVJlbmRlclN0YXRlc1xuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fdW5pZm9ybUJsb2NrID0gX2VmZmVjdC5jcmVhdGVEZWZhdWx0VW5pZm9ybUJsb2NrKCk7XG5cbiAgICBpZiAodmFsdWVzKSB7XG4gICAgICBPYmplY3Qua2V5cyh2YWx1ZXMpLmZvckVhY2gobmFtZSA9PiB0aGlzLnNldFVuaWZvcm0obmFtZSwgdmFsdWVzW25hbWVdKSk7XG4gICAgfVxuXG4gICAgdGhpcy5fbWFyY29zID0gbWFyY29zIHx8IHt9O1xuICAgIHRoaXMuX3JlbmRlclN0YXRlcyA9IHJlbmRlclN0YXRlcyB8fCB7fTtcbiAgfVxuXG4gIHB1YmxpYyBzZXRVbmlmb3JtKG5hbWU6IHN0cmluZywgdmFsdWU6IFRVbmlmb3JtVmFsdWUsIHJ0U3ViTmFtZU9yR1BVQnVmZmVyPzogc3RyaW5nIHwgR1BVQnVmZmVyKSB7XG4gICAgdGhpcy5fZWZmZWN0LnViVGVtcGxhdGUuc2V0VW5pZm9ybSh0aGlzLl91bmlmb3JtQmxvY2ssIG5hbWUsIHZhbHVlLCBydFN1Yk5hbWVPckdQVUJ1ZmZlcik7XG4gIH1cblxuICBwdWJsaWMgZ2V0VW5pZm9ybShuYW1lOiBzdHJpbmcpOiBUVW5pZm9ybVZhbHVlIHtcbiAgICByZXR1cm4gdGhpcy5fZWZmZWN0LnViVGVtcGxhdGUuZ2V0VW5pZm9ybSh0aGlzLl91bmlmb3JtQmxvY2ssIG5hbWUpO1xuICB9XG5cbiAgcHVibGljIHNldE1hcmNvcyhtYXJjb3M6IHtba2V5OiBzdHJpbmddOiBudW1iZXIgfCBib29sZWFufSkge1xuICAgIE9iamVjdC5hc3NpZ24odGhpcy5fbWFyY29zLCBtYXJjb3MpO1xuICAgIHRoaXMuX3ZlcnNpb24gKz0gMTtcbiAgfVxufVxuIl19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Node_1 = require(\"./Node\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar buildin_1 = require(\"../buildin\");\nvar Mesh = (function (_super) {\n    __extends(Mesh, _super);\n    function Mesh(_geometry, _material) {\n        var _this = _super.call(this) || this;\n        _this._geometry = _geometry;\n        _this._material = _material;\n        _this.isMesh = true;\n        _this.sortZ = 0;\n        _this._pipelines = {};\n        _this._matVersion = -1;\n        _this._ubTemplate = buildin_1.buildinUBTemplates.staticMesh;\n        _this._uniformBlock = _this._ubTemplate.createUniformBlock();\n        return _this;\n    }\n    Mesh.IS = function (value) {\n        return !!value.isMesh;\n    };\n    Object.defineProperty(Mesh.prototype, \"geometry\", {\n        get: function () {\n            return this._geometry;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Mesh.prototype, \"material\", {\n        get: function () {\n            return this._material;\n        },\n        set: function (value) {\n            this._material = value;\n            this._pipelines = {};\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Mesh.prototype.clone = function () {\n        var mesh = new Mesh(this._geometry, this._material);\n        mesh.pos.set(this.pos);\n        mesh.quat.set(this.quat);\n        mesh.scale.set(this.scale);\n        return mesh;\n    };\n    Mesh.prototype.render = function (pass, rt) {\n        var _a = this, _geometry = _a._geometry, _material = _a._material;\n        if (_material.version !== this._matVersion || !this._pipelines[rt.pipelineHash]) {\n            this._createPipeline(rt);\n            this._matVersion = _material.version;\n        }\n        this.setUniform('u_world', this._worldMat);\n        this._bindingGroup = this._ubTemplate.getBindingGroup(this._uniformBlock, this._bindingGroup);\n        _geometry.vertexes.forEach(function (vertex, index) {\n            pass.setVertexBuffer(index, vertex);\n        });\n        pass.setIndexBuffer(_geometry.indexes, _geometry.indexFormat);\n        pass.setBindGroup(1, _material.bindingGroup);\n        pass.setBindGroup(2, this._bindingGroup);\n        pass.setPipeline(this._pipelines[rt.pipelineHash]);\n        pass.drawIndexed(_geometry.count, 1, 0, 0, 0);\n    };\n    Mesh.prototype.setUniform = function (name, value, rtSubNameOrGPUBuffer) {\n        this._ubTemplate.setUniform(this._uniformBlock, name, value, rtSubNameOrGPUBuffer);\n    };\n    Mesh.prototype.getUniform = function (name) {\n        return this._ubTemplate.getUniform(this._uniformBlock, name);\n    };\n    Mesh.prototype._createPipeline = function (rt) {\n        var device = renderEnv_1.default.device;\n        var _a = this, _geometry = _a._geometry, _material = _a._material, _ubTemplate = _a._ubTemplate;\n        this._bindingGroup = this._ubTemplate.getBindingGroup(this._uniformBlock, this._bindingGroup);\n        var marcos = Object.assign({}, _geometry.marcos, _material.marcos);\n        var _b = _material.effect.getShader(marcos, _geometry.attributesDef, renderEnv_1.default.shaderPrefix, _ubTemplate.shaderPrefix), vs = _b.vs, fs = _b.fs;\n        this._pipelines[rt.pipelineHash] = device.createRenderPipeline({\n            layout: device.createPipelineLayout({ bindGroupLayouts: [\n                    renderEnv_1.default.uniformLayout,\n                    _material.effect.uniformLayout,\n                    _ubTemplate.uniformLayout\n                ] }),\n            vertex: {\n                module: vs,\n                entryPoint: \"main\",\n                buffers: _geometry.vertexLayouts\n            },\n            fragment: {\n                module: fs,\n                targets: rt.colorFormats.map(function (format) { return ({\n                    format: format,\n                    blend: _material.blendColor ? {\n                        color: _material.blendColor,\n                        alpha: _material.blendAlpha\n                    } : undefined\n                }); }),\n                entryPoint: \"main\"\n            },\n            primitive: {\n                topology: _material.primitiveType,\n                cullMode: _material.cullMode\n            },\n            depthStencil: rt.depthStencilFormat && {\n                format: rt.depthStencilFormat,\n                depthWriteEnabled: true,\n                depthCompare: _material.depthCompare\n            }\n        });\n    };\n    Mesh.CLASS_NAME = 'Mesh';\n    return Mesh;\n}(Node_1.default));\nexports.default = Mesh;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTWVzaC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk1lc2gudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBTUEsK0JBQTBCO0FBRzFCLHlDQUFvQztBQUlwQyxzQ0FBZ0Q7QUFJaEQ7SUFBa0Msd0JBQUk7SUE2QnBDLGNBQ1ksU0FBbUIsRUFDbkIsU0FBbUI7UUFGL0IsWUFJRSxpQkFBTyxTQUlSO1FBUFcsZUFBUyxHQUFULFNBQVMsQ0FBVTtRQUNuQixlQUFTLEdBQVQsU0FBUyxDQUFVO1FBeEJ4QixZQUFNLEdBQVksSUFBSSxDQUFDO1FBQ3ZCLFdBQUssR0FBVyxDQUFDLENBQUM7UUFFZixnQkFBVSxHQUF3QyxFQUFFLENBQUM7UUFDckQsaUJBQVcsR0FBVyxDQUFDLENBQUMsQ0FBQztRQXdCakMsS0FBSSxDQUFDLFdBQVcsR0FBRyw0QkFBa0IsQ0FBQyxVQUFVLENBQUM7UUFDakQsS0FBSSxDQUFDLGFBQWEsR0FBRyxLQUFJLENBQUMsV0FBVyxDQUFDLGtCQUFrQixFQUFFLENBQUM7O0lBQzdELENBQUM7SUFsQ2EsT0FBRSxHQUFoQixVQUFpQixLQUFVO1FBQ3pCLE9BQU8sQ0FBQyxDQUFFLEtBQWMsQ0FBQyxNQUFNLENBQUM7SUFDbEMsQ0FBQztJQVdELHNCQUFJLDBCQUFRO2FBQVo7WUFDRSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwwQkFBUTthQUFaO1lBQ0UsT0FBTyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBQ3hCLENBQUM7YUFFRCxVQUFhLEtBQWU7WUFDMUIsSUFBSSxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUM7WUFDdkIsSUFBSSxDQUFDLFVBQVUsR0FBRyxFQUFFLENBQUM7UUFDdkIsQ0FBQzs7O09BTEE7SUFpQk0sb0JBQUssR0FBWjtRQUNFLElBQU0sSUFBSSxHQUFHLElBQUksSUFBSSxDQUFDLElBQUksQ0FBQyxTQUFTLEVBQUUsSUFBSSxDQUFD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LE1BQU0sRUFBRSxFQUFFLENBQUMsa0JBQWtCO2dCQUM3QixpQkFBaUIsRUFBRSxJQUFJO2dCQUN2QixZQUFZLEVBQUUsU0FBUyxDQUFDLFlBQVk7YUFDckM7U0FDRixDQUFDLENBQUM7SUFDTCxDQUFDO0lBM0hjLGVBQVUsR0FBVyxNQUFNLENBQUM7SUE0SDdDLFdBQUM7Q0FBQSxBQTdIRCxDQUFrQyxjQUFJLEdBNkhyQztrQkE3SG9CLElBQUkiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBGaWxlICAgOiBNZXNoLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi825LiL5Y2INzoyNTowNVxuICovXG5pbXBvcnQgTm9kZSBmcm9tICcuL05vZGUnO1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4vR2VvbWV0cnknO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4vTWF0ZXJpYWwnO1xuaW1wb3J0IHJlbmRlckVudiBmcm9tICcuL3JlbmRlckVudic7XG5pbXBvcnQgUmVuZGVyVGV4dHVyZSBmcm9tICcuL1JlbmRlclRleHR1cmUnO1xuaW1wb3J0IExpZ2h0IGZyb20gJy4vTGlnaHQnO1xuaW1wb3J0IFVCVGVtcGxhdGUsIHsgSVVuaWZvcm1CbG9jaywgVFVuaWZvcm1WYWx1ZSB9IGZyb20gJy4vVUJUZW1wbGF0ZSc7XG5pbXBvcnQgeyBidWlsZGluVUJUZW1wbGF0ZXMgfSBmcm9tICcuLi9idWlsZGluJztcblxuZGVjbGFyZSB0eXBlIENhbWVyYSA9IGltcG9ydCgnLi9DYW1lcmEnKS5kZWZhdWx0O1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNZXNoIGV4dGVuZHMgTm9kZSB7XG4gIHB1YmxpYyBzdGF0aWMgIENMQVNTX05BTUU6IHN0cmluZyA9ICdNZXNoJztcblxuICBwdWJsaWMgc3RhdGljIElTKHZhbHVlOiBhbnkpOiB2YWx1ZSBpcyBNZXNoe1xuICAgIHJldHVybiAhISh2YWx1ZSBhcyBNZXNoKS5pc01lc2g7XG4gIH1cblxuICBwdWJsaWMgaXNNZXNoOiBib29sZWFuID0gdHJ1ZTtcbiAgcHVibGljIHNvcnRaOiBudW1iZXIgPSAwO1xuXG4gIHByb3RlY3RlZCBfcGlwZWxpbmVzOiB7W2hhc2g6IG51bWJlcl06IEdQVVJlbmRlclBpcGVsaW5lfSA9IHt9O1xuICBwcm90ZWN0ZWQgX21hdFZlcnNpb246IG51bWJlciA9IC0xO1xuICBwcm90ZWN0ZWQgX3ViVGVtcGxhdGU6IFVCVGVtcGxhdGU7XG4gIHByb3RlY3RlZCBfdW5pZm9ybUJsb2NrOiBJVW5pZm9ybUJsb2NrO1xuICBwcm90ZWN0ZWQgX2JpbmRpbmdHcm91cDogR1BVQmluZEdyb3VwO1xuXG4gIGdldCBnZW9tZXRyeSgpIHtcbiAgICByZXR1cm4gdGhpcy5fZ2VvbWV0cnk7XG4gIH1cblxuICBnZXQgbWF0ZXJpYWwoKSB7XG4gICAgcmV0dXJuIHRoaXMuX21hdGVyaWFsO1xuICB9XG5cbiAgc2V0IG1hdGVyaWFsKHZhbHVlOiBNYXRlcmlhbCkge1xuICAgIHRoaXMuX21hdGVyaWFsID0gdmFsdWU7XG4gICAgdGhpcy5fcGlwZWxpbmVzID0ge307XG4gIH1cblxuICBjb25zdHJ1Y3RvcihcbiAgICBwcm90ZWN0ZWQgX2dlb21ldHJ5OiBHZW9tZXRyeSxcbiAgICBwcm90ZWN0ZWQgX21hdGVyaWFsOiBNYXRlcmlhbFxuICApIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fdWJUZW1wbGF0ZSA9IGJ1aWxkaW5VQlRlbXBsYXRlcy5zdGF0aWNNZXNoO1xuICAgIHRoaXMuX3VuaWZvcm1CbG9jayA9IHRoaXMuX3ViVGVtcGxhdGUuY3JlYXRlVW5pZm9ybUJsb2NrKCk7XG4gIH1cblxuICBwdWJsaWMgY2xvbmUoKTogTWVzaCB7XG4gICAgY29uc3QgbWVzaCA9IG5ldyBNZXNoKHRoaXMuX2dlb21ldHJ5LCB0aGlzLl9tYXRlcmlhbCk7XG4gICAgbWVzaC5wb3Muc2V0KHRoaXMucG9zKTtcbiAgICBtZXNoLnF1YXQuc2V0KHRoaXMucXVhdCk7XG4gICAgbWVzaC5zY2FsZS5zZXQodGhpcy5zY2FsZSk7XG5cbiAgICByZXR1cm4gbWVzaDtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXIoXG4gICAgcGFzczogR1BVUmVuZGVyUGFzc0VuY29kZXIsXG4gICAgcnQ6IFJlbmRlclRleHR1cmVcbiAgKSB7XG4gICAgY29uc3Qge19nZW9tZXRyeSwgX21hdGVyaWFsfSA9IHRoaXM7XG5cbiAgICBpZiAoX21hdGVyaWFsLnZlcnNpb24gIT09IHRoaXMuX21hdFZlcnNpb24gfHwgIXRoaXMuX3BpcGVsaW5lc1tydC5waXBlbGluZUhhc2hdKSB7XG4gICAgICB0aGlzLl9jcmVhdGVQaXBlbGluZShydCk7XG4gICAgICB0aGlzLl9tYXRWZXJzaW9uID0gX21hdGVyaWFsLnZlcnNpb247XG4gICAgfVxuXG4gICAgdGhpcy5zZXRVbmlmb3JtKCd1X3dvcmxkJywgdGhpcy5fd29ybGRNYXQpO1xuICAgIHRoaXMuX2JpbmRpbmdHcm91cCA9IHRoaXMuX3ViVGVtcGxhdGUuZ2V0QmluZGluZ0dyb3VwKHRoaXMuX3VuaWZvcm1CbG9jaywgdGhpcy5fYmluZGluZ0dyb3VwKTtcblxuICAgIF9nZW9tZXRyeS52ZXJ0ZXhlcy5mb3JFYWNoKCh2ZXJ0ZXgsIGluZGV4KSA9PiB7XG4gICAgICBwYXNzLnNldFZlcnRleEJ1ZmZlcihpbmRleCwgdmVydGV4KTtcbiAgICB9KTtcbiAgICBwYXNzLnNldEluZGV4QnVmZmVyKF9nZW9tZXRyeS5pbmRleGVzLCBfZ2VvbWV0cnkuaW5kZXhGb3JtYXQpO1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDEsIF9tYXRlcmlhbC5iaW5kaW5nR3JvdXApO1xuICAgIHBhc3Muc2V0QmluZEdyb3VwKDIsIHRoaXMuX2JpbmRpbmdHcm91cCk7XG4gICAgcGFzcy5zZXRQaXBlbGluZSh0aGlzLl9waXBlbGluZXNbcnQucGlwZWxpbmVIYXNoXSk7XG4gICAgcGFzcy5kcmF3SW5kZXhlZChfZ2VvbWV0cnkuY291bnQsIDEsIDAsIDAsIDApO1xuICB9XG5cbiAgcHVibGljIHNldFVuaWZvcm0obmFtZTogc3RyaW5nLCB2YWx1ZTogVFVuaWZvcm1WYWx1ZSwgcnRTdWJOYW1lT3JHUFVCdWZmZXI/OiBzdHJpbmcgfCBHUFVCdWZmZXIpIHtcbiAgICB0aGlzLl91YlRlbXBsYXRlLnNldFVuaWZvcm0odGhpcy5fdW5pZm9ybUJsb2NrLCBuYW1lLCB2YWx1ZSwgcnRTdWJOYW1lT3JHUFVCdWZmZXIpO1xuICB9XG5cbiAgcHVibGljIGdldFVuaWZvcm0obmFtZTogc3RyaW5nKTogVFVuaWZvcm1WYWx1ZSB7XG4gICAgcmV0dXJuIHRoaXMuX3ViVGVtcGxhdGUuZ2V0VW5pZm9ybSh0aGlzLl91bmlmb3JtQmxvY2ssIG5hbWUpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9jcmVhdGVQaXBlbGluZShydDogUmVuZGVyVGV4dHVyZSkge1xuICAgIGNvbnN0IHtkZXZpY2V9ID0gcmVuZGVyRW52O1xuICAgIGNvbnN0IHtfZ2VvbWV0cnksIF9tYXRlcmlhbCwgX3ViVGVtcGxhdGV9ID0gdGhpcztcbiAgICBcbiAgICB0aGlzLl9iaW5kaW5nR3JvdXAgPSB0aGlzLl91YlRlbXBsYXRlLmdldEJpbmRpbmdHcm91cCh0aGlzLl91bmlmb3JtQmxvY2ssIHRoaXMuX2JpbmRpbmdHcm91cCk7XG4gICAgY29uc3QgbWFyY29zID0gT2JqZWN0LmFzc2lnbih7fSwgX2dlb21ldHJ5Lm1hcmNvcywgX21hdGVyaWFsLm1hcmNvcyk7XG4gICAgY29uc3Qge3ZzLCBmc30gPSBfbWF0ZXJpYWwuZWZmZWN0LmdldFNoYWRlcihtYXJjb3MsIF9nZW9tZXRyeS5hdHRyaWJ1dGVzRGVmLCByZW5kZXJFbnYuc2hhZGVyUHJlZml4LCBfdWJUZW1wbGF0ZS5zaGFkZXJQcmVmaXgpO1xuXG4gICAgdGhpcy5fcGlwZWxpbmVzW3J0LnBpcGVsaW5lSGFzaF0gPSBkZXZpY2UuY3JlYXRlUmVuZGVyUGlwZWxpbmUoe1xuICAgICAgbGF5b3V0OiBkZXZpY2UuY3JlYXRlUGlwZWxpbmVMYXlvdXQoe2JpbmRHcm91cExheW91dHM6IFtcbiAgICAgICAgcmVuZGVyRW52LnVuaWZvcm1MYXlvdXQsXG4gICAgICAgIF9tYXRlcmlhbC5lZmZlY3QudW5pZm9ybUxheW91dCxcbiAgICAgICAgX3ViVGVtcGxhdGUudW5pZm9ybUxheW91dFxuICAgICAgXX0pLFxuICBcbiAgICAgIHZlcnRleDoge1xuICAgICAgICBtb2R1bGU6IHZzLFxuICAgICAgICBlbnRyeVBvaW50OiBcIm1haW5cIixcbiAgICAgICAgYnVmZmVyczogX2dlb21ldHJ5LnZlcnRleExheW91dHNcbiAgICAgIH0sXG4gIFxuICAgICAgZnJhZ21lbnQ6IHtcbiAgICAgICAgbW9kdWxlOiBmcyxcbiAgICAgICAgdGFyZ2V0czogcnQuY29sb3JGb3JtYXRzLm1hcChmb3JtYXQgPT4gKHtcbiAgICAgICAgICBmb3JtYXQsXG4gICAgICAgICAgYmxlbmQ6IF9tYXRlcmlhbC5ibGVuZENvbG9yID8ge1xuICAgICAgICAgICAgY29sb3I6IF9tYXRlcmlhbC5ibGVuZENvbG9yLFxuICAgICAgICAgICAgYWxwaGE6IF9tYXRlcmlhbC5ibGVuZEFscGhhXG4gICAgICAgICAgfSA6IHVuZGVmaW5lZFxuICAgICAgICB9KSksXG4gICAgICAgIGVudHJ5UG9pbnQ6IFwibWFpblwiXG4gICAgICB9LFxuICBcbiAgICAgIHByaW1pdGl2ZToge1xuICAgICAgICB0b3BvbG9neTogX21hdGVyaWFsLnByaW1pdGl2ZVR5cGUsXG4gICAgICAgIGN1bGxNb2RlOiBfbWF0ZXJpYWwuY3VsbE1vZGVcbiAgICAgIH0sXG5cbiAgICAgIGRlcHRoU3RlbmNpbDogcnQuZGVwdGhTdGVuY2lsRm9ybWF0ICYmIHtcbiAgICAgICAgZm9ybWF0OiBydC5kZXB0aFN0ZW5jaWxGb3JtYXQsXG4gICAgICAgIGRlcHRoV3JpdGVFbmFibGVkOiB0cnVlLFxuICAgICAgICBkZXB0aENvbXBhcmU6IF9tYXRlcmlhbC5kZXB0aENvbXBhcmVcbiAgICAgIH1cbiAgICB9KTtcbiAgfVxufVxuIl19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"./HObject\");\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar VEC3_ONES = new Float32Array([1, 1, 1]);\nvar Node = (function (_super) {\n    __extends(Node, _super);\n    function Node() {\n        var _this = _super.call(this) || this;\n        _this.isNode = true;\n        _this.active = true;\n        _this._children = [];\n        _this._mem = new ArrayBuffer((3 + 3 + 4 + 16) * 4 * 4);\n        _this._pos = new Float32Array(_this._mem, 0, 3);\n        (_this._scale = new Float32Array(_this._mem, 3 * 4, 3)).set(VEC3_ONES);\n        _this._quat = gl_matrix_1.quat.identity(new Float32Array(_this._mem, 6 * 4, 4));\n        _this._worldMat = gl_matrix_1.mat4.identity(new Float32Array(_this._mem, 10 * 4, 16));\n        return _this;\n    }\n    Object.defineProperty(Node.prototype, \"pos\", {\n        get: function () {\n            return this._pos;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"scale\", {\n        get: function () {\n            return this._scale;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"quat\", {\n        get: function () {\n            return this._quat;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Node.prototype, \"worldMat\", {\n        get: function () {\n            return this._worldMat;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Node.prototype.addChild = function (node) {\n        this._children.push(node);\n        node._parent = this;\n    };\n    Node.prototype.removeChild = function (node) {\n        var idx = this._children.indexOf(node);\n        if (idx >= 0) {\n            this._children.splice(idx, 1);\n            node._parent = null;\n        }\n    };\n    Node.prototype.setLocalMat = function (value) {\n        this._updateTRSFromMat(value);\n    };\n    Node.prototype.updateMatrix = function () {\n        this.updateWorldMatrix();\n    };\n    Node.prototype.updateWorldMatrix = function (parent) {\n        gl_matrix_1.mat4.fromRotationTranslationScale(this._worldMat, this._quat, this._pos, this._scale);\n        parent = parent || this._parent;\n        if (parent) {\n            gl_matrix_1.mat4.mul(this._worldMat, parent.worldMat, this._worldMat);\n        }\n    };\n    Node.prototype.dfs = function (callback, defaultParams) {\n        var params = callback(this, defaultParams);\n        var children = this._children;\n        for (var index = 0; index < children.length; index += 1) {\n            var node = children[index];\n            node.active && node.dfs(callback, params);\n        }\n    };\n    Node.prototype.updateSubTree = function (callback) {\n        if (!this.active) {\n            return;\n        }\n        this.dfs(function (node) {\n            node.updateMatrix();\n            callback && callback(node);\n        });\n    };\n    Node.prototype._updateTRSFromMat = function (mat) {\n        gl_matrix_1.mat4.getTranslation(this._pos, mat);\n        gl_matrix_1.mat4.getRotation(this._quat, mat);\n        gl_matrix_1.mat4.getScaling(this._scale, mat);\n    };\n    Node.CLASS_NAME = 'Node';\n    return Node;\n}(HObject_1.default));\nexports.default = Node;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9kZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIk5vZGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBTUEscUNBQWdDO0FBQ2hDLHVDQUEyQztBQUUzQyxJQUFNLFNBQVMsR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUU5QztJQUFrQyx3QkFBTztJQThCdkM7UUFBQSxZQUNFLGlCQUFPLFNBT1I7UUFwQ00sWUFBTSxHQUFZLElBQUksQ0FBQztRQUV2QixZQUFNLEdBQVksSUFBSSxDQUFDO1FBUXBCLGVBQVMsR0FBVyxFQUFFLENBQUM7UUFxQi9CLEtBQUksQ0FBQyxJQUFJLEdBQUcsSUFBSSxXQUFXLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUcsQ0FBQyxDQUFDLENBQUM7UUFDdEQsS0FBSSxDQUFDLElBQUksR0FBRyxJQUFJLFlBQVksQ0FBQyxLQUFJLENBQUMsSUFBSSxFQUFFLENBQUMsRUFBRSxDQUFDLENBQUMsQ0FBQztRQUM5QyxDQUFDLEtBQUksQ0FBQyxNQUFNLEdBQUcsSUFBSSxZQUFZLENBQUMsS0FBSSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFNBQVMsQ0FBQyxDQUFDO1FBQ3JFLEtBQUksQ0FBQyxLQUFLLEdBQUcsZ0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxZQUFZLENBQUMsS0FBSSxDQUFDLElBQUksRUFBRSxDQUFDLEdBQUcsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFpQixDQUFDO1FBQ2xGLEtBQUksQ0FBQyxTQUFTLEdBQUcsZ0JBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxZQUFZLENBQUMsS0FBSSxDQUFDLElBQUksRUFBRSxFQUFFLEdBQUcsQ0FBQyxFQUFFLEVBQUUsQ0FBQyxDQUFpQixDQUFDOztJQUMxRixDQUFDO0lBeEJELHNCQUFJLHFCQUFHO2FBQVA7WUFDRSxPQUFPLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDbkIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx1QkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO1FBQ3JCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksc0JBQUk7YUFBUjtZQUNFLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztRQUNwQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDBCQUFRO2FBQVo7WUFDRSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQzs7O09BQUE7SUFZTSx1QkFBUSxHQUFmLFVBQWdCLElBQVU7UUFDeEIsSUFBSSxDQUFDLFNBQVMsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDMUIsSUFBSSxDQUFDLE9BQU8sR0FBRyxJQUFJLENBQUM7SUFDdEIsQ0FBQztJQUVNLDBCQUFXLEdBQWxCLFVBQW1CLElBQVU7UUFDM0IsSUFBTSxHQUFHLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxPQUFPLENBQUMsSUFBSSxDQUFDLENBQUM7UUFFekMsSUFBSSxHQUFHLElBQUksQ0FBQyxFQUFFO1lBQ1osSUFBSSxDQUFDLFNBQVMsQ0FBQyxNQUFNLENBQUMsR0FBRyxFQUFFLENBQUMsQ0FBQyxDQUFDO1lBQzlCLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDO1NBQ3JCO0lBQ0gsQ0FBQztJQUVNLDBCQUFXLEdBQWxCLFVBQW1CLEtBQW1CO1FBQ3BDLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNoQyxDQUFDO0lBRU0sMkJBQVksR0FBbkI7UUFDRSxJQUFJLENBQUMsaUJBQWlCLEVBQUUsQ0FBQztJQUMzQixDQUFDO0lBRU0sZ0NBQWlCLEdBQXhCLFVBQXlCLE1BQWE7UUFDcEMsZ0JBQUksQ0FBQyw0QkFBNEIsQ0FBQyxJQUFJLENBQUMsU0FBUyxFQUFFLElBQUksQ0FBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLElBQUksRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDdEYsTUFBTSxHQUFHLE1BQU0sSUFBSSxJQUFJLENBQUMsT0FBTyxDQUFDO1FBRWhDLElBQUksTUFBTSxFQUFFO1lBQ1YsZ0JBQUksQ0FBQyxHQUFHLENBQUMsSUFBSSxDQUFDLFNBQVMsRUFBRSxNQUFNLENBQUMsUUFBUSxFQUFFLElBQUksQ0FBQyxTQUFTLENBQUMsQ0FBQztTQUMzRDtJQUNILENBQUM7SUFFTSxrQkFBRyxHQUFWLFVBQTBCLFFBQXVDLEVBQUUsYUFBaUI7UUFDbEYsSUFBTSxNQUFNLEdBQUcsUUFBUSxDQUFDLElBQUksRUFBRSxhQUFhLENBQUMsQ0FBQztRQUM3QyxJQUFNLFFBQVEsR0FBVyxJQUFJLENBQUMsU0FBUyxDQUFDO1FBRXhDLEtBQUssSUFBSSxLQUFLLEdBQUcsQ0FBQyxFQUFFLEtBQUssR0FBRyxRQUFRLENBQUMsTUFBTSxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUU7WUFDdkQsSUFBTSxJQUFJLEdBQUcsUUFBUSxDQUFDLEtBQUssQ0FBQyxDQUFDO1lBQzdCLElBQUksQ0FBQyxNQUFNLElBQUksSUFBSSxDQUFDLEdBQUcsQ0FBQyxRQUFRLEVBQUUsTUFBTSxDQUFDLENBQUM7U0FDM0M7SUFDSCxDQUFDO0lBRU0sNEJBQWEsR0FBcEIsVUFBcUIsUUFBK0I7UUFDbEQsSUFBSSxDQUFDLElBQUksQ0FBQyxNQUFNLEVBQUU7WUFDaEIsT0FBTztTQUNSO1FBRUQsSUFBSSxDQUFDLEdBQUcsQ0FBTyxVQUFDLElBQVU7WUFDeEIsSUFBSSxDQUFDLFlBQVksRUFBRSxDQUFDO1lBRXBCLFFBQVEsSUFBSSxRQUFRLENBQUMsSUFBSSxDQUFDLENBQUM7UUFDN0IsQ0FBQyxDQUFDLENBQUM7SUFDTCxDQUFDO0lBRU8sZ0NBQWlCLEdBQXpCLFVBQTBCLEdBQWlCO1FBQ3pDLGdCQUFJLENBQUMsY0FBYyxDQUFDLElBQUksQ0FBQyxJQUFJLEVBQUUsR0FBRyxDQUFDLENBQUM7UUFDcEMsZ0JBQUksQ0FBQyxXQUFXLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxHQUFHLENBQUMsQ0FBQztRQUNsQyxnQkFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsTUFBTSxFQUFFLEdBQUcsQ0FBQyxDQUFDO0lBQ3BDLENBQUM7SUFoR2EsZUFBVSxHQUFXLE1BQU0sQ0FBQztJQWlHNUMsV0FBQztDQUFBLEFBbEdELENBQWtDLGlCQUFPLEdBa0d4QztrQkFsR29CLElBQUkiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBGaWxlICAgOiBOb2RlLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi825LiL5Y2INzoyNDoyNlxuICovXG5pbXBvcnQgSE9iamVjdCBmcm9tICcuL0hPYmplY3QnO1xuaW1wb3J0IHttYXQ0LCBxdWF0LCB2ZWMzfSBmcm9tICdnbC1tYXRyaXgnO1xuXG5jb25zdCBWRUMzX09ORVMgPSBuZXcgRmxvYXQzMkFycmF5KFsxLCAxLCAxXSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGUgZXh0ZW5kcyBIT2JqZWN0IHtcbiAgcHVibGljIHN0YXRpYyBDTEFTU19OQU1FOiBzdHJpbmcgPSAnTm9kZSc7XG4gIHB1YmxpYyBpc05vZGU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHB1YmxpYyBhY3RpdmU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHByb3RlY3RlZCBfbWVtOiBBcnJheUJ1ZmZlcjtcbiAgcHJvdGVjdGVkIF9wb3M6IEZsb2F0MzJBcnJheTtcbiAgcHJvdGVjdGVkIF9zY2FsZTogRmxvYXQzMkFycmF5O1xuICBwcm90ZWN0ZWQgX3F1YXQ6IEZsb2F0MzJBcnJheTtcbiAgcHJvdGVjdGVkIF93b3JsZE1hdDogRmxvYXQzMkFycmF5O1xuICBwcm90ZWN0ZWQgX3BhcmVudDogTm9kZTtcbiAgcHJvdGVjdGVkIF9jaGlsZHJlbjogTm9kZVtdID0gW107XG5cbiAgZ2V0IHBvcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcG9zO1xuICB9XG5cbiAgZ2V0IHNjYWxlKCkge1xuICAgIHJldHVybiB0aGlzLl9zY2FsZTtcbiAgfVxuXG4gIGdldCBxdWF0KCkge1xuICAgIHJldHVybiB0aGlzLl9xdWF0O1xuICB9XG5cbiAgZ2V0IHdvcmxkTWF0KCkge1xuICAgIHJldHVybiB0aGlzLl93b3JsZE1hdDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKCkge1xuICAgIHN1cGVyKCk7XG5cbiAgICB0aGlzLl9tZW0gPSBuZXcgQXJyYXlCdWZmZXIoKDMgKyAzICsgNCArIDE2KSAqIDQgKiA0KTtcbiAgICB0aGlzLl9wb3MgPSBuZXcgRmxvYXQzMkFycmF5KHRoaXMuX21lbSwgMCwgMyk7XG4gICAgKHRoaXMuX3NjYWxlID0gbmV3IEZsb2F0MzJBcnJheSh0aGlzLl9tZW0sIDMgKiA0LCAzKSkuc2V0KFZFQzNfT05FUyk7XG4gICAgdGhpcy5fcXVhdCA9IHF1YXQuaWRlbnRpdHkobmV3IEZsb2F0MzJBcnJheSh0aGlzLl9tZW0sIDYgKiA0LCA0KSkgYXMgRmxvYXQzMkFycmF5O1xuICAgIHRoaXMuX3dvcmxkTWF0ID0gbWF0NC5pZGVudGl0eShuZXcgRmxvYXQzMkFycmF5KHRoaXMuX21lbSwgMTAgKiA0LCAxNikpIGFzIEZsb2F0MzJBcnJheTtcbiAgfVxuXG4gIHB1YmxpYyBhZGRDaGlsZChub2RlOiBOb2RlKSB7XG4gICAgdGhpcy5fY2hpbGRyZW4ucHVzaChub2RlKTtcbiAgICBub2RlLl9wYXJlbnQgPSB0aGlzO1xuICB9XG5cbiAgcHVibGljIHJlbW92ZUNoaWxkKG5vZGU6IE5vZGUpIHtcbiAgICBjb25zdCBpZHggPSB0aGlzLl9jaGlsZHJlbi5pbmRleE9mKG5vZGUpO1xuXG4gICAgaWYgKGlkeCA+PSAwKSB7XG4gICAgICB0aGlzLl9jaGlsZHJlbi5zcGxpY2UoaWR4LCAxKTtcbiAgICAgIG5vZGUuX3BhcmVudCA9IG51bGw7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIHNldExvY2FsTWF0KHZhbHVlOiBGbG9hdDMyQXJyYXkpIHtcbiAgICB0aGlzLl91cGRhdGVUUlNGcm9tTWF0KHZhbHVlKTtcbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVNYXRyaXgoKSB7XG4gICAgdGhpcy51cGRhdGVXb3JsZE1hdHJpeCgpO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZVdvcmxkTWF0cml4KHBhcmVudD86IE5vZGUpIHtcbiAgICBtYXQ0LmZyb21Sb3RhdGlvblRyYW5zbGF0aW9uU2NhbGUodGhpcy5fd29ybGRNYXQsIHRoaXMuX3F1YXQsIHRoaXMuX3BvcywgdGhpcy5fc2NhbGUpO1xuICAgIHBhcmVudCA9IHBhcmVudCB8fCB0aGlzLl9wYXJlbnQ7XG5cbiAgICBpZiAocGFyZW50KSB7XG4gICAgICBtYXQ0Lm11bCh0aGlzLl93b3JsZE1hdCwgcGFyZW50LndvcmxkTWF0LCB0aGlzLl93b3JsZE1hdCk7XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGRmczxUIGV4dGVuZHMgYW55PihjYWxsYmFjazogKG5vZGU6IE5vZGUsIHBhcmFtcz86IFQpID0+IFQsIGRlZmF1bHRQYXJhbXM/OiBUKSB7XG4gICAgY29uc3QgcGFyYW1zID0gY2FsbGJhY2sodGhpcywgZGVmYXVsdFBhcmFtcyk7XG4gICAgY29uc3QgY2hpbGRyZW46IE5vZGVbXSA9IHRoaXMuX2NoaWxkcmVuO1xuXG4gICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IGNoaWxkcmVuLmxlbmd0aDsgaW5kZXggKz0gMSkge1xuICAgICAgY29uc3Qgbm9kZSA9IGNoaWxkcmVuW2luZGV4XTtcbiAgICAgIG5vZGUuYWN0aXZlICYmIG5vZGUuZGZzKGNhbGxiYWNrLCBwYXJhbXMpO1xuICAgIH1cbiAgfVxuXG4gIHB1YmxpYyB1cGRhdGVTdWJUcmVlKGNhbGxiYWNrPzogKG5vZGU6IE5vZGUpID0+IHZvaWQpIHtcbiAgICBpZiAoIXRoaXMuYWN0aXZlKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgdGhpcy5kZnM8dm9pZD4oKG5vZGU6IE5vZGUpID0+IHtcbiAgICAgIG5vZGUudXBkYXRlTWF0cml4KCk7XG5cbiAgICAgIGNhbGxiYWNrICYmIGNhbGxiYWNrKG5vZGUpO1xuICAgIH0pO1xuICB9XG5cbiAgcHJpdmF0ZSBfdXBkYXRlVFJTRnJvbU1hdChtYXQ6IEZsb2F0MzJBcnJheSkge1xuICAgIG1hdDQuZ2V0VHJhbnNsYXRpb24odGhpcy5fcG9zLCBtYXQpO1xuICAgIG1hdDQuZ2V0Um90YXRpb24odGhpcy5fcXVhdCwgbWF0KTtcbiAgICBtYXQ0LmdldFNjYWxpbmcodGhpcy5fc2NhbGUsIG1hdCk7XG4gIH1cbn1cbiJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"./HObject\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar shared_1 = require(\"./shared\");\nvar RenderTexture = (function (_super) {\n    __extends(RenderTexture, _super);\n    function RenderTexture(_options) {\n        var _this = _super.call(this) || this;\n        _this._options = _options;\n        _this.isRenderTexture = true;\n        var width = _options.width, height = _options.height, colors = _options.colors, depthStencil = _options.depthStencil, forCompute = _options.forCompute;\n        _this._width = width;\n        _this._height = height;\n        if (forCompute && depthStencil) {\n            throw new Error('RenderTexture with forCompute flag does not support depth!');\n        }\n        _this._colorDescs = new Array(colors.length);\n        _this._colorViews = new Array(colors.length);\n        _this._colorFormats = new Array(colors.length);\n        _this._colorNames = {};\n        _this._colors = colors.map(function (info, index) {\n            var color = renderEnv_1.default.device.createTexture(_this._colorDescs[index] = {\n                label: _this.hash + '_color_' + (info.name || index),\n                size: { width: width, height: height },\n                format: info.format || (forCompute ? 'rgba8unorm' : renderEnv_1.default.swapChainFormat),\n                usage: (GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING) | (forCompute ? GPUTextureUsage.STORAGE_BINDING : 0)\n            });\n            _this._colorViews[index] = color.createView({ label: color.label });\n            _this._colorFormats[index] = _this._colorDescs[index].format;\n            if (info.name) {\n                _this._colorNames[info.name] = index;\n            }\n            return color;\n        });\n        if (depthStencil) {\n            _this._depthStencil = renderEnv_1.default.device.createTexture(_this._depthDesc = {\n                label: _this.hash + '_depth',\n                size: { width: width, height: height },\n                format: depthStencil.format || (!depthStencil.needStencil ? 'depth24plus' : 'depth24plus-stencil8'),\n                usage: GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.TEXTURE_BINDING,\n            });\n            _this._depthStencilView = _this._depthStencil.createView({ label: _this.hash + '_depth' });\n        }\n        _this._pipelineHash = shared_1.hashCode(_this._colorDescs.map(function (c) { return c.format; }).join('') + (_this._depthDesc ? _this._depthDesc.format : ''));\n        return _this;\n    }\n    RenderTexture.IS = function (value) {\n        return !!value.isRenderTexture;\n    };\n    Object.defineProperty(RenderTexture.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"pipelineHash\", {\n        get: function () {\n            return this._pipelineHash;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"colorView\", {\n        get: function () {\n            return this._colorViews[0];\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"depthStencilView\", {\n        get: function () {\n            return this._depthStencilView;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"colorFormat\", {\n        get: function () {\n            return this._colorDescs[0].format;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"depthStencilFormat\", {\n        get: function () {\n            var _a;\n            return (_a = this._depthDesc) === null || _a === void 0 ? void 0 : _a.format;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"colorViews\", {\n        get: function () {\n            return this._colorViews;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderTexture.prototype, \"colorFormats\", {\n        get: function () {\n            return this._colorFormats;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RenderTexture.prototype.getColorViewByName = function (name) {\n        return this._colorViews[this._colorNames[name]];\n    };\n    RenderTexture.CLASS_NAME = 'RenderTexture';\n    return RenderTexture;\n}(HObject_1.default));\nexports.default = RenderTexture;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmVuZGVyVGV4dHVyZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlJlbmRlclRleHR1cmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBT0EscUNBQWdDO0FBQ2hDLHlDQUFvQztBQUNwQyxtQ0FBa0M7QUFnQmxDO0lBQTJDLGlDQUFPO0lBeURoRCx1QkFBc0IsUUFBK0I7UUFBckQsWUFDRSxpQkFBTyxTQWtEUjtRQW5EcUIsY0FBUSxHQUFSLFFBQVEsQ0FBdUI7UUFuRDlDLHFCQUFlLEdBQVksSUFBSSxDQUFDO1FBc0Q5QixJQUFBLEtBQUssR0FBOEMsUUFBUSxNQUF0RCxFQUFFLE1BQU0sR0FBc0MsUUFBUSxPQUE5QyxFQUFFLE1BQU0sR0FBOEIsUUFBUSxPQUF0QyxFQUFFLFlBQVksR0FBZ0IsUUFBUSxhQUF4QixFQUFFLFVBQVUsR0FBSSxRQUFRLFdBQVosQ0FBYTtRQUVuRSxLQUFJLENBQUMsTUFBTSxHQUFHLEtBQUssQ0FBQztRQUNwQixLQUFJLENBQUMsT0FBTyxHQUFHLE1BQU0sQ0FBQztRQUV0QixJQUFJLFVBQVUsSUFBSSxZQUFZLEVBQUU7WUFDOUIsTUFBTSxJQUFJLEtBQUssQ0FBQyw0REFBNEQsQ0FBQyxDQUFDO1NBQy9FO1FBRUQsS0FBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUMsS0FBSSxDQUFDLFdBQVcsR0FBRyxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDNUMsS0FBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLEtBQUssQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7UUFDOUMsS0FBSSxDQUFDLFdBQVcsR0FBRyxFQUFFLENBQUM7UUFFdEIsS0FBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsR0FBRyxDQUFDLFVBQUMsSUFBSSxFQUFFLEtBQUs7WUFDcEMsSUFBTSxLQUFLLEdBQUcsbUJB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QUM1QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLG9DQUFTO2FBQWI7WUFDRSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDN0IsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwyQ0FBZ0I7YUFBcEI7WUFDRSxPQUFPLElBQUksQ0FBQyxpQkFBaUIsQ0FBQztRQUNoQyxDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHNDQUFXO2FBQWY7WUFDRSxPQUFPLElBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDO1FBQ3BDLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNkNBQWtCO2FBQXRCOztZQUNFLGFBQU8sSUFBSSxDQUFDLFVBQVUsMENBQUUsTUFBTSxDQUFDO1FBQ2pDLENBQUM7OztPQUFBO0lBRUQsc0JBQUkscUNBQVU7YUFBZDtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztRQUMxQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHVDQUFZO2FBQWhCO1lBQ0UsT0FBTyxJQUFJLENBQUMsYUFBYSxDQUFDO1FBQzVCLENBQUM7OztPQUFBO0lBdURNLDBDQUFrQixHQUF6QixVQUEwQixJQUFZO1FBQ3BDLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQTNHYSx3QkFBVSxHQUFXLGVBQWUsQ0FBQztJQTRHckQsb0JBQUM7Q0FBQSxBQWpIRCxDQUEyQyxpQkFBTyxHQWlIakQ7a0JBakhvQixhQUFhIiwic291cmNlc0NvbnRlbnQiOlsiXG4vKipcbiAqIEBGaWxlICAgOiBSZW5kZXJUZXh0dXJlLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi825LiL5Y2IMTE6MTQ6MjJcbiAqL1xuaW1wb3J0IEhPYmplY3QgZnJvbSAnLi9IT2JqZWN0JztcbmltcG9ydCByZW5kZXJFbnYgZnJvbSAnLi9yZW5kZXJFbnYnO1xuaW1wb3J0IHtoYXNoQ29kZX0gZnJvbSAnLi9zaGFyZWQnO1xuXG5leHBvcnQgaW50ZXJmYWNlIElSZW5kZXJUZXh0dXJlT3B0aW9ucyB7XG4gIHdpZHRoOiBudW1iZXI7XG4gIGhlaWdodDogbnVtYmVyO1xuICBmb3JDb21wdXRlPzogYm9vbGVhbjtcbiAgY29sb3JzOiB7XG4gICAgbmFtZT86IHN0cmluZyxcbiAgICBmb3JtYXQ/OiBHUFVUZXh0dXJlRm9ybWF0XG4gIH1bXTtcbiAgZGVwdGhTdGVuY2lsPzoge1xuICAgIGZvcm1hdD86IEdQVVRleHR1cmVGb3JtYXQ7XG4gICAgbmVlZFN0ZW5jaWw/OiBib29sZWFuO1xuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBSZW5kZXJUZXh0dXJlIGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgSVModmFsdWU6IGFueSk6IHZhbHVlIGlzIFJlbmRlclRleHR1cmUge1xuICAgIHJldHVybiAhIXZhbHVlLmlzUmVuZGVyVGV4dHVyZTtcbiAgfVxuXG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ1JlbmRlclRleHR1cmUnO1xuICBwdWJsaWMgaXNSZW5kZXJUZXh0dXJlOiBib29sZWFuID0gdHJ1ZTtcblxuICBwcm90ZWN0ZWQgX3dpZHRoOiBudW1iZXI7XG4gIHByb3RlY3RlZCBfaGVpZ2h0OiBudW1iZXI7XG4gIHByb3RlY3RlZCBfZm9yQ29tcHV0ZTogYm9vbGVhbjtcbiAgcHJvdGVjdGVkIF9jb2xvckRlc2NzOiBHUFVUZXh0dXJlRGVzY3JpcHRvcltdO1xuICBwcm90ZWN0ZWQgX2RlcHRoRGVzYzogR1BVVGV4dHVyZURlc2NyaXB0b3I7XG4gIHByb3RlY3RlZCBfY29sb3JzOiBHUFVUZXh0dXJlW107XG4gIHByb3RlY3RlZCBfY29sb3JWaWV3czogR1BVVGV4dHVyZVZpZXdbXTtcbiAgcHJvdGVjdGVkIF9jb2xvckZvcm1hdHM6IEdQVVRleHR1cmVGb3JtYXRbXTtcbiAgcHJvdGVjdGVkIF9kZXB0aFN0ZW5jaWw6IEdQVVRleHR1cmU7XG4gIHByb3RlY3RlZCBfZGVwdGhTdGVuY2lsVmlldzogR1BVVGV4dHVyZVZpZXc7XG4gIHByb3RlY3RlZCBfcGlwZWxpbmVIYXNoOiBudW1iZXI7XG4gIHByb3RlY3RlZCBfY29sb3JOYW1lczoge1tuYW1lOiBzdHJpbmddOiBudW1iZXJ9O1xuXG4gIGdldCB3aWR0aCgpIHtcbiAgICByZXR1cm4gdGhpcy5fd2lkdGg7XG4gIH1cblxuICBnZXQgaGVpZ2h0KCkge1xuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XG4gIH1cblxuICBnZXQgcGlwZWxpbmVIYXNoKCkge1xuICAgIHJldHVybiB0aGlzLl9waXBlbGluZUhhc2g7XG4gIH1cblxuICBnZXQgY29sb3JWaWV3KCkge1xuICAgIHJldHVybiB0aGlzLl9jb2xvclZpZXdzWzBdO1xuICB9XG5cbiAgZ2V0IGRlcHRoU3RlbmNpbFZpZXcoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RlcHRoU3RlbmNpbFZpZXc7XG4gIH1cblxuICBnZXQgY29sb3JGb3JtYXQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbG9yRGVzY3NbMF0uZm9ybWF0O1xuICB9XG5cbiAgZ2V0IGRlcHRoU3RlbmNpbEZvcm1hdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGVwdGhEZXNjPy5mb3JtYXQ7XG4gIH1cblxuICBnZXQgY29sb3JWaWV3cygpIHtcbiAgICByZXR1cm4gdGhpcy5fY29sb3JWaWV3cztcbiAgfVxuXG4gIGdldCBjb2xvckZvcm1hdHMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NvbG9yRm9ybWF0cztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfb3B0aW9uczogSVJlbmRlclRleHR1cmVPcHRpb25zKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGNvbnN0IHt3aWR0aCwgaGVpZ2h0LCBjb2xvcnMsIGRlcHRoU3RlbmNpbCwgZm9yQ29tcHV0ZX0gPSBfb3B0aW9ucztcblxuICAgIHRoaXMuX3dpZHRoID0gd2lkdGg7XG4gICAgdGhpcy5faGVpZ2h0ID0gaGVpZ2h0O1xuXG4gICAgaWYgKGZvckNvbXB1dGUgJiYgZGVwdGhTdGVuY2lsKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlbmRlclRleHR1cmUgd2l0aCBmb3JDb21wdXRlIGZsYWcgZG9lcyBub3Qgc3VwcG9ydCBkZXB0aCEnKTtcbiAgICB9XG5cbiAgICB0aGlzLl9jb2xvckRlc2NzID0gbmV3IEFycmF5KGNvbG9ycy5sZW5ndGgpO1xuICAgIHRoaXMuX2NvbG9yVmlld3MgPSBuZXcgQXJyYXkoY29sb3JzLmxlbmd0aCk7XG4gICAgdGhpcy5fY29sb3JGb3JtYXRzID0gbmV3IEFycmF5KGNvbG9ycy5sZW5ndGgpO1xuICAgIHRoaXMuX2NvbG9yTmFtZXMgPSB7fTtcblxuICAgIHRoaXMuX2NvbG9ycyA9IGNvbG9ycy5tYXAoKGluZm8sIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBjb2xvciA9IHJlbmRlckVudi5kZXZpY2UuY3JlYXRlVGV4dHVyZSh0aGlzLl9jb2xvckRlc2NzW2luZGV4XSA9IHtcbiAgICAgICAgbGFiZWw6IHRoaXMuaGFzaCArICdfY29sb3JfJyArIChpbmZvLm5hbWUgfHwgaW5kZXgpLFxuICAgICAgICBzaXplOiB7d2lkdGgsIGhlaWdodH0sXG4gICAgICAgIGZvcm1hdDogaW5mby5mb3JtYXQgfHwgKGZvckNvbXB1dGUgPyAncmdiYTh1bm9ybScgOiByZW5kZXJFbnYuc3dhcENoYWluRm9ybWF0KSxcbiAgICAgICAgdXNhZ2U6IChcbiAgICAgICAgICBHUFVUZXh0dXJlVXNhZ2UuUkVOREVSX0FUVEFDSE1FTlQgfCBHUFVUZXh0dXJlVXNhZ2UuVEVYVFVSRV9CSU5ESU5HXG4gICAgICAgICkgfCAoXG4gICAgICAgICAgZm9yQ29tcHV0ZSA/IEdQVVRleHR1cmVVc2FnZS5TVE9SQUdFX0JJTkRJTkcgOiAwXG4gICAgICAgIClcbiAgICAgIH0gYXMgR1BVVGV4dHVyZURlc2NyaXB0b3IpO1xuXG4gICAgICB0aGlzLl9jb2xvclZpZXdzW2luZGV4XSA9IGNvbG9yLmNyZWF0ZVZpZXcoe2xhYmVsOiBjb2xvci5sYWJlbH0pO1xuICAgICAgdGhpcy5fY29sb3JGb3JtYXRzW2luZGV4XSA9IHRoaXMuX2NvbG9yRGVzY3NbaW5kZXhdLmZvcm1hdDtcblxuICAgICAgaWYgKGluZm8ubmFtZSkge1xuICAgICAgICB0aGlzLl9jb2xvck5hbWVzW2luZm8ubmFtZV0gPSBpbmRleDtcbiAgICAgIH1cblxuICAgICAgcmV0dXJuIGNvbG9yO1xuICAgIH0pXG5cbiAgICBpZiAoZGVwdGhTdGVuY2lsKSB7XG4gICAgICB0aGlzLl9kZXB0aFN0ZW5jaWwgPSByZW5kZXJFbnYuZGV2aWNlLmNyZWF0ZVRleHR1cmUodGhpcy5fZGVwdGhEZXNjID0ge1xuICAgICAgICBsYWJlbDogdGhpcy5oYXNoICsgJ19kZXB0aCcsXG4gICAgICAgIHNpemU6IHt3aWR0aCwgaGVpZ2h0fSxcbiAgICAgICAgZm9ybWF0OiBkZXB0aFN0ZW5jaWwuZm9ybWF0IHx8ICghZGVwdGhTdGVuY2lsLm5lZWRTdGVuY2lsID8gJ2RlcHRoMjRwbHVzJyA6ICdkZXB0aDI0cGx1cy1zdGVuY2lsOCcpLFxuICAgICAgICB1c2FnZTogR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UIHwgR1BVVGV4dHVyZVVzYWdlLlRFWFRVUkVfQklORElORyxcbiAgICAgICAgXG4gICAgICB9IGFzIEdQVVRleHR1cmVEZXNjcmlwdG9yKTtcbiAgICAgIHRoaXMuX2RlcHRoU3RlbmNpbFZpZXcgPSB0aGlzLl9kZXB0aFN0ZW5jaWwuY3JlYXRlVmlldyh7bGFiZWw6IHRoaXMuaGFzaCArICdfZGVwdGgnfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fcGlwZWxpbmVIYXNoID0gaGFzaENvZGUodGhpcy5fY29sb3JEZXNjcy5tYXAoYyA9PiBjLmZvcm1hdCkuam9pbignJykgKyAodGhpcy5fZGVwdGhEZXNjID8gdGhpcy5fZGVwdGhEZXNjLmZvcm1hdCA6ICcnKSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0Q29sb3JWaWV3QnlOYW1lKG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB0aGlzLl9jb2xvclZpZXdzW3RoaXMuX2NvbG9yTmFtZXNbbmFtZV1dO1xuICB9XG59XG4iXX0=","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar buildin_1 = require(\"../buildin\");\nvar HObject_1 = require(\"./HObject\");\nvar ImageMesh_1 = require(\"./ImageMesh\");\nvar Light_1 = require(\"./Light\");\nvar Material_1 = require(\"./Material\");\nvar Mesh_1 = require(\"./Mesh\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar RenderTexture_1 = require(\"./RenderTexture\");\nvar Scene = (function (_super) {\n    __extends(Scene, _super);\n    function Scene() {\n        var _this = _super.call(this) || this;\n        _this.isScene = true;\n        _this._renderTarget = _this._screen = new RenderTexture_1.default({ width: renderEnv_1.default.width, height: renderEnv_1.default.height, colors: [{}], depthStencil: { needStencil: true } });\n        _this._blit = new ImageMesh_1.default(new Material_1.default(buildin_1.buildinEffects.iBlit, { u_texture: _this._screen }));\n        return _this;\n    }\n    Object.defineProperty(Scene.prototype, \"rootNode\", {\n        get: function () {\n            return this._rootNode;\n        },\n        set: function (node) {\n            this._rootNode = node;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"screen\", {\n        get: function () {\n            return this._screen;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Scene.prototype, \"lights\", {\n        get: function () {\n            return this._lights;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Scene.prototype.cullCamera = function (camera) {\n        var meshes = [];\n        this._meshes.forEach(function (mesh) {\n            var distance = camera.cull(mesh);\n            if (distance >= 0) {\n                mesh.sortZ = distance;\n                meshes.push(mesh);\n            }\n        });\n        meshes.sort(function (a, b) { return a.sortZ - b.sortZ; });\n        return meshes;\n    };\n    Scene.prototype.setRenderTarget = function (target) {\n        this._renderTarget = target ? target : this._screen;\n    };\n    Scene.prototype.startFrame = function (dt) {\n        var _this = this;\n        this._gameTime += dt;\n        this._meshes = [];\n        this._lights = [];\n        this._rootNode.updateSubTree(function (node) {\n            if (Mesh_1.default.IS(node)) {\n                _this._meshes.push(node);\n            }\n            else if (Light_1.default.IS(node)) {\n                _this._lights.push(node);\n            }\n        });\n        var lightInfos = renderEnv_1.default.getUniform('u_lightInfos');\n        if (lightInfos) {\n            this._lights.forEach(function (l, i) {\n                if (i < 4) {\n                    lightInfos.set(l.ubInfo, i * 16);\n                }\n            });\n            renderEnv_1.default.setUniform('u_lightInfos', lightInfos);\n        }\n        renderEnv_1.default.setUniform('u_gameTime', new Float32Array([this._gameTime / 1000]));\n        this._command = renderEnv_1.default.device.createCommandEncoder();\n    };\n    Scene.prototype.renderCamera = function (camera, meshes, clear) {\n        if (clear === void 0) { clear = true; }\n        camera.render(this._command, this._renderTarget, meshes, clear);\n    };\n    Scene.prototype.renderImages = function (meshes, clear) {\n        if (clear === void 0) { clear = true; }\n        var view = this._renderTarget.colorView;\n        var renderPassDescriptor = {\n            colorAttachments: [{\n                    view: view,\n                    loadValue: clear ? { r: 0, g: 0, b: 0, a: 1 } : 'load',\n                    storeOp: 'store'\n                }]\n        };\n        var pass = this._command.beginRenderPass(renderPassDescriptor);\n        pass.setBindGroup(0, renderEnv_1.default.bindingGroup);\n        for (var _i = 0, meshes_1 = meshes; _i < meshes_1.length; _i++) {\n            var mesh = meshes_1[_i];\n            mesh.render(pass);\n        }\n        pass.endPass();\n    };\n    Scene.prototype.computeUnits = function (units) {\n        var pass = this._command.beginComputePass();\n        pass.setBindGroup(0, renderEnv_1.default.bindingGroup);\n        for (var _i = 0, units_1 = units; _i < units_1.length; _i++) {\n            var unit = units_1[_i];\n            unit.compute(pass);\n        }\n        pass.endPass();\n    };\n    Scene.prototype.copyBuffer = function (src, dst, size) {\n        this._command.copyBufferToBuffer(src, 0, dst, 0, size);\n    };\n    Scene.prototype.endFrame = function () {\n        var view = renderEnv_1.default.currentTexture.createView();\n        var renderPassDescriptor = {\n            colorAttachments: [{\n                    view: view,\n                    loadValue: { r: 0, g: 0, b: 0, a: 1 },\n                    storeOp: 'store'\n                }]\n        };\n        var pass = this._command.beginRenderPass(renderPassDescriptor);\n        pass.setBindGroup(0, renderEnv_1.default.bindingGroup);\n        this._blit.render(pass);\n        pass.endPass();\n        renderEnv_1.default.device.queue.submit([this._command.finish()]);\n    };\n    Scene.CLASS_NAME = 'Scene';\n    return Scene;\n}(HObject_1.default));\nexports.default = Scene;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiU2NlbmUuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJTY2VuZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFNQSxzQ0FBNEM7QUFHNUMscUNBQWdDO0FBQ2hDLHlDQUFvQztBQUNwQyxpQ0FBNEI7QUFDNUIsdUNBQWtDO0FBQ2xDLCtCQUEwQjtBQUUxQix5Q0FBb0M7QUFDcEMsaURBQTRDO0FBRTVDO0lBQW1DLHlCQUFPO0lBNkJ4QztRQUFBLFlBQ0UsaUJBQU8sU0FJUjtRQWhDTSxhQUFPLEdBQVksSUFBSSxDQUFDO1FBOEI3QixLQUFJLENBQUMsYUFBYSxHQUFHLEtBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSx1QkFBYSxDQUFDLEVBQUMsS0FBSyxFQUFFLG1CQUFTLENBQUMsS0FBSyxFQUFFLE1BQU0sRUFBRSxtQkFBUyxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxZQUFZLEVBQUUsRUFBQyxXQUFXLEVBQUUsSUFBSSxFQUFDLEVBQUMsQ0FBQyxDQUFDO1FBQzNKLEtBQUksQ0FBQyxLQUFLLEdBQUcsSUFBSSxtQkFBUyxDQUFDLElBQUksa0JBQVEsQ0FBQyx3QkFBYyxDQUFDLEtBQUssRUFBRSxFQUFDLFNBQVMsRUFBRSxLQUFJLENBQUMsT0FBTyxFQUFDLENBQUMsQ0FBQyxDQUFDOztJQUM1RixDQUFDO0lBckJELHNCQUFJLDJCQUFRO2FBSVo7WUFDRSxPQUFPLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDeEIsQ0FBQzthQU5ELFVBQWEsSUFBVTtZQUNyQixJQUFJLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQztRQUN4QixDQUFDOzs7T0FBQTtJQU1ELHNCQUFJLHlCQUFNO2FBQVY7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDdEIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSx5QkFBTTthQUFWO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7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USxDQUFDLGtCQUFrQixDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsR0FBRyxFQUFFLENBQUMsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUN6RCxDQUFDO0lBRU0sd0JBQVEsR0FBZjtRQUNFLElBQU0sSUFBSSxHQUFHLG1CQUFTLENBQUMsY0FBYyxDQUFDLFVBQVUsRUFBRSxDQUFDO1FBQ25ELElBQU0sb0JBQW9CLEdBQTRCO1lBQ3BELGdCQUFnQixFQUFFLENBQUM7b0JBQ2pCLElBQUksTUFBQTtvQkFDSixTQUFTLEVBQUUsRUFBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxFQUFDO29CQUNuQyxPQUFPLEVBQUUsT0FBcUI7aUJBQy9CLENBQUM7U0FDSCxDQUFDO1FBRUYsSUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxlQUFlLENBQUMsb0JBQW9CLENBQUMsQ0FBQztRQUNqRSxJQUFJLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxtQkFBUyxDQUFDLFlBQVksQ0FBQyxDQUFDO1FBQzdDLElBQUksQ0FBQyxLQUFLLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQ3hCLElBQUksQ0FBQyxPQUFPLEVBQUUsQ0FBQztRQUVmLG1CQUFTLENBQUMsTUFBTSxDQUFDLEtBQUssQ0FBQyxNQUFNLENBQUMsQ0FBQyxJQUFJLENBQUMsUUFBUSxDQUFDLE1BQU0sRUFBRSxDQUFDLENBQUMsQ0FBQztJQUMxRCxDQUFDO0lBcEphLGdCQUFVLEdBQVcsT0FBTyxDQUFDO0lBcUo3QyxZQUFDO0NBQUEsQUF0SkQsQ0FBbUMsaUJBQU8sR0FzSnpDO2tCQXRKb0IsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IFNjZW5lLnRzXG4gKiBAQXV0aG9yIDogZHR5c2t5IChkdHlza3lAb3V0bG9vay5jb20pXG4gKiBATGluayAgIDogZHR5c2t5Lm1vZVxuICogQERhdGUgICA6IDIwMjEvNi825LiL5Y2INzoyNToyMlxuICovXG5pbXBvcnQgeyBidWlsZGluRWZmZWN0cyB9IGZyb20gJy4uL2J1aWxkaW4nO1xuaW1wb3J0IENhbWVyYSBmcm9tICcuL0NhbWVyYSc7XG5pbXBvcnQgQ29tcHV0ZVVuaXQgZnJvbSAnLi9Db21wdXRlVW5pdCc7XG5pbXBvcnQgSE9iamVjdCBmcm9tICcuL0hPYmplY3QnO1xuaW1wb3J0IEltYWdlTWVzaCBmcm9tICcuL0ltYWdlTWVzaCc7XG5pbXBvcnQgTGlnaHQgZnJvbSAnLi9MaWdodCc7XG5pbXBvcnQgTWF0ZXJpYWwgZnJvbSAnLi9NYXRlcmlhbCc7XG5pbXBvcnQgTWVzaCBmcm9tICcuL01lc2gnO1xuaW1wb3J0IE5vZGUgZnJvbSAnLi9Ob2RlJztcbmltcG9ydCByZW5kZXJFbnYgZnJvbSAnLi9yZW5kZXJFbnYnO1xuaW1wb3J0IFJlbmRlclRleHR1cmUgZnJvbSAnLi9SZW5kZXJUZXh0dXJlJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2NlbmUgZXh0ZW5kcyBIT2JqZWN0IHtcbiAgcHVibGljIHN0YXRpYyBDTEFTU19OQU1FOiBzdHJpbmcgPSAnU2NlbmUnO1xuICBwdWJsaWMgaXNTY2VuZTogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJvdGVjdGVkIF9nYW1lVGltZTogbnVtYmVyO1xuICBwcm90ZWN0ZWQgX3Jvb3ROb2RlOiBOb2RlO1xuICBwcm90ZWN0ZWQgX21lc2hlczogTWVzaFtdO1xuICBwcm90ZWN0ZWQgX2xpZ2h0czogTGlnaHRbXTtcbiAgcHJvdGVjdGVkIF9jb21tYW5kOiBHUFVDb21tYW5kRW5jb2RlcjtcbiAgcHJvdGVjdGVkIF9yZW5kZXJUYXJnZXQ6IFJlbmRlclRleHR1cmU7XG4gIHByb3RlY3RlZCBfc2NyZWVuOiBSZW5kZXJUZXh0dXJlO1xuICBwcm90ZWN0ZWQgX2JsaXQ6IEltYWdlTWVzaDtcblxuICBzZXQgcm9vdE5vZGUobm9kZTogTm9kZSkge1xuICAgIHRoaXMuX3Jvb3ROb2RlID0gbm9kZTtcbiAgfVxuXG4gIGdldCByb290Tm9kZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fcm9vdE5vZGU7XG4gIH1cblxuICBnZXQgc2NyZWVuKCkge1xuICAgIHJldHVybiB0aGlzLl9zY3JlZW47XG4gIH1cblxuICBnZXQgbGlnaHRzKCkge1xuICAgIHJldHVybiB0aGlzLl9saWdodHM7XG4gIH1cblxuICBjb25zdHJ1Y3RvcigpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fcmVuZGVyVGFyZ2V0ID0gdGhpcy5fc2NyZWVuID0gbmV3IFJlbmRlclRleHR1cmUoe3dpZHRoOiByZW5kZXJFbnYud2lkdGgsIGhlaWdodDogcmVuZGVyRW52LmhlaWdodCwgY29sb3JzOiBbe31dLCBkZXB0aFN0ZW5jaWw6IHtuZWVkU3RlbmNpbDogdHJ1ZX19KTtcbiAgICB0aGlzLl9ibGl0ID0gbmV3IEltYWdlTWVzaChuZXcgTWF0ZXJpYWwoYnVpbGRpbkVmZmVjdHMuaUJsaXQsIHt1X3RleHR1cmU6IHRoaXMuX3NjcmVlbn0pKTtcbiAgfVxuXG4gIHB1YmxpYyBjdWxsQ2FtZXJhKGNhbWVyYTogQ2FtZXJhKTogTWVzaFtdIHtcbiAgICBjb25zdCBtZXNoZXM6IE1lc2hbXSA9IFtdO1xuXG4gICAgdGhpcy5fbWVzaGVzLmZvckVhY2gobWVzaCA9PiB7XG4gICAgICBjb25zdCBkaXN0YW5jZSA9IGNhbWVyYS5jdWxsKG1lc2gpO1xuXG4gICAgICBpZiAoZGlzdGFuY2UgPj0gMCkge1xuICAgICAgICBtZXNoLnNvcnRaID0gZGlzdGFuY2U7XG4gICAgICAgIG1lc2hlcy5wdXNoKG1lc2gpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgbWVzaGVzLnNvcnQoKGEsIGIpID0+IGEuc29ydFogLSBiLnNvcnRaKTtcblxuICAgIHJldHVybiBtZXNoZXM7XG4gIH1cblxuICBwdWJsaWMgc2V0UmVuZGVyVGFyZ2V0KHRhcmdldDogUmVuZGVyVGV4dHVyZSB8IG51bGwpIHtcbiAgICB0aGlzLl9yZW5kZXJUYXJnZXQgPSB0YXJnZXQgPyB0YXJnZXQgOiB0aGlzLl9zY3JlZW47XG4gIH1cblxuICBwdWJsaWMgc3RhcnRGcmFtZShkdDogbnVtYmVyKSB7XG4gICAgdGhpcy5fZ2FtZVRpbWUgKz0gZHQ7XG4gICAgdGhpcy5fbWVzaGVzID0gW107XG4gICAgdGhpcy5fbGlnaHRzID0gW107XG5cbiAgICB0aGlzLl9yb290Tm9kZS51cGRhdGVTdWJUcmVlKG5vZGUgPT4ge1xuICAgICAgaWYgKE1lc2guSVMobm9kZSkpIHtcbiAgICAgICAgdGhpcy5fbWVzaGVzLnB1c2gobm9kZSk7XG4gICAgICB9IGVsc2UgaWYgKExpZ2h0LklTKG5vZGUpKSB7XG4gICAgICAgIHRoaXMuX2xpZ2h0cy5wdXNoKG5vZGUpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgY29uc3QgbGlnaHRJbmZvcyA9IHJlbmRlckVudi5nZXRVbmlmb3JtKCd1X2xpZ2h0SW5mb3MnKSBhcyBGbG9hdDMyQXJyYXk7XG4gICAgaWYgKGxpZ2h0SW5mb3MpIHtcbiAgICAgIHRoaXMuX2xpZ2h0cy5mb3JFYWNoKChsLCBpKSA9PiB7XG4gICAgICAgIGlmIChpIDwgNCkge1xuICAgICAgICAgIGxpZ2h0SW5mb3Muc2V0KGwudWJJbmZvLCBpICogMTYpO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHJlbmRlckVudi5zZXRVbmlmb3JtKCd1X2xpZ2h0SW5mb3MnLCBsaWdodEluZm9zKTsgXG4gICAgfVxuXG4gICAgcmVuZGVyRW52LnNldFVuaWZvcm0oJ3VfZ2FtZVRpbWUnLCBuZXcgRmxvYXQzMkFycmF5KFt0aGlzLl9nYW1lVGltZSAvIDEwMDBdKSk7XG4gICAgdGhpcy5fY29tbWFuZCA9IHJlbmRlckVudi5kZXZpY2UuY3JlYXRlQ29tbWFuZEVuY29kZXIoKTtcbiAgfVxuXG4gIHB1YmxpYyByZW5kZXJDYW1lcmEoY2FtZXJhOiBDYW1lcmEsIG1lc2hlczogTWVzaFtdLCBjbGVhcjogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBjYW1lcmEucmVuZGVyKFxuICAgICAgdGhpcy5fY29tbWFuZCxcbiAgICAgIHRoaXMuX3JlbmRlclRhcmdldCxcbiAgICAgIG1lc2hlcyxcbiAgICAgIGNsZWFyXG4gICAgKTtcbiAgfVxuXG4gIC8vIHB1YmxpYyByZW5kZXJMaWdodCgpIHtcblxuICAvLyB9XG5cbiAgcHVibGljIHJlbmRlckltYWdlcyhtZXNoZXM6IEltYWdlTWVzaFtdLCBjbGVhcjogYm9vbGVhbiA9IHRydWUpIHtcbiAgICBjb25zdCB2aWV3ID0gdGhpcy5fcmVuZGVyVGFyZ2V0LmNvbG9yVmlldztcblxuICAgIGNvbnN0IHJlbmRlclBhc3NEZXNjcmlwdG9yOiBHUFVSZW5kZXJQYXNzRGVzY3JpcHRvciA9IHtcbiAgICAgIGNvbG9yQXR0YWNobWVudHM6IFt7XG4gICAgICAgIHZpZXcsXG4gICAgICAgIGxvYWRWYWx1ZTogY2xlYXIgPyB7cjogMCwgZzogMCwgYjogMCwgYTogMX0gOiAnbG9hZCcgYXMgR1BVTG9hZE9wLFxuICAgICAgICBzdG9yZU9wOiAnc3RvcmUnIGFzIEdQVVN0b3JlT3BcbiAgICAgIH1dXG4gICAgfTtcblxuICAgIGNvbnN0IHBhc3MgPSB0aGlzLl9jb21tYW5kLmJlZ2luUmVuZGVyUGFzcyhyZW5kZXJQYXNzRGVzY3JpcHRvcik7XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgcmVuZGVyRW52LmJpbmRpbmdHcm91cCk7XG5cbiAgICBmb3IgKGNvbnN0IG1lc2ggb2YgbWVzaGVzKSB7XG4gICAgICBtZXNoLnJlbmRlcihwYXNzKTtcbiAgICB9XG5cbiAgICBwYXNzLmVuZFBhc3MoKTtcbiAgfVxuXG4gIHB1YmxpYyBjb21wdXRlVW5pdHModW5pdHM6IENvbXB1dGVVbml0W10pIHtcbiAgICBjb25zdCBwYXNzID0gdGhpcy5fY29tbWFuZC5iZWdpbkNvbXB1dGVQYXNzKCk7XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgcmVuZGVyRW52LmJpbmRpbmdHcm91cCk7XG5cbiAgICBmb3IgKGNvbnN0IHVuaXQgb2YgdW5pdHMpIHtcbiAgICAgIHVuaXQuY29tcHV0ZShwYXNzKTtcbiAgICB9XG5cbiAgICBwYXNzLmVuZFBhc3MoKTtcbiAgfVxuXG4gIHB1YmxpYyBjb3B5QnVmZmVyKHNyYzogR1BVQnVmZmVyLCBkc3Q6IEdQVUJ1ZmZlciwgc2l6ZTogbnVtYmVyKSB7XG4gICAgdGhpcy5fY29tbWFuZC5jb3B5QnVmZmVyVG9CdWZmZXIoc3JjLCAwLCBkc3QsIDAsIHNpemUpO1xuICB9XG5cbiAgcHVibGljIGVuZEZyYW1lKCkge1xuICAgIGNvbnN0IHZpZXcgPSByZW5kZXJFbnYuY3VycmVudFRleHR1cmUuY3JlYXRlVmlldygpO1xuICAgIGNvbnN0IHJlbmRlclBhc3NEZXNjcmlwdG9yOiBHUFVSZW5kZXJQYXNzRGVzY3JpcHRvciA9IHtcbiAgICAgIGNvbG9yQXR0YWNobWVudHM6IFt7XG4gICAgICAgIHZpZXcsXG4gICAgICAgIGxvYWRWYWx1ZToge3I6IDAsIGc6IDAsIGI6IDAsIGE6IDF9LFxuICAgICAgICBzdG9yZU9wOiAnc3RvcmUnIGFzIEdQVVN0b3JlT3BcbiAgICAgIH1dXG4gICAgfTtcblxuICAgIGNvbnN0IHBhc3MgPSB0aGlzLl9jb21tYW5kLmJlZ2luUmVuZGVyUGFzcyhyZW5kZXJQYXNzRGVzY3JpcHRvcik7XG4gICAgcGFzcy5zZXRCaW5kR3JvdXAoMCwgcmVuZGVyRW52LmJpbmRpbmdHcm91cCk7XG4gICAgdGhpcy5fYmxpdC5yZW5kZXIocGFzcyk7XG4gICAgcGFzcy5lbmRQYXNzKCk7XG5cbiAgICByZW5kZXJFbnYuZGV2aWNlLnF1ZXVlLnN1Ym1pdChbdGhpcy5fY29tbWFuZC5maW5pc2goKV0pO1xuICB9XG59Il19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"./HObject\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar shared_1 = require(\"./shared\");\nvar Texture = (function (_super) {\n    __extends(Texture, _super);\n    function Texture(_width, _height, _src, _format) {\n        if (_format === void 0) { _format = 'rgba8unorm'; }\n        var _this = _super.call(this) || this;\n        _this._width = _width;\n        _this._height = _height;\n        _this._src = _src;\n        _this._format = _format;\n        _this.isTexture = true;\n        if (shared_1.isTextureSourceArray(_src)) {\n            _this._isArray = true;\n            _this._arrayCount = _src.length;\n        }\n        else {\n            _this._isArray = false;\n            _this._arrayCount = 1;\n        }\n        _this._gpuTexture = renderEnv_1.default.device.createTexture({\n            label: _this.hash,\n            size: { width: _this._width, height: _this._height, depthOrArrayLayers: _this._arrayCount },\n            format: _format || 'rgba8unorm',\n            usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT\n        });\n        if (shared_1.isTextureSourceArray(_src)) {\n            _src.forEach(function (src, index) { return _this._load(src, index); });\n            _this._gpuTextureView = _this._gpuTexture.createView({ dimension: '2d-array', arrayLayerCount: _this._arrayCount });\n        }\n        else {\n            _this._load(_src);\n            _this._gpuTextureView = _this._gpuTexture.createView();\n        }\n        return _this;\n    }\n    Object.defineProperty(Texture.prototype, \"width\", {\n        get: function () {\n            return this._width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Texture.prototype, \"height\", {\n        get: function () {\n            return this._height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Texture.prototype, \"format\", {\n        get: function () {\n            return this._format;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Texture.prototype, \"source\", {\n        get: function () {\n            return this._src;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Texture.prototype, \"gpuTexture\", {\n        get: function () {\n            return this._gpuTexture;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Texture.prototype, \"view\", {\n        get: function () {\n            return this._gpuTextureView;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Texture.prototype, \"isArray\", {\n        get: function () {\n            return this._isArray;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Texture.prototype._load = function (src, layer) {\n        if (layer === void 0) { layer = 0; }\n        if (src instanceof ImageBitmap) {\n            this._loadImg(src, layer);\n        }\n        else {\n            this._loadBuffer(src, layer);\n        }\n    };\n    Texture.prototype._loadImg = function (img, layer) {\n        renderEnv_1.default.device.queue.copyExternalImageToTexture({ source: img }, { texture: this._gpuTexture, origin: this._isArray ? { x: 0, y: 0, z: layer } : undefined }, { width: this._width, height: this._height, depthOrArrayLayers: 1 });\n    };\n    Texture.prototype._loadBuffer = function (buffer, layer) {\n        renderEnv_1.default.device.queue.writeTexture({ texture: this._gpuTexture, origin: this._isArray ? { x: 0, y: 0, z: layer } : undefined }, buffer, { bytesPerRow: this._width * 4 }, { width: this._width, height: this._height, depthOrArrayLayers: 1 });\n    };\n    Texture.prototype.updateImg = function (src, layer) {\n        if (layer === void 0) { layer = 0; }\n        console.warn('Not implemented!');\n    };\n    Texture.CLASS_NAME = 'Texture';\n    return Texture;\n}(HObject_1.default));\nexports.default = Texture;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dHVyZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlRleHR1cmUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7O0FBTUEscUNBQWdDO0FBQ2hDLHlDQUFvQztBQUNwQyxtQ0FBOEQ7QUFFOUQ7SUFBcUMsMkJBQU87SUFzQzFDLGlCQUNZLE1BQWMsRUFDZCxPQUFlLEVBQ2YsSUFBdUMsRUFDdkMsT0FBd0M7UUFBeEMsd0JBQUEsRUFBQSxzQkFBd0M7UUFKcEQsWUFNRSxpQkFBTyxTQXdCUjtRQTdCVyxZQUFNLEdBQU4sTUFBTSxDQUFRO1FBQ2QsYUFBTyxHQUFQLE9BQU8sQ0FBUTtRQUNmLFVBQUksR0FBSixJQUFJLENBQW1DO1FBQ3ZDLGFBQU8sR0FBUCxPQUFPLENBQWlDO1FBeEM3QyxlQUFTLEdBQVksSUFBSSxDQUFDO1FBNEMvQixJQUFJLDZCQUFvQixDQUFDLElBQUksQ0FBQyxFQUFFO1lBQzlCLEtBQUksQ0FBQyxRQUFRLEdBQUcsSUFBSSxDQUFDO1lBQ3JCLEtBQUksQ0FBQyxXQUFXLEdBQUcsSUFBSSxDQUFDLE1BQU0sQ0FBQztTQUNoQzthQUFNO1lBQ0wsS0FBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7WUFDdEIsS0FBSSxDQUFDLFdBQVcsR0FBRyxDQUFDLENBQUM7U0FDdEI7UUFFRCxLQUFJLENBQUMsV0FBVyxHQUFHLG1CQUFTLENBQUMsTUFBTSxDQUFDLGFBQWEsQ0FBQztZQUNoRCxLQUFLLEVBQUUsS0FBSSxDQUFDLElBQUk7WUFDaEIsSUFBSSxFQUFFLEVBQUMsS0FBSyxFQUFFLEtBQUksQ0FBQyxNQUFNLEVBQUUsTUFBTSxFQUFFLEtBQUksQ0FBQyxPQUFPLEVBQUUsa0JBQWtCLEVBQUUsS0FBSSxDQUFDLFdBQVcsRUFBQztZQUN0RixNQUFNLEVBQUUsT0FBTyxJQUFJLFlBQVk7WUFDL0IsS0FBSyxFQUFFLGVBQWUsQ0FBQyxlQUFlLEdBQUcsZUFBZSxDQUFDLFFBQVEsR0FBRyxlQUFlLENB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TUFBcUIsRUFDckIsRUFBQyxXQUFXLEVBQUUsSUFBSSxDQUFDLE1BQU0sR0FBRyxDQUFDLEVBQUMsRUFDOUIsRUFBQyxLQUFLLEVBQUUsSUFBSSxDQUFDLE1BQU0sRUFBRSxNQUFNLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxrQkFBa0IsRUFBRSxDQUFDLEVBQUMsQ0FDbEUsQ0FBQztJQUNKLENBQUM7SUFFTSwyQkFBUyxHQUFoQixVQUFpQixHQUFnQixFQUFFLEtBQWlCO1FBQWpCLHNCQUFBLEVBQUEsU0FBaUI7UUFDbEQsT0FBTyxDQUFDLElBQUksQ0FBQyxrQkFBa0IsQ0FBQyxDQUFDO0lBQ25DLENBQUM7SUFoR2Msa0JBQVUsR0FBVyxTQUFTLENBQUM7SUFpR2hELGNBQUM7Q0FBQSxBQWxHRCxDQUFxQyxpQkFBTyxHQWtHM0M7a0JBbEdvQixPQUFPIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBARmlsZSAgIDogVGV4dHVyZS50c1xuICogQEF1dGhvciA6IGR0eXNreSAoZHR5c2t5QG91dGxvb2suY29tKVxuICogQExpbmsgICA6IGR0eXNreS5tb2VcbiAqIEBEYXRlICAgOiAyMDIxLzYvNuS4i+WNiDk6MTA6NDRcbiAqL1xuaW1wb3J0IEhPYmplY3QgZnJvbSAnLi9IT2JqZWN0JztcbmltcG9ydCByZW5kZXJFbnYgZnJvbSAnLi9yZW5kZXJFbnYnO1xuaW1wb3J0IHtUVGV4dHVyZVNvdXJjZSwgaXNUZXh0dXJlU291cmNlQXJyYXl9IGZyb20gJy4vc2hhcmVkJztcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgVGV4dHVyZSBleHRlbmRzIEhPYmplY3Qge1xuICBwdWJsaWMgc3RhdGljICBDTEFTU19OQU1FOiBzdHJpbmcgPSAnVGV4dHVyZSc7XG4gIHB1YmxpYyBpc1RleHR1cmU6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHByb3RlY3RlZCBfYml0bWFwOiBJbWFnZUJpdG1hcDtcbiAgcHJvdGVjdGVkIF9pc0FycmF5OiBib29sZWFuO1xuICBwcm90ZWN0ZWQgX2FycmF5Q291bnQ6IG51bWJlcjtcbiAgcHJvdGVjdGVkIF9ncHVUZXh0dXJlOiBHUFVUZXh0dXJlO1xuICBwcm90ZWN0ZWQgX2dwdVRleHR1cmVWaWV3OiBHUFVUZXh0dXJlVmlldztcblxuICBnZXQgd2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX3dpZHRoO1xuICB9XG5cbiAgZ2V0IGhlaWdodCgpIHtcbiAgICByZXR1cm4gdGhpcy5faGVpZ2h0O1xuICB9XG5cbiAgZ2V0IGZvcm1hdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZm9ybWF0O1xuICB9XG5cbiAgZ2V0IHNvdXJjZSgpIHtcbiAgICByZXR1cm4gdGhpcy5fc3JjO1xuICB9XG5cbiAgZ2V0IGdwdVRleHR1cmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dwdVRleHR1cmU7XG4gIH1cblxuICBnZXQgdmlldygpIHtcbiAgICByZXR1cm4gdGhpcy5fZ3B1VGV4dHVyZVZpZXc7XG4gIH1cblxuICBnZXQgaXNBcnJheSgpIHtcbiAgICByZXR1cm4gdGhpcy5faXNBcnJheTtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBfd2lkdGg6IG51bWJlcixcbiAgICBwcm90ZWN0ZWQgX2hlaWdodDogbnVtYmVyLFxuICAgIHByb3RlY3RlZCBfc3JjOiBUVGV4dHVyZVNvdXJjZSB8IFRUZXh0dXJlU291cmNlW10sXG4gICAgcHJvdGVjdGVkIF9mb3JtYXQ6IEdQVVRleHR1cmVGb3JtYXQgPSAncmdiYTh1bm9ybSdcbiAgKSB7XG4gICAgc3VwZXIoKTtcblxuICAgIGlmIChpc1RleHR1cmVTb3VyY2VBcnJheShfc3JjKSkge1xuICAgICAgdGhpcy5faXNBcnJheSA9IHRydWU7XG4gICAgICB0aGlzLl9hcnJheUNvdW50ID0gX3NyYy5sZW5ndGg7XG4gICAgfSBlbHNlIHtcbiAgICAgIHRoaXMuX2lzQXJyYXkgPSBmYWxzZTtcbiAgICAgIHRoaXMuX2FycmF5Q291bnQgPSAxO1xuICAgIH1cblxuICAgIHRoaXMuX2dwdVRleHR1cmUgPSByZW5kZXJFbnYuZGV2aWNlLmNyZWF0ZVRleHR1cmUoe1xuICAgICAgbGFiZWw6IHRoaXMuaGFzaCxcbiAgICAgIHNpemU6IHt3aWR0aDogdGhpcy5fd2lkdGgsIGhlaWdodDogdGhpcy5faGVpZ2h0LCBkZXB0aE9yQXJyYXlMYXllcnM6IHRoaXMuX2FycmF5Q291bnR9LFxuICAgICAgZm9ybWF0OiBfZm9ybWF0IHx8ICdyZ2JhOHVub3JtJyxcbiAgICAgIHVzYWdlOiBHUFVUZXh0dXJlVXNhZ2UuVEVYVFVSRV9CSU5ESU5HIHwgR1BVVGV4dHVyZVVzYWdlLkNPUFlfRFNUIHwgR1BVVGV4dHVyZVVzYWdlLlJFTkRFUl9BVFRBQ0hNRU5UXG4gICAgfSk7XG5cbiAgICBpZiAoaXNUZXh0dXJlU291cmNlQXJyYXkoX3NyYykpIHtcbiAgICAgIF9zcmMuZm9yRWFjaCgoc3JjLCBpbmRleCkgPT4gdGhpcy5fbG9hZChzcmMsIGluZGV4KSk7XG4gICAgICB0aGlzLl9ncHVUZXh0dXJlVmlldyA9IHRoaXMuX2dwdVRleHR1cmUuY3JlYXRlVmlldyh7ZGltZW5zaW9uOiAnMmQtYXJyYXknLCBhcnJheUxheWVyQ291bnQ6IHRoaXMuX2FycmF5Q291bnR9KTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5fbG9hZChfc3JjKTtcbiAgICAgIHRoaXMuX2dwdVRleHR1cmVWaWV3ID0gdGhpcy5fZ3B1VGV4dHVyZS5jcmVhdGVWaWV3KCk7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9sb2FkKHNyYzogVFRleHR1cmVTb3VyY2UsIGxheWVyOiBudW1iZXIgPSAwKSB7XG4gICAgaWYgKHNyYyBpbnN0YW5jZW9mIEltYWdlQml0bWFwKSB7XG4gICAgICB0aGlzLl9sb2FkSW1nKHNyYywgbGF5ZXIpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9sb2FkQnVmZmVyKHNyYywgbGF5ZXIpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfbG9hZEltZyhpbWc6IEltYWdlQml0bWFwLCBsYXllcjogbnVtYmVyKSB7XG4gICAgcmVuZGVyRW52LmRldmljZS5xdWV1ZS5jb3B5RXh0ZXJuYWxJbWFnZVRvVGV4dHVyZShcbiAgICAgIHtzb3VyY2U6IGltZ30sXG4gICAgICB7dGV4dHVyZTogdGhpcy5fZ3B1VGV4dHVyZSwgb3JpZ2luOiB0aGlzLl9pc0FycmF5ID8ge3g6IDAsIHk6IDAsIHo6IGxheWVyfSA6IHVuZGVmaW5lZH0sXG4gICAgICB7d2lkdGg6IHRoaXMuX3dpZHRoLCBoZWlnaHQ6IHRoaXMuX2hlaWdodCwgZGVwdGhPckFycmF5TGF5ZXJzOiAxfVxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2xvYWRCdWZmZXIoYnVmZmVyOiBBcnJheUJ1ZmZlciwgbGF5ZXI6IG51bWJlcikge1xuICAgIHJlbmRlckVudi5kZXZpY2UucXVldWUud3JpdGVUZXh0dXJlKFxuICAgICAge3RleHR1cmU6IHRoaXMuX2dwdVRleHR1cmUsIG9yaWdpbjogdGhpcy5faXNBcnJheSA/IHt4OiAwLCB5OiAwLCB6OiBsYXllcn0gOiB1bmRlZmluZWR9LFxuICAgICAgYnVmZmVyIGFzIEFycmF5QnVmZmVyLFxuICAgICAge2J5dGVzUGVyUm93OiB0aGlzLl93aWR0aCAqIDR9LFxuICAgICAge3dpZHRoOiB0aGlzLl93aWR0aCwgaGVpZ2h0OiB0aGlzLl9oZWlnaHQsIGRlcHRoT3JBcnJheUxheWVyczogMX1cbiAgICApO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZUltZyhzcmM6IEltYWdlQml0bWFwLCBsYXllcjogbnVtYmVyID0gMCkge1xuICAgIGNvbnNvbGUud2FybignTm90IGltcGxlbWVudGVkIScpO1xuICB9XG59Il19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EUBGroup = void 0;\nvar shared_1 = require(\"./shared\");\nvar renderEnv_1 = require(\"./renderEnv\");\nvar RenderTexture_1 = require(\"./RenderTexture\");\nvar HObject_1 = require(\"./HObject\");\nvar CubeTexture_1 = require(\"./CubeTexture\");\nvar EUBGroup;\n(function (EUBGroup) {\n    EUBGroup[EUBGroup[\"Global\"] = 0] = \"Global\";\n    EUBGroup[EUBGroup[\"Material\"] = 1] = \"Material\";\n    EUBGroup[EUBGroup[\"Mesh\"] = 2] = \"Mesh\";\n})(EUBGroup = exports.EUBGroup || (exports.EUBGroup = {}));\nvar UBTemplate = (function (_super) {\n    __extends(UBTemplate, _super);\n    function UBTemplate(_uniformDesc, _groupId, _visibility) {\n        var _this = _super.call(this) || this;\n        _this._uniformDesc = _uniformDesc;\n        _this._groupId = _groupId;\n        _this._visibility = _visibility;\n        _this.isUBTemplate = true;\n        var device = renderEnv_1.default.device;\n        var visibility = _visibility === undefined ? GPUShaderStage.COMPUTE | GPUShaderStage.VERTEX | GPUShaderStage.FRAGMENT : _visibility;\n        var ubStruct = _groupId === EUBGroup.Global ? 'UniformsGlobal' : _groupId === EUBGroup.Mesh ? 'UniformsObject' : 'UniformsMaterial';\n        var ubName = _groupId === EUBGroup.Global ? 'global' : _groupId === EUBGroup.Mesh ? 'mesh' : 'material';\n        var index = 0;\n        var bindingId = 0;\n        _this._shaderPrefix = '';\n        _this._uniformsInfo = {};\n        var entries = [];\n        if (_uniformDesc.uniforms.length) {\n            _uniformDesc.uniforms.forEach(function (ud) {\n                if (ud.customType) {\n                    _this._shaderPrefix += ud.customType.code + '\\n';\n                }\n            });\n            _this._shaderPrefix += \"[[block]] struct \" + ubStruct + \" {\\n\";\n            entries.push({\n                binding: 0,\n                visibility: visibility,\n                buffer: { type: 'uniform' }\n            });\n            var uniforms32Length_1 = 0;\n            _uniformDesc.uniforms.forEach(function (ud) {\n                var _a = _this._getRealLayoutInfo(ud.type, ud.size || 1, ud.defaultValue, ud.customType), origLen = _a.origLen, realLen = _a.realLen, defaultValue = _a.defaultValue;\n                _this._uniformsInfo[ud.name] = { bindingId: 0, index: index, type: 'buffer', offset: uniforms32Length_1, defaultValue: defaultValue, origLen: origLen, realLen: realLen, size: ud.size || 1 };\n                uniforms32Length_1 += defaultValue.length;\n                var sym = ud.customType ? ud.customType.name : ud.type === 'number' ? \"\" + (ud.format || 'f32') : ud.type + \"<\" + (ud.format || 'f32') + \">\";\n                var pre = origLen !== realLen ? \"[[stride(\" + realLen * 4 + \")]]\" : '';\n                if (!ud.size) {\n                    _this._shaderPrefix += \"  [[align(16)]] \" + ud.name + \": \" + sym + \";\\n\";\n                }\n                else {\n                    ud.size > 1 && (_this._shaderPrefix += \" [[align(16)]] \" + ud.name + \": \" + pre + \" array<\" + sym + \", \" + ud.size + \">;\\n\");\n                }\n                index += 1;\n            });\n            _this._uniformsBufferDefault = new Uint32Array(uniforms32Length_1);\n            _this._shaderPrefix += \"};\\n[[group(\" + _groupId + \"), binding(0)]] var<uniform> \" + ubName + \": \" + ubStruct + \";\\n\";\n            bindingId += 1;\n        }\n        _uniformDesc.textures && _uniformDesc.textures.forEach(function (ud) {\n            var isCube = CubeTexture_1.default.IS(ud.defaultValue);\n            var isArray = ud.defaultValue.isArray;\n            var viewDimension = isCube ? (isArray ? 'cube-array' : 'cube') : (isArray ? '2d-array' : '2d');\n            if (ud.storageAccess === 'read-only') {\n                ud.storageAccess = undefined;\n                ud.format = /uint/.test(ud.storageFormat) ? 'uint' : /sint/.test(ud.storageFormat) ? 'sint' : 'float';\n            }\n            entries.push({\n                binding: bindingId,\n                visibility: visibility,\n                texture: !ud.storageAccess ? {\n                    sampleType: ud.format || 'float',\n                    viewDimension: viewDimension\n                } : undefined,\n                storageTexture: ud.storageAccess === 'write-only' ? Object.assign({\n                    format: ud.storageFormat || 'rgba8unorm',\n                    viewDimension: viewDimension,\n                    access: ud.storageAccess\n                }) : undefined\n            });\n            _this._uniformsInfo[ud.name] = {\n                bindingId: bindingId, index: index,\n                type: 'texture',\n                defaultGpuValue: ud.defaultValue.view\n            };\n            var texFormat = ud.format === 'depth' ? 'depth' : ud.format === 'uint' ? 'u32' : ud.format === 'sint' ? 'i32' : 'f32';\n            if (ud.storageAccess) {\n                _this._shaderPrefix += \"[[group(\" + _groupId + \"), binding(\" + bindingId + \")]] var \" + ud.name + \": texture_storage_2d<\" + (ud.storageFormat || 'rgba8unorm') + \", \" + ud.storageAccess.replace('-only', '') + \">;\\n\";\n            }\n            else if (isCube) {\n                _this._shaderPrefix += \"[[group(\" + _groupId + \"), binding(\" + bindingId + \")]] var \" + ud.name + \": texture_cube<\" + texFormat + \">;\\n\";\n            }\n            else if (ud.defaultValue.isArray) {\n                _this._shaderPrefix += \"[[group(\" + _groupId + \"), binding(\" + bindingId + \")]] var \" + ud.name + \": texture_2d_array<\" + texFormat + \">;\\n\";\n            }\n            else {\n                _this._shaderPrefix += \"[[group(\" + _groupId + \"), binding(\" + bindingId + \")]] var \" + ud.name + \": texture_2d<\" + texFormat + \">;\\n\";\n            }\n            bindingId += 1;\n            index += 1;\n        });\n        _uniformDesc.samplers && _uniformDesc.samplers.forEach(function (ud) {\n            entries.push({\n                binding: bindingId,\n                visibility: visibility,\n                sampler: { type: 'filtering' }\n            });\n            _this._uniformsInfo[ud.name] = {\n                bindingId: bindingId, index: index,\n                type: 'sampler',\n                defaultGpuValue: device.createSampler(ud.defaultValue)\n            };\n            _this._shaderPrefix += \"[[group(\" + _groupId + \"), binding(\" + bindingId + \")]] var \" + ud.name + \": sampler;\\n\";\n            bindingId += 1;\n            index += 1;\n        });\n        _this._shaderPrefix += '\\n';\n        _uniformDesc.uniforms.forEach(function (ud, index) {\n            var info = _this._uniformsInfo[ud.name];\n            _this._uniformsBufferDefault.set(new Uint32Array(info.defaultValue.buffer), info.offset);\n        });\n        if (_uniformDesc.storages) {\n            var structCache_1 = {};\n            _uniformDesc.storages.forEach(function (ud) {\n                entries.push({\n                    binding: bindingId,\n                    visibility: visibility,\n                    buffer: { type: ud.writable ? 'storage' : 'read-only-storage' }\n                });\n                var hash = \"Storage\" + ud.type + (ud.format || 'f32');\n                if (!ud.customStruct && !structCache_1[hash]) {\n                    _this._shaderPrefix += (structCache_1[hash] = structCache_1[hash] || _this._getStorageStruct(hash, ud.type, ud.format || 'f32')) + '\\n';\n                }\n                if (ud.customStruct) {\n                    hash = ud.customStruct.name;\n                    _this._shaderPrefix += ud.customStruct.code;\n                }\n                var gpuValue = ud.gpuValue ? ud.gpuValue : shared_1.createGPUBuffer(ud.defaultValue, GPUBufferUsage.STORAGE);\n                _this._uniformsInfo[ud.name] = { bindingId: bindingId, index: index, type: 'storage', defaultValue: ud.defaultValue, defaultGpuValue: gpuValue };\n                _this._shaderPrefix += \"[[group(\" + _groupId + \"), binding(\" + bindingId + \")]] var<storage, \" + (ud.writable ? 'read_write' : 'read') + \"> \" + ud.name + \": \" + hash + \";\\n\";\n                index += 1;\n                bindingId += 1;\n            });\n        }\n        _this._uniformLayoutDesc = { entries: entries };\n        _this._uniformLayout = device.createBindGroupLayout(_this._uniformLayoutDesc);\n        return _this;\n    }\n    Object.defineProperty(UBTemplate.prototype, \"groupId\", {\n        get: function () {\n            return this._groupId;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(UBTemplate.prototype, \"shaderPrefix\", {\n        get: function () {\n            return this._shaderPrefix;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(UBTemplate.prototype, \"uniformLayout\", {\n        get: function () {\n            return this._uniformLayout;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(UBTemplate.prototype, \"uniformsInfo\", {\n        get: function () {\n            return this._uniformsInfo;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    UBTemplate.prototype._getRealLayoutInfo = function (type, size, defaultValue, custom) {\n        if (custom) {\n            return { origLen: custom.len, realLen: custom.len, defaultValue: defaultValue };\n        }\n        var origLen;\n        var realLen;\n        switch (type) {\n            case 'number':\n                origLen = 1;\n                realLen = 4;\n                break;\n            case 'vec2':\n                origLen = 2;\n                realLen = 4;\n                break;\n            case 'vec3':\n                origLen = 3;\n                realLen = 4;\n                break;\n            case 'vec4':\n            case 'mat2x2':\n                origLen = 4;\n                realLen = 4;\n                break;\n            case 'mat3x3':\n                origLen = 9;\n                realLen = 12;\n                break;\n            case 'mat4x4':\n                origLen = 16;\n                realLen = 16;\n                break;\n        }\n        var constructor = defaultValue.constructor;\n        var value = new constructor(realLen * size);\n        for (var index = 0; index < size; index += 1) {\n            value.set(defaultValue.slice(index * origLen, (index + 1) * origLen), index * realLen);\n        }\n        return {\n            origLen: origLen,\n            realLen: realLen,\n            defaultValue: value\n        };\n    };\n    UBTemplate.prototype._getStorageStruct = function (hash, type, format) {\n        if (type === 'number') {\n            return \"[[block]] struct \" + hash + \" { value: array<\" + format + \">; };\";\n        }\n        if (type === 'vec2' || type === 'vec3' || type === 'vec4') {\n            return \"[[block]] struct \" + hash + \" { value: array<\" + type + \"<\" + format + \">>; };\";\n        }\n        throw new Error('Not support type!');\n    };\n    UBTemplate.prototype.createUniformBlock = function () {\n        var _this = this;\n        var _a = this, _uniformDesc = _a._uniformDesc, _uniformsInfo = _a._uniformsInfo, _uniformsBufferDefault = _a._uniformsBufferDefault;\n        var values = {};\n        var groupEntries = [];\n        var cpuBuffer;\n        var gpuBuffer;\n        if (_uniformsBufferDefault) {\n            gpuBuffer = shared_1.createGPUBuffer(_uniformsBufferDefault, GPUBufferUsage.UNIFORM);\n            cpuBuffer = _uniformsBufferDefault.slice();\n            groupEntries.push({\n                binding: 0,\n                resource: { buffer: gpuBuffer }\n            });\n            _uniformDesc.uniforms.forEach(function (ud) {\n                var info = _this._uniformsInfo[ud.name];\n                values[ud.name] = {\n                    value: new _this._uniformsInfo[ud.name].defaultValue.constructor(cpuBuffer.buffer, info.offset * 4, info.realLen * info.size),\n                    gpuValue: gpuBuffer\n                };\n            });\n        }\n        _uniformDesc.textures && _uniformDesc.textures.forEach(function (ud) {\n            var view = _uniformsInfo[ud.name].defaultGpuValue;\n            values[ud.name] = { value: ud.defaultValue, gpuValue: view };\n            groupEntries.push({\n                binding: _uniformsInfo[ud.name].bindingId,\n                resource: view\n            });\n        });\n        _uniformDesc.samplers && _uniformDesc.samplers.forEach(function (ud) {\n            var sampler = _uniformsInfo[ud.name].defaultGpuValue;\n            values[ud.name] = { value: ud.defaultValue, gpuValue: sampler };\n            groupEntries.push({\n                binding: _uniformsInfo[ud.name].bindingId,\n                resource: sampler\n            });\n        });\n        _uniformDesc.storages && _uniformDesc.storages.forEach(function (ud) {\n            var buffer = _uniformsInfo[ud.name].defaultGpuValue;\n            values[ud.name] = { value: ud.defaultValue, gpuValue: buffer };\n            groupEntries.push({\n                binding: _uniformsInfo[ud.name].bindingId,\n                resource: { buffer: buffer }\n            });\n        });\n        return { entries: groupEntries, values: values, layout: this._uniformLayout, cpuBuffer: cpuBuffer, gpuBuffer: gpuBuffer, isBufferDirty: false, isDirty: true };\n    };\n    UBTemplate.prototype.setUniform = function (ub, name, value, rtSubNameOrGPUBuffer) {\n        var info = this._uniformsInfo[name];\n        if (!info || value === undefined) {\n            return;\n        }\n        var entries = ub.entries;\n        var bindingId = info.bindingId, type = info.type, offset = info.offset, realLen = info.realLen, origLen = info.origLen;\n        var values = ub.values[name];\n        if (type === 'buffer') {\n            value = value;\n            var cpuValue = values.value;\n            value = (typeof value === 'number' ? [value] : value);\n            if (origLen !== realLen) {\n                var size = value.length / origLen;\n                for (var index = 0; index < size; index += 1) {\n                    cpuValue.set(value.slice(origLen * index, origLen * (index + 1)), realLen * index);\n                }\n            }\n            else {\n                cpuValue.set(value);\n            }\n            ub.isBufferDirty = true;\n        }\n        else if (type === 'sampler') {\n            values.value = value;\n            console.warn('Not implemented!');\n        }\n        else if (type === 'storage') {\n            values.value = value;\n            entries[bindingId].resource.buffer = values.gpuValue = rtSubNameOrGPUBuffer\n                ? rtSubNameOrGPUBuffer\n                : shared_1.createGPUBuffer(value, GPUBufferUsage.STORAGE);\n            ub.isDirty = true;\n        }\n        else if (RenderTexture_1.default.IS(value)) {\n            var view = rtSubNameOrGPUBuffer ? value.getColorViewByName(rtSubNameOrGPUBuffer) : value.colorView;\n            entries[bindingId].resource = values.gpuValue = view;\n            values.value = value;\n            ub.isDirty = true;\n            return;\n        }\n        else {\n            value = value;\n            if (value.isArray !== values.value.isArray) {\n                throw new Error('Require texture2d array!');\n            }\n            entries[bindingId].resource = values.gpuValue = value.view;\n            values.value = value;\n            ub.isDirty = true;\n            return;\n        }\n    };\n    UBTemplate.prototype.getUniform = function (ub, name) {\n        var _a;\n        return (_a = ub.values[name]) === null || _a === void 0 ? void 0 : _a.value;\n    };\n    UBTemplate.prototype.getBindingGroup = function (ub, preGroup) {\n        if (ub.isBufferDirty) {\n            renderEnv_1.default.device.queue.writeBuffer(ub.gpuBuffer, 0, ub.cpuBuffer);\n            ub.isBufferDirty = false;\n        }\n        if (ub.isDirty) {\n            preGroup = renderEnv_1.default.device.createBindGroup({\n                layout: ub.layout,\n                entries: ub.entries\n            });\n            ub.isDirty = false;\n        }\n        return preGroup;\n    };\n    UBTemplate.CLASS_NAME = 'UBTemplate';\n    return UBTemplate;\n}(HObject_1.default));\nexports.default = UBTemplate;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVUJUZW1wbGF0ZS5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlVCVGVtcGxhdGUudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7OztBQU1BLG1DQUFvRjtBQUNwRix5Q0FBb0M7QUFDcEMsaURBQTRDO0FBRTVDLHFDQUFnQztBQUNoQyw2Q0FBd0M7QUFFeEMsSUFBWSxRQUlYO0FBSkQsV0FBWSxRQUFRO0lBQ2xCLDJDQUFVLENBQUE7SUFDViwrQ0FBWSxDQUFBO0lBQ1osdUNBQVEsQ0FBQTtBQUNWLENBQUMsRUFKVyxRQUFRLEdBQVIsZ0JBQVEsS0FBUixnQkFBUSxRQUluQjtBQWtERDtJQUF3Qyw4QkFBTztJQXNDN0Msb0JBQ1ksWUFBaUMsRUFDakMsUUFBa0IsRUFDbEIsV0FBb0I7UUFIaEMsWUFLRSxpQkFBTyxTQWdKUjtRQXBKVyxrQkFBWSxHQUFaLFlBQVksQ0FBcUI7UUFDakMsY0FBUSxHQUFSLFFBQVEsQ0FBVTtRQUNsQixpQkFBVyxHQUFYLFdBQVcsQ0FBUztRQXZDekIsa0JBQVksR0FBWSxJQUFJLENBQUM7UUEyQzNCLElBQUEsTUFBTSxHQUFJLG1CQUFTLE9BQWIsQ0FBYztRQUMzQixJQUFNLFVBQVUsR0FBRyxXQUFXLEtBQUssU0FBUyxDQUFDLENBQUMsQ0FBQyxjQUFjLENBQUMsT0FBTyxHQUFHLGNBQWMsQ0FBQyxNQUFNLEdBQUcsY0FBYyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDO1FBQ3RJLElBQU0sUUFBUSxHQUFHLFFBQVEsS0FBSyxRQUFRLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsUUFBUSxLQUFLLFFBQVEsQ0FBQyxJQUFJLENBQUMsQ0FBQyxDQUFDLGdCQUFnQixDQUFDLENBQUMsQ0FBQyxrQkFBa0IsQ0FBQztRQUN0SSxJQUFNLE1BQU0sR0FBRyxRQUFRLEtBQUssUUFBUSxDQUFDLE1BQU0sQ0FBQyxDQUFDLENBQUMsUUFBUSxDQUFD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Q2pCLE9BQU8sRUFBRSxFQUFFLENBQUMsT0FBTzthQUNwQixDQUFDLENBQUM7WUFDSCxFQUFFLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQztTQUNwQjtRQUVELE9BQU8sUUFBUSxDQUFDO0lBQ2xCLENBQUM7SUEzWWEscUJBQVUsR0FBVyxZQUFZLENBQUM7SUE0WWxELGlCQUFDO0NBQUEsQUE3WUQsQ0FBd0MsaUJBQU8sR0E2WTlDO2tCQTdZb0IsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IFVCVGVtcGxhdGUudHNcbiAqIEBBdXRob3IgOiBkdHlza3kgKGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBMaW5rICAgOiBkdHlza3kubW9lXG4gKiBARGF0ZSAgICA6IDYvMjQvMjAyMSwgMjM6MDA6NTUgUE1cbiovXG5pbXBvcnQge2NyZWF0ZUdQVUJ1ZmZlciwgaGFzaENvZGUsIFRUeXBlZEFycmF5LCBUVW5pZm9ybVR5cGVkQXJyYXl9IGZyb20gXCIuL3NoYXJlZFwiO1xuaW1wb3J0IHJlbmRlckVudiBmcm9tIFwiLi9yZW5kZXJFbnZcIjtcbmltcG9ydCBSZW5kZXJUZXh0dXJlIGZyb20gXCIuL1JlbmRlclRleHR1cmVcIjtcbmltcG9ydCBUZXh0dXJlIGZyb20gXCIuL1RleHR1cmVcIjtcbmltcG9ydCBIT2JqZWN0IGZyb20gXCIuL0hPYmplY3RcIjtcbmltcG9ydCBDdWJlVGV4dHVyZSBmcm9tIFwiLi9DdWJlVGV4dHVyZVwiO1xuXG5leHBvcnQgZW51bSBFVUJHcm91cCB7XG4gIEdsb2JhbCA9IDAsXG4gIE1hdGVyaWFsID0gMSxcbiAgTWVzaCA9IDJcbn1cblxuZXhwb3J0IHR5cGUgVFVuaWZvcm1WYWx1ZSA9IFRVbmlmb3JtVHlwZWRBcnJheSB8IFRleHR1cmUgfCBDdWJlVGV4dHVyZSB8IEdQVVNhbXBsZXJEZXNjcmlwdG9yIHwgUmVuZGVyVGV4dHVyZTtcblxuZXhwb3J0IGludGVyZmFjZSBJVW5pZm9ybXNEZXNjcmlwdG9yIHtcbiAgdW5pZm9ybXM6IHtcbiAgICBuYW1lOiBzdHJpbmcsXG4gICAgdHlwZTogJ251bWJlcicgfCAndmVjMicgfCAndmVjMycgfCAndmVjNCcgfCAnbWF0MngyJyB8ICdtYXQzeDMnIHwgJ21hdDR4NCcsXG4gICAgZm9ybWF0PzogJ2YzMicgfCAndTMyJyB8ICdpMzInLFxuICAgIHNpemU/OiBudW1iZXIsXG4gICAgY3VzdG9tVHlwZT86IHtuYW1lOiBzdHJpbmcsIGNvZGU6IHN0cmluZywgbGVuOiBudW1iZXJ9LFxuICAgIGRlZmF1bHRWYWx1ZTogVFVuaWZvcm1UeXBlZEFycmF5XG4gIH1bXSxcbiAgdGV4dHVyZXM/OiB7XG4gICAgbmFtZTogc3RyaW5nLFxuICAgIGZvcm1hdD86IEdQVVRleHR1cmVTYW1wbGVUeXBlLFxuICAgIGRlZmF1bHRWYWx1ZTogVGV4dHVyZSB8IEN1YmVUZXh0dXJlLFxuICAgIHN0b3JhZ2VBY2Nlc3M/OiBHUFVTdG9yYWdlVGV4dHVyZUFjY2VzcyxcbiAgICBzdG9yYWdlRm9ybWF0PzogR1BVVGV4dHVyZUZvcm1hdFxuICB9W10sXG4gIHNhbXBsZXJzPzoge1xuICAgIG5hbWU6IHN0cmluZyxcbiAgICBkZWZhdWx0VmFsdWU6IEdQVVNhbXBsZXJEZXNjcmlwdG9yXG4gIH1bXSxcbiAgc3RvcmFnZXM/OiB7XG4gICAgbmFtZTogc3RyaW5nLFxuICAgIHR5cGU6ICdudW1iZXInIHwgJ3ZlYzInIHwgJ3ZlYzMnIHwgJ3ZlYzQnLFxuICAgIGZvcm1hdD86ICdmMzInIHwgJ3UzMicgfCAnaTMyJyxcbiAgICBjdXN0b21TdHJ1Y3Q/OiB7bmFtZTogc3RyaW5nLCBjb2RlOiBzdHJpbmd9LFxuICAgIHdyaXRhYmxlPzogYm9vbGVhbixcbiAgICBkZWZhdWx0VmFsdWU6IFRVbmlmb3JtVHlwZWRBcnJheSxcbiAgICBncHVWYWx1ZT86IEdQVUJ1ZmZlclxuICB9W11cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJVW5pZm9ybUJsb2NrIHtcbiAgaXNCdWZmZXJEaXJ0eTogYm9vbGVhbjtcbiAgaXNEaXJ0eTogYm9vbGVhbjtcbiAgbGF5b3V0OiBHUFVCaW5kR3JvdXBMYXlvdXQ7XG4gIGVudHJpZXM6IEdQVUJpbmRHcm91cEVudHJ5W107XG4gIGNwdUJ1ZmZlcjogVWludDMyQXJyYXk7XG4gIGdwdUJ1ZmZlcjogR1BVQnVmZmVyO1xuICB2YWx1ZXM6IHtcbiAgICBbbmFtZTogc3RyaW5nXToge1xuICAgICAgdmFsdWU6IFRVbmlmb3JtVmFsdWUsXG4gICAgICBncHVWYWx1ZTogR1BVQnVmZmVyIHwgR1BVU2FtcGxlciB8IEdQVVRleHR1cmVWaWV3XG4gICAgfVxuICB9O1xufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBVQlRlbXBsYXRlIGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ1VCVGVtcGxhdGUnO1xuICBwdWJsaWMgaXNVQlRlbXBsYXRlOiBib29sZWFuID0gdHJ1ZTtcblxuICBwcm90ZWN0ZWQgX3NoYWRlclByZWZpeDogc3RyaW5nO1xuICBwcm90ZWN0ZWQgX3VuaWZvcm1MYXlvdXREZXNjOiBHUFVCaW5kR3JvdXBMYXlvdXREZXNjcmlwdG9yO1xuICBwcm90ZWN0ZWQgX3VuaWZvcm1MYXlvdXQ6IEdQVUJpbmRHcm91cExheW91dDtcbiAgcHJvdGVjdGVkIF91bmlmb3JtQmluZERlc2M6IEdQVUJpbmRHcm91cERlc2NyaXB0b3I7XG4gIHByb3RlY3RlZCBfdW5pZm9ybXNCdWZmZXJEZWZhdWx0OiBVaW50MzJBcnJheTtcbiAgcHJvdGVjdGVkIF91bmlmb3Jtc0luZm86IHtbbmFtZTogc3RyaW5nXToge1xuICAgIGJpbmRpbmdJZDogbnVtYmVyLFxuICAgIGluZGV4OiBudW1iZXIsXG4gICAgdHlwZTogJ3RleHR1cmUnIHwgJ2J1ZmZlcicgfCAnc2FtcGxlcicgfCAnc3RvcmFnZScsXG4gICAgZGVmYXVsdFZhbHVlPzogVFVuaWZvcm1UeXBlZEFycmF5IHwgVGV4dHVyZSB8IEdQVVNhbXBsZXJEZXNjcmlwdG9yLFxuICAgIGRlZmF1bHRHcHVWYWx1ZT86IEdQVVNhbXBsZXIgfCBHUFVUZXh0dXJlVmlldyB8IEdQVUJ1ZmZlcixcbiAgICAvKiAzMmJpdHMgKi9cbiAgICBvZmZzZXQ/OiBudW1iZXIsXG4gICAgcmVhbExlbj86IG51bWJlcixcbiAgICBvcmlnTGVuPzogbnVtYmVyLFxuICAgIHNpemU/OiBudW1iZXJcbiAgfX07XG5cbiAgZ2V0IGdyb3VwSWQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dyb3VwSWQ7XG4gIH1cblxuICBnZXQgc2hhZGVyUHJlZml4KCkge1xuICAgIHJldHVybiB0aGlzLl9zaGFkZXJQcmVmaXg7XG4gIH1cblxuICBnZXQgdW5pZm9ybUxheW91dCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdW5pZm9ybUxheW91dDtcbiAgfVxuXG4gIGdldCB1bmlmb3Jtc0luZm8oKSB7XG4gICAgcmV0dXJuIHRoaXMuX3VuaWZvcm1zSW5mbztcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByb3RlY3RlZCBfdW5pZm9ybURlc2M6IElVbmlmb3Jtc0Rlc2NyaXB0b3IsXG4gICAgcHJvdGVjdGVkIF9ncm91cElkOiBFVUJHcm91cCxcbiAgICBwcm90ZWN0ZWQgX3Zpc2liaWxpdHk/OiBudW1iZXIsXG4gICkge1xuICAgIHN1cGVyKCk7XG5cbiAgICBjb25zdCB7ZGV2aWNlfSA9IHJlbmRlckVudjtcbiAgICBjb25zdCB2aXNpYmlsaXR5ID0gX3Zpc2liaWxpdHkgPT09IHVuZGVmaW5lZCA/IEdQVVNoYWRlclN0YWdlLkNPTVBVVEUgfCBHUFVTaGFkZXJTdGFnZS5WRVJURVggfCBHUFVTaGFkZXJTdGFnZS5GUkFHTUVOVCA6IF92aXNpYmlsaXR5O1xuICAgIGNvbnN0IHViU3RydWN0ID0gX2dyb3VwSWQgPT09IEVVQkdyb3VwLkdsb2JhbCA/ICdVbmlmb3Jtc0dsb2JhbCcgOiBfZ3JvdXBJZCA9PT0gRVVCR3JvdXAuTWVzaCA/ICdVbmlmb3Jtc09iamVjdCcgOiAnVW5pZm9ybXNNYXRlcmlhbCc7XG4gICAgY29uc3QgdWJOYW1lID0gX2dyb3VwSWQgPT09IEVVQkdyb3VwLkdsb2JhbCA/ICdnbG9iYWwnIDogX2dyb3VwSWQgPT09IEVVQkdyb3VwLk1lc2ggPyAnbWVzaCcgOiAnbWF0ZXJpYWwnO1xuXG4gICAgbGV0IGluZGV4OiBudW1iZXIgPSAwO1xuICAgIGxldCBiaW5kaW5nSWQ6IG51bWJlciA9IDA7XG4gICAgdGhpcy5fc2hhZGVyUHJlZml4ID0gJyc7XG4gICAgdGhpcy5fdW5pZm9ybXNJbmZvID0ge307XG5cbiAgICBjb25zdCBlbnRyaWVzOiBHUFVCaW5kR3JvdXBMYXlvdXRFbnRyeVtdID0gW107XG4gICAgXG4gICAgaWYgKF91bmlmb3JtRGVzYy51bmlmb3Jtcy5sZW5ndGgpIHtcbiAgICAgIF91bmlmb3JtRGVzYy51bmlmb3Jtcy5mb3JFYWNoKCh1ZCkgPT4ge1xuICAgICAgICBpZiAodWQuY3VzdG9tVHlwZSkge1xuICAgICAgICAgIHRoaXMuX3NoYWRlclByZWZpeCArPSB1ZC5jdXN0b21UeXBlLmNvZGUgKyAnXFxuJzsgICAgXG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICB0aGlzLl9zaGFkZXJQcmVmaXggKz0gYFtbYmxvY2tdXSBzdHJ1Y3QgJHt1YlN0cnVjdH0ge1xcbmA7XG4gICAgICBlbnRyaWVzLnB1c2goe1xuICAgICAgICBiaW5kaW5nOiAwLFxuICAgICAgICB2aXNpYmlsaXR5LFxuICAgICAgICBidWZmZXI6IHt0eXBlOiAndW5pZm9ybScgYXMgR1BVQnVmZmVyQmluZGluZ1R5cGV9XG4gICAgICB9KTtcblxuICAgICAgbGV0IHVuaWZvcm1zMzJMZW5ndGg6IG51bWJlciA9IDA7XG4gICAgICBfdW5pZm9ybURlc2MudW5pZm9ybXMuZm9yRWFjaCgodWQpID0+IHtcbiAgICAgICAgY29uc3Qge29yaWdMZW4sIHJlYWxMZW4sIGRlZmF1bHRWYWx1ZX0gPSB0aGlzLl9nZXRSZWFsTGF5b3V0SW5mbyh1ZC50eXBlLCB1ZC5zaXplIHx8IDEsIHVkLmRlZmF1bHRWYWx1ZSwgdWQuY3VzdG9tVHlwZSk7XG5cbiAgICAgICAgdGhpcy5fdW5pZm9ybXNJbmZvW3VkLm5hbWVdID0ge2JpbmRpbmdJZDogMCwgaW5kZXgsIHR5cGU6ICdidWZmZXInLCBvZmZzZXQ6IHVuaWZvcm1zMzJMZW5ndGgsIGRlZmF1bHRWYWx1ZSwgb3JpZ0xlbiwgcmVhbExlbiwgc2l6ZTogdWQuc2l6ZSB8fCAxfTtcbiAgICAgICAgdW5pZm9ybXMzMkxlbmd0aCArPSBkZWZhdWx0VmFsdWUubGVuZ3RoO1xuICAgICAgICBjb25zdCBzeW0gPSB1ZC5jdXN0b21UeXBlID8gdWQuY3VzdG9tVHlwZS5uYW1lIDogdWQudHlwZSA9PT0gJ251bWJlcicgPyBgJHt1ZC5mb3JtYXQgfHwgJ2YzMid9YCA6IGAke3VkLnR5cGV9PCR7dWQuZm9ybWF0IHx8ICdmMzInfT5gO1xuICAgICAgICBjb25zdCBwcmUgPSBvcmlnTGVuICE9PSByZWFsTGVuID8gYFtbc3RyaWRlKCR7cmVhbExlbiAqIDR9KV1dYCA6ICcnO1xuICAgICAgICBpZiAoIXVkLnNpemUpIHtcbiAgICAgICAgICB0aGlzLl9zaGFkZXJQcmVmaXggKz0gYCAgW1thbGlnbigxNildXSAke3VkLm5hbWV9OiAke3N5bX07XFxuYDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICB1ZC5zaXplID4gMSAmJiAodGhpcy5fc2hhZGVyUHJlZml4ICs9IGAgW1thbGlnbigxNildXSAke3VkLm5hbWV9OiAke3ByZX0gYXJyYXk8JHtzeW19LCAke3VkLnNpemV9PjtcXG5gKTtcbiAgICAgICAgfVxuICAgICAgICBpbmRleCArPSAxO1xuICAgICAgfSk7XG4gICAgICB0aGlzLl91bmlmb3Jtc0J1ZmZlckRlZmF1bHQgPSBuZXcgVWludDMyQXJyYXkodW5pZm9ybXMzMkxlbmd0aCk7XG4gICAgICB0aGlzLl9zaGFkZXJQcmVmaXggKz0gYH07XFxuW1tncm91cCgke19ncm91cElkfSksIGJpbmRpbmcoMCldXSB2YXI8dW5pZm9ybT4gJHt1Yk5hbWV9OiAke3ViU3RydWN0fTtcXG5gXG5cbiAgICAgIGJpbmRpbmdJZCArPSAxO1xuICAgIH1cblxuICAgIF91bmlmb3JtRGVzYy50ZXh0dXJlcyAmJiBfdW5pZm9ybURlc2MudGV4dHVyZXMuZm9yRWFjaCgodWQpID0+IHtcbiAgICAgIGNvbnN0IGlzQ3ViZSA9IEN1YmVUZXh0dXJlLklTKHVkLmRlZmF1bHRWYWx1ZSk7XG4gICAgICBjb25zdCBpc0FycmF5ID0gKHVkLmRlZmF1bHRWYWx1ZSBhcyBUZXh0dXJlKS5pc0FycmF5O1xuICAgICAgY29uc3Qgdmlld0RpbWVuc2lvbiA9IGlzQ3ViZSA/IChpc0FycmF5ID8gJ2N1YmUtYXJyYXknIDogJ2N1YmUnKSA6IChpc0FycmF5ID8gJzJkLWFycmF5JyA6ICcyZCcpO1xuXG4gICAgICAvLyByZWFkLW9ubHkgc3RvcmFnZSB0ZXh0dXJlIGlzIG5vdCBzdXBwb3J0ZWQgYW55bW9yZVxuICAgICAgaWYgKHVkLnN0b3JhZ2VBY2Nlc3MgPT09ICdyZWFkLW9ubHknKSB7XG4gICAgICAgIHVkLnN0b3JhZ2VBY2Nlc3MgPSB1bmRlZmluZWQ7XG4gICAgICAgIHVkLmZvcm1hdCA9IC91aW50Ly50ZXN0KHVkLnN0b3JhZ2VGb3JtYXQpID8gICd1aW50JyA6IC9zaW50Ly50ZXN0KHVkLnN0b3JhZ2VGb3JtYXQpID8gJ3NpbnQnIDogJ2Zsb2F0JztcbiAgICAgIH1cblxuICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAgYmluZGluZzogYmluZGluZ0lkLFxuICAgICAgICB2aXNpYmlsaXR5LFxuICAgICAgICB0ZXh0dXJlOiAhdWQuc3RvcmFnZUFjY2VzcyA/IHtcbiAgICAgICAgICBzYW1wbGVUeXBlOiB1ZC5mb3JtYXQgfHwgJ2Zsb2F0JyxcbiAgICAgICAgICB2aWV3RGltZW5zaW9uXG4gICAgICAgIH0gOiB1bmRlZmluZWQsXG4gICAgICAgIHN0b3JhZ2VUZXh0dXJlOiB1ZC5zdG9yYWdlQWNjZXNzID09PSAnd3JpdGUtb25seScgPyBPYmplY3QuYXNzaWduKHtcbiAgICAgICAgICBmb3JtYXQ6IHVkLnN0b3JhZ2VGb3JtYXQgfHwgJ3JnYmE4dW5vcm0nLFxuICAgICAgICAgIHZpZXdEaW1lbnNpb24sXG4gICAgICAgICAgYWNjZXNzOiB1ZC5zdG9yYWdlQWNjZXNzXG4gICAgICAgIH0pIDogdW5kZWZpbmVkXG4gICAgICB9KTtcblxuICAgICAgdGhpcy5fdW5pZm9ybXNJbmZvW3VkLm5hbWVdID0ge1xuICAgICAgICBiaW5kaW5nSWQsIGluZGV4LCB0eXBlOiAndGV4dHVyZScsXG4gICAgICAgIGRlZmF1bHRHcHVWYWx1ZTogKHVkLmRlZmF1bHRWYWx1ZSBhcyBUZXh0dXJlKS52aWV3XG4gICAgICB9O1xuXG4gICAgICBsZXQgdGV4Rm9ybWF0OiBzdHJpbmcgPSB1ZC5mb3JtYXQgPT09ICdkZXB0aCcgPyAnZGVwdGgnIDogdWQuZm9ybWF0ID09PSAndWludCcgPyAndTMyJyA6IHVkLmZvcm1hdCA9PT0gJ3NpbnQnID8gJ2kzMicgOiAnZjMyJztcblxuICAgICAgaWYgKHVkLnN0b3JhZ2VBY2Nlc3MpIHtcbiAgICAgICAgdGhpcy5fc2hhZGVyUHJlZml4ICs9IGBbW2dyb3VwKCR7X2dyb3VwSWR9KSwgYmluZGluZygke2JpbmRpbmdJZH0pXV0gdmFyICR7dWQubmFtZX06IHRleHR1cmVfc3RvcmFnZV8yZDwke3VkLnN0b3JhZ2VGb3JtYXQgfHwgJ3JnYmE4dW5vcm0nfSwgJHt1ZC5zdG9yYWdlQWNjZXNzLnJlcGxhY2UoJy1vbmx5JywgJycpfT47XFxuYFxuICAgICAgfSBlbHNlIGlmIChpc0N1YmUpIHtcbiAgICAgICAgdGhpcy5fc2hhZGVyUHJlZml4ICs9IGBbW2dyb3VwKCR7X2dyb3VwSWR9KSwgYmluZGluZygke2JpbmRpbmdJZH0pXV0gdmFyICR7dWQubmFtZX06IHRleHR1cmVfY3ViZTwke3RleEZvcm1hdH0+O1xcbmBcbiAgICAgIH0gZWxzZSBpZiAoKHVkLmRlZmF1bHRWYWx1ZSBhcyBUZXh0dXJlKS5pc0FycmF5KSB7XG4gICAgICAgIHRoaXMuX3NoYWRlclByZWZpeCArPSBgW1tncm91cCgke19ncm91cElkfSksIGJpbmRpbmcoJHtiaW5kaW5nSWR9KV1dIHZhciAke3VkLm5hbWV9OiB0ZXh0dXJlXzJkX2FycmF5PCR7dGV4Rm9ybWF0fT47XFxuYFxuICAgICAgfSBlbHNlIHtcbiAgICAgICAgdGhpcy5fc2hhZGVyUHJlZml4ICs9IGBbW2dyb3VwKCR7X2dyb3VwSWR9KSwgYmluZGluZygke2JpbmRpbmdJZH0pXV0gdmFyICR7dWQubmFtZX06IHRleHR1cmVfMmQ8JHt0ZXhGb3JtYXR9PjtcXG5gXG4gICAgICB9XG4gICAgICBiaW5kaW5nSWQgKz0gMTtcbiAgICAgIGluZGV4ICs9IDE7XG4gICAgfSk7XG5cbiAgICBfdW5pZm9ybURlc2Muc2FtcGxlcnMgJiYgX3VuaWZvcm1EZXNjLnNhbXBsZXJzLmZvckVhY2goKHVkKSA9PiB7XG4gICAgICBlbnRyaWVzLnB1c2goe1xuICAgICAgICBiaW5kaW5nOiBiaW5kaW5nSWQsXG4gICAgICAgIHZpc2liaWxpdHksXG4gICAgICAgIHNhbXBsZXI6IHt0eXBlOiAnZmlsdGVyaW5nJ31cbiAgICAgIH0pO1xuICAgICAgdGhpcy5fdW5pZm9ybXNJbmZvW3VkLm5hbWVdID0ge1xuICAgICAgICBiaW5kaW5nSWQsIGluZGV4LCB0eXBlOiAnc2FtcGxlcicsXG4gICAgICAgIGRlZmF1bHRHcHVWYWx1ZTogZGV2aWNlLmNyZWF0ZVNhbXBsZXIodWQuZGVmYXVsdFZhbHVlIGFzIEdQVVNhbXBsZXJEZXNjcmlwdG9yKVxuICAgICAgfTtcbiAgICAgIHRoaXMuX3NoYWRlclByZWZpeCArPSBgW1tncm91cCgke19ncm91cElkfSksIGJpbmRpbmcoJHtiaW5kaW5nSWR9KV1dIHZhciAke3VkLm5hbWV9OiBzYW1wbGVyO1xcbmBcbiAgICAgIGJpbmRpbmdJZCArPSAxO1xuICAgICAgaW5kZXggKz0gMTtcbiAgICB9KTtcbiAgICB0aGlzLl9zaGFkZXJQcmVmaXggKz0gJ1xcbic7XG5cbiAgICBfdW5pZm9ybURlc2MudW5pZm9ybXMuZm9yRWFjaCgodWQsIGluZGV4KSA9PiB7XG4gICAgICBjb25zdCBpbmZvID0gdGhpcy5fdW5pZm9ybXNJbmZvW3VkLm5hbWVdO1xuICAgICAgdGhpcy5fdW5pZm9ybXNCdWZmZXJEZWZhdWx0LnNldChuZXcgVWludDMyQXJyYXkoKGluZm8uZGVmYXVsdFZhbHVlIGFzIFRVbmlmb3JtVHlwZWRBcnJheSkuYnVmZmVyKSwgaW5mby5vZmZzZXQpO1xuICAgIH0pO1xuXG4gICAgaWYgKF91bmlmb3JtRGVzYy5zdG9yYWdlcykge1xuICAgICAgY29uc3Qgc3RydWN0Q2FjaGU6IHtbaGFzaDogc3RyaW5nXTogc3RyaW5nfSA9IHt9O1xuXG4gICAgICBfdW5pZm9ybURlc2Muc3RvcmFnZXMuZm9yRWFjaCgodWQpID0+IHtcbiAgICAgICAgZW50cmllcy5wdXNoKHtcbiAgICAgICAgICBiaW5kaW5nOiBiaW5kaW5nSWQsXG4gICAgICAgICAgdmlzaWJpbGl0eSxcbiAgICAgICAgICBidWZmZXI6IHt0eXBlOiB1ZC53cml0YWJsZSA/ICdzdG9yYWdlJyA6ICdyZWFkLW9ubHktc3RvcmFnZScgYXMgR1BVQnVmZmVyQmluZGluZ1R5cGV9XG4gICAgICAgIH0pO1xuXG4gICAgICAgIGxldCBoYXNoID0gYFN0b3JhZ2Uke3VkLnR5cGV9JHt1ZC5mb3JtYXQgfHwgJ2YzMid9YDtcbiAgICAgICAgaWYgKCF1ZC5jdXN0b21TdHJ1Y3QgJiYgIXN0cnVjdENhY2hlW2hhc2hdKSB7XG4gICAgICAgICAgdGhpcy5fc2hhZGVyUHJlZml4ICs9IChzdHJ1Y3RDYWNoZVtoYXNoXSA9IHN0cnVjdENhY2hlW2hhc2hdIHx8IHRoaXMuX2dldFN0b3JhZ2VTdHJ1Y3QoaGFzaCwgdWQudHlwZSwgdWQuZm9ybWF0IHx8ICdmMzInKSkgKyAnXFxuJztcbiAgICAgICAgfVxuICAgICAgICBpZiAodWQuY3VzdG9tU3RydWN0KSB7XG4gICAgICAgICAgaGFzaCA9IHVkLmN1c3RvbVN0cnVjdC5uYW1lO1xuICAgICAgICAgIHRoaXMuX3NoYWRlclByZWZpeCArPSB1ZC5jdXN0b21TdHJ1Y3QuY29kZTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBncHVWYWx1ZSA9IHVkLmdwdVZhbHVlID8gdWQuZ3B1VmFsdWUgOiBjcmVhdGVHUFVCdWZmZXIodWQuZGVmYXVsdFZhbHVlLCBHUFVCdWZmZXJVc2FnZS5TVE9SQUdFKTtcbiAgICAgICAgdGhpcy5fdW5pZm9ybXNJbmZvW3VkLm5hbWVdID0ge2JpbmRpbmdJZCwgaW5kZXgsIHR5cGU6ICdzdG9yYWdlJywgZGVmYXVsdFZhbHVlOiB1ZC5kZWZhdWx0VmFsdWUsIGRlZmF1bHRHcHVWYWx1ZTogZ3B1VmFsdWV9O1xuICAgICAgICB0aGlzLl9zaGFkZXJQcmVmaXggKz0gYFtbZ3JvdXAoJHtfZ3JvdXBJZH0pLCBiaW5kaW5nKCR7YmluZGluZ0lkfSldXSB2YXI8c3RvcmFnZSwgJHt1ZC53cml0YWJsZSA/ICdyZWFkX3dyaXRlJyA6ICdyZWFkJ30+ICR7dWQubmFtZX06ICR7aGFzaH07XFxuYFxuXG4gICAgICAgIGluZGV4ICs9IDE7XG4gICAgICAgIGJpbmRpbmdJZCArPSAxO1xuICAgICAgfSk7XG4gICAgfVxuXG4gICAgdGhpcy5fdW5pZm9ybUxheW91dERlc2MgPSB7ZW50cmllc307XG4gICAgdGhpcy5fdW5pZm9ybUxheW91dCA9IGRldmljZS5jcmVhdGVCaW5kR3JvdXBMYXlvdXQodGhpcy5fdW5pZm9ybUxheW91dERlc2MpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9nZXRSZWFsTGF5b3V0SW5mbyhcbiAgICB0eXBlOiBcIm51bWJlclwiIHwgXCJ2ZWMyXCIgfCBcInZlYzNcIiB8IFwidmVjNFwiIHwgXCJtYXQyeDJcIiB8IFwibWF0M3gzXCIgfCBcIm1hdDR4NFwiIHwgJ2N1c3RvbScsXG4gICAgc2l6ZTogbnVtYmVyLFxuICAgIGRlZmF1bHRWYWx1ZTogVFVuaWZvcm1UeXBlZEFycmF5LFxuICAgIGN1c3RvbT86IHtuYW1lOiBzdHJpbmcsIGxlbjogbnVtYmVyfVxuICApIHtcbiAgICBpZiAoY3VzdG9tKSB7XG4gICAgICByZXR1cm4ge29yaWdMZW46IGN1c3RvbS5sZW4sIHJlYWxMZW46IGN1c3RvbS5sZW4sIGRlZmF1bHRWYWx1ZX07XG4gICAgfVxuXG4gICAgbGV0IG9yaWdMZW46IG51bWJlcjtcbiAgICBsZXQgcmVhbExlbjogbnVtYmVyO1xuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdudW1iZXInOlxuICAgICAgICBvcmlnTGVuID0gMTtcbiAgICAgICAgcmVhbExlbiA9IDQ7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAndmVjMic6XG4gICAgICAgIG9yaWdMZW4gPSAyO1xuICAgICAgICByZWFsTGVuID0gNDtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICd2ZWMzJzpcbiAgICAgICAgb3JpZ0xlbiA9IDM7XG4gICAgICAgIHJlYWxMZW4gPSA0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ3ZlYzQnOlxuICAgICAgY2FzZSAnbWF0MngyJzpcbiAgICAgICAgb3JpZ0xlbiA9IDQ7XG4gICAgICAgIHJlYWxMZW4gPSA0O1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ21hdDN4Myc6XG4gICAgICAgIG9yaWdMZW4gPSA5O1xuICAgICAgICByZWFsTGVuID0gMTI7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnbWF0NHg0JzpcbiAgICAgICAgb3JpZ0xlbiA9IDE2O1xuICAgICAgICByZWFsTGVuID0gMTY7XG4gICAgICAgIGJyZWFrO1xuICAgIH1cblxuICAgIGNvbnN0IGNvbnN0cnVjdG9yID0gZGVmYXVsdFZhbHVlLmNvbnN0cnVjdG9yIGFzIGFueTtcbiAgICBjb25zdCB2YWx1ZSA9IG5ldyBjb25zdHJ1Y3RvcihyZWFsTGVuICogc2l6ZSkgYXMgdHlwZW9mIGRlZmF1bHRWYWx1ZTtcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzaXplOyBpbmRleCArPSAxKSB7XG4gICAgICB2YWx1ZS5zZXQoZGVmYXVsdFZhbHVlLnNsaWNlKGluZGV4ICogb3JpZ0xlbiwgKGluZGV4ICsgMSkgKiBvcmlnTGVuKSwgaW5kZXggKiByZWFsTGVuKTtcbiAgICB9XG5cbiAgICByZXR1cm4ge1xuICAgICAgb3JpZ0xlbixcbiAgICAgIHJlYWxMZW4sXG4gICAgICBkZWZhdWx0VmFsdWU6IHZhbHVlXG4gICAgfTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfZ2V0U3RvcmFnZVN0cnVjdChcbiAgICBoYXNoOiBzdHJpbmcsXG4gICAgdHlwZTogJ251bWJlcicgfCAndmVjMicgfCAndmVjMycgfCAndmVjNCcsXG4gICAgZm9ybWF0OiAnZjMyJyB8ICd1MzInIHwgJ2kzMidcbiAgKSB7XG4gICAgaWYgKHR5cGUgPT09ICdudW1iZXInKSB7XG4gICAgICByZXR1cm4gYFtbYmxvY2tdXSBzdHJ1Y3QgJHtoYXNofSB7IHZhbHVlOiBhcnJheTwke2Zvcm1hdH0+OyB9O2BcbiAgICB9XG5cbiAgICBpZiAodHlwZSA9PT0gJ3ZlYzInIHx8IHR5cGUgPT09ICd2ZWMzJyB8fCB0eXBlID09PSAndmVjNCcpIHtcbiAgICAgIHJldHVybiBgW1tibG9ja11dIHN0cnVjdCAke2hhc2h9IHsgdmFsdWU6IGFycmF5PCR7dHlwZX08JHtmb3JtYXR9Pj47IH07YFxuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcignTm90IHN1cHBvcnQgdHlwZSEnKTtcbiAgfVxuXG4gIHB1YmxpYyBjcmVhdGVVbmlmb3JtQmxvY2soKTogSVVuaWZvcm1CbG9jayB7XG4gICAgY29uc3Qge191bmlmb3JtRGVzYywgX3VuaWZvcm1zSW5mbywgX3VuaWZvcm1zQnVmZmVyRGVmYXVsdH0gPSB0aGlzO1xuICAgIGNvbnN0IHZhbHVlczogSVVuaWZvcm1CbG9ja1sndmFsdWVzJ10gPSB7fTtcbiAgICBjb25zdCBncm91cEVudHJpZXM6IEdQVUJpbmRHcm91cEVudHJ5W10gPSBbXTsgXG5cbiAgICBsZXQgY3B1QnVmZmVyOiBVaW50MzJBcnJheTtcbiAgICBsZXQgZ3B1QnVmZmVyOiBHUFVCdWZmZXI7XG4gICAgaWYgKF91bmlmb3Jtc0J1ZmZlckRlZmF1bHQpIHtcbiAgICAgIGdwdUJ1ZmZlciA9IGNyZWF0ZUdQVUJ1ZmZlcihfdW5pZm9ybXNCdWZmZXJEZWZhdWx0LCBHUFVCdWZmZXJVc2FnZS5VTklGT1JNKTtcbiAgICAgIGNwdUJ1ZmZlciA9IF91bmlmb3Jtc0J1ZmZlckRlZmF1bHQuc2xpY2UoKTtcbiAgICAgIGdyb3VwRW50cmllcy5wdXNoKHtcbiAgICAgICAgYmluZGluZzogMCxcbiAgICAgICAgcmVzb3VyY2U6IHtidWZmZXI6IGdwdUJ1ZmZlcn1cbiAgICAgIH0pO1xuICAgICAgX3VuaWZvcm1EZXNjLnVuaWZvcm1zLmZvckVhY2goKHVkKSA9PiB7XG4gICAgICAgIGNvbnN0IGluZm8gPSB0aGlzLl91bmlmb3Jtc0luZm9bdWQubmFtZV07XG4gICAgICAgIHZhbHVlc1t1ZC5uYW1lXSA9IHtcbiAgICAgICAgICB2YWx1ZTogbmV3ICh0aGlzLl91bmlmb3Jtc0luZm9bdWQubmFtZV0uZGVmYXVsdFZhbHVlLmNvbnN0cnVjdG9yIGFzIHR5cGVvZiBGbG9hdDMyQXJyYXkpKFxuICAgICAgICAgICAgY3B1QnVmZmVyLmJ1ZmZlciwgaW5mby5vZmZzZXQgKiA0LCBpbmZvLnJlYWxMZW4gKiBpbmZvLnNpemVcbiAgICAgICAgICApLFxuICAgICAgICAgIGdwdVZhbHVlOiBncHVCdWZmZXJcbiAgICAgICAgfTtcbiAgICAgIH0pO1xuICAgIH1cblxuICAgIF91bmlmb3JtRGVzYy50ZXh0dXJlcyAmJiBfdW5pZm9ybURlc2MudGV4dHVyZXMuZm9yRWFjaCgodWQpID0+IHtcbiAgICAgIGNvbnN0IHZpZXcgPSBfdW5pZm9ybXNJbmZvW3VkLm5hbWVdLmRlZmF1bHRHcHVWYWx1ZTtcbiAgICAgIHZhbHVlc1t1ZC5uYW1lXSA9IHt2YWx1ZTogdWQuZGVmYXVsdFZhbHVlLCBncHVWYWx1ZTogdmlld307XG4gICAgICBncm91cEVudHJpZXMucHVzaCh7XG4gICAgICAgIGJpbmRpbmc6IF91bmlmb3Jtc0luZm9bdWQubmFtZV0uYmluZGluZ0lkLFxuICAgICAgICByZXNvdXJjZTogdmlldyBhcyBHUFVUZXh0dXJlVmlld1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfdW5pZm9ybURlc2Muc2FtcGxlcnMgJiYgX3VuaWZvcm1EZXNjLnNhbXBsZXJzLmZvckVhY2goKHVkKSA9PiB7XG4gICAgICBjb25zdCBzYW1wbGVyID0gX3VuaWZvcm1zSW5mb1t1ZC5uYW1lXS5kZWZhdWx0R3B1VmFsdWU7XG4gICAgICB2YWx1ZXNbdWQubmFtZV0gPSB7dmFsdWU6IHVkLmRlZmF1bHRWYWx1ZSwgZ3B1VmFsdWU6IHNhbXBsZXJ9O1xuICAgICAgZ3JvdXBFbnRyaWVzLnB1c2goe1xuICAgICAgICBiaW5kaW5nOiBfdW5pZm9ybXNJbmZvW3VkLm5hbWVdLmJpbmRpbmdJZCxcbiAgICAgICAgcmVzb3VyY2U6IHNhbXBsZXIgYXMgR1BVU2FtcGxlclxuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBfdW5pZm9ybURlc2Muc3RvcmFnZXMgJiYgX3VuaWZvcm1EZXNjLnN0b3JhZ2VzLmZvckVhY2goKHVkKSA9PiB7XG4gICAgICBjb25zdCBidWZmZXIgPSBfdW5pZm9ybXNJbmZvW3VkLm5hbWVdLmRlZmF1bHRHcHVWYWx1ZSBhcyBHUFVCdWZmZXI7XG4gICAgICB2YWx1ZXNbdWQubmFtZV0gPSB7dmFsdWU6IHVkLmRlZmF1bHRWYWx1ZSwgZ3B1VmFsdWU6IGJ1ZmZlcn07XG4gICAgICBncm91cEVudHJpZXMucHVzaCh7XG4gICAgICAgIGJpbmRpbmc6IF91bmlmb3Jtc0luZm9bdWQubmFtZV0uYmluZGluZ0lkLFxuICAgICAgICByZXNvdXJjZToge2J1ZmZlcn1cbiAgICAgIH0pO1xuICAgIH0pO1xuXG4gICAgcmV0dXJuIHtlbnRyaWVzOiBncm91cEVudHJpZXMsIHZhbHVlcywgbGF5b3V0OiB0aGlzLl91bmlmb3JtTGF5b3V0LCBjcHVCdWZmZXIsIGdwdUJ1ZmZlciwgaXNCdWZmZXJEaXJ0eTogZmFsc2UsIGlzRGlydHk6IHRydWV9O1xuICB9XG5cbiAgcHVibGljIHNldFVuaWZvcm0odWI6IElVbmlmb3JtQmxvY2ssIG5hbWU6IHN0cmluZywgdmFsdWU6IFRVbmlmb3JtVmFsdWUsIHJ0U3ViTmFtZU9yR1BVQnVmZmVyPzogc3RyaW5nIHwgR1BVQnVmZmVyKSB7XG4gICAgY29uc3QgaW5mbyA9IHRoaXMuX3VuaWZvcm1zSW5mb1tuYW1lXTtcblxuICAgIGlmICghaW5mbyB8fCB2YWx1ZSA9PT0gdW5kZWZpbmVkKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgY29uc3Qge2VudHJpZXN9ID0gdWI7XG4gICAgY29uc3Qge2JpbmRpbmdJZCwgdHlwZSwgb2Zmc2V0LCByZWFsTGVuLCBvcmlnTGVufSA9IGluZm87XG4gICAgY29uc3QgdmFsdWVzID0gdWIudmFsdWVzW25hbWVdO1xuXG4gICAgaWYgKHR5cGUgPT09ICdidWZmZXInKSB7XG4gICAgICB2YWx1ZSA9IHZhbHVlIGFzIFRVbmlmb3JtVHlwZWRBcnJheTtcbiAgICAgIGNvbnN0IGNwdVZhbHVlID0gdmFsdWVzLnZhbHVlIGFzIFRVbmlmb3JtVHlwZWRBcnJheTtcbiAgICAgIHZhbHVlID0gKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicgPyBbdmFsdWVdIDogdmFsdWUpIGFzIFVpbnQzMkFycmF5O1xuICAgICAgaWYgKG9yaWdMZW4gIT09IHJlYWxMZW4pIHtcbiAgICAgICAgY29uc3Qgc2l6ZSA9IHZhbHVlLmxlbmd0aCAvIG9yaWdMZW47XG5cbiAgICAgICAgZm9yIChsZXQgaW5kZXggPSAwOyBpbmRleCA8IHNpemU7IGluZGV4ICs9IDEpIHtcbiAgICAgICAgICBjcHVWYWx1ZS5zZXQoXG4gICAgICAgICAgICB2YWx1ZS5zbGljZShvcmlnTGVuICogaW5kZXgsIG9yaWdMZW4gKiAoaW5kZXggKyAxKSksXG4gICAgICAgICAgICByZWFsTGVuICogaW5kZXhcbiAgICAgICAgICApO1xuICAgICAgICB9XG4gICAgICB9IGVsc2Uge1xuICAgICAgICBjcHVWYWx1ZS5zZXQodmFsdWUpO1xuICAgICAgfVxuICAgICAgdWIuaXNCdWZmZXJEaXJ0eSA9IHRydWU7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnc2FtcGxlcicpIHtcbiAgICAgIHZhbHVlcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgY29uc29sZS53YXJuKCdOb3QgaW1wbGVtZW50ZWQhJyk7XG4gICAgfSBlbHNlIGlmICh0eXBlID09PSAnc3RvcmFnZScpIHtcbiAgICAgIHZhbHVlcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgKGVudHJpZXNbYmluZGluZ0lkXS5yZXNvdXJjZSBhcyB7YnVmZmVyOiBHUFVCdWZmZXJ9KS5idWZmZXIgPSB2YWx1ZXMuZ3B1VmFsdWUgPSBydFN1Yk5hbWVPckdQVUJ1ZmZlclxuICAgICAgICA/IHJ0U3ViTmFtZU9yR1BVQnVmZmVyIGFzIEdQVUJ1ZmZlclxuICAgICAgICA6IGNyZWF0ZUdQVUJ1ZmZlcih2YWx1ZSBhcyBUVW5pZm9ybVR5cGVkQXJyYXksIEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0UpO1xuICAgICAgICB1Yi5pc0RpcnR5ID0gdHJ1ZTtcbiAgICB9IGVsc2UgaWYgKFJlbmRlclRleHR1cmUuSVModmFsdWUpKSB7XG4gICAgICBjb25zdCB2aWV3ID0gcnRTdWJOYW1lT3JHUFVCdWZmZXIgPyB2YWx1ZS5nZXRDb2xvclZpZXdCeU5hbWUocnRTdWJOYW1lT3JHUFVCdWZmZXIgYXMgc3RyaW5nKTogdmFsdWUuY29sb3JWaWV3O1xuXG4gICAgICBlbnRyaWVzW2JpbmRpbmdJZF0ucmVzb3VyY2UgPSB2YWx1ZXMuZ3B1VmFsdWUgPSB2aWV3O1xuICAgICAgdmFsdWVzLnZhbHVlID0gdmFsdWU7XG4gICAgICB1Yi5pc0RpcnR5ID0gdHJ1ZTtcbiAgICAgIHJldHVybjtcbiAgICB9IGVsc2UgIHtcbiAgICAgIHZhbHVlID0gdmFsdWUgYXMgVGV4dHVyZTtcbiAgICAgIGlmICh2YWx1ZS5pc0FycmF5ICE9PSAodmFsdWVzLnZhbHVlIGFzIFRleHR1cmUpLmlzQXJyYXkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlIHRleHR1cmUyZCBhcnJheSEnKTtcbiAgICAgIH1cblxuICAgICAgZW50cmllc1tiaW5kaW5nSWRdLnJlc291cmNlID0gdmFsdWVzLmdwdVZhbHVlID0gdmFsdWUudmlldztcbiAgICAgIHZhbHVlcy52YWx1ZSA9IHZhbHVlO1xuICAgICAgdWIuaXNEaXJ0eSA9IHRydWU7XG4gICAgICByZXR1cm47XG4gICAgfVxuICB9XG5cbiAgcHVibGljIGdldFVuaWZvcm0odWI6IElVbmlmb3JtQmxvY2ssIG5hbWU6IHN0cmluZykge1xuICAgIHJldHVybiB1Yi52YWx1ZXNbbmFtZV0/LnZhbHVlO1xuICB9XG5cbiAgcHVibGljIGdldEJpbmRpbmdHcm91cCh1YjogSVVuaWZvcm1CbG9jaywgcHJlR3JvdXA6IEdQVUJpbmRHcm91cCkge1xuICAgIGlmICh1Yi5pc0J1ZmZlckRpcnR5KSB7XG4gICAgICByZW5kZXJFbnYuZGV2aWNlLnF1ZXVlLndyaXRlQnVmZmVyKFxuICAgICAgICB1Yi5ncHVCdWZmZXIgYXMgR1BVQnVmZmVyLFxuICAgICAgICAwLFxuICAgICAgICB1Yi5jcHVCdWZmZXJcbiAgICAgICk7XG5cbiAgICAgIHViLmlzQnVmZmVyRGlydHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICBpZiAodWIuaXNEaXJ0eSkge1xuICAgICAgcHJlR3JvdXAgPSByZW5kZXJFbnYuZGV2aWNlLmNyZWF0ZUJpbmRHcm91cCh7XG4gICAgICAgIGxheW91dDogdWIubGF5b3V0LFxuICAgICAgICBlbnRyaWVzOiB1Yi5lbnRyaWVzXG4gICAgICB9KTtcbiAgICAgIHViLmlzRGlydHkgPSBmYWxzZTtcbiAgICB9XG5cbiAgICByZXR1cm4gcHJlR3JvdXA7XG4gIH1cbn1cbiJdfQ==","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.RenderEnv = void 0;\nvar RenderEnv = (function () {\n    function RenderEnv() {\n        this.isRenderEnv = true;\n        this._swapChainFormat = 'bgra8unorm';\n    }\n    Object.defineProperty(RenderEnv.prototype, \"canvas\", {\n        get: function () {\n            return this._canvas;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"ctx\", {\n        get: function () {\n            return this._ctx;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"device\", {\n        get: function () {\n            return this._device;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"bindingGroup\", {\n        get: function () {\n            this._bindingGroup = this._ubTemplate.getBindingGroup(this._uniformBlock, this._bindingGroup);\n            return this._bindingGroup;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"shaderPrefix\", {\n        get: function () {\n            return this._ubTemplate.shaderPrefix;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"uniformLayout\", {\n        get: function () {\n            return this._ubTemplate.uniformLayout;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"width\", {\n        get: function () {\n            return this._canvas.width;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"height\", {\n        get: function () {\n            return this._canvas.height;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"swapChainFormat\", {\n        get: function () {\n            return this._swapChainFormat;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RenderEnv.prototype, \"currentTexture\", {\n        get: function () {\n            return this._ctx.getCurrentTexture();\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RenderEnv.prototype.init = function (canvas) {\n        return __awaiter(this, void 0, void 0, function () {\n            var adapter, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        if (!navigator.gpu) {\n                            throw new Error('WebGPU is not supported!');\n                        }\n                        return [4, navigator.gpu.requestAdapter()];\n                    case 1:\n                        adapter = _b.sent();\n                        if (!adapter) {\n                            throw new Error('Require adapter failed!');\n                        }\n                        _a = this;\n                        return [4, adapter.requestDevice()];\n                    case 2:\n                        _a._device = _b.sent();\n                        if (!this._device) {\n                            throw new Error('Require device failed!');\n                        }\n                        this._canvas = canvas;\n                        this._ctx = (canvas.getContext('webgpu') || canvas.getContext('gpupresent'));\n                        this._ctx.configure({\n                            device: this._device,\n                            format: this._swapChainFormat,\n                        });\n                        return [2];\n                }\n            });\n        });\n    };\n    RenderEnv.prototype.createGlobal = function (ubTemplate) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                this._ubTemplate = ubTemplate;\n                this._uniformBlock = this._ubTemplate.createUniformBlock();\n                return [2];\n            });\n        });\n    };\n    RenderEnv.prototype.setUniform = function (name, value, rtSubNameOrGPUBuffer) {\n        this._ubTemplate.setUniform(this._uniformBlock, name, value, rtSubNameOrGPUBuffer);\n    };\n    RenderEnv.prototype.getUniform = function (name) {\n        return this._ubTemplate.getUniform(this._uniformBlock, name);\n    };\n    RenderEnv.CLASS_NAME = 'RenderEnv';\n    return RenderEnv;\n}());\nexports.RenderEnv = RenderEnv;\nvar renderEnv = new RenderEnv();\nexports.default = renderEnv;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicmVuZGVyRW52LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsicmVuZGVyRW52LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQVVBO0lBQUE7UUFFUyxnQkFBVyxHQUFZLElBQUksQ0FBQztRQUszQixxQkFBZ0IsR0FBcUIsWUFBWSxDQUFDO0lBb0Y1RCxDQUFDO0lBL0VDLHNCQUFJLDZCQUFNO2FBQVY7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDdEIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSwwQkFBRzthQUFQO1lBQ0UsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDO1FBQ25CLENBQUM7OztPQUFBO0lBRUQsc0JBQUksNkJBQU07YUFBVjtZQUNFLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztRQUN0QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLG1DQUFZO2FBQWhCO1lBQ0UsSUFBSSxDQUFDLGFBQWEsR0FBRyxJQUFJLENBQUMsV0FBVyxDQUFDLGVBQWUsQ0FBQyxJQUFJLENBQUMsYUFBYSxFQUFFLElBQUksQ0FBQyxhQUFhLENBQUMsQ0FBQztZQUM5RixPQUFPLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDNUIsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxtQ0FBWTthQUFoQjtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxZQUFZLENBQUM7UUFDdkMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSxvQ0FBYTthQUFqQjtZQUNFLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxhQUFhLENBQUM7UUFDeEMsQ0FBQzs7O09BQUE7SUFFRCxzQkFBSSw0QkFBSzthQUFUO1lBQ0UsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQztRQUM1QixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLDZCQUFNO2FBQVY7WUFDRSxPQUFPLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDO1FBQzdCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksc0NBQWU7YUFBbkI7WUFDRSxPQUFPLElBQUksQ0FBQyxnQkFBZ0IsQ0FBQztRQUMvQixDQUFDOzs7T0FBQTtJQUVELHNCQUFJLHFDQUFjO2FBQWxCO1lBQ0UsT0FBTyxJQUFJLENBQUMsSUFBSSxDQUFDLGlCQUFpQixFQUFFLENBQUM7UUFDdkMsQ0FBQzs7O09BQUE7SUFFWSx3QkFBSSxHQUFqQixVQUFrQixNQUF5Qjs7Ozs7O3dCQUN6QyxJQUFJLENBQUMsU0FBUyxDQUFDLEdBQUcsRUFBRTs0QkFDbEIsTUFBTSxJQUFJLEtBQUssQ0FBQywwQkFBMEIsQ0FBQyxDQUFDO3lCQUM3Qzt3QkFFZSxXQUFNLFNBQVMsQ0FBQyxHQUFHLENBQUMsY0FBYyxFQUFFLEVBQUE7O3dCQUE5QyxPQUFPLEdBQUcsU0FBb0M7d0JBRXBELElBQUksQ0FBQyxPQUFPLEVBQUU7NEJBQ1osTUFBTSxJQUFJLEtBQUssQ0FBQyx5QkFBeUIsQ0FBQyxDQUFDO3lCQUM1Qzt3QkFFRCxLQUFBLElBQUksQ0FBQTt3QkFBVyxXQUFNLE9BQU8sQ0FBQyxhQUFhLEVBQUUsRUFBQTs7d0JBQTVDLEdBQUssT0FBTyxHQUFHLFNBQTZCLENBQUM7d0JBRTdDLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxFQUFFOzRCQUNqQixNQUFNLElBQUksS0FBSyxDQUFDLHdCQUF3QixDQUFDLENBQUM7eUJBQzNDO3dCQUVELElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTSxDQUFDO3dCQUN0QixJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFDLFVBQVUsQ0FBQyxRQUFRLENBQVEsSUFBSSxNQUFNLENBQUMsVUFBVSxDQUFDLFlBQVksQ0FBQyxDQUFxQixDQUFDO3dCQUV4RyxJQUFJLENBQUMsSUFBSSxDQUFDLFNBQVMsQ0FBQzs0QkFDbEIsTUFBTSxFQUFFLElBQUksQ0FBQyxPQUFPOzRCQUNwQixNQUFNLEVBQUUsSUFBSSxDQUFDLGdCQUFnQjt5QkFDOUIsQ0FBQyxDQUFDOzs7OztLQUNKO0lBRVksZ0NBQVksR0FBekIsVUFBMEIsVUFBc0I7OztnQkFDOUMsSUFBSSxDQUFDLFdBQVcsR0FBRyxVQUFVLENBQUM7Z0JBQzlCLElBQUksQ0FBQyxhQUFhLEdBQUcsSUFBSSxDQUFDLFdBQVcsQ0FBQyxrQkFBa0IsRUFBRSxDQUFDOzs7O0tBQzVEO0lBRU0sOEJBQVUsR0FBakIsVUFBa0IsSUFBWSxFQUFFLEtBQW9CLEVBQUUsb0JBQXlDO1FBQzdGLElBQUksQ0FBQyxXQUFXLENBQUMsVUFBVSxDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxFQUFFLEtBQUssRUFBRSxvQkFBb0IsQ0FBQyxDQUFDO0lBQ3JGLENBQUM7SUFFTSw4QkFBVSxHQUFqQixVQUFrQixJQUFZO1FBQzVCLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRSxJQUFJLENBQUMsQ0FBQztJQUMvRCxDQUFDO0lBekZjLG9CQUFVLEdBQVcsV0FBVyxDQUFDO0lBMEZsRCxnQkFBQztDQUFBLEFBM0ZELElBMkZDO0FBM0ZZLDhCQUFTO0FBNkZ0QixJQUFNLFNBQVMsR0FBRyxJQUFJLFNBQVMsRUFBRSxDQUFDO0FBQ2xDLGtCQUFlLFNBQVMsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IHJlbmRlckVudi50c1xuICogQEF1dGhvciA6IGR0eXNreSAoZHR5c2t5QG91dGxvb2suY29tKVxuICogQExpbmsgICA6IGR0eXNreS5tb2VcbiAqIEBEYXRlICAgOiAyMDIxLzYvNuS4i+WNiDg6NTk6MDVcbiAqL1xuZGVjbGFyZSB0eXBlIFVCVGVtcGxhdGUgPSBpbXBvcnQoJy4vVUJUZW1wbGF0ZScpLmRlZmF1bHQ7XG5kZWNsYXJlIHR5cGUgSVVuaWZvcm1CbG9jayA9IGltcG9ydCgnLi9VQlRlbXBsYXRlJykuSVVuaWZvcm1CbG9jaztcbmRlY2xhcmUgdHlwZSBUVW5pZm9ybVZhbHVlID0gaW1wb3J0KCcuL1VCVGVtcGxhdGUnKS5UVW5pZm9ybVZhbHVlO1xuXG5leHBvcnQgY2xhc3MgUmVuZGVyRW52IHtcbiAgcHVibGljIHN0YXRpYyAgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ1JlbmRlckVudic7XG4gIHB1YmxpYyBpc1JlbmRlckVudjogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHJpdmF0ZSBfZGV2aWNlOiBHUFVEZXZpY2U7XG4gIHByaXZhdGUgX2NhbnZhczogSFRNTENhbnZhc0VsZW1lbnQ7XG4gIHByaXZhdGUgX2N0eDogR1BVQ2FudmFzQ29udGV4dDtcbiAgcHJpdmF0ZSBfc3dhcENoYWluRm9ybWF0OiBHUFVUZXh0dXJlRm9ybWF0ID0gJ2JncmE4dW5vcm0nO1xuICBwcml2YXRlIF91YlRlbXBsYXRlOiBVQlRlbXBsYXRlO1xuICBwcml2YXRlIF91bmlmb3JtQmxvY2s6IElVbmlmb3JtQmxvY2s7XG4gIHByaXZhdGUgX2JpbmRpbmdHcm91cDogR1BVQmluZEdyb3VwO1xuXG4gIGdldCBjYW52YXMoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbnZhcztcbiAgfVxuXG4gIGdldCBjdHgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N0eDtcbiAgfVxuXG4gIGdldCBkZXZpY2UoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2RldmljZTtcbiAgfVxuXG4gIGdldCBiaW5kaW5nR3JvdXAoKSB7XG4gICAgdGhpcy5fYmluZGluZ0dyb3VwID0gdGhpcy5fdWJUZW1wbGF0ZS5nZXRCaW5kaW5nR3JvdXAodGhpcy5fdW5pZm9ybUJsb2NrLCB0aGlzLl9iaW5kaW5nR3JvdXApO1xuICAgIHJldHVybiB0aGlzLl9iaW5kaW5nR3JvdXA7XG4gIH1cblxuICBnZXQgc2hhZGVyUHJlZml4KCkge1xuICAgIHJldHVybiB0aGlzLl91YlRlbXBsYXRlLnNoYWRlclByZWZpeDtcbiAgfVxuXG4gIGdldCB1bmlmb3JtTGF5b3V0KCkge1xuICAgIHJldHVybiB0aGlzLl91YlRlbXBsYXRlLnVuaWZvcm1MYXlvdXQ7XG4gIH1cblxuICBnZXQgd2lkdGgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbnZhcy53aWR0aDtcbiAgfVxuXG4gIGdldCBoZWlnaHQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2NhbnZhcy5oZWlnaHQ7XG4gIH1cblxuICBnZXQgc3dhcENoYWluRm9ybWF0KCk6IEdQVVRleHR1cmVGb3JtYXQge1xuICAgIHJldHVybiB0aGlzLl9zd2FwQ2hhaW5Gb3JtYXQ7XG4gIH1cblxuICBnZXQgY3VycmVudFRleHR1cmUoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2N0eC5nZXRDdXJyZW50VGV4dHVyZSgpO1xuICB9XG5cbiAgcHVibGljIGFzeW5jIGluaXQoY2FudmFzOiBIVE1MQ2FudmFzRWxlbWVudCkge1xuICAgIGlmICghbmF2aWdhdG9yLmdwdSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdXZWJHUFUgaXMgbm90IHN1cHBvcnRlZCEnKTtcbiAgICB9XG5cbiAgICBjb25zdCBhZGFwdGVyID0gYXdhaXQgbmF2aWdhdG9yLmdwdS5yZXF1ZXN0QWRhcHRlcigpO1xuXG4gICAgaWYgKCFhZGFwdGVyKSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ1JlcXVpcmUgYWRhcHRlciBmYWlsZWQhJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fZGV2aWNlID0gYXdhaXQgYWRhcHRlci5yZXF1ZXN0RGV2aWNlKCk7XG5cbiAgICBpZiAoIXRoaXMuX2RldmljZSkge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdSZXF1aXJlIGRldmljZSBmYWlsZWQhJyk7XG4gICAgfVxuXG4gICAgdGhpcy5fY2FudmFzID0gY2FudmFzO1xuICAgIHRoaXMuX2N0eCA9IChjYW52YXMuZ2V0Q29udGV4dCgnd2ViZ3B1JykgYXMgYW55IHx8IGNhbnZhcy5nZXRDb250ZXh0KCdncHVwcmVzZW50JykpIGFzIEdQVUNhbnZhc0NvbnRleHQ7XG5cbiAgICB0aGlzLl9jdHguY29uZmlndXJlKHtcbiAgICAgIGRldmljZTogdGhpcy5fZGV2aWNlLFxuICAgICAgZm9ybWF0OiB0aGlzLl9zd2FwQ2hhaW5Gb3JtYXQsXG4gICAgfSk7XG4gIH1cblxuICBwdWJsaWMgYXN5bmMgY3JlYXRlR2xvYmFsKHViVGVtcGxhdGU6IFVCVGVtcGxhdGUpIHtcbiAgICB0aGlzLl91YlRlbXBsYXRlID0gdWJUZW1wbGF0ZTtcbiAgICB0aGlzLl91bmlmb3JtQmxvY2sgPSB0aGlzLl91YlRlbXBsYXRlLmNyZWF0ZVVuaWZvcm1CbG9jaygpO1xuICB9XG5cbiAgcHVibGljIHNldFVuaWZvcm0obmFtZTogc3RyaW5nLCB2YWx1ZTogVFVuaWZvcm1WYWx1ZSwgcnRTdWJOYW1lT3JHUFVCdWZmZXI/OiBzdHJpbmcgfCBHUFVCdWZmZXIpIHtcbiAgICB0aGlzLl91YlRlbXBsYXRlLnNldFVuaWZvcm0odGhpcy5fdW5pZm9ybUJsb2NrLCBuYW1lLCB2YWx1ZSwgcnRTdWJOYW1lT3JHUFVCdWZmZXIpO1xuICB9XG5cbiAgcHVibGljIGdldFVuaWZvcm0obmFtZTogc3RyaW5nKTogVFVuaWZvcm1WYWx1ZSB7XG4gICAgcmV0dXJuIHRoaXMuX3ViVGVtcGxhdGUuZ2V0VW5pZm9ybSh0aGlzLl91bmlmb3JtQmxvY2ssIG5hbWUpO1xuICB9XG59XG5cbmNvbnN0IHJlbmRlckVudiA9IG5ldyBSZW5kZXJFbnYoKTtcbmV4cG9ydCBkZWZhdWx0IHJlbmRlckVudjtcbiJdfQ==","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.genFilterParams = exports.nthElement = exports.partition = exports.logCanvas = exports.hashCode = exports.createGPUBufferBySize = exports.createGPUBuffer = exports.copyTypedArray = exports.callWithProfile = exports.isArray = exports.isTextureSourceArray = void 0;\nvar renderEnv_1 = require(\"./renderEnv\");\nfunction isTextureSourceArray(value) {\n    return !!value.push;\n}\nexports.isTextureSourceArray = isTextureSourceArray;\nfunction isArray(value) {\n    return !!value.push;\n}\nexports.isArray = isArray;\nfunction callWithProfile(name, fn, args) {\n    var t = performance.now();\n    fn.apply(void 0, args);\n    console.log(\"Ray Tracing, \" + name + \": \" + (performance.now() - t) / 1000 + \"(s)\");\n}\nexports.callWithProfile = callWithProfile;\nfunction copyTypedArray(size, dst, dstOffset, src, srcOffset) {\n    for (var index = 0; index < size; index += 1) {\n        dst[dstOffset + index] = src[srcOffset + index];\n    }\n}\nexports.copyTypedArray = copyTypedArray;\nfunction createGPUBuffer(array, usage) {\n    var size = array.byteLength + (4 - array.byteLength % 4);\n    var buffer = renderEnv_1.default.device.createBuffer({\n        size: size,\n        usage: usage | GPUBufferUsage.COPY_DST,\n        mappedAtCreation: true\n    });\n    var view = new array.constructor(buffer.getMappedRange(0, size));\n    view.set(array, 0);\n    buffer.unmap();\n    return buffer;\n}\nexports.createGPUBuffer = createGPUBuffer;\nfunction createGPUBufferBySize(size, usage) {\n    var buffer = renderEnv_1.default.device.createBuffer({\n        size: size,\n        usage: usage | GPUBufferUsage.COPY_DST,\n        mappedAtCreation: true\n    });\n    buffer.unmap();\n    return buffer;\n}\nexports.createGPUBufferBySize = createGPUBufferBySize;\nexports.hashCode = function (s) { return s.split('').reduce(function (a, b) { a = ((a << 5) - a) + b.charCodeAt(0); return a & a; }, 0); };\nfunction logCanvas(canvas, width) {\n    var height = width * canvas.height / canvas.width;\n    var url = canvas.toDataURL();\n    console.log('%c+', \"font-size: 1px; padding: \" + height / 2 + \"px \" + width / 2 + \"px; line-height: \" + height + \"px; background: url(\" + url + \"); background-size: \" + width + \"px \" + height + \"px; background-repeat: no-repeat; color: transparent;\");\n}\nexports.logCanvas = logCanvas;\nfunction partition(array, compare, left, right) {\n    if (left === void 0) { left = 0; }\n    if (right === void 0) { right = array.length; }\n    while (left !== right) {\n        while (compare(array[left])) {\n            left += 1;\n            if (left === right) {\n                return left;\n            }\n        }\n        do {\n            right -= 1;\n            if (left === right) {\n                return left;\n            }\n        } while (!compare(array[right]));\n        swap(array, left, right);\n        left += 1;\n    }\n    return left;\n}\nexports.partition = partition;\nfunction nthElement(array, compare, left, right, k) {\n    if (left === void 0) { left = 0; }\n    if (right === void 0) { right = array.length; }\n    if (k === void 0) { k = Math.floor((left + right) / 2); }\n    for (var i = left; i <= k; i += 1) {\n        var minIndex = i;\n        var minValue = array[i];\n        for (var j = i + 1; j < right; j += 1) {\n            if (!compare(minValue, array[j])) {\n                minIndex = j;\n                minValue = array[j];\n                swap(array, i, minIndex);\n            }\n        }\n    }\n}\nexports.nthElement = nthElement;\nfunction swap(array, a, b) {\n    var x = array[b];\n    array[b] = array[a];\n    array[a] = x;\n}\nfunction genFilterParams(sigmas) {\n    var res = new Float32Array(sigmas.length);\n    for (var i = 0; i < sigmas.length; i += 1) {\n        var s = sigmas[i];\n        res[i] = -0.5 * s * s;\n    }\n    return res;\n}\nexports.genFilterParams = genFilterParams;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoic2hhcmVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsic2hhcmVkLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7OztBQU1BLHlDQUFvQztBQVFwQyxTQUFnQixvQkFBb0IsQ0FBQyxLQUF3QztJQUMzRSxPQUFPLENBQUMsQ0FBRSxLQUEwQixDQUFDLElBQUksQ0FBQztBQUM1QyxDQUFDO0FBRkQsb0RBRUM7QUFFRCxTQUFnQixPQUFPLENBQUksS0FBYztJQUN2QyxPQUFPLENBQUMsQ0FBRSxLQUFhLENBQUMsSUFBSSxDQUFDO0FBQy9CLENBQUM7QUFGRCwwQkFFQztBQUVELFNBQWdCLGVBQWUsQ0FBbUMsSUFBWSxFQUFFLEVBQU0sRUFBRSxJQUFvQjtJQUMxRyxJQUFNLENBQUMsR0FBRyxXQUFXLENBQUMsR0FBRyxFQUFFLENBQUM7SUFDNUIsRUFBRSxlQUFJLElBQUksRUFBRTtJQUNaLE9BQU8sQ0FBQyxHQUFHLENBQUMsa0JBQWdCLElBQUksVUFBSyxDQUFDLFdBQVcsQ0FBQyxHQUFHLEVBQUUsR0FBRyxDQUFDLENBQUMsR0FBRyxJQUFJLFFBQUssQ0FBQyxDQUFDO0FBQzVFLENBQUM7QUFKRCwwQ0FJQztBQUVELFNBQWdCLGNBQWMsQ0FDNUIsSUFBWSxFQUNaLEdBQWdCLEVBQUUsU0FBaUIsRUFDbkMsR0FBMkIsRUFBRSxTQUFpQjtJQUU5QyxLQUFLLElBQUksS0FBSyxHQUFHLENBQUMsRUFBRSxLQUFLLEdBQUcsSUFBSSxFQUFFLEtBQUssSUFBSSxDQUFDLEVBQUU7UUFDNUMsR0FBRyxDQUFDLFNBQVMsR0FBRyxLQUFLLENBQUMsR0FBRyxHQUFHLENBQUMsU0FBUyxHQUFHLEtBQUssQ0FBQyxDQUFDO0tBQ2pEO0FBQ0gsQ0FBQztBQVJELHdDQVFDO0FBRUQsU0FBZ0IsZUFBZSxDQUFDLEtBQWtCLEVBQUUsS0FBMEI7SUFDNUUsSUFBTSxJQUFJLEdBQUcsS0FBSyxDQUFDLFVBQVUsR0FBRyxDQUFDLENBQUMsR0FBRyxLQUFLLENBQUMsVUFB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QWUsQ0FBQyxNQUFvQjtJQUNsRCxJQUFNLEdBQUcsR0FBRyxJQUFJLFlBQVksQ0FBQyxNQUFNLENBQUMsTUFBTSxDQUFDLENBQUM7SUFFNUMsS0FBSyxJQUFJLENBQUMsR0FBVyxDQUFDLEVBQUUsQ0FBQyxHQUFHLE1BQU0sQ0FBQyxNQUFNLEVBQUUsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNqRCxJQUFNLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUM7UUFDcEIsR0FBRyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsR0FBRyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDdkI7SUFFRCxPQUFPLEdBQUcsQ0FBQztBQUNiLENBQUM7QUFURCwwQ0FTQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IHNoYXJlZC50c1xuICogQEF1dGhvciA6IGR0eXNreSAoZHR5c2t5QG91dGxvb2suY29tKVxuICogQExpbmsgICA6IGR0eXNreS5tb2VcbiAqIEBEYXRlICAgOiAyMDIxLzYvNuS4i+WNiDg6NDA6NDZcbiAqL1xuaW1wb3J0IHJlbmRlckVudiBmcm9tICcuL3JlbmRlckVudic7XG5cbmV4cG9ydCB0eXBlIFRUeXBlZEFycmF5ID0gRmxvYXQzMkFycmF5IHwgVWludDMyQXJyYXkgfCBVaW50MTZBcnJheSB8IFVpbnQ4QXJyYXkgfCBJbnQzMkFycmF5IHwgSW50MTZBcnJheTtcblxuZXhwb3J0IHR5cGUgVFVuaWZvcm1UeXBlZEFycmF5ID0gRmxvYXQzMkFycmF5IHwgVWludDMyQXJyYXkgfCBJbnQzMkFycmF5O1xuXG5leHBvcnQgdHlwZSBUVGV4dHVyZVNvdXJjZSA9IEltYWdlQml0bWFwIHwgQXJyYXlCdWZmZXI7XG5cbmV4cG9ydCBmdW5jdGlvbiBpc1RleHR1cmVTb3VyY2VBcnJheSh2YWx1ZTogVFRleHR1cmVTb3VyY2UgfCBUVGV4dHVyZVNvdXJjZVtdKTogdmFsdWUgaXMgVFRleHR1cmVTb3VyY2VbXSB7XG4gIHJldHVybiAhISh2YWx1ZSBhcyBUVGV4dHVyZVNvdXJjZVtdKS5wdXNoO1xufVxuXG5leHBvcnQgZnVuY3Rpb24gaXNBcnJheTxUPih2YWx1ZTogVCB8IFRbXSk6IHZhbHVlIGlzIEFycmF5PFQ+IHtcbiAgcmV0dXJuICEhKHZhbHVlIGFzIFRbXSkucHVzaDtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNhbGxXaXRoUHJvZmlsZTxGTiBleHRlbmRzICguLi5hcmdzOiBhbnkpID0+IGFueT4obmFtZTogc3RyaW5nLCBmbjogRk4sIGFyZ3M6IFBhcmFtZXRlcnM8Rk4+KSB7XG4gIGNvbnN0IHQgPSBwZXJmb3JtYW5jZS5ub3coKTtcbiAgZm4oLi4uYXJncyk7XG4gIGNvbnNvbGUubG9nKGBSYXkgVHJhY2luZywgJHtuYW1lfTogJHsocGVyZm9ybWFuY2Uubm93KCkgLSB0KSAvIDEwMDB9KHMpYCk7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjb3B5VHlwZWRBcnJheShcbiAgc2l6ZTogbnVtYmVyLFxuICBkc3Q6IFRUeXBlZEFycmF5LCBkc3RPZmZzZXQ6IG51bWJlcixcbiAgc3JjOiBUVHlwZWRBcnJheSB8IG51bWJlcltdLCBzcmNPZmZzZXQ6IG51bWJlclxuKSB7XG4gIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCBzaXplOyBpbmRleCArPSAxKSB7XG4gICAgZHN0W2RzdE9mZnNldCArIGluZGV4XSA9IHNyY1tzcmNPZmZzZXQgKyBpbmRleF07XG4gIH1cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdQVUJ1ZmZlcihhcnJheTogVFR5cGVkQXJyYXksIHVzYWdlOiBHUFVCdWZmZXJVc2FnZUZsYWdzKSB7XG4gIGNvbnN0IHNpemUgPSBhcnJheS5ieXRlTGVuZ3RoICsgKDQgLSBhcnJheS5ieXRlTGVuZ3RoICUgNCk7XG4gIGNvbnN0IGJ1ZmZlciA9IHJlbmRlckVudi5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICBzaXplLFxuICAgIHVzYWdlOiB1c2FnZSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgIG1hcHBlZEF0Q3JlYXRpb246IHRydWVcbiAgfSk7XG5cbiAgY29uc3QgdmlldyA9IG5ldyAoYXJyYXkuY29uc3RydWN0b3IgYXMge25ldyhidWZmZXI6IEFycmF5QnVmZmVyKTogVFR5cGVkQXJyYXl9KShidWZmZXIuZ2V0TWFwcGVkUmFuZ2UoMCwgc2l6ZSkpO1xuICB2aWV3LnNldChhcnJheSwgMCk7XG5cbiAgYnVmZmVyLnVubWFwKCk7XG5cbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGNyZWF0ZUdQVUJ1ZmZlckJ5U2l6ZShzaXplOiBudW1iZXIsIHVzYWdlOiBHUFVCdWZmZXJVc2FnZUZsYWdzKSB7XG4gIGNvbnN0IGJ1ZmZlciA9IHJlbmRlckVudi5kZXZpY2UuY3JlYXRlQnVmZmVyKHtcbiAgICBzaXplOiBzaXplLFxuICAgIHVzYWdlOiB1c2FnZSB8IEdQVUJ1ZmZlclVzYWdlLkNPUFlfRFNULFxuICAgIG1hcHBlZEF0Q3JlYXRpb246IHRydWVcbiAgfSk7XG5cbiAgYnVmZmVyLnVubWFwKCk7XG5cbiAgcmV0dXJuIGJ1ZmZlcjtcbn1cblxuZXhwb3J0IGNvbnN0IGhhc2hDb2RlID0gKHM6IHN0cmluZykgPT4gcy5zcGxpdCgnJykucmVkdWNlKChhLGIpPT57YT0oKGE8PDUpLWEpK2IuY2hhckNvZGVBdCgwKTtyZXR1cm4gYSZhfSwwKVxuXG5leHBvcnQgZnVuY3Rpb24gbG9nQ2FudmFzKGNhbnZhczogSFRNTENhbnZhc0VsZW1lbnQsIHdpZHRoOiBudW1iZXIpIHtcbiAgY29uc3QgaGVpZ2h0ID0gd2lkdGggKiBjYW52YXMuaGVpZ2h0IC8gY2FudmFzLndpZHRoO1xuICBjb25zdCB1cmwgPSBjYW52YXMudG9EYXRhVVJMKCk7XG5cbiAgLyp0c2xpbnQ6ZGlzYWJsZS1uZXh0LWxpbmUgKi9cbiAgY29uc29sZS5sb2coJyVjKycsIGBmb250LXNpemU6IDFweDsgcGFkZGluZzogJHtoZWlnaHQgLyAyfXB4ICR7d2lkdGggLyAyfXB4OyBsaW5lLWhlaWdodDogJHtoZWlnaHR9cHg7IGJhY2tncm91bmQ6IHVybCgke3VybH0pOyBiYWNrZ3JvdW5kLXNpemU6ICR7d2lkdGh9cHggJHtoZWlnaHR9cHg7IGJhY2tncm91bmQtcmVwZWF0OiBuby1yZXBlYXQ7IGNvbG9yOiB0cmFuc3BhcmVudDtgKTtcbn1cblxuLy8gUmVvcmRlcnMgdGhlIGVsZW1lbnRzIGluIHRoZSByYW5nZSBbZmlyc3QsIGxhc3QpIGluIHN1Y2ggYSB3YXkgdGhhdFxuLy8gYWxsIGVsZW1lbnRzIGZvciB3aGljaCB0aGUgY29tcGFyYXRvciBjIHJldHVybnMgdHJ1ZVxuLy8gcHJlY2VkZSB0aGUgZWxlbWVudHMgZm9yIHdoaWNoIGNvbXBhcmF0b3IgYyByZXR1cm5zIGZhbHNlLlxuZXhwb3J0IGZ1bmN0aW9uIHBhcnRpdGlvbjxUPihcbiAgYXJyYXk6IEFycmF5PFQ+LCBjb21wYXJlOiAoaXRlbTogVCkgPT4gYm9vbGVhbixcbiAgbGVmdDogbnVtYmVyID0gMCwgcmlnaHQ6IG51bWJlciA9IGFycmF5Lmxlbmd0aFxuKSB7XG4gIHdoaWxlIChsZWZ0ICE9PSByaWdodCkge1xuICAgIHdoaWxlIChjb21wYXJlKGFycmF5W2xlZnRdKSkge1xuICAgICAgbGVmdCArPSAxO1xuICAgICAgaWYgKGxlZnQgPT09IHJpZ2h0KSB7XG4gICAgICAgIHJldHVybiBsZWZ0O1xuICAgICAgfVxuICAgIH1cblxuICAgIGRvIHtcbiAgICAgIHJpZ2h0IC09IDE7XG4gICAgICBpZiAobGVmdCA9PT0gcmlnaHQpIHtcbiAgICAgICAgcmV0dXJuIGxlZnQ7XG4gICAgICB9XG4gICAgfSB3aGlsZSAoIWNvbXBhcmUoYXJyYXlbcmlnaHRdKSk7XG5cbiAgICBzd2FwKGFycmF5LCBsZWZ0LCByaWdodCk7XG4gICAgbGVmdCArPSAxO1xuICB9XG5cbiAgcmV0dXJuIGxlZnQ7XG59XG5cbi8vIG50aF9lbGVtZW50IGlzIGEgcGFydGlhbCBzb3J0aW5nIGFsZ29yaXRobSB0aGF0IHJlYXJyYW5nZXMgZWxlbWVudHMgaW4gW2ZpcnN0LCBsYXN0KSBzdWNoIHRoYXQ6XG4vLyBUaGUgZWxlbWVudCBwb2ludGVkIGF0IGJ5IG50aCBpcyBjaGFuZ2VkIHRvIHdoYXRldmVyIGVsZW1lbnQgd291bGQgb2NjdXIgaW4gdGhhdCBwb3NpdGlvbiBpZiBbZmlyc3QsIGxhc3QpIHdlcmUgc29ydGVkLlxuLy8gQWxsIG9mIHRoZSBlbGVtZW50cyBiZWZvcmUgdGhpcyBuZXcgbnRoIGVsZW1lbnQgY29tcGFyZSB0byB0cnVlIHdpdGggZWxlbWVudHMgYWZ0ZXIgdGhlIG50aCBlbGVtZW50XG5leHBvcnQgZnVuY3Rpb24gbnRoRWxlbWVudDxUPihcbiAgYXJyYXk6IEFycmF5PFQ+LCBjb21wYXJlOiAoYTogVCwgYjogVCkgPT4gYm9vbGVhbixcbiAgbGVmdDogbnVtYmVyID0gMCwgcmlnaHQ6IG51bWJlciA9IGFycmF5Lmxlbmd0aCxcbiAgazogbnVtYmVyID0gTWF0aC5mbG9vcigobGVmdCArIHJpZ2h0KSAvIDIpXG4pIHtcbiAgZm9yIChsZXQgaSA9IGxlZnQ7IGkgPD0gazsgaSArPSAxKSB7XG4gICAgbGV0IG1pbkluZGV4ID0gaTtcbiAgICBsZXQgbWluVmFsdWUgPSBhcnJheVtpXTtcblxuICAgIGZvciAobGV0IGogPSBpICsgMTsgaiA8IHJpZ2h0OyBqICs9IDEpIHtcbiAgICAgIGlmICghY29tcGFyZShtaW5WYWx1ZSwgYXJyYXlbal0pKSB7XG4gICAgICAgIG1pbkluZGV4ID0gajtcbiAgICAgICAgbWluVmFsdWUgPSBhcnJheVtqXTtcbiAgICAgICAgc3dhcChhcnJheSwgaSwgbWluSW5kZXgpO1xuICAgICAgfVxuICAgIH1cbiAgfVxufVxuXG5mdW5jdGlvbiBzd2FwPFQ+KGFycmF5OiBBcnJheTxUPiwgYTogbnVtYmVyLCBiOiBudW1iZXIpIHtcbiAgY29uc3QgeCA9IGFycmF5W2JdO1xuICBhcnJheVtiXSA9IGFycmF5W2FdO1xuICBhcnJheVthXSA9IHg7XG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5GaWx0ZXJQYXJhbXMoc2lnbWFzOiBGbG9hdDMyQXJyYXkpOiBGbG9hdDMyQXJyYXkge1xuICBjb25zdCByZXMgPSBuZXcgRmxvYXQzMkFycmF5KHNpZ21hcy5sZW5ndGgpO1xuXG4gIGZvciAobGV0IGk6IG51bWJlciA9IDA7IGkgPCBzaWdtYXMubGVuZ3RoOyBpICs9IDEpIHtcbiAgICBjb25zdCBzID0gc2lnbWFzW2ldO1xuICAgIHJlc1tpXSA9IC0wLjUgKiBzICogcztcbiAgfVxuXG4gIHJldHVybiByZXM7XG59XG4iXX0=","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Bounds = void 0;\nvar buildin_1 = require(\"../buildin\");\nvar Geometry_1 = require(\"../core/Geometry\");\nvar HObject_1 = require(\"../core/HObject\");\nvar Material_1 = require(\"../core/Material\");\nvar Mesh_1 = require(\"../core/Mesh\");\nvar shared_1 = require(\"../core/shared\");\nvar EAxis;\n(function (EAxis) {\n    EAxis[EAxis[\"X\"] = 0] = \"X\";\n    EAxis[EAxis[\"Y\"] = 1] = \"Y\";\n    EAxis[EAxis[\"Z\"] = 2] = \"Z\";\n})(EAxis || (EAxis = {}));\n;\nvar Bounds = (function () {\n    function Bounds() {\n        this._isDirty = false;\n    }\n    Object.defineProperty(Bounds.prototype, \"center\", {\n        get: function () {\n            if (!this._center || this._isDirty) {\n                this._updateCenterSize();\n            }\n            return this._center;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"size\", {\n        get: function () {\n            if (!this._size || this._isDirty) {\n                this._updateCenterSize();\n            }\n            return this._size;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"maxExtends\", {\n        get: function () {\n            var size = this.size;\n            if (size[0] > size[2]) {\n                return size[0] > size[1] ? EAxis.X : EAxis.Y;\n            }\n            else {\n                return size[1] > size[2] ? EAxis.Z : EAxis.Y;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Bounds.prototype, \"surfaceArea\", {\n        get: function () {\n            var size = this.size;\n            return 2 * (size[0] * size[2] + size[0] * size[1] + size[2] * size[1]);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Bounds.prototype.initEmpty = function () {\n        this.max = new Float32Array([-Infinity, -Infinity, -Infinity]);\n        this.min = new Float32Array([Infinity, Infinity, Infinity]);\n        return this;\n    };\n    Bounds.prototype.fromVertexes = function (v1, v2, v3) {\n        this.max = v1.slice();\n        this.min = v1.slice();\n        this.update(v2).update(v3);\n        return this;\n    };\n    Bounds.prototype.update = function (v) {\n        for (var index = 0; index < 3; index += 1) {\n            this.max[index] = Math.max(this.max[index], v[index]);\n            this.min[index] = Math.min(this.min[index], v[index]);\n        }\n        this._isDirty = true;\n        return this;\n    };\n    Bounds.prototype.mergeBounds = function (bounds) {\n        var max = bounds.max, min = bounds.min;\n        for (var index = 0; index < 3; index += 1) {\n            this.max[index] = Math.max(this.max[index], max[index]);\n            this.min[index] = Math.min(this.min[index], min[index]);\n        }\n        this._isDirty = true;\n        return this;\n    };\n    Bounds.prototype.pointIn = function (p) {\n        var _a = this, max = _a.max, min = _a.min;\n        return p[0] > min[0] && p[0] < max[0]\n            && p[1] > min[1] && p[1] < max[1]\n            && p[2] > min[2] && p[2] < max[2];\n    };\n    Bounds.prototype.getOffset = function (axis, v) {\n        var offset = v[axis] - this.min[axis];\n        if (this.max[axis] > this.min[axis]) {\n            offset /= (this.max[axis] - this.min[axis]);\n        }\n        return offset;\n    };\n    Bounds.prototype.buildBox = function (mode) {\n        var _a = this, max = _a.max, min = _a.min;\n        var positions = [];\n        Bounds.BUILD_BOX_MAX_MIN_ORDER.forEach(function (order) {\n            for (var i = 0; i < 3; i += 1) {\n                positions.push(order[i] ? max[i] : min[i]);\n            }\n        });\n        var indexes;\n        if (mode === 'lines') {\n            indexes = [\n                0, 1, 1, 2, 2, 3, 3, 0,\n                4, 5, 5, 6, 6, 7, 7, 4,\n                0, 4, 1, 5, 2, 6, 3, 7\n            ];\n        }\n        else {\n            indexes = [\n                0, 1, 2, 2, 3, 0,\n                4, 5, 6, 6, 7, 4,\n                0, 4, 5, 5, 1, 0,\n                1, 5, 6, 6, 2, 1,\n                3, 2, 6, 6, 7, 3,\n                0, 3, 7, 7, 4, 0\n            ];\n        }\n        return { positions: positions, indexes: indexes };\n    };\n    Bounds.prototype._updateCenterSize = function () {\n        var _this = this;\n        if (this._isDirty) {\n            this._center = this.max.map(function (m, i) { return (m + _this.min[i]) / 2; });\n            this._size = this.max.map(function (m, i) { return m - _this.min[i]; });\n            this._isDirty = false;\n        }\n    };\n    Bounds.BUILD_BOX_MAX_MIN_ORDER = [\n        [1, 1, 1],\n        [1, 1, 0],\n        [0, 1, 0],\n        [0, 1, 1],\n        [1, 0, 1],\n        [1, 0, 0],\n        [0, 0, 0],\n        [0, 0, 1]\n    ];\n    return Bounds;\n}());\nexports.Bounds = Bounds;\nfunction isBVHLeaf(value) {\n    return value.infoEnd !== undefined;\n}\nvar tmpV1 = new Float32Array(3);\nvar tmpV2 = new Float32Array(3);\nvar tmpV3 = new Float32Array(3);\nvar BVH = (function (_super) {\n    __extends(BVH, _super);\n    function BVH(_maxPrimitivesPerLeaf) {\n        var _this = _super.call(this) || this;\n        _this._maxPrimitivesPerLeaf = _maxPrimitivesPerLeaf;\n        _this.isBVH = true;\n        _this.process = function (worldPositions, indexes) {\n            shared_1.callWithProfile('BVH setup bounds info', _this._setupBoundsInfo, [worldPositions, indexes]);\n            shared_1.callWithProfile('BVH build tree', _this._buildTree, []);\n            shared_1.callWithProfile('BVH flatten', _this._flatten, []);\n            _this._debugMesh = null;\n        };\n        _this._setupBoundsInfo = function (worldPositions, indexes) {\n            _this._boundsInfos = [];\n            for (var i = 0; i < indexes.length; i += 3) {\n                var idxes = indexes.slice(i, i + 3);\n                shared_1.copyTypedArray(3, tmpV1, 0, worldPositions, idxes[0] * 4);\n                shared_1.copyTypedArray(3, tmpV2, 0, worldPositions, idxes[1] * 4);\n                shared_1.copyTypedArray(3, tmpV3, 0, worldPositions, idxes[2] * 4);\n                var bounds = new Bounds().fromVertexes(tmpV1, tmpV2, tmpV3);\n                _this._boundsInfos.push({ indexes: idxes, bounds: bounds });\n            }\n        };\n        _this._buildTree = function () {\n            _this._rootNode = _this._buildRecursive(0, _this._boundsInfos.length, 0);\n        };\n        _this._flatten = function () {\n            _this._bvhLeaves = [];\n            _this._bvhNodes = [];\n            var flatInfo = { maxDepth: 1, nodes: [], leaves: [] };\n            _this._traverseNode(_this._rootNode, flatInfo);\n            var maxDepth = flatInfo.maxDepth, nodes = flatInfo.nodes, leaves = flatInfo.leaves;\n            var buffer = new ArrayBuffer(4 * (nodes.length + leaves.length));\n            var f32View = new Float32Array(buffer);\n            var u32View = new Uint32Array(buffer);\n            var nodesLen = nodes.length;\n            _this._bvhMaxDepth = maxDepth;\n            f32View.set(nodes);\n            u32View.set(leaves, nodesLen);\n            for (var i = 0; i < nodesLen; i += 8) {\n                for (var ci = 0; ci < 8; ci += 4) {\n                    var offset = i + ci;\n                    if (nodes[offset] & 0x80000000) {\n                        u32View[offset] = nodes[offset] + nodesLen / 4;\n                    }\n                    else {\n                        u32View[offset] = nodes[offset];\n                    }\n                }\n            }\n            _this._bvhMaxDepth = flatInfo.maxDepth;\n            _this._bvhBuffer = f32View;\n        };\n        _this._traverseNode = function (node, info, depth, parentOffset, childIndex) {\n            if (depth === void 0) { depth = 1; }\n            if (parentOffset === void 0) { parentOffset = -1; }\n            if (childIndex === void 0) { childIndex = 0; }\n            info.maxDepth = Math.max(depth, info.maxDepth);\n            var nodes = info.nodes, leaves = info.leaves;\n            var _a = _this, _boundsInfos = _a._boundsInfos, _bvhNodes = _a._bvhNodes, _bvhLeaves = _a._bvhLeaves;\n            if (isBVHLeaf(node)) {\n                _bvhLeaves.push(node);\n                if (parentOffset >= 0) {\n                    nodes[parentOffset * 8 + childIndex] = (1 << 31) | (leaves.length / 4);\n                }\n                var count = node.infoEnd - node.infoStart;\n                for (var i = node.infoStart; i < node.infoEnd; i += 1) {\n                    var idxes = _boundsInfos[i].indexes;\n                    leaves.push(count, idxes[0], idxes[1], idxes[2]);\n                }\n            }\n            else {\n                _bvhNodes.push(node);\n                var bounds = node.bounds;\n                var nodeOffset = nodes.length / 8;\n                if (parentOffset >= 0) {\n                    nodes[parentOffset * 8 + childIndex] = nodeOffset * 2;\n                }\n                nodes.push(0, bounds.min[0], bounds.min[1], bounds.min[2], 0, bounds.max[0], bounds.max[1], bounds.max[2]);\n                _this._traverseNode(node.child0, info, depth + 1, nodeOffset, 0);\n                _this._traverseNode(node.child1, info, depth + 1, nodeOffset, 4);\n            }\n        };\n        return _this;\n    }\n    Object.defineProperty(BVH.prototype, \"maxDepth\", {\n        get: function () {\n            return this._bvhMaxDepth;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BVH.prototype, \"buffer\", {\n        get: function () {\n            return this._bvhBuffer;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BVH.prototype, \"debugMesh\", {\n        get: function () {\n            if (!this._debugMesh) {\n                this._buildDebugMesh();\n            }\n            return this._debugMesh;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BVH.prototype, \"nodesCount\", {\n        get: function () {\n            return this._bvhNodes.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(BVH.prototype, \"leavesCount\", {\n        get: function () {\n            return this._bvhLeaves.length;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    BVH.prototype._buildRecursive = function (start, end, depth) {\n        var _boundsInfos = this._boundsInfos;\n        var bounds = new Bounds().initEmpty();\n        for (var i = start; i < end; i += 1) {\n            bounds.mergeBounds(_boundsInfos[i].bounds);\n        }\n        var nPrimitives = end - start;\n        if (nPrimitives <= this._maxPrimitivesPerLeaf) {\n            return { infoStart: start, infoEnd: end, bounds: bounds };\n        }\n        else {\n            var centroidBounds_1 = new Bounds().initEmpty();\n            for (var i = start; i < end; i += 1) {\n                centroidBounds_1.update(_boundsInfos[i].bounds.center);\n            }\n            var dim_1 = centroidBounds_1.maxExtends;\n            var mid = Math.floor((start + end) / 2);\n            if (nPrimitives <= 4) {\n                shared_1.nthElement(_boundsInfos, function (a, b) { return a.bounds.center[dim_1] < b.bounds.center[dim_1]; }, start, end, mid);\n            }\n            else if (centroidBounds_1.max[dim_1] === centroidBounds_1.min[dim_1]) {\n                return { infoStart: start, infoEnd: end, bounds: bounds };\n            }\n            else {\n                var buckets_1 = [];\n                for (var i = 0; i < 12; i += 1) {\n                    buckets_1.push({ bounds: new Bounds().initEmpty(), count: 0 });\n                }\n                for (var i = start; i < end; i += 1) {\n                    var b = Math.floor(buckets_1.length * centroidBounds_1.getOffset(dim_1, _boundsInfos[i].bounds.center));\n                    if (b === buckets_1.length) {\n                        b = buckets_1.length - 1;\n                    }\n                    buckets_1[b].count += 1;\n                    buckets_1[b].bounds.mergeBounds(_boundsInfos[i].bounds);\n                }\n                var cost = [];\n                for (var i = 0; i < buckets_1.length - 1; i += 1) {\n                    var b0 = new Bounds().initEmpty();\n                    var b1 = new Bounds().initEmpty();\n                    var count0 = 0;\n                    var count1 = 0;\n                    for (var j = 0; j <= i; j += 1) {\n                        b0.mergeBounds(buckets_1[j].bounds);\n                        count0 += buckets_1[j].count;\n                    }\n                    for (var j = i + 1; j < buckets_1.length; j += 1) {\n                        b1.mergeBounds(buckets_1[j].bounds);\n                        count1 += buckets_1[j].count;\n                    }\n                    cost.push(0.1 + (count0 * b0.surfaceArea + count1 * b1.surfaceArea) / bounds.surfaceArea);\n                }\n                var minCost = cost[0];\n                var minCostSplitBucket_1 = 0;\n                for (var i = 1; i < cost.length; i += 1) {\n                    if (cost[i] < minCost) {\n                        minCost = cost[i];\n                        minCostSplitBucket_1 = i;\n                    }\n                }\n                mid = shared_1.partition(_boundsInfos, function (p) {\n                    var b = Math.floor(buckets_1.length * centroidBounds_1.getOffset(dim_1, p.bounds.center));\n                    if (b === buckets_1.length) {\n                        b = buckets_1.length - 1;\n                    }\n                    return b <= minCostSplitBucket_1;\n                }, start, end);\n            }\n            var child0 = this._buildRecursive(start, mid, depth + 1);\n            var child1 = this._buildRecursive(mid, end, depth + 1);\n            return {\n                axis: dim_1,\n                bounds: new Bounds().initEmpty().mergeBounds(child0.bounds).mergeBounds(child1.bounds),\n                child0: child0,\n                child1: child1,\n                depth: depth\n            };\n        }\n    };\n    BVH.prototype._buildDebugMesh = function () {\n        var _a = this, _bvhNodes = _a._bvhNodes, _bvhMaxDepth = _a._bvhMaxDepth;\n        var mode = 'lines';\n        var nodesLen = _bvhNodes.length;\n        var positions = new Float32Array(nodesLen * 8 * 3);\n        var colors = new Float32Array(nodesLen * 8 * 3);\n        var indexes;\n        if (mode === 'lines') {\n            indexes = new Uint32Array(nodesLen * 24);\n        }\n        else {\n            indexes = new Uint32Array(nodesLen * 36);\n        }\n        var toteLDepthCount = new Array(_bvhMaxDepth).fill(0);\n        var depthCount = new Array(_bvhMaxDepth).fill(0);\n        _bvhNodes.forEach(function (node) {\n            toteLDepthCount[node.depth] += 1;\n        });\n        var index = 0;\n        _bvhNodes.forEach(function (node) {\n            var box = node.bounds.buildBox(mode);\n            var offset = index * 8;\n            var pOffset = index * 8 * 3;\n            var cOffset = index * 8 * 3;\n            var iOffset = index * box.indexes.length;\n            var color = hslToRgb(node.depth / _bvhMaxDepth, (depthCount[node.depth] / toteLDepthCount[node.depth]) * 0.7 + 0.3, 0.5);\n            for (var ci = 0; ci < 24; ci += 3) {\n                colors.set(color, cOffset + ci);\n            }\n            indexes.set(box.indexes.map(function (v) { return v + offset; }), iOffset);\n            positions.set(box.positions, pOffset);\n            index += 1;\n            depthCount[node.depth] += 1;\n        });\n        this._debugMesh = new Mesh_1.default(new Geometry_1.default([\n            {\n                layout: {\n                    attributes: [{\n                            name: 'position',\n                            shaderLocation: 0,\n                            format: 'float32x3',\n                            offset: 0\n                        }],\n                    arrayStride: 12\n                },\n                data: positions\n            },\n            {\n                layout: {\n                    attributes: [{\n                            name: 'color_0',\n                            shaderLocation: 1,\n                            format: 'float32x3',\n                            offset: 0\n                        }],\n                    arrayStride: 12\n                },\n                data: colors\n            }\n        ], indexes, indexes.length), new Material_1.default(buildin_1.buildinEffects.rColor, { u_color: new Float32Array([1, 1, 1, .4]) }, undefined, {\n            primitiveType: mode === 'lines' ? 'line-list' : 'triangle-list',\n            cullMode: 'none',\n            blendColor: {\n                srcFactor: 'src-alpha',\n                dstFactor: 'one-minus-src-alpha'\n            },\n            blendAlpha: {\n                srcFactor: 'zero',\n                dstFactor: 'one'\n            }\n        }));\n    };\n    BVH.CLASS_NAME = 'BVH';\n    return BVH;\n}(HObject_1.default));\nexports.default = BVH;\nfunction hue2rgb(p, q, t) {\n    if (t < 0)\n        t += 1;\n    if (t > 1)\n        t -= 1;\n    if (t < 1 / 6)\n        return p + (q - p) * 6 * t;\n    if (t < 1 / 2)\n        return q;\n    if (t < 2 / 3)\n        return p + (q - p) * (2 / 3 - t) * 6;\n    return p;\n}\nfunction hslToRgb(h, s, l) {\n    var r, g, b;\n    if (s == 0) {\n        r = g = b = l;\n    }\n    else {\n        var q = l < 0.5 ? l * (1 + s) : l + s - l * s;\n        var p = 2 * l - q;\n        r = hue2rgb(p, q, h + 1 / 3);\n        g = hue2rgb(p, q, h);\n        b = hue2rgb(p, q, h - 1 / 3);\n    }\n    return [r, g, b];\n}\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQlZILmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiQlZILnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7QUFNQSxzQ0FBNEM7QUFDNUMsNkNBQXdDO0FBQ3hDLDJDQUFzQztBQUN0Qyw2Q0FBd0M7QUFDeEMscUNBQWdDO0FBQ2hDLHlDQUF3RjtBQUV4RixJQUFLLEtBSUo7QUFKRCxXQUFLLEtBQUs7SUFDUiwyQkFBQyxDQUFBO0lBQ0QsMkJBQUMsQ0FBQTtJQUNELDJCQUFDLENBQUE7QUFDSCxDQUFDLEVBSkksS0FBSyxLQUFMLEtBQUssUUFJVDtBQUFBLENBQUM7QUFFRjtJQUFBO1FBZ0JVLGFBQVEsR0FBWSxLQUFLLENBQUM7SUFnSXBDLENBQUM7SUE1SEMsc0JBQUksMEJBQU07YUFBVjtZQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsT0FBTyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ2xDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2FBQzFCO1lBRUQsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO1FBQ3RCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksd0JBQUk7YUFBUjtZQUNFLElBQUksQ0FBQyxJQUFJLENBQUMsS0FBSyxJQUFJLElBQUksQ0FBQyxRQUFRLEVBQUU7Z0JBQ2hDLElBQUksQ0FBQyxpQkFBaUIsRUFBRSxDQUFDO2FBQzFCO1lBRUQsT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO1FBQ3BCLENBQUM7OztPQUFBO0lBRUQsc0JBQUksOEJBQVU7YUFBZDtZQUNFLElBQU0sSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7WUFDdkIsSUFBSSxJQUFJLENBQUMsQ0FBQyxDQUFDLEdBQUcsSUFBSSxDQUFDLENBQUMsQ0FBQyxFQUFFO2dCQUNyQixPQUFPLElBQUksQ0FBQyxDQUFDLENBQUMsR0FBRyxJQUFJLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMs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Q0FBQyxDQUFDO0lBQ3JCLElBQUcsQ0FBQyxHQUFHLENBQUMsR0FBQyxDQUFDO1FBQUUsT0FBTyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxDQUFDLEdBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQztJQUMvQyxPQUFPLENBQUMsQ0FBQztBQUNYLENBQUM7QUFFRCxTQUFTLFFBQVEsQ0FBQyxDQUFTLEVBQUUsQ0FBUyxFQUFFLENBQVM7SUFDL0MsSUFBSSxDQUFTLEVBQUUsQ0FBUyxFQUFFLENBQVMsQ0FBQztJQUVwQyxJQUFHLENBQUMsSUFBSSxDQUFDLEVBQUM7UUFDUixDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7S0FDZjtTQUFNO1FBQ0wsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLEdBQUcsQ0FBQyxDQUFDLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDOUMsSUFBSSxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsR0FBRyxDQUFDLENBQUM7UUFDbEIsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsR0FBRyxDQUFDLEdBQUMsQ0FBQyxDQUFDLENBQUM7UUFDM0IsQ0FBQyxHQUFHLE9BQU8sQ0FBQyxDQUFDLEVBQUUsQ0FBQyxFQUFFLENBQUMsQ0FBQyxDQUFDO1FBQ3JCLENBQUMsR0FBRyxPQUFPLENBQUMsQ0FBQyxFQUFFLENBQUMsRUFBRSxDQUFDLEdBQUcsQ0FBQyxHQUFDLENBQUMsQ0FBQyxDQUFDO0tBQzVCO0lBRUQsT0FBTyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7QUFDbkIsQ0FBQyIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogQEZpbGUgICA6IEJWSC50c1xuICogQEF1dGhvciA6IGR0eXNreSAoZHR5c2t5QG91dGxvb2suY29tKVxuICogQExpbmsgICA6IGR0eXNreS5tb2VcbiAqIEBEYXRlICAgOiA2LzE1LzIwMjEsIDExOjE0OjUxIFBNXG4gKi9cbmltcG9ydCB7IGJ1aWxkaW5FZmZlY3RzIH0gZnJvbSAnLi4vYnVpbGRpbic7XG5pbXBvcnQgR2VvbWV0cnkgZnJvbSAnLi4vY29yZS9HZW9tZXRyeSc7XG5pbXBvcnQgSE9iamVjdCBmcm9tICcuLi9jb3JlL0hPYmplY3QnO1xuaW1wb3J0IE1hdGVyaWFsIGZyb20gJy4uL2NvcmUvTWF0ZXJpYWwnO1xuaW1wb3J0IE1lc2ggZnJvbSAnLi4vY29yZS9NZXNoJztcbmltcG9ydCB7IGNhbGxXaXRoUHJvZmlsZSwgY29weVR5cGVkQXJyYXksIG50aEVsZW1lbnQsIHBhcnRpdGlvbiB9IGZyb20gJy4uL2NvcmUvc2hhcmVkJztcblxuZW51bSBFQXhpcyB7XG4gIFgsXG4gIFksXG4gIFpcbn07XG5cbmV4cG9ydCBjbGFzcyBCb3VuZHMge1xuICBwdWJsaWMgc3RhdGljIEJVSUxEX0JPWF9NQVhfTUlOX09SREVSID0gW1xuICAgIC8vIDAgaXMgbWluLCBpIGlzIG1heFxuICAgIFsxLCAxLCAxXSxcbiAgICBbMSwgMSwgMF0sXG4gICAgWzAsIDEsIDBdLFxuICAgIFswLCAxLCAxXSxcbiAgICBbMSwgMCwgMV0sXG4gICAgWzEsIDAsIDBdLFxuICAgIFswLCAwLCAwXSxcbiAgICBbMCwgMCwgMV1cbiAgXTtcblxuICBwdWJsaWMgbWF4OiBGbG9hdDMyQXJyYXk7XG4gIHB1YmxpYyBtaW46IEZsb2F0MzJBcnJheTtcblxuICBwcml2YXRlIF9pc0RpcnR5OiBib29sZWFuID0gZmFsc2U7XG4gIHByaXZhdGUgX2NlbnRlcjogRmxvYXQzMkFycmF5O1xuICBwcml2YXRlIF9zaXplOiBGbG9hdDMyQXJyYXk7XG5cbiAgZ2V0IGNlbnRlcigpIHtcbiAgICBpZiAoIXRoaXMuX2NlbnRlciB8fCB0aGlzLl9pc0RpcnR5KSB7XG4gICAgICB0aGlzLl91cGRhdGVDZW50ZXJTaXplKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2NlbnRlcjtcbiAgfVxuXG4gIGdldCBzaXplKCkge1xuICAgIGlmICghdGhpcy5fc2l6ZSB8fCB0aGlzLl9pc0RpcnR5KSB7XG4gICAgICB0aGlzLl91cGRhdGVDZW50ZXJTaXplKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XG4gIH1cblxuICBnZXQgbWF4RXh0ZW5kcygpOiBFQXhpcyB7XG4gICAgY29uc3Qgc2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICBpZiAoc2l6ZVswXSA+IHNpemVbMl0pIHtcbiAgICAgIHJldHVybiBzaXplWzBdID4gc2l6ZVsxXSA/IEVBeGlzLlggOiBFQXhpcy5ZO1xuICAgIH0gZWxzZSB7XG4gICAgICByZXR1cm4gc2l6ZVsxXSA+IHNpemVbMl0gPyBFQXhpcy5aIDogRUF4aXMuWTtcbiAgICB9XG4gIH1cblxuICBnZXQgc3VyZmFjZUFyZWEoKSB7XG4gICAgY29uc3QgeyBzaXplIH0gPSB0aGlzO1xuXG4gICAgcmV0dXJuIDIgKiAoc2l6ZVswXSAqIHNpemVbMl0gKyBzaXplWzBdICogc2l6ZVsxXSArIHNpemVbMl0gKiBzaXplWzFdKTtcbiAgfVxuXG4gIHB1YmxpYyBpbml0RW1wdHkoKSB7XG4gICAgdGhpcy5tYXggPSBuZXcgRmxvYXQzMkFycmF5KFstSW5maW5pdHksIC1JbmZpbml0eSwgLUluZmluaXR5XSk7XG4gICAgdGhpcy5taW4gPSBuZXcgRmxvYXQzMkFycmF5KFtJbmZpbml0eSwgSW5maW5pdHksIEluZmluaXR5XSk7XG5cbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBmcm9tVmVydGV4ZXModjE6IEZsb2F0MzJBcnJheSwgdjI6IEZsb2F0MzJBcnJheSwgdjM6IEZsb2F0MzJBcnJheSkge1xuICAgIHRoaXMubWF4ID0gdjEuc2xpY2UoKTtcbiAgICB0aGlzLm1pbiA9IHYxLnNsaWNlKCk7XG5cbiAgICB0aGlzLnVwZGF0ZSh2MikudXBkYXRlKHYzKTtcblxuICAgIHJldHVybiB0aGlzO1xuICB9XG5cbiAgcHVibGljIHVwZGF0ZSh2OiBGbG9hdDMyQXJyYXkpIHtcbiAgICBmb3IgKGxldCBpbmRleCA9IDA7IGluZGV4IDwgMzsgaW5kZXggKz0gMSkge1xuICAgICAgdGhpcy5tYXhbaW5kZXhdID0gTWF0aC5tYXgodGhpcy5tYXhbaW5kZXhdLCB2W2luZGV4XSk7XG4gICAgICB0aGlzLm1pbltpbmRleF0gPSBNYXRoLm1pbih0aGlzLm1pbltpbmRleF0sIHZbaW5kZXhdKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc0RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBtZXJnZUJvdW5kcyhib3VuZHM6IEJvdW5kcykge1xuICAgIGNvbnN0IHsgbWF4LCBtaW4gfSA9IGJvdW5kcztcblxuICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCAzOyBpbmRleCArPSAxKSB7XG4gICAgICB0aGlzLm1heFtpbmRleF0gPSBNYXRoLm1heCh0aGlzLm1heFtpbmRleF0sIG1heFtpbmRleF0pO1xuICAgICAgdGhpcy5taW5baW5kZXhdID0gTWF0aC5taW4odGhpcy5taW5baW5kZXhdLCBtaW5baW5kZXhdKTtcbiAgICB9XG5cbiAgICB0aGlzLl9pc0RpcnR5ID0gdHJ1ZTtcbiAgICByZXR1cm4gdGhpcztcbiAgfVxuXG4gIHB1YmxpYyBwb2ludEluKHA6IEZsb2F0MzJBcnJheSk6IGJvb2xlYW4ge1xuICAgIGNvbnN0IHttYXgsIG1pbn0gPSB0aGlzO1xuICAgIHJldHVybiBwWzBdID4gbWluWzBdICYmIHBbMF0gPCBtYXhbMF1cbiAgICAgICYmIHBbMV0gPiBtaW5bMV0gJiYgcFsxXSA8IG1heFsxXVxuICAgICAgJiYgcFsyXSA+IG1pblsyXSAmJiBwWzJdIDwgbWF4WzJdO1xuICB9XG5cbiAgcHVibGljIGdldE9mZnNldChheGlzOiBFQXhpcywgdjogRmxvYXQzMkFycmF5KSB7XG4gICAgbGV0IG9mZnNldCA9IHZbYXhpc10gLSB0aGlzLm1pbltheGlzXTtcblxuICAgIGlmICh0aGlzLm1heFtheGlzXSA+IHRoaXMubWluW2F4aXNdKSB7XG4gICAgICBvZmZzZXQgLz0gKHRoaXMubWF4W2F4aXNdIC0gdGhpcy5taW5bYXhpc10pO1xuICAgIH1cblxuICAgIHJldHVybiBvZmZzZXQ7XG4gIH1cblxuICBwdWJsaWMgYnVpbGRCb3gobW9kZTogJ2xpbmVzJyB8ICd0cmlhbmdsZXMnKToge3Bvc2l0aW9uczogbnVtYmVyW10sIGluZGV4ZXM6IG51bWJlcltdfSB7XG4gICAgY29uc3Qge21heCwgbWlufSA9IHRoaXM7XG4gICAgY29uc3QgcG9zaXRpb25zID0gW107XG4gICAgXG4gICAgQm91bmRzLkJVSUxEX0JPWF9NQVhfTUlOX09SREVSLmZvckVhY2gob3JkZXIgPT4ge1xuICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAzOyBpICs9IDEpIHtcbiAgICAgICAgcG9zaXRpb25zLnB1c2gob3JkZXJbaV0gPyBtYXhbaV0gOiBtaW5baV0pXG4gICAgICB9XG4gICAgfSk7XG4gICAgXG4gICAgbGV0IGluZGV4ZXM6IG51bWJlcltdO1xuICAgIGlmIChtb2RlID09PSAnbGluZXMnKSB7XG4gICAgICBpbmRleGVzID0gW1xuICAgICAgICAwLCAxLCAxLCAyLCAyLCAzLCAzLCAwLFxuICAgICAgICA0LCA1LCA1LCA2LCA2LCA3LCA3LCA0LFxuICAgICAgICAwLCA0LCAxLCA1LCAyLCA2LCAzLCA3XG4gICAgICBdO1xuICAgIH0gZWxzZSB7XG4gICAgICBpbmRleGVzID0gW1xuICAgICAgICAwLCAxLCAyLCAyLCAzLCAwLFxuICAgICAgICA0LCA1LCA2LCA2LCA3LCA0LFxuICAgICAgICAwLCA0LCA1LCA1LCAxLCAwLFxuICAgICAgICAxLCA1LCA2LCA2LCAyLCAxLFxuICAgICAgICAzLCAyLCA2LCA2LCA3LCAzLFxuICAgICAgICAwLCAzLCA3LCA3LCA0LCAwXG4gICAgICBdO1xuICAgIH1cblxuICAgIHJldHVybiB7cG9zaXRpb25zLCBpbmRleGVzfTtcbiAgfVxuXG4gIHByaXZhdGUgX3VwZGF0ZUNlbnRlclNpemUoKSB7XG4gICAgaWYgKHRoaXMuX2lzRGlydHkpIHtcbiAgICAgIHRoaXMuX2NlbnRlciA9IHRoaXMubWF4Lm1hcCgobSwgaSkgPT4gKG0gKyB0aGlzLm1pbltpXSkgLyAyKTtcbiAgICAgIHRoaXMuX3NpemUgPSB0aGlzLm1heC5tYXAoKG0sIGkpID0+IG0gLSB0aGlzLm1pbltpXSk7XG4gICAgICB0aGlzLl9pc0RpcnR5ID0gZmFsc2U7XG4gICAgfVxuICB9XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUJWSE5vZGUge1xuICBheGlzOiBFQXhpcztcbiAgYm91bmRzOiBCb3VuZHM7XG4gIGNoaWxkMDogSUJWSE5vZGUgfCBJQlZITGVhZjtcbiAgY2hpbGQxOiBJQlZITm9kZSB8IElCVkhMZWFmO1xuICBkZXB0aDogbnVtYmVyO1xufVxuXG5leHBvcnQgaW50ZXJmYWNlIElCVkhMZWFmIHtcbiAgLy8gdGhyZWUgcG9pbnRzXG4gIGluZm9TdGFydDogbnVtYmVyO1xuICBpbmZvRW5kOiBudW1iZXI7XG4gIGJvdW5kczogQm91bmRzO1xufVxuXG5pbnRlcmZhY2UgSUJvdW5kc0luZm8ge1xuICBpbmRleGVzOiBVaW50MzJBcnJheTtcbiAgYm91bmRzOiBCb3VuZHM7XG59XG5cbmZ1bmN0aW9uIGlzQlZITGVhZih2YWx1ZTogSUJWSE5vZGUgfCBJQlZITGVhZikgOiB2YWx1ZSBpcyBJQlZITGVhZiB7XG4gIHJldHVybiAodmFsdWUgYXMgSUJWSExlYWYpLmluZm9FbmQgIT09IHVuZGVmaW5lZDtcbn1cblxuY29uc3QgdG1wVjEgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgdG1wVjIgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuY29uc3QgdG1wVjMgPSBuZXcgRmxvYXQzMkFycmF5KDMpO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBCVkggZXh0ZW5kcyBIT2JqZWN0IHtcbiAgcHVibGljIHN0YXRpYyBDTEFTU19OQU1FOiBzdHJpbmcgPSAnQlZIJztcbiAgcHVibGljIGlzQlZIOiBib29sZWFuID0gdHJ1ZTtcblxuICAvLyBwcm90ZWN0ZWQgX2J2aEdQVUJ1ZmZlcjogR1BVQnVmZmVyO1xuICBwcm90ZWN0ZWQgX3Jvb3ROb2RlOiBJQlZITm9kZTtcbiAgcHJvdGVjdGVkIF9ib3VuZHNJbmZvczogSUJvdW5kc0luZm9bXTtcbiAgcHJvdGVjdGVkIF9idmhNYXhEZXB0aDogbnVtYmVyO1xuICBwcm90ZWN0ZWQgX2J2aEJ1ZmZlcjogRmxvYXQzMkFycmF5O1xuICBwcm90ZWN0ZWQgX2J2aE5vZGVzOiBJQlZITm9kZVtdO1xuICBwcm90ZWN0ZWQgX2J2aExlYXZlczogSUJWSExlYWZbXTtcbiAgcHJvdGVjdGVkIF9kZWJ1Z01lc2g6IE1lc2g7XG5cbiAgZ2V0IG1heERlcHRoKCkge1xuICAgIHJldHVybiB0aGlzLl9idmhNYXhEZXB0aDtcbiAgfVxuXG4gIC8qKlxuICAgKiBub2RlcyB8IGxlYXZlc1xuICAgKiBub2RlczogY2hpbGQwIGFuZCBtaW4zKGYzMiksIGNoaWxkMSh1MzIpIGFuZCBtYXgzKGYzMilcbiAgICogbGVhdmVzOiBwcmltaXRpdmVzIGNvdW50KHUzMiksIGluZGV4ZXMzKHUzMiksXG4gICAqIGNoaWxkIGluZm86IDFiaXQgdHlwZSgwIGlzIG5vZGUsIDEgaXMgbGVhZikgYW5kIDMxYml0cyBvZmZzZXQoaW4gdmVjNClcbiAgICovXG4gIGdldCBidWZmZXIoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2J2aEJ1ZmZlcjtcbiAgfVxuXG4gIGdldCBkZWJ1Z01lc2goKSB7XG4gICAgaWYgKCF0aGlzLl9kZWJ1Z01lc2gpIHtcbiAgICAgIHRoaXMuX2J1aWxkRGVidWdNZXNoKCk7XG4gICAgfVxuXG4gICAgcmV0dXJuIHRoaXMuX2RlYnVnTWVzaDtcbiAgfVxuXG4gIGdldCBub2Rlc0NvdW50KCkge1xuICAgIHJldHVybiB0aGlzLl9idmhOb2Rlcy5sZW5ndGg7XG4gIH1cblxuICBnZXQgbGVhdmVzQ291bnQoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2J2aExlYXZlcy5sZW5ndGg7XG4gIH1cblxuICBjb25zdHJ1Y3Rvcihwcm90ZWN0ZWQgX21heFByaW1pdGl2ZXNQZXJMZWFmOiBudW1iZXIpIHtcbiAgICBzdXBlcigpO1xuICB9XG5cbiAgcHVibGljIHByb2Nlc3MgPSAod29ybGRQb3NpdGlvbnM6IEZsb2F0MzJBcnJheSwgaW5kZXhlczogVWludDMyQXJyYXkpID0+IHtcbiAgICBjYWxsV2l0aFByb2ZpbGUoJ0JWSCBzZXR1cCBib3VuZHMgaW5mbycsIHRoaXMuX3NldHVwQm91bmRzSW5mbywgW3dvcmxkUG9zaXRpb25zLCBpbmRleGVzXSk7XG4gICAgY2FsbFdpdGhQcm9maWxlKCdCVkggYnVpbGQgdHJlZScsIHRoaXMuX2J1aWxkVHJlZSwgW10pO1xuICAgIGNhbGxXaXRoUHJvZmlsZSgnQlZIIGZsYXR0ZW4nLCB0aGlzLl9mbGF0dGVuLCBbXSk7XG5cbiAgICB0aGlzLl9kZWJ1Z01lc2ggPSBudWxsO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9zZXR1cEJvdW5kc0luZm8gPSAod29ybGRQb3NpdGlvbnM6IEZsb2F0MzJBcnJheSwgaW5kZXhlczogVWludDMyQXJyYXkpID0+IHtcbiAgICB0aGlzLl9ib3VuZHNJbmZvcyA9IFtdO1xuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbmRleGVzLmxlbmd0aDsgaSArPSAzKSB7XG4gICAgICBjb25zdCBpZHhlcyA9IGluZGV4ZXMuc2xpY2UoaSwgaSArIDMpO1xuXG4gICAgICBjb3B5VHlwZWRBcnJheSgzLCB0bXBWMSwgMCwgd29ybGRQb3NpdGlvbnMsIGlkeGVzWzBdICogNCk7XG4gICAgICBjb3B5VHlwZWRBcnJheSgzLCB0bXBWMiwgMCwgd29ybGRQb3NpdGlvbnMsIGlkeGVzWzFdICogNCk7XG4gICAgICBjb3B5VHlwZWRBcnJheSgzLCB0bXBWMywgMCwgd29ybGRQb3NpdGlvbnMsIGlkeGVzWzJdICogNCk7XG5cbiAgICAgIGNvbnN0IGJvdW5kcyA9IG5ldyBCb3VuZHMoKS5mcm9tVmVydGV4ZXModG1wVjEsIHRtcFYyLCB0bXBWMyk7XG5cbiAgICAgIHRoaXMuX2JvdW5kc0luZm9zLnB1c2goe2luZGV4ZXM6IGlkeGVzLCBib3VuZHN9KTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2J1aWxkVHJlZSA9ICgpID0+IHtcbiAgICB0aGlzLl9yb290Tm9kZSA9IHRoaXMuX2J1aWxkUmVjdXJzaXZlKDAsIHRoaXMuX2JvdW5kc0luZm9zLmxlbmd0aCwgMCkgYXMgSUJWSE5vZGU7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2J1aWxkUmVjdXJzaXZlKHN0YXJ0OiBudW1iZXIsIGVuZDogbnVtYmVyLCBkZXB0aDogbnVtYmVyKTogSUJWSE5vZGUgfCBJQlZITGVhZiB7XG4gICAgY29uc3Qge19ib3VuZHNJbmZvc30gPSB0aGlzO1xuXG4gICAgY29uc3QgYm91bmRzID0gbmV3IEJvdW5kcygpLmluaXRFbXB0eSgpO1xuICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAxKSB7XG4gICAgICBib3VuZHMubWVyZ2VCb3VuZHMoX2JvdW5kc0luZm9zW2ldLmJvdW5kcyk7XG4gICAgfVxuXG4gICAgY29uc3QgblByaW1pdGl2ZXMgPSBlbmQgLSBzdGFydDtcblxuICAgIGlmIChuUHJpbWl0aXZlcyA8PSB0aGlzLl9tYXhQcmltaXRpdmVzUGVyTGVhZikge1xuICAgICAgcmV0dXJuIHsgaW5mb1N0YXJ0OiBzdGFydCwgaW5mb0VuZDogZW5kLCBib3VuZHMgfTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgY2VudHJvaWRCb3VuZHMgPSBuZXcgQm91bmRzKCkuaW5pdEVtcHR5KCk7XG4gICAgICBmb3IgKGxldCBpID0gc3RhcnQ7IGkgPCBlbmQ7IGkgKz0gMSkge1xuICAgICAgICBjZW50cm9pZEJvdW5kcy51cGRhdGUoX2JvdW5kc0luZm9zW2ldLmJvdW5kcy5jZW50ZXIpO1xuICAgICAgfVxuICAgICAgY29uc3QgZGltID0gY2VudHJvaWRCb3VuZHMubWF4RXh0ZW5kcztcblxuICAgICAgbGV0IG1pZCA9IE1hdGguZmxvb3IoKHN0YXJ0ICsgZW5kKSAvIDIpO1xuXG4gICAgICAvLyBtaWRkbGUgc3BsaXQgbWV0aG9kXG4gICAgICAvLyBjb25zdCBkaW1NaWQgPSAoY2VudHJvaWRCb3VuZHMubWF4W2RpbV0gKyBjZW50cm9pZEJvdW5kcy5taW5bZGltXSkgLyAyO1xuICAgICAgLy8gbWlkID0gcGFydGl0aW9uKHByaW1pdGl2ZUluZm8sIHAgPT4gcC5jZW50ZXJbZGltXSA8IGRpbU1pZCwgc3RhcnQsIGVuZCk7XG5cbiAgICAgIC8vIGlmIChtaWQgPT09IHN0YXJ0IHx8IG1pZCA9PT0gZW5kKSB7XG4gICAgICAvLyAgIG1pZCA9IE1hdGguZmxvb3IoKHN0YXJ0ICsgZW5kKSAvIDIpO1xuICAgICAgLy8gICBudGhFbGVtZW50KHByaW1pdGl2ZUluZm8sIChhLCBiKSA9PiBhLmNlbnRlcltkaW1dIDwgYi5jZW50ZXJbZGltXSwgc3RhcnQsIGVuZCwgbWlkKTtcbiAgICAgIC8vIH1cblxuICAgICAgLy8gc3VyZmFjZSBhcmVhIGhldXJpc3RpYyBtZXRob2RcbiAgICAgIGlmIChuUHJpbWl0aXZlcyA8PSA0KSB7XG4gICAgICAgIG50aEVsZW1lbnQoX2JvdW5kc0luZm9zLCAoYSwgYikgPT4gYS5ib3VuZHMuY2VudGVyW2RpbV0gPCBiLmJvdW5kcy5jZW50ZXJbZGltXSwgc3RhcnQsIGVuZCwgbWlkKTtcbiAgICAgIH0gZWxzZSBpZiAoY2VudHJvaWRCb3VuZHMubWF4W2RpbV0gPT09IGNlbnRyb2lkQm91bmRzLm1pbltkaW1dKSB7XG4gICAgICAgIC8vIGNhbid0IHNwbGl0IHByaW1pdGl2ZXMgYmFzZWQgb24gY2VudHJvaWQgYm91bmRzLiB0ZXJtaW5hdGUuXG4gICAgICAgIHJldHVybiB7aW5mb1N0YXJ0OiBzdGFydCwgaW5mb0VuZDogZW5kLCBib3VuZHN9O1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY29uc3QgYnVja2V0czogeyBib3VuZHM6IEJvdW5kcywgY291bnQ6IG51bWJlciB9W10gPSBbXTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCAxMjsgaSArPSAxKSB7XG4gICAgICAgICAgYnVja2V0cy5wdXNoKHtib3VuZHM6IG5ldyBCb3VuZHMoKS5pbml0RW1wdHkoKSwgY291bnQ6IDB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIGZvciAobGV0IGkgPSBzdGFydDsgaSA8IGVuZDsgaSArPSAxKSB7XG4gICAgICAgICAgbGV0IGIgPSBNYXRoLmZsb29yKGJ1Y2tldHMubGVuZ3RoICogY2VudHJvaWRCb3VuZHMuZ2V0T2Zmc2V0KGRpbSwgX2JvdW5kc0luZm9zW2ldLmJvdW5kcy5jZW50ZXIpKTtcblxuICAgICAgICAgIGlmIChiID09PSBidWNrZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgYiA9IGJ1Y2tldHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBidWNrZXRzW2JdLmNvdW50ICs9IDE7XG4gICAgICAgICAgYnVja2V0c1tiXS5ib3VuZHMubWVyZ2VCb3VuZHMoX2JvdW5kc0luZm9zW2ldLmJvdW5kcyk7XG4gICAgICAgIH1cblxuICAgICAgICBjb25zdCBjb3N0OiBudW1iZXJbXSA9IFtdO1xuXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVja2V0cy5sZW5ndGggLSAxOyBpICs9IDEpIHtcbiAgICAgICAgICBjb25zdCBiMCA9IG5ldyBCb3VuZHMoKS5pbml0RW1wdHkoKTtcbiAgICAgICAgICBjb25zdCBiMSA9IG5ldyBCb3VuZHMoKS5pbml0RW1wdHkoKTtcbiAgICAgICAgICBsZXQgY291bnQwID0gMDtcbiAgICAgICAgICBsZXQgY291bnQxID0gMDtcbiAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8PSBpOyBqICs9IDEpIHtcbiAgICAgICAgICAgIGIwLm1lcmdlQm91bmRzKGJ1Y2tldHNbal0uYm91bmRzKTtcbiAgICAgICAgICAgIGNvdW50MCArPSBidWNrZXRzW2pdLmNvdW50O1xuICAgICAgICAgIH1cbiAgICAgICAgICBmb3IgKGxldCBqID0gaSArIDE7IGogPCBidWNrZXRzLmxlbmd0aDsgaiArPSAxKSB7XG4gICAgICAgICAgICBiMS5tZXJnZUJvdW5kcyhidWNrZXRzW2pdLmJvdW5kcyk7XG4gICAgICAgICAgICBjb3VudDEgKz0gYnVja2V0c1tqXS5jb3VudDtcbiAgICAgICAgICB9XG5cbiAgICAgICAgICBjb3N0LnB1c2goMC4xICsgKGNvdW50MCAqIGIwLnN1cmZhY2VBcmVhICsgY291bnQxICogYjEuc3VyZmFjZUFyZWEpIC8gYm91bmRzLnN1cmZhY2VBcmVhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBtaW5Db3N0ID0gY29zdFswXTtcbiAgICAgICAgbGV0IG1pbkNvc3RTcGxpdEJ1Y2tldCA9IDA7XG4gICAgICAgIGZvciAobGV0IGkgPSAxOyBpIDwgY29zdC5sZW5ndGg7IGkgKz0gMSkge1xuICAgICAgICAgIGlmIChjb3N0W2ldIDwgbWluQ29zdCkge1xuICAgICAgICAgICAgbWluQ29zdCA9IGNvc3RbaV07XG4gICAgICAgICAgICBtaW5Db3N0U3BsaXRCdWNrZXQgPSBpO1xuICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIG1pZCA9IHBhcnRpdGlvbihfYm91bmRzSW5mb3MsIHAgPT4ge1xuICAgICAgICAgIGxldCBiID0gTWF0aC5mbG9vcihidWNrZXRzLmxlbmd0aCAqIGNlbnRyb2lkQm91bmRzLmdldE9mZnNldChkaW0sIHAuYm91bmRzLmNlbnRlcikpO1xuICAgICAgICAgIGlmIChiID09PSBidWNrZXRzLmxlbmd0aCkge1xuICAgICAgICAgICAgYiA9IGJ1Y2tldHMubGVuZ3RoIC0gMTtcbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGIgPD0gbWluQ29zdFNwbGl0QnVja2V0O1xuICAgICAgICB9LCBzdGFydCwgZW5kKTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY2hpbGQwID0gdGhpcy5fYnVpbGRSZWN1cnNpdmUoc3RhcnQsIG1pZCwgZGVwdGggKyAxKTtcbiAgICAgIGNvbnN0IGNoaWxkMSA9IHRoaXMuX2J1aWxkUmVjdXJzaXZlKG1pZCwgZW5kLCBkZXB0aCArIDEpO1xuXG4gICAgICByZXR1cm4ge1xuICAgICAgICBheGlzOiBkaW0sXG4gICAgICAgIGJvdW5kczogbmV3IEJvdW5kcygpLmluaXRFbXB0eSgpLm1lcmdlQm91bmRzKGNoaWxkMC5ib3VuZHMpLm1lcmdlQm91bmRzKGNoaWxkMS5ib3VuZHMpLFxuICAgICAgICBjaGlsZDAsXG4gICAgICAgIGNoaWxkMSxcbiAgICAgICAgZGVwdGhcbiAgICAgIH07XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9mbGF0dGVuID0gKCkgPT4ge1xuICAgIHRoaXMuX2J2aExlYXZlcyA9IFtdO1xuICAgIHRoaXMuX2J2aE5vZGVzID0gW107XG4gICAgY29uc3QgZmxhdEluZm8gPSB7bWF4RGVwdGg6IDEsIG5vZGVzOiBbXSwgbGVhdmVzOiBbXX07XG4gICAgdGhpcy5fdHJhdmVyc2VOb2RlKHRoaXMuX3Jvb3ROb2RlLCBmbGF0SW5mbyk7XG5cbiAgICBjb25zdCB7bWF4RGVwdGgsIG5vZGVzLCBsZWF2ZXN9ID0gZmxhdEluZm87XG4gICAgY29uc3QgYnVmZmVyID0gbmV3IEFycmF5QnVmZmVyKDQgKiAobm9kZXMubGVuZ3RoICsgbGVhdmVzLmxlbmd0aCkpO1xuICAgIGNvbnN0IGYzMlZpZXcgPSBuZXcgRmxvYXQzMkFycmF5KGJ1ZmZlcik7XG4gICAgY29uc3QgdTMyVmlldyA9IG5ldyBVaW50MzJBcnJheShidWZmZXIpO1xuICAgIGNvbnN0IG5vZGVzTGVuID0gbm9kZXMubGVuZ3RoO1xuXG4gICAgdGhpcy5fYnZoTWF4RGVwdGggPSBtYXhEZXB0aDtcbiAgICBmMzJWaWV3LnNldChub2Rlcyk7XG4gICAgdTMyVmlldy5zZXQobGVhdmVzLCBub2Rlc0xlbik7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IG5vZGVzTGVuOyBpICs9IDgpIHtcbiAgICAgIGZvciAobGV0IGNpID0gMDsgY2kgPCA4OyBjaSArPSA0KSB7XG4gICAgICAgIGNvbnN0IG9mZnNldCA9IGkgKyBjaTtcblxuICAgICAgICBpZiAobm9kZXNbb2Zmc2V0XSAmIDB4ODAwMDAwMDApIHtcbiAgICAgICAgICAvLyBsZWFmXG4gICAgICAgICAgdTMyVmlld1tvZmZzZXRdID0gbm9kZXNbb2Zmc2V0XSArIG5vZGVzTGVuIC8gNDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAvLyBub2RlXG4gICAgICAgICAgdTMyVmlld1tvZmZzZXRdID0gbm9kZXNbb2Zmc2V0XTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgIH1cblxuICAgIHRoaXMuX2J2aE1heERlcHRoID0gZmxhdEluZm8ubWF4RGVwdGg7XG4gICAgdGhpcy5fYnZoQnVmZmVyID0gZjMyVmlldztcbiAgfVxuXG4gIHByb3RlY3RlZCBfdHJhdmVyc2VOb2RlID0gKFxuICAgIG5vZGU6IElCVkhOb2RlIHwgSUJWSExlYWYsXG4gICAgLy8gbm9kZXM6IDIgY2hpbGRyZW4gaW5mbyBhbmQgNiBmbG9hdCBCVkhOb2RlIGJvdW5kaW5nIGluZm9cbiAgICAvLyBjaGlsZHJlbjogdXNlIHR3byB1aW50MzIgc3RvcmUgMiBjaGlsZHJlbidzIGluZm86IDFiaXQgdHlwZSgwIGlzIG5vZGUsIDEgaXMgbGVhZikgKyAzMWJpdHMgaW5kZXggb2Zmc2V0XG4gICAgLy8gbGVhdmVzOiBCVkhMZWFmIGluZGV4IGFuZCBsZW5ndGggaW5mb1xuICAgIGluZm86IHttYXhEZXB0aDogbnVtYmVyLCBub2RlczogbnVtYmVyW10sIGxlYXZlczogbnVtYmVyW119LFxuICAgIGRlcHRoOiBudW1iZXIgPSAxLFxuICAgIHBhcmVudE9mZnNldDogbnVtYmVyID0gLTEsXG4gICAgY2hpbGRJbmRleDogbnVtYmVyID0gMFxuICApID0+IHtcbiAgICBpbmZvLm1heERlcHRoID0gTWF0aC5tYXgoZGVwdGgsIGluZm8ubWF4RGVwdGgpO1xuICAgIGNvbnN0IHtub2RlcywgbGVhdmVzfSA9IGluZm87XG4gICAgY29uc3Qge19ib3VuZHNJbmZvcywgX2J2aE5vZGVzLCBfYnZoTGVhdmVzfSA9IHRoaXM7XG5cbiAgICBpZiAoaXNCVkhMZWFmKG5vZGUpKSB7XG4gICAgICBfYnZoTGVhdmVzLnB1c2gobm9kZSk7XG4gICAgICBpZiAocGFyZW50T2Zmc2V0ID49IDApIHtcbiAgICAgICAgbm9kZXNbcGFyZW50T2Zmc2V0ICogOCArIGNoaWxkSW5kZXhdID0gKDEgPDwgMzEpIHwgKGxlYXZlcy5sZW5ndGggLyA0KTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgY291bnQgPSBub2RlLmluZm9FbmQgLSBub2RlLmluZm9TdGFydDtcbiAgICAgIGZvciAobGV0IGkgPSBub2RlLmluZm9TdGFydDsgaSA8IG5vZGUuaW5mb0VuZDsgaSArPSAxKSB7XG4gICAgICAgIGNvbnN0IGlkeGVzID0gX2JvdW5kc0luZm9zW2ldLmluZGV4ZXM7XG5cbiAgICAgICAgbGVhdmVzLnB1c2goY291bnQsIGlkeGVzWzBdLCBpZHhlc1sxXSwgaWR4ZXNbMl0pO1xuICAgICAgfVxuICAgIH0gZWxzZSB7XG4gICAgICBfYnZoTm9kZXMucHVzaChub2RlKTtcbiAgICAgIGNvbnN0IGJvdW5kcyA9IG5vZGUuYm91bmRzO1xuICAgICAgY29uc3Qgbm9kZU9mZnNldCA9IG5vZGVzLmxlbmd0aCAvIDg7XG5cbiAgICAgIGlmIChwYXJlbnRPZmZzZXQgPj0gMCkge1xuICAgICAgICBub2Rlc1twYXJlbnRPZmZzZXQgKiA4ICsgY2hpbGRJbmRleF0gPSBub2RlT2Zmc2V0ICogMjtcbiAgICAgIH1cblxuICAgICAgbm9kZXMucHVzaChcbiAgICAgICAgMCwgYm91bmRzLm1pblswXSwgYm91bmRzLm1pblsxXSwgYm91bmRzLm1pblsyXSxcbiAgICAgICAgMCwgYm91bmRzLm1heFswXSwgYm91bmRzLm1heFsxXSwgYm91bmRzLm1heFsyXVxuICAgICAgKTtcblxuICAgICAgdGhpcy5fdHJhdmVyc2VOb2RlKG5vZGUuY2hpbGQwLCBpbmZvLCBkZXB0aCArIDEsIG5vZGVPZmZzZXQsIDApO1xuICAgICAgdGhpcy5fdHJhdmVyc2VOb2RlKG5vZGUuY2hpbGQxLCBpbmZvLCBkZXB0aCArIDEsIG5vZGVPZmZzZXQsIDQpO1xuICAgIH1cbiAgfVxuXG4gIHByb3RlY3RlZCBfYnVpbGREZWJ1Z01lc2goKSB7XG4gICAgY29uc3Qge19idmhOb2RlcywgX2J2aE1heERlcHRofSA9IHRoaXM7XG4gICAgY29uc3QgbW9kZSA9ICdsaW5lcycgYXMgJ2xpbmVzJyB8ICd0cmlhbmdsZXMnO1xuXG4gICAgY29uc3Qgbm9kZXNMZW4gPSBfYnZoTm9kZXMubGVuZ3RoO1xuICAgIC8vIHBlciBib3ggaGFzIDggdmVydGV4XG4gICAgY29uc3QgcG9zaXRpb25zID0gbmV3IEZsb2F0MzJBcnJheShub2Rlc0xlbiAqIDggKiAzKTtcbiAgICBjb25zdCBjb2xvcnMgPSBuZXcgRmxvYXQzMkFycmF5KG5vZGVzTGVuICogOCAqIDMpO1xuICAgIGxldCBpbmRleGVzOiBVaW50MzJBcnJheTtcbiAgICBpZiAobW9kZSA9PT0gJ2xpbmVzJykge1xuICAgICAgaW5kZXhlcyA9IG5ldyBVaW50MzJBcnJheShub2Rlc0xlbiAqIDI0KTtcbiAgICB9IGVsc2Uge1xuICAgICAgaW5kZXhlcyA9IG5ldyBVaW50MzJBcnJheShub2Rlc0xlbiAqIDM2KTtcbiAgICB9XG5cbiAgICBjb25zdCB0b3RlTERlcHRoQ291bnQ6IG51bWJlcltdID0gbmV3IEFycmF5KF9idmhNYXhEZXB0aCkuZmlsbCgwKTtcbiAgICBjb25zdCBkZXB0aENvdW50OiBudW1iZXJbXSA9IG5ldyBBcnJheShfYnZoTWF4RGVwdGgpLmZpbGwoMCk7XG4gICAgX2J2aE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICB0b3RlTERlcHRoQ291bnRbbm9kZS5kZXB0aF0gKz0gMTtcbiAgICB9KTtcblxuICAgIGxldCBpbmRleCA9IDA7XG4gICAgX2J2aE5vZGVzLmZvckVhY2gobm9kZSA9PiB7XG4gICAgICBjb25zdCBib3ggPSBub2RlLmJvdW5kcy5idWlsZEJveChtb2RlKTtcbiAgICAgIGNvbnN0IG9mZnNldCA9IGluZGV4ICogODtcbiAgICAgIGNvbnN0IHBPZmZzZXQgPSBpbmRleCAqIDggKiAzO1xuICAgICAgY29uc3QgY09mZnNldCA9IGluZGV4ICogOCAqIDM7XG4gICAgICBjb25zdCBpT2Zmc2V0ID0gaW5kZXggKiBib3guaW5kZXhlcy5sZW5ndGg7XG5cbiAgICAgIGNvbnN0IGNvbG9yID0gaHNsVG9SZ2IoXG4gICAgICAgIG5vZGUuZGVwdGggLyBfYnZoTWF4RGVwdGgsXG4gICAgICAgIChkZXB0aENvdW50W25vZGUuZGVwdGhdIC8gdG90ZUxEZXB0aENvdW50W25vZGUuZGVwdGhdKSAqIDAuNyArIDAuMyxcbiAgICAgICAgMC41XG4gICAgICApO1xuICAgICAgZm9yIChsZXQgY2kgPSAwOyBjaSA8IDI0OyBjaSArPSAzKSB7XG4gICAgICAgIGNvbG9ycy5zZXQoY29sb3IsIGNPZmZzZXQgKyBjaSk7XG4gICAgICB9XG4gICAgICBcbiAgICAgIGluZGV4ZXMuc2V0KGJveC5pbmRleGVzLm1hcCh2ID0+IHYgKyBvZmZzZXQpLCBpT2Zmc2V0KTtcbiAgICAgIHBvc2l0aW9ucy5zZXQoYm94LnBvc2l0aW9ucywgcE9mZnNldCk7XG4gICAgICBcbiAgICAgIGluZGV4ICs9IDE7XG4gICAgICBkZXB0aENvdW50W25vZGUuZGVwdGhdICs9IDE7XG4gICAgfSk7XG5cbiAgICB0aGlzLl9kZWJ1Z01lc2ggPSBuZXcgTWVzaChcbiAgICAgIG5ldyBHZW9tZXRyeShbXG4gICAgICAgIHtcbiAgICAgICAgICBsYXlvdXQ6IHtcbiAgICAgICAgICAgIGF0dHJpYnV0ZXM6IFt7XG4gICAgICAgICAgICAgIG5hbWU6ICdwb3NpdGlvbicsXG4gICAgICAgICAgICAgIHNoYWRlckxvY2F0aW9uOiAwLFxuICAgICAgICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDMnLFxuICAgICAgICAgICAgICBvZmZzZXQ6IDBcbiAgICAgICAgICAgIH1dLFxuICAgICAgICAgICAgYXJyYXlTdHJpZGU6IDEyXG4gICAgICAgICAgfSxcbiAgICAgICAgICBkYXRhOiBwb3NpdGlvbnNcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgYXR0cmlidXRlczogW3tcbiAgICAgICAgICAgICAgbmFtZTogJ2NvbG9yXzAnLFxuICAgICAgICAgICAgICBzaGFkZXJMb2NhdGlvbjogMSxcbiAgICAgICAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJyxcbiAgICAgICAgICAgICAgb2Zmc2V0OiAwXG4gICAgICAgICAgICB9XSxcbiAgICAgICAgICAgIGFycmF5U3RyaWRlOiAxMlxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YTogY29sb3JzXG4gICAgICAgIH1cbiAgICAgIF0sIGluZGV4ZXMsIGluZGV4ZXMubGVuZ3RoKSxcbiAgICAgIG5ldyBNYXRlcmlhbChcbiAgICAgICAgYnVpbGRpbkVmZmVjdHMuckNvbG9yLFxuICAgICAgICB7dV9jb2xvcjogbmV3IEZsb2F0MzJBcnJheShbMSwgMSwgMSwgLjRdKX0sXG4gICAgICAgIHVuZGVmaW5lZCxcbiAgICAgICAge1xuICAgICAgICAgIHByaW1pdGl2ZVR5cGU6IG1vZGUgPT09ICdsaW5lcycgPyAnbGluZS1saXN0JyA6ICd0cmlhbmdsZS1saXN0JyxcbiAgICAgICAgICBjdWxsTW9kZTogJ25vbmUnLFxuICAgICAgICAgIGJsZW5kQ29sb3I6IHtcbiAgICAgICAgICAgIHNyY0ZhY3RvcjogJ3NyYy1hbHBoYScsXG4gICAgICAgICAgICBkc3RGYWN0b3I6ICdvbmUtbWludXMtc3JjLWFscGhhJ1xuICAgICAgICAgIH0sXG4gICAgICAgICAgYmxlbmRBbHBoYToge1xuICAgICAgICAgICAgc3JjRmFjdG9yOiAnemVybycsXG4gICAgICAgICAgICBkc3RGYWN0b3I6ICdvbmUnXG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICApXG4gICAgKTtcbiAgfVxufVxuXG5mdW5jdGlvbiBodWUycmdiKHA6IG51bWJlciwgcTogbnVtYmVyLCB0OiBudW1iZXIpIHtcbiAgaWYodCA8IDApIHQgKz0gMTtcbiAgaWYodCA+IDEpIHQgLT0gMTtcbiAgaWYodCA8IDEvNikgcmV0dXJuIHAgKyAocSAtIHApICogNiAqIHQ7XG4gIGlmKHQgPCAxLzIpIHJldHVybiBxO1xuICBpZih0IDwgMi8zKSByZXR1cm4gcCArIChxIC0gcCkgKiAoMi8zIC0gdCkgKiA2O1xuICByZXR1cm4gcDtcbn1cblxuZnVuY3Rpb24gaHNsVG9SZ2IoaDogbnVtYmVyLCBzOiBudW1iZXIsIGw6IG51bWJlcil7XG4gIGxldCByOiBudW1iZXIsIGc6IG51bWJlciwgYjogbnVtYmVyO1xuXG4gIGlmKHMgPT0gMCl7XG4gICAgciA9IGcgPSBiID0gbDsgLy8gYWNocm9tYXRpY1xuICB9IGVsc2Uge1xuICAgIHZhciBxID0gbCA8IDAuNSA/IGwgKiAoMSArIHMpIDogbCArIHMgLSBsICogcztcbiAgICB2YXIgcCA9IDIgKiBsIC0gcTtcbiAgICByID0gaHVlMnJnYihwLCBxLCBoICsgMS8zKTtcbiAgICBnID0gaHVlMnJnYihwLCBxLCBoKTtcbiAgICBiID0gaHVlMnJnYihwLCBxLCBoIC0gMS8zKTtcbiAgfVxuXG4gIHJldHVybiBbciwgZywgYl07XG59XG4iXX0=","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar renderEnv_1 = require(\"../core/renderEnv\");\nvar HObject_1 = require(\"../core/HObject\");\nvar tmpV0 = new Float32Array(3);\nvar tmpV1 = new Float32Array(3);\nvar tmpV2 = new Float32Array(3);\nvar tmpQ1 = new Float32Array(4);\nvar tmpMat = new Float32Array(16);\nvar UP = new Float32Array([0, 1, 0]);\nvar NodeControl = (function (_super) {\n    __extends(NodeControl, _super);\n    function NodeControl(_mode) {\n        if (_mode === void 0) { _mode = 'free'; }\n        var _this = _super.call(this) || this;\n        _this._mode = _mode;\n        _this.isNodeControl = true;\n        _this._start = false;\n        _this._handleStart = function (event) {\n            _this._x = event.clientX;\n            _this._y = event.clientY;\n            if (_this._mode === 'arc') {\n                _this._arcRadius = gl_matrix_1.vec3.distance(gl_matrix_1.mat4.getTranslation(tmpV0, _this._target.worldMat), gl_matrix_1.mat4.getTranslation(tmpV1, _this._node.worldMat));\n            }\n            _this._start = true;\n        };\n        _this._handleEnd = function () {\n            _this._start = false;\n        };\n        _this._handleMove = function (event) {\n            var _a = _this, _start = _a._start, _node = _a._node, _x = _a._x, _y = _a._y;\n            if (!_start || !_node) {\n                return;\n            }\n            var clientX = event.clientX, clientY = event.clientY;\n            var dy = (clientX - _x) / 200;\n            var dx = (clientY - _y) / 200;\n            if (_this._mode === 'free') {\n                gl_matrix_1.quat.rotateX(_node.quat, _node.quat, dx);\n                gl_matrix_1.quat.invert(tmpQ1, _node.quat);\n                var up = new Float32Array([0, 1, 0]);\n                gl_matrix_1.vec3.transformQuat(up, up, tmpQ1);\n                gl_matrix_1.quat.setAxisAngle(tmpQ1, up, dy);\n                gl_matrix_1.quat.multiply(_node.quat, _node.quat, tmpQ1);\n            }\n            else {\n                gl_matrix_1.mat4.getTranslation(tmpV0, _this._target.worldMat);\n                gl_matrix_1.mat4.getTranslation(tmpV1, _this._node.worldMat);\n                tmpV1[0] += dy * 2;\n                tmpV1[1] += dx * 2;\n                var forward = gl_matrix_1.vec3.sub(tmpV2, tmpV0, tmpV1);\n                gl_matrix_1.vec3.normalize(forward, forward);\n                gl_matrix_1.vec3.scale(forward, forward, -_this._arcRadius);\n                gl_matrix_1.vec3.add(tmpV1, tmpV0, forward);\n                gl_matrix_1.mat4.lookAt(tmpMat, tmpV1, tmpV0, UP);\n                _this._node.pos.set(tmpV1);\n                gl_matrix_1.mat4.getRotation(_this._node.quat, tmpMat);\n            }\n            _this._x = clientX;\n            _this._y = clientY;\n            _this.onChange && _this.onChange();\n        };\n        _this._handleZoom = function (event) {\n            var _a = _this._node, worldMat = _a.worldMat, pos = _a.pos;\n            var delta = event.deltaY / 200;\n            var forward = worldMat.slice(8, 12);\n            if (_this._mode === 'arc') {\n                gl_matrix_1.mat4.getTranslation(tmpV0, _this._target.worldMat);\n                gl_matrix_1.mat4.getTranslation(tmpV1, _this._node.worldMat);\n                gl_matrix_1.vec3.sub(forward, tmpV0, tmpV1);\n                delta = -delta;\n            }\n            gl_matrix_1.vec3.normalize(forward, forward);\n            gl_matrix_1.vec3.scale(forward, forward, delta);\n            gl_matrix_1.vec3.add(pos, pos, forward);\n            if (_this._mode === 'arc') {\n                _this._arcRadius += delta;\n            }\n            _this.onChange && _this.onChange();\n        };\n        _this._handleTouchStart = function (event) {\n            var touch = event.targetTouches[0];\n            _this._touchId = touch.identifier;\n            _this._handleStart(touch);\n        };\n        _this._handleTouchMove = function (event) {\n            if (!_this._start) {\n                return;\n            }\n            for (var i = 0; i < event.targetTouches.length; i += 1) {\n                var touch = event.targetTouches[i];\n                if (touch.identifier === _this._touchId) {\n                    return _this._handleMove(touch);\n                }\n            }\n            _this._handleEnd();\n        };\n        var canvas = renderEnv_1.default.canvas;\n        canvas.addEventListener('mousedown', _this._handleStart);\n        canvas.addEventListener('mouseup', _this._handleEnd);\n        canvas.addEventListener('mouseleave', _this._handleEnd);\n        canvas.addEventListener('mouseout', _this._handleEnd);\n        canvas.addEventListener('mousemove', _this._handleMove);\n        canvas.addEventListener('wheel', _this._handleZoom);\n        canvas.addEventListener('touchstart', _this._handleTouchStart);\n        canvas.addEventListener('touchend', _this._handleEnd);\n        canvas.addEventListener('touchcancel', _this._handleEnd);\n        canvas.addEventListener('touchmove', _this._handleTouchMove);\n        return _this;\n    }\n    NodeControl.prototype.control = function (node, target) {\n        this._node = node;\n        this._target = target;\n        if (!target && this._mode === 'arc') {\n            throw new Error('Mode arc must be given target!');\n        }\n    };\n    NodeControl.CLASS_NAME = 'NodeControl';\n    return NodeControl;\n}(HObject_1.default));\nexports.default = NodeControl;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTm9kZUNvbnRyb2wuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJOb2RlQ29udHJvbC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFNQSx1Q0FBNkM7QUFDN0MsK0NBQTBDO0FBQzFDLDJDQUFzQztBQUd0QyxJQUFNLEtBQUssR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxJQUFNLEtBQUssR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxJQUFNLEtBQUssR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxJQUFNLEtBQUssR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUNsQyxJQUFNLE1BQU0sR0FBRyxJQUFJLFlBQVksQ0FBQyxFQUFFLENBQUMsQ0FBQztBQUNwQyxJQUFNLEVBQUUsR0FBRyxJQUFJLFlBQVksQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUMsQ0FBQztBQUV2QztJQUF5QywrQkFBTztJQWE5QyxxQkFBc0IsS0FBOEI7UUFBOUIsc0JBQUEsRUFBQSxjQUE4QjtRQUFwRCxZQUNFLGlCQUFPLFNBZVI7UUFoQnFCLFdBQUssR0FBTCxLQUFLLENBQXlCO1FBWDdDLG1CQUFhLEdBQVksSUFBSSxDQUFDO1FBRzNCLFlBQU0sR0FBWSxLQUFLLENBQUM7UUFtQ3hCLGtCQUFZLEdBQUcsVUFBQyxLQUF5QztZQUNqRSxLQUFJLENBQUMsRUFBRSxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUM7WUFDeEIsS0FBSSxDQUFDLEVBQUUsR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDO1lBRXhCLElBQUksS0FBSSxDQUFDLEtBQUssS0FBSyxLQUFLLEVBQUU7Z0JBQ3hCLEtBQUksQ0FBQyxVQUFVLEdBQUcsZ0JBQUksQ0FBQyxRQUFRLENBQzdCLGdCQUFJLENBQUMsY0FBYyxDQUFDLEtBQUssRUFBRSxL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LENBQUMsVUFBVSxFQUFFLEtBQUksQ0FBQyxVQUFVLENBQUMsQ0FBQztRQUNyRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsV0FBVyxFQUFFLEtBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUN2RCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsT0FBTyxFQUFFLEtBQUksQ0FBQyxXQUFXLENBQUMsQ0FBQztRQUVuRCxNQUFNLENBQUMsZ0JBQWdCLENBQUMsWUFBWSxFQUFFLEtBQUksQ0FBQyxpQkFBaUIsQ0FBQyxDQUFDO1FBQzlELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxVQUFVLEVBQUUsS0FBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3JELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxhQUFhLEVBQUUsS0FBSSxDQUFDLFVBQVUsQ0FBQyxDQUFDO1FBQ3hELE1BQU0sQ0FBQyxnQkFBZ0IsQ0FBQyxXQUFXLEVBQUUsS0FBSSxDQUFDLGdCQUFnQixDQUFDLENBQUM7O0lBQzlELENBQUM7SUFFTSw2QkFBTyxHQUFkLFVBQWUsSUFBVSxFQUFFLE1BQWE7UUFDdEMsSUFBSSxDQUFDLEtBQUssR0FBRyxJQUFJLENBQUM7UUFDbEIsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUM7UUFFdEIsSUFBSSxDQUFDLE1BQU0sSUFBSSxJQUFJLENBQUMsS0FBSyxLQUFLLEtBQUssRUFBRTtZQUNuQyxNQUFNLElBQUksS0FBSyxDQUFDLGdDQUFnQyxDQUFDLENBQUM7U0FDbkQ7SUFDSCxDQUFDO0lBckNhLHNCQUFVLEdBQVcsYUFBYSxDQUFDO0lBMkluRCxrQkFBQztDQUFBLEFBNUlELENBQXlDLGlCQUFPLEdBNEkvQztrQkE1SW9CLFdBQVciLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIE5vZGVDb250cm9sLnRzXG4gKiBcbiAqIEBBdXRob3IgIDpkdHlza3koZHR5c2t5QG91dGxvb2suY29tKVxuICogQERhdGUgICAgOiA2LzEzLzIwMjEsIDg6NDc6MjIgUE1cbiovXG5pbXBvcnQgeyBtYXQ0LCBxdWF0LCB2ZWMzIH0gZnJvbSAnZ2wtbWF0cml4JztcbmltcG9ydCByZW5kZXJFbnYgZnJvbSAnLi4vY29yZS9yZW5kZXJFbnYnO1xuaW1wb3J0IEhPYmplY3QgZnJvbSAnLi4vY29yZS9IT2JqZWN0JztcbmltcG9ydCBOb2RlIGZyb20gJy4uL2NvcmUvTm9kZSc7XG5cbmNvbnN0IHRtcFYwID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRtcFYxID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRtcFYyID0gbmV3IEZsb2F0MzJBcnJheSgzKTtcbmNvbnN0IHRtcFExID0gbmV3IEZsb2F0MzJBcnJheSg0KTtcbmNvbnN0IHRtcE1hdCA9IG5ldyBGbG9hdDMyQXJyYXkoMTYpO1xuY29uc3QgVVAgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAxLCAwXSk7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIE5vZGVDb250cm9sIGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ05vZGVDb250cm9sJztcbiAgcHVibGljIGlzTm9kZUNvbnRyb2w6IGJvb2xlYW4gPSB0cnVlO1xuICBwdWJsaWMgb25DaGFuZ2U6ICgpID0+IHZvaWQ7XG5cbiAgcHJvdGVjdGVkIF9zdGFydDogYm9vbGVhbiA9IGZhbHNlO1xuICBwcm90ZWN0ZWQgX3g6IG51bWJlcjtcbiAgcHJvdGVjdGVkIF95OiBudW1iZXI7XG4gIHByb3RlY3RlZCBfdG91Y2hJZDogbnVtYmVyO1xuICBwcm90ZWN0ZWQgX25vZGU6IE5vZGU7XG4gIHByb3RlY3RlZCBfdGFyZ2V0OiBOb2RlO1xuICBwcm90ZWN0ZWQgX2FyY1JhZGl1czogbnVtYmVyO1xuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfbW9kZTogJ2ZyZWUnIHwgJ2FyYycgPSAnZnJlZScpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgY29uc3Qge2NhbnZhc30gPSByZW5kZXJFbnY7XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vkb3duJywgdGhpcy5faGFuZGxlU3RhcnQpO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCdtb3VzZXVwJywgdGhpcy5faGFuZGxlRW5kKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2VsZWF2ZScsIHRoaXMuX2hhbmRsZUVuZCk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ21vdXNlb3V0JywgdGhpcy5faGFuZGxlRW5kKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcignbW91c2Vtb3ZlJywgdGhpcy5faGFuZGxlTW92ZSk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3doZWVsJywgdGhpcy5faGFuZGxlWm9vbSk7XG5cbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2hzdGFydCcsIHRoaXMuX2hhbmRsZVRvdWNoU3RhcnQpO1xuICAgIGNhbnZhcy5hZGRFdmVudExpc3RlbmVyKCd0b3VjaGVuZCcsIHRoaXMuX2hhbmRsZUVuZCk7XG4gICAgY2FudmFzLmFkZEV2ZW50TGlzdGVuZXIoJ3RvdWNoY2FuY2VsJywgdGhpcy5faGFuZGxlRW5kKTtcbiAgICBjYW52YXMuYWRkRXZlbnRMaXN0ZW5lcigndG91Y2htb3ZlJywgdGhpcy5faGFuZGxlVG91Y2hNb3ZlKTtcbiAgfVxuXG4gIHB1YmxpYyBjb250cm9sKG5vZGU6IE5vZGUsIHRhcmdldD86IE5vZGUpIHtcbiAgICB0aGlzLl9ub2RlID0gbm9kZTtcbiAgICB0aGlzLl90YXJnZXQgPSB0YXJnZXQ7XG5cbiAgICBpZiAoIXRhcmdldCAmJiB0aGlzLl9tb2RlID09PSAnYXJjJykge1xuICAgICAgdGhyb3cgbmV3IEVycm9yKCdNb2RlIGFyYyBtdXN0IGJlIGdpdmVuIHRhcmdldCEnKTtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2hhbmRsZVN0YXJ0ID0gKGV2ZW50OiB7Y2xpZW50WDogbnVtYmVyLCBjbGllbnRZOiBudW1iZXJ9KSA9PiB7XG4gICAgdGhpcy5feCA9IGV2ZW50LmNsaWVudFg7XG4gICAgdGhpcy5feSA9IGV2ZW50LmNsaWVudFk7XG5cbiAgICBpZiAodGhpcy5fbW9kZSA9PT0gJ2FyYycpIHtcbiAgICAgIHRoaXMuX2FyY1JhZGl1cyA9IHZlYzMuZGlzdGFuY2UoXG4gICAgICAgIG1hdDQuZ2V0VHJhbnNsYXRpb24odG1wVjAsIHRoaXMuX3RhcmdldC53b3JsZE1hdCksXG4gICAgICAgIG1hdDQuZ2V0VHJhbnNsYXRpb24odG1wVjEsIHRoaXMuX25vZGUud29ybGRNYXQpXG4gICAgICApO1xuICAgIH1cblxuICAgIHRoaXMuX3N0YXJ0ID0gdHJ1ZTtcbiAgfVxuXG4gIHByb3RlY3RlZCBfaGFuZGxlRW5kID0gKCkgPT4ge1xuICAgIHRoaXMuX3N0YXJ0ID0gZmFsc2U7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2hhbmRsZU1vdmUgPSAoZXZlbnQ6IHtjbGllbnRYOiBudW1iZXIsIGNsaWVudFk6IG51bWJlcn0pID0+IHtcbiAgICBjb25zdCB7X3N0YXJ0LCBfbm9kZSwgX3gsIF95fSA9IHRoaXM7XG5cbiAgICBpZiAoIV9zdGFydCB8fCAhX25vZGUpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCB7Y2xpZW50WCwgY2xpZW50WX0gPSBldmVudDtcbiAgICBjb25zdCBkeSA9IChjbGllbnRYIC0gX3gpIC8gMjAwO1xuICAgIGNvbnN0IGR4ID0gKGNsaWVudFkgLSBfeSkgLyAyMDA7XG5cbiAgICBpZiAodGhpcy5fbW9kZSA9PT0gJ2ZyZWUnKSB7XG4gICAgICBxdWF0LnJvdGF0ZVgoX25vZGUucXVhdCwgX25vZGUucXVhdCwgZHgpO1xuICAgICAgcXVhdC5pbnZlcnQodG1wUTEsIF9ub2RlLnF1YXQpO1xuICAgICAgY29uc3QgdXAgPSBuZXcgRmxvYXQzMkFycmF5KFswLCAxLCAwXSk7XG4gICAgICB2ZWMzLnRyYW5zZm9ybVF1YXQodXAsIHVwLCB0bXBRMSk7XG4gICAgICBxdWF0LnNldEF4aXNBbmdsZSh0bXBRMSwgdXAsIGR5KTtcbiAgICAgIHF1YXQubXVsdGlwbHkoX25vZGUucXVhdCwgX25vZGUucXVhdCwgdG1wUTEpO1xuICAgIH0gZWxzZSB7XG4gICAgICBtYXQ0LmdldFRyYW5zbGF0aW9uKHRtcFYwLCB0aGlzLl90YXJnZXQud29ybGRNYXQpO1xuICAgICAgbWF0NC5nZXRUcmFuc2xhdGlvbih0bXBWMSwgdGhpcy5fbm9kZS53b3JsZE1hdCk7XG4gICAgICB0bXBWMVswXSArPSBkeSAqIDI7XG4gICAgICB0bXBWMVsxXSArPSBkeCAqIDI7XG4gICAgICBjb25zdCBmb3J3YXJkID0gdmVjMy5zdWIodG1wVjIsIHRtcFYwLCB0bXBWMSk7XG4gICAgICB2ZWMzLm5vcm1hbGl6ZShmb3J3YXJkLCBmb3J3YXJkKTtcbiAgICAgIHZlYzMuc2NhbGUoZm9yd2FyZCwgZm9yd2FyZCwgLXRoaXMuX2FyY1JhZGl1cyk7XG4gICAgICB2ZWMzLmFkZCh0bXBWMSwgdG1wVjAsIGZvcndhcmQpO1xuICAgICAgbWF0NC5sb29rQXQodG1wTWF0LCB0bXBWMSwgdG1wVjAsIFVQKTtcbiAgICAgIHRoaXMuX25vZGUucG9zLnNldCh0bXBWMSk7XG4gICAgICBtYXQ0LmdldFJvdGF0aW9uKHRoaXMuX25vZGUucXVhdCwgdG1wTWF0KTtcbiAgICB9XG5cbiAgICB0aGlzLl94ID0gY2xpZW50WDtcbiAgICB0aGlzLl95ID0gY2xpZW50WTtcblxuICAgIHRoaXMub25DaGFuZ2UgJiYgdGhpcy5vbkNoYW5nZSgpXG4gIH1cblxuICBwcm90ZWN0ZWQgX2hhbmRsZVpvb20gPSAoZXZlbnQ6IFdoZWVsRXZlbnQpID0+IHtcbiAgICBjb25zdCB7d29ybGRNYXQsIHBvc30gPSB0aGlzLl9ub2RlO1xuICAgIGxldCBkZWx0YSA9IGV2ZW50LmRlbHRhWSAvIDIwMDtcbiAgICBsZXQgZm9yd2FyZCA9IHdvcmxkTWF0LnNsaWNlKDgsIDEyKTtcblxuICAgIGlmICh0aGlzLl9tb2RlID09PSAnYXJjJykge1xuICAgICAgbWF0NC5nZXRUcmFuc2xhdGlvbih0bXBWMCwgdGhpcy5fdGFyZ2V0LndvcmxkTWF0KTtcbiAgICAgIG1hdDQuZ2V0VHJhbnNsYXRpb24odG1wVjEsIHRoaXMuX25vZGUud29ybGRNYXQpO1xuICAgICAgdmVjMy5zdWIoZm9yd2FyZCwgdG1wVjAsIHRtcFYxKTtcbiAgICAgIGRlbHRhID0gLWRlbHRhO1xuICAgIH1cblxuICAgIHZlYzMubm9ybWFsaXplKGZvcndhcmQsIGZvcndhcmQpO1xuICAgIHZlYzMuc2NhbGUoZm9yd2FyZCwgZm9yd2FyZCwgZGVsdGEpO1xuICAgIHZlYzMuYWRkKHBvcywgcG9zLCBmb3J3YXJkKTtcblxuICAgIGlmICh0aGlzLl9tb2RlID09PSAnYXJjJykge1xuICAgICAgdGhpcy5fYXJjUmFkaXVzICs9IGRlbHRhO1xuICAgIH1cblxuICAgIHRoaXMub25DaGFuZ2UgJiYgdGhpcy5vbkNoYW5nZSgpXG4gIH1cblxuICBwcm90ZWN0ZWQgX2hhbmRsZVRvdWNoU3RhcnQgPSAoZXZlbnQ6IFRvdWNoRXZlbnQpID0+IHtcbiAgICBjb25zdCB0b3VjaCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbMF07XG4gICAgdGhpcy5fdG91Y2hJZCA9IHRvdWNoLmlkZW50aWZpZXI7XG4gICAgdGhpcy5faGFuZGxlU3RhcnQodG91Y2gpO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9oYW5kbGVUb3VjaE1vdmUgPSAoZXZlbnQ6IFRvdWNoRXZlbnQpID0+IHtcbiAgICBpZiAoIXRoaXMuX3N0YXJ0KSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBldmVudC50YXJnZXRUb3VjaGVzLmxlbmd0aDsgaSArPSAxKSB7XG4gICAgICBjb25zdCB0b3VjaCA9IGV2ZW50LnRhcmdldFRvdWNoZXNbaV07XG5cbiAgICAgIGlmICh0b3VjaC5pZGVudGlmaWVyID09PSB0aGlzLl90b3VjaElkKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9oYW5kbGVNb3ZlKHRvdWNoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICB0aGlzLl9oYW5kbGVFbmQoKTtcbiAgfVxufVxuIl19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.EPBRMaterialType = void 0;\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar buildin_1 = require(\"../buildin\");\nvar ComputeUnit_1 = require(\"../core/ComputeUnit\");\nvar Geometry_1 = require(\"../core/Geometry\");\nvar HObject_1 = require(\"../core/HObject\");\nvar Material_1 = require(\"../core/Material\");\nvar Mesh_1 = require(\"../core/Mesh\");\nvar renderEnv_1 = require(\"../core/renderEnv\");\nvar shared_1 = require(\"../core/shared\");\nvar Texture_1 = require(\"../core/Texture\");\nvar BVH_1 = require(\"./BVH\");\n;\nvar EPBRMaterialType;\n(function (EPBRMaterialType) {\n    EPBRMaterialType[EPBRMaterialType[\"METAL_ROUGH\"] = 0] = \"METAL_ROUGH\";\n    EPBRMaterialType[EPBRMaterialType[\"SPEC_GLOSS\"] = 1] = \"SPEC_GLOSS\";\n    EPBRMaterialType[EPBRMaterialType[\"GLASS_METAL_ROUGH\"] = 2] = \"GLASS_METAL_ROUGH\";\n    EPBRMaterialType[EPBRMaterialType[\"GLASS_SPEC_GLOSS\"] = 3] = \"GLASS_SPEC_GLOSS\";\n})(EPBRMaterialType = exports.EPBRMaterialType || (exports.EPBRMaterialType = {}));\n;\nvar RayTracingManager = (function (_super) {\n    __extends(RayTracingManager, _super);\n    function RayTracingManager(_maxPrimitivesPerBVHLeaf) {\n        if (_maxPrimitivesPerBVHLeaf === void 0) { _maxPrimitivesPerBVHLeaf = 1; }\n        var _this = _super.call(this) || this;\n        _this._maxPrimitivesPerBVHLeaf = _maxPrimitivesPerBVHLeaf;\n        _this.isRayTracingManager = true;\n        _this._materials = [];\n        _this._buildAttributeBuffers = function (meshes) {\n            var _materials = _this._materials;\n            var indexCount = 0;\n            var vertexCount = 0;\n            meshes.forEach(function (mesh) {\n                vertexCount += mesh.geometry.vertexCount;\n                indexCount += mesh.geometry.count;\n            });\n            var indexes = (_this._indexInfo = {\n                value: new Uint32Array(indexCount)\n            }).value;\n            var _a = _this._attributesInfo = {\n                position: {\n                    value: new Float32Array(vertexCount * 4),\n                    length: 4,\n                    format: 'float32x3'\n                },\n                texcoord_0: {\n                    value: new Float32Array(vertexCount * 2),\n                    length: 2,\n                    format: 'float32x2'\n                },\n                normal: {\n                    value: new Float32Array(vertexCount * 4),\n                    length: 4,\n                    format: 'float32x3'\n                },\n                meshMatIndex: {\n                    value: new Uint32Array(vertexCount * 2),\n                    length: 2,\n                    format: 'uint32x2'\n                }\n            }, position = _a.position, texcoord_0 = _a.texcoord_0, normal = _a.normal, meshMatIndex = _a.meshMatIndex;\n            var attrOffset = 0;\n            var indexOffset = 0;\n            for (var meshIndex = 0; meshIndex < meshes.length; meshIndex += 1) {\n                var mesh = meshes[meshIndex];\n                var worldMat = mesh.worldMat;\n                var quat = gl_matrix_1.mat4.getRotation(new Float32Array(4), worldMat);\n                var geometry = mesh.geometry, material = mesh.material;\n                var indexData = geometry.indexData, vertexInfo = geometry.vertexInfo, vertexCount_1 = geometry.vertexCount, count = geometry.count;\n                if (material.effect.name !== 'rPBR') {\n                    throw new Error('Only support Effect rPBR!');\n                }\n                var materialIndex = _materials.indexOf(material);\n                if (materialIndex < 0) {\n                    _materials.push(material);\n                    materialIndex = _materials.length - 1;\n                }\n                indexData.forEach(function (value, index) {\n                    indexes[index + indexOffset] = value + attrOffset;\n                });\n                if (!vertexInfo.normal) {\n                    geometry.calculateNormals();\n                }\n                for (var index = 0; index < vertexCount_1; index += 1) {\n                    _this._copyAttribute(vertexInfo.position, position, attrOffset, index, worldMat);\n                    _this._copyAttribute(vertexInfo.texcoord_0, texcoord_0, attrOffset, index);\n                    _this._copyAttribute(vertexInfo.normal, normal, attrOffset, index, quat, true);\n                    meshMatIndex.value.set([meshIndex, materialIndex], (attrOffset + index) * meshMatIndex.length);\n                }\n                indexOffset += count;\n                attrOffset += vertexCount_1;\n            }\n        };\n        _this._buildCommonUniforms = function (materials) {\n            var matId2TexturesId = new Int32Array(materials.length * 4).fill(-1);\n            var baseColorFactors = new Float32Array(materials.length * 4).fill(1);\n            var metallicRoughnessFactorNormalScaleMaterialTypes = new Float32Array(materials.length * 4).fill(1);\n            var specularGlossinessFactors = new Float32Array(materials.length * 4).fill(1);\n            var baseColorTextures = [];\n            var normalTextures = [];\n            var metalRoughOrSpecGlossTextures = [];\n            materials.forEach(function (mat, index) {\n                var useGlass = mat.marcos['USE_GLASS'];\n                var useSpecGloss = mat.marcos['USE_SPEC_GLOSS'];\n                var baseColorFactor = mat.getUniform('u_baseColorFactor');\n                var metallicFactor = mat.getUniform('u_metallicFactor');\n                var roughnessFactor = mat.getUniform('u_roughnessFactor');\n                var specularFactor = mat.getUniform('u_specularFactor');\n                var glossinessFactor = mat.getUniform('u_glossinessFactor');\n                var normalScale = mat.getUniform('u_normalTextureScale');\n                var baseColorTexture = mat.getUniform('u_baseColorTexture');\n                var normalTexture = mat.getUniform('u_normalTexture');\n                var metallicRoughnessTexture = mat.getUniform('u_metallicRoughnessTexture');\n                var specularGlossinessTexture = mat.getUniform('u_specularGlossinessTexture');\n                var mid = index * 4;\n                baseColorTexture !== buildin_1.buildinTextures.empty && _this._setTextures(mid, baseColorTextures, baseColorTexture, matId2TexturesId);\n                normalTexture !== buildin_1.buildinTextures.empty && _this._setTextures(mid + 1, normalTextures, normalTexture, matId2TexturesId);\n                baseColorFactor && baseColorFactors.set(baseColorFactor, index * 4);\n                normalScale !== undefined && metallicRoughnessFactorNormalScaleMaterialTypes.set(normalScale.slice(0, 1), index * 4 + 2);\n                if (useSpecGloss) {\n                    specularFactor !== undefined && specularGlossinessFactors.set(specularFactor.slice(0, 3), index * 4);\n                    glossinessFactor !== undefined && specularGlossinessFactors.set(glossinessFactor.slice(0, 1), index * 4 + 3);\n                    specularGlossinessTexture !== buildin_1.buildinTextures.empty && _this._setTextures(mid + 2, metalRoughOrSpecGlossTextures, specularGlossinessTexture, matId2TexturesId);\n                    metallicRoughnessFactorNormalScaleMaterialTypes.set([useGlass ? EPBRMaterialType.GLASS_SPEC_GLOSS : EPBRMaterialType.SPEC_GLOSS], index * 4 + 3);\n                }\n                else {\n                    metallicFactor !== undefined && metallicRoughnessFactorNormalScaleMaterialTypes.set(metallicFactor.slice(0, 1), index * 4);\n                    roughnessFactor !== undefined && metallicRoughnessFactorNormalScaleMaterialTypes.set(roughnessFactor.slice(0, 1), index * 4 + 1);\n                    metallicRoughnessTexture !== buildin_1.buildinTextures.empty && _this._setTextures(mid + 2, metalRoughOrSpecGlossTextures, metallicRoughnessTexture, matId2TexturesId);\n                    metallicRoughnessFactorNormalScaleMaterialTypes.set([useGlass ? EPBRMaterialType.GLASS_METAL_ROUGH : EPBRMaterialType.METAL_ROUGH], index * 4 + 3);\n                }\n            });\n            _this._commonUniforms = {\n                matId2TexturesId: matId2TexturesId,\n                baseColorFactors: baseColorFactors,\n                metallicRoughnessFactorNormalScaleMaterialTypes: metallicRoughnessFactorNormalScaleMaterialTypes,\n                specularGlossinessFactors: specularGlossinessFactors,\n                baseColorTextures: _this._generateTextureArray(baseColorTextures),\n                normalTextures: _this._generateTextureArray(normalTextures),\n                metalRoughOrSpecGlossTextures: _this._generateTextureArray(metalRoughOrSpecGlossTextures)\n            };\n        };\n        _this._buildGBufferMesh = function () {\n            var _a = _this, _attributesInfo = _a._attributesInfo, _indexInfo = _a._indexInfo, _commonUniforms = _a._commonUniforms;\n            var geometry = new Geometry_1.default(Object.keys(_attributesInfo).map(function (name, index) {\n                var _a = _attributesInfo[name], value = _a.value, length = _a.length, format = _a.format;\n                return {\n                    layout: {\n                        arrayStride: length * 4,\n                        attributes: [{\n                                name: name,\n                                offset: 0,\n                                format: format,\n                                shaderLocation: index\n                            }]\n                    },\n                    data: value,\n                    usage: GPUBufferUsage.STORAGE\n                };\n            }), _indexInfo.value, _indexInfo.value.length);\n            var material = new Material_1.default(buildin_1.buildinEffects.rRTGBuffer, {\n                u_matId2TexturesId: _commonUniforms.matId2TexturesId,\n                u_baseColorFactors: _commonUniforms.baseColorFactors,\n                u_metallicRoughnessFactorNormalScaleMaterialTypes: _commonUniforms.metallicRoughnessFactorNormalScaleMaterialTypes,\n                u_specularGlossinessFactors: _commonUniforms.specularGlossinessFactors,\n                u_baseColorTextures: _commonUniforms.baseColorTextures,\n                u_normalTextures: _commonUniforms.normalTextures,\n                u_metalRoughOrSpecGlossTextures: _commonUniforms.metalRoughOrSpecGlossTextures\n            });\n            _this._gBufferMesh = new Mesh_1.default(geometry, material);\n        };\n        _this._buildRTUnit = function (output) {\n            var _a = _this, _gBufferMesh = _a._gBufferMesh, _commonUniforms = _a._commonUniforms, _bvh = _a._bvh;\n            var geometry = _gBufferMesh.geometry;\n            _this._rtUnit = new ComputeUnit_1.default(buildin_1.buildinEffects.cRTSS, { x: Math.ceil(renderEnv_1.default.width / 16), y: Math.ceil(renderEnv_1.default.height / 16) }, {\n                u_output: output,\n                u_matId2TexturesId: _commonUniforms.matId2TexturesId,\n                u_baseColorFactors: _commonUniforms.baseColorFactors,\n                u_metallicRoughnessFactorNormalScaleMaterialTypes: _commonUniforms.metallicRoughnessFactorNormalScaleMaterialTypes,\n                u_specularGlossinessFactors: _commonUniforms.specularGlossinessFactors,\n                u_baseColorTextures: _commonUniforms.baseColorTextures,\n                u_normalTextures: _commonUniforms.normalTextures,\n                u_metalRoughOrSpecGlossTextures: _commonUniforms.metalRoughOrSpecGlossTextures,\n                u_bvh: _bvh.buffer,\n            }, { BVH_DEPTH: _this._bvh.maxDepth });\n            var values = geometry.getValues('position');\n            _this._rtUnit.setUniform('u_positions', values.cpu, values.gpu);\n            values = geometry.getValues('texcoord_0');\n            _this._rtUnit.setUniform('u_uvs', values.cpu, values.gpu);\n            values = geometry.getValues('normal');\n            _this._rtUnit.setUniform('u_normals', values.cpu, values.gpu);\n            values = geometry.getValues('meshmatindex');\n            _this._rtUnit.setUniform('u_meshMatIndexes', values.cpu, values.gpu);\n            console.log(_this._materials);\n        };\n        _this._bvh = new BVH_1.default(_maxPrimitivesPerBVHLeaf);\n        return _this;\n    }\n    Object.defineProperty(RayTracingManager.prototype, \"gBufferMesh\", {\n        get: function () {\n            return this._gBufferMesh;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RayTracingManager.prototype, \"rtUnit\", {\n        get: function () {\n            return this._rtUnit;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RayTracingManager.prototype, \"bvhDebugMesh\", {\n        get: function () {\n            return this._bvh.debugMesh;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(RayTracingManager.prototype, \"bvh\", {\n        get: function () {\n            return this._bvh;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    RayTracingManager.prototype.process = function (meshes, output) {\n        this.meshes = meshes;\n        shared_1.callWithProfile('build AttributeBuffers', this._buildAttributeBuffers, [meshes]);\n        shared_1.callWithProfile('build CommonUniforms', this._buildCommonUniforms, [this._materials]);\n        shared_1.callWithProfile('build GBufferMesh', this._buildGBufferMesh, []);\n        this._bvh.process(this._attributesInfo.position.value, this._indexInfo.value);\n        shared_1.callWithProfile('build RTUnit', this._buildRTUnit, [output]);\n        console.log(\"Build done(max primitives per leaf is \" + this._maxPrimitivesPerBVHLeaf + \"): mesh(\" + meshes.length + \"), material(\" + this._materials.length + \"), vertexes(\" + this._attributesInfo.position.value.length / 3 + \"), triangles(\" + this._indexInfo.value.length / 3 + \"), bvhNodes(\" + this._bvh.nodesCount + \"), bvhLeaves(\" + this._bvh.leavesCount + \"), bvhDepth(\" + this._bvh.maxDepth + \")\");\n    };\n    RayTracingManager.prototype._copyAttribute = function (src, dst, attrOffset, index, transform, isQuat) {\n        var srcOffset = src.offset + index * src.stride;\n        var srcData = src.data.slice(srcOffset, srcOffset + src.length);\n        transform &&\n            (isQuat\n                ? gl_matrix_1.vec3.transformQuat(srcData, srcData, transform)\n                : gl_matrix_1.vec3.transformMat4(srcData, srcData, transform));\n        dst.value.set(srcData, (attrOffset + index) * dst.length);\n    };\n    RayTracingManager.prototype._setTextures = function (offset, textures, texture, matId2TexturesId) {\n        if (texture) {\n            var idx = textures.indexOf(texture);\n            if (idx < 0) {\n                textures.push(texture);\n                idx = textures.length - 1;\n            }\n            matId2TexturesId[offset] = idx;\n        }\n    };\n    RayTracingManager.prototype._generateTextureArray = function (textures) {\n        if (!textures.length) {\n            return buildin_1.buildinTextures.array1white;\n        }\n        var width = 0;\n        var height = 0;\n        textures.forEach(function (tex) {\n            width = Math.max(width, tex.width);\n            height = Math.max(height, tex.height);\n        });\n        var images = textures.map(function (tex) {\n            if (tex.width === width && tex.height === height) {\n                return tex.source;\n            }\n            if (!(tex.source instanceof ImageBitmap)) {\n                throw new Error('Can only resize image bitmap!');\n            }\n            if (!RayTracingManager.RESIZE_CANVAS) {\n                RayTracingManager.RESIZE_CANVAS = document.createElement('canvas');\n                RayTracingManager.RESIZE_CANVAS.width = 2048;\n                RayTracingManager.RESIZE_CANVAS.height = 2048;\n                RayTracingManager.RESIZE_CTX = RayTracingManager.RESIZE_CANVAS.getContext('2d');\n            }\n            var ctx = RayTracingManager.RESIZE_CTX;\n            ctx.drawImage(tex.source, 0, 0, width, height);\n            return ctx.getImageData(0, 0, width, height).data.buffer;\n        });\n        return new Texture_1.default(width, height, images, textures[0].format);\n    };\n    RayTracingManager.CLASS_NAME = 'RayTracingManager';\n    return RayTracingManager;\n}(HObject_1.default));\nexports.default = RayTracingManager;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiUmF5VHJhY2luZ01hbmFnZXIuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJSYXlUcmFjaW5nTWFuYWdlci50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7O0FBTUEsdUNBQXVDO0FBQ3ZDLHNDQUE2RDtBQUM3RCxtREFBOEM7QUFDOUMsNkNBQXdDO0FBQ3hDLDJDQUFzQztBQUN0Qyw2Q0FBd0M7QUFDeEMscUNBQWdDO0FBQ2hDLCtDQUEwQztBQUUxQyx5Q0FBOEU7QUFDOUUsMkNBQXNDO0FBQ3RDLDZCQUF3QjtBQU12QixDQUFDO0FBRUYsSUFBWSxnQkFLWDtBQUxELFdBQVksZ0JBQWdCO0lBQzFCLHFFQUFXLENBQUE7SUFDWCxtRUFBVSxDQUFBO0lBQ1YsaUZBQWlCLENBQUE7SUFDakIsK0VBQWdCLENBQUE7QUFDbEIsQ0FBQyxFQUxXLGdCQUFnQixHQUFoQix3QkFBZ0IsS0FBaEIsd0JBQWdCLFFBSzNCO0FBQUEsQ0FBQztBQUVGO0lBQStDLHFDQUFPO0lBOENwRCwyQkFBc0Isd0JBQW9DO1FBQXBDLHlDQUFBLEVBQUEsNEJBQW9DO1FBQTFELFlBQ0UsaUJBQU8sU0FHUjtRQUpxQiw4QkFBd0IsR0FBeEIsd0JBQXdCLENBQVk7UUExQ25ELHlCQUFtQixHQUFZLElBQUksQ0FBQztRQVlqQyxnQkFBVSxHQUFlLEVBQUUsQ0FBQztRQWdENUIsNEJBQXNCLEdBQUcsVUFBQyxNQUFjO1lBQ3hDLElBQUEsVUFBVSxHQUFLLEtBQUksV0FBVCxDQUFVO1lBRTVCLElBQUksVUFBVSxHQUFXLENBQUMsQ0FBQztZQUMzQixJQUFJLFdBQVcsR0FBVyxDQUFDLENBQUM7WUFDNUIsTUFBTSxDQUFDLE9BQU8sQ0FBQyxVQUFBLElBQUk7Z0JBQ2pCLFdBQVcsSUFBSSxJQUFJLENBQUMsUUFBUSxDQUFDLFdBQVcsQ0FBQztnQkFDekMsVUFBVSxJQUFJLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQ3BDLENBQUMsQ0FBQyxDQUFD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QyxFQUFFLENBQUMsRUFBRSxLQUFLLEVBQUUsTUFBTSxDQUFDLENBQUM7WUFFOUQsT0FBTyxHQUFHLENBQUMsWUFBWSxDQUFDLENBQUMsRUFBRSxDQUFDLEVBQUUsS0FBSyxFQUFFLE1BQU0sQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUM7UUFDM0QsQ0FBQyxDQUFDLENBQUE7UUFFRixPQUFPLElBQUksaUJBQU8sQ0FDaEIsS0FBSyxFQUFFLE1BQU0sRUFDYixNQUFNLEVBQ04sUUFBUSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FDbkIsQ0FBQztJQUNKLENBQUM7SUE5UWEsNEJBQVUsR0FBVyxtQkFBbUIsQ0FBQztJQWtWekQsd0JBQUM7Q0FBQSxBQW5WRCxDQUErQyxpQkFBTyxHQW1WckQ7a0JBblZvQixpQkFBaUIiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIEBGaWxlICAgOiBSYXlUcmFjaW5nTWFuYWdlci50c1xuICogQEF1dGhvciA6IGR0eXNreSAoZHR5c2t5QG91dGxvb2suY29tKVxuICogQExpbmsgICA6IGR0eXNreS5tb2VcbiAqIEBEYXRlICAgOiA2LzE5LzIwMjEsIDEwOjUzOjIxIFBNXG4gKi9cbmltcG9ydCB7IG1hdDQsIHZlYzMgfSBmcm9tICdnbC1tYXRyaXgnO1xuaW1wb3J0IHsgYnVpbGRpbkVmZmVjdHMsIGJ1aWxkaW5UZXh0dXJlcyB9IGZyb20gJy4uL2J1aWxkaW4nO1xuaW1wb3J0IENvbXB1dGVVbml0IGZyb20gJy4uL2NvcmUvQ29tcHV0ZVVuaXQnO1xuaW1wb3J0IEdlb21ldHJ5IGZyb20gJy4uL2NvcmUvR2VvbWV0cnknO1xuaW1wb3J0IEhPYmplY3QgZnJvbSAnLi4vY29yZS9IT2JqZWN0JztcbmltcG9ydCBNYXRlcmlhbCBmcm9tICcuLi9jb3JlL01hdGVyaWFsJztcbmltcG9ydCBNZXNoIGZyb20gJy4uL2NvcmUvTWVzaCc7XG5pbXBvcnQgcmVuZGVyRW52IGZyb20gJy4uL2NvcmUvcmVuZGVyRW52JztcbmltcG9ydCBSZW5kZXJUZXh0dXJlIGZyb20gJy4uL2NvcmUvUmVuZGVyVGV4dHVyZSc7XG5pbXBvcnQgeyBjYWxsV2l0aFByb2ZpbGUsIFRUZXh0dXJlU291cmNlLCBUVHlwZWRBcnJheSB9IGZyb20gJy4uL2NvcmUvc2hhcmVkJztcbmltcG9ydCBUZXh0dXJlIGZyb20gJy4uL2NvcmUvVGV4dHVyZSc7XG5pbXBvcnQgQlZIIGZyb20gJy4vQlZIJztcblxuZXhwb3J0IGludGVyZmFjZSBJQlZIQXR0cmlidXRlVmFsdWU8VEFycmF5VHlwZSA9IEZsb2F0MzJBcnJheT4ge1xuICB2YWx1ZTogVEFycmF5VHlwZTtcbiAgbGVuZ3RoOiBudW1iZXI7XG4gIGZvcm1hdDogR1BVVmVydGV4Rm9ybWF0O1xufTtcblxuZXhwb3J0IGVudW0gRVBCUk1hdGVyaWFsVHlwZSB7XG4gIE1FVEFMX1JPVUdILFxuICBTUEVDX0dMT1NTLFxuICBHTEFTU19NRVRBTF9ST1VHSCxcbiAgR0xBU1NfU1BFQ19HTE9TU1xufTtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUmF5VHJhY2luZ01hbmFnZXIgZXh0ZW5kcyBIT2JqZWN0IHtcbiAgcHVibGljIHN0YXRpYyBDTEFTU19OQU1FOiBzdHJpbmcgPSAnUmF5VHJhY2luZ01hbmFnZXInO1xuICBwdWJsaWMgc3RhdGljIFJFU0laRV9DQU5WQVM6IEhUTUxDYW52YXNFbGVtZW50O1xuICBwdWJsaWMgc3RhdGljIFJFU0laRV9DVFg6IENhbnZhc1JlbmRlcmluZ0NvbnRleHQyRDtcbiAgcHVibGljIGlzUmF5VHJhY2luZ01hbmFnZXI6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHB1YmxpYyBtZXNoZXM6IE1lc2hbXTtcbiAgcHJvdGVjdGVkIF9hdHRyaWJ1dGVzSW5mbzoge1xuICAgIHBvc2l0aW9uOiBJQlZIQXR0cmlidXRlVmFsdWUsXG4gICAgdGV4Y29vcmRfMDogSUJWSEF0dHJpYnV0ZVZhbHVlLFxuICAgIG5vcm1hbDogSUJWSEF0dHJpYnV0ZVZhbHVlLFxuICAgIG1lc2hNYXRJbmRleDogSUJWSEF0dHJpYnV0ZVZhbHVlPFVpbnQzMkFycmF5PlxuICB9O1xuICBwcm90ZWN0ZWQgX2luZGV4SW5mbzoge1xuICAgIHZhbHVlOiBVaW50MzJBcnJheVxuICB9O1xuICBwcm90ZWN0ZWQgX21hdGVyaWFsczogTWF0ZXJpYWxbXSA9IFtdO1xuICBwcm90ZWN0ZWQgX2NvbW1vblVuaWZvcm1zOiB7XG4gICAgbWF0SWQyVGV4dHVyZXNJZDogSW50MzJBcnJheTtcbiAgICBiYXNlQ29sb3JGYWN0b3JzOiBGbG9hdDMyQXJyYXk7XG4gICAgbWV0YWxsaWNSb3VnaG5lc3NGYWN0b3JOb3JtYWxTY2FsZU1hdGVyaWFsVHlwZXM6IEZsb2F0MzJBcnJheTtcbiAgICBzcGVjdWxhckdsb3NzaW5lc3NGYWN0b3JzOiBGbG9hdDMyQXJyYXk7XG4gICAgYmFzZUNvbG9yVGV4dHVyZXM6IFRleHR1cmU7XG4gICAgbm9ybWFsVGV4dHVyZXM6IFRleHR1cmU7XG4gICAgbWV0YWxSb3VnaE9yU3BlY0dsb3NzVGV4dHVyZXM6IFRleHR1cmU7XG4gIH07XG4gIHByb3RlY3RlZCBfYnZoOiBCVkg7XG4gIHByb3RlY3RlZCBfZ0J1ZmZlck1lc2g6IE1lc2g7XG4gIHByb3RlY3RlZCBfcnRVbml0OiBDb21wdXRlVW5pdDtcblxuICBnZXQgZ0J1ZmZlck1lc2goKSB7XG4gICAgcmV0dXJuIHRoaXMuX2dCdWZmZXJNZXNoO1xuICB9XG5cbiAgZ2V0IHJ0VW5pdCgpIHtcbiAgICByZXR1cm4gdGhpcy5fcnRVbml0O1xuICB9XG5cbiAgZ2V0IGJ2aERlYnVnTWVzaCgpIHtcbiAgICByZXR1cm4gdGhpcy5fYnZoLmRlYnVnTWVzaDtcbiAgfVxuXG4gIGdldCBidmgoKSB7XG4gICAgcmV0dXJuIHRoaXMuX2J2aDtcbiAgfVxuXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBfbWF4UHJpbWl0aXZlc1BlckJWSExlYWY6IG51bWJlciA9IDEpIHtcbiAgICBzdXBlcigpO1xuXG4gICAgdGhpcy5fYnZoID0gbmV3IEJWSChfbWF4UHJpbWl0aXZlc1BlckJWSExlYWYpO1xuICB9XG5cbiAgLy8gYmF0Y2ggYWxsIG1lc2hlcyBhbmQgYnVpbGQgYnZoXG4gIHB1YmxpYyBwcm9jZXNzKG1lc2hlczogTWVzaFtdLCBvdXRwdXQ6IFJlbmRlclRleHR1cmUpIHtcbiAgICB0aGlzLm1lc2hlcyA9IG1lc2hlcztcbiAgICBjYWxsV2l0aFByb2ZpbGUoJ2J1aWxkIEF0dHJpYnV0ZUJ1ZmZlcnMnLCB0aGlzLl9idWlsZEF0dHJpYnV0ZUJ1ZmZlcnMsIFttZXNoZXNdKTtcbiAgICBjYWxsV2l0aFByb2ZpbGUoJ2J1aWxkIENvbW1vblVuaWZvcm1zJywgdGhpcy5fYnVpbGRDb21tb25Vbmlmb3JtcywgW3RoaXMuX21hdGVyaWFsc10pO1xuICAgIGNhbGxXaXRoUHJvZmlsZSgnYnVpbGQgR0J1ZmZlck1lc2gnLCB0aGlzLl9idWlsZEdCdWZmZXJNZXNoLCBbXSk7XG4gICAgdGhpcy5fYnZoLnByb2Nlc3ModGhpcy5fYXR0cmlidXRlc0luZm8ucG9zaXRpb24udmFsdWUgYXMgRmxvYXQzMkFycmF5LCB0aGlzLl9pbmRleEluZm8udmFsdWUpO1xuICAgIGNhbGxXaXRoUHJvZmlsZSgnYnVpbGQgUlRVbml0JywgdGhpcy5fYnVpbGRSVFVuaXQsIFtvdXRwdXRdKTtcblxuICAgIGNvbnNvbGUubG9nKGBCdWlsZCBkb25lKG1heCBwcmltaXRpdmVzIHBlciBsZWFmIGlzICR7dGhpcy5fbWF4UHJpbWl0aXZlc1BlckJWSExlYWZ9KTogbWVzaCgke21lc2hlcy5sZW5ndGh9KSwgbWF0ZXJpYWwoJHt0aGlzLl9tYXRlcmlhbHMubGVuZ3RofSksIHZlcnRleGVzKCR7dGhpcy5fYXR0cmlidXRlc0luZm8ucG9zaXRpb24udmFsdWUubGVuZ3RoIC8gM30pLCB0cmlhbmdsZXMoJHt0aGlzLl9pbmRleEluZm8udmFsdWUubGVuZ3RoIC8gM30pLCBidmhOb2Rlcygke3RoaXMuX2J2aC5ub2Rlc0NvdW50fSksIGJ2aExlYXZlcygke3RoaXMuX2J2aC5sZWF2ZXNDb3VudH0pLCBidmhEZXB0aCgke3RoaXMuX2J2aC5tYXhEZXB0aH0pYCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2J1aWxkQXR0cmlidXRlQnVmZmVycyA9IChtZXNoZXM6IE1lc2hbXSkgPT4ge1xuICAgIGNvbnN0IHsgX21hdGVyaWFscyB9ID0gdGhpcztcblxuICAgIGxldCBpbmRleENvdW50OiBudW1iZXIgPSAwO1xuICAgIGxldCB2ZXJ0ZXhDb3VudDogbnVtYmVyID0gMDtcbiAgICBtZXNoZXMuZm9yRWFjaChtZXNoID0+IHtcbiAgICAgIHZlcnRleENvdW50ICs9IG1lc2guZ2VvbWV0cnkudmVydGV4Q291bnQ7XG4gICAgICBpbmRleENvdW50ICs9IG1lc2guZ2VvbWV0cnkuY291bnQ7XG4gICAgfSk7XG5cbiAgICBjb25zdCB7IHZhbHVlOiBpbmRleGVzIH0gPSB0aGlzLl9pbmRleEluZm8gPSB7XG4gICAgICB2YWx1ZTogbmV3IFVpbnQzMkFycmF5KGluZGV4Q291bnQpXG4gICAgfTtcblxuICAgIGNvbnN0IHsgcG9zaXRpb24sIHRleGNvb3JkXzAsIG5vcm1hbCwgbWVzaE1hdEluZGV4IH0gPSB0aGlzLl9hdHRyaWJ1dGVzSW5mbyA9IHtcbiAgICAgIHBvc2l0aW9uOiB7XG4gICAgICAgIC8vIGFsaWdubWVudCBvZiB2ZWMzIGlzIDE2Ynl0ZXMhXG4gICAgICAgIHZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50ICogNCksXG4gICAgICAgIGxlbmd0aDogNCxcbiAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJ1xuICAgICAgfSxcbiAgICAgIHRleGNvb3JkXzA6IHtcbiAgICAgICAgdmFsdWU6IG5ldyBGbG9hdDMyQXJyYXkodmVydGV4Q291bnQgKiAyKSxcbiAgICAgICAgbGVuZ3RoOiAyLFxuICAgICAgICBmb3JtYXQ6ICdmbG9hdDMyeDInXG4gICAgICB9LFxuICAgICAgbm9ybWFsOiB7XG4gICAgICAgIC8vIGFsaWdubWVudCBvZiB2ZWMzIGlzIDE2Ynl0ZXMhXG4gICAgICAgIHZhbHVlOiBuZXcgRmxvYXQzMkFycmF5KHZlcnRleENvdW50ICogNCksXG4gICAgICAgIGxlbmd0aDogNCxcbiAgICAgICAgZm9ybWF0OiAnZmxvYXQzMngzJ1xuICAgICAgfSxcbiAgICAgIG1lc2hNYXRJbmRleDoge1xuICAgICAgICB2YWx1ZTogbmV3IFVpbnQzMkFycmF5KHZlcnRleENvdW50ICogMiksXG4gICAgICAgIGxlbmd0aDogMixcbiAgICAgICAgZm9ybWF0OiAndWludDMyeDInXG4gICAgICB9XG4gICAgfTtcblxuICAgIGxldCBhdHRyT2Zmc2V0OiBudW1iZXIgPSAwO1xuICAgIGxldCBpbmRleE9mZnNldDogbnVtYmVyID0gMDtcblxuICAgIGZvciAobGV0IG1lc2hJbmRleCA9IDA7IG1lc2hJbmRleCA8IG1lc2hlcy5sZW5ndGg7IG1lc2hJbmRleCArPSAxKSB7XG4gICAgICBjb25zdCBtZXNoID0gbWVzaGVzW21lc2hJbmRleF07XG4gICAgICBjb25zdCB7d29ybGRNYXR9ID0gbWVzaDtcbiAgICAgIGNvbnN0IHF1YXQgPSBtYXQ0LmdldFJvdGF0aW9uKG5ldyBGbG9hdDMyQXJyYXkoNCksIHdvcmxkTWF0KSBhcyBGbG9hdDMyQXJyYXk7XG4gICAgICBjb25zdCB7IGdlb21ldHJ5LCBtYXRlcmlhbCB9ID0gbWVzaDtcbiAgICAgIGNvbnN0IHsgaW5kZXhEYXRhLCB2ZXJ0ZXhJbmZvLCB2ZXJ0ZXhDb3VudCwgY291bnQgfSA9IGdlb21ldHJ5O1xuXG4gICAgICBpZiAobWF0ZXJpYWwuZWZmZWN0Lm5hbWUgIT09ICdyUEJSJykge1xuICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgc3VwcG9ydCBFZmZlY3QgclBCUiEnKTtcbiAgICAgIH1cblxuICAgICAgbGV0IG1hdGVyaWFsSW5kZXggPSBfbWF0ZXJpYWxzLmluZGV4T2YobWF0ZXJpYWwpO1xuICAgICAgaWYgKG1hdGVyaWFsSW5kZXggPCAwKSB7XG4gICAgICAgIF9tYXRlcmlhbHMucHVzaChtYXRlcmlhbCk7XG4gICAgICAgIG1hdGVyaWFsSW5kZXggPSBfbWF0ZXJpYWxzLmxlbmd0aCAtIDE7XG4gICAgICB9XG5cbiAgICAgIGluZGV4RGF0YS5mb3JFYWNoKCh2YWx1ZTogbnVtYmVyLCBpbmRleDogbnVtYmVyKSA9PiB7XG4gICAgICAgIGluZGV4ZXNbaW5kZXggKyBpbmRleE9mZnNldF0gPSB2YWx1ZSArIGF0dHJPZmZzZXQ7XG4gICAgICB9KTtcblxuICAgICAgaWYgKCF2ZXJ0ZXhJbmZvLm5vcm1hbCkge1xuICAgICAgICBnZW9tZXRyeS5jYWxjdWxhdGVOb3JtYWxzKCk7XG4gICAgICB9XG5cbiAgICAgIGZvciAobGV0IGluZGV4ID0gMDsgaW5kZXggPCB2ZXJ0ZXhDb3VudDsgaW5kZXggKz0gMSkge1xuICAgICAgICB0aGlzLl9jb3B5QXR0cmlidXRlKHZlcnRleEluZm8ucG9zaXRpb24sIHBvc2l0aW9uLCBhdHRyT2Zmc2V0LCBpbmRleCwgd29ybGRNYXQpO1xuICAgICAgICB0aGlzLl9jb3B5QXR0cmlidXRlKHZlcnRleEluZm8udGV4Y29vcmRfMCwgdGV4Y29vcmRfMCwgYXR0ck9mZnNldCwgaW5kZXgpO1xuICAgICAgICB0aGlzLl9jb3B5QXR0cmlidXRlKHZlcnRleEluZm8ubm9ybWFsLCBub3JtYWwsIGF0dHJPZmZzZXQsIGluZGV4LCBxdWF0LCB0cnVlKTtcblxuICAgICAgICBtZXNoTWF0SW5kZXgudmFsdWUuc2V0KFttZXNoSW5kZXgsIG1hdGVyaWFsSW5kZXhdLCAoYXR0ck9mZnNldCArIGluZGV4KSAqIG1lc2hNYXRJbmRleC5sZW5ndGgpO1xuICAgICAgfVxuXG4gICAgICBpbmRleE9mZnNldCArPSBjb3VudDtcbiAgICAgIGF0dHJPZmZzZXQgKz0gdmVydGV4Q291bnQ7XG4gICAgfVxuICB9XG5cbiAgcHJvdGVjdGVkIF9jb3B5QXR0cmlidXRlKFxuICAgIHNyYzogeyBvZmZzZXQ6IG51bWJlciwgc3RyaWRlOiBudW1iZXIsIGRhdGE6IFRUeXBlZEFycmF5LCBsZW5ndGg6IG51bWJlciB9LFxuICAgIGRzdDogSUJWSEF0dHJpYnV0ZVZhbHVlLCBhdHRyT2Zmc2V0OiBudW1iZXIsIGluZGV4OiBudW1iZXIsXG4gICAgdHJhbnNmb3JtPzogRmxvYXQzMkFycmF5LCBpc1F1YXQ/OiBib29sZWFuXG4gICkge1xuICAgIGNvbnN0IHNyY09mZnNldCA9IHNyYy5vZmZzZXQgKyBpbmRleCAqIHNyYy5zdHJpZGU7XG4gICAgbGV0IHNyY0RhdGEgPSBzcmMuZGF0YS5zbGljZShzcmNPZmZzZXQsIHNyY09mZnNldCArIHNyYy5sZW5ndGgpIGFzIEZsb2F0MzJBcnJheTtcblxuICAgIHRyYW5zZm9ybSAmJlxuICAgICAgKGlzUXVhdFxuICAgICAgICA/IHZlYzMudHJhbnNmb3JtUXVhdChzcmNEYXRhLCBzcmNEYXRhLCB0cmFuc2Zvcm0pXG4gICAgICAgIDogdmVjMy50cmFuc2Zvcm1NYXQ0KHNyY0RhdGEsIHNyY0RhdGEsIHRyYW5zZm9ybSlcbiAgICAgICk7XG5cbiAgICBkc3QudmFsdWUuc2V0KFxuICAgICAgc3JjRGF0YSxcbiAgICAgIChhdHRyT2Zmc2V0ICsgaW5kZXgpICogZHN0Lmxlbmd0aFxuICAgICk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2J1aWxkQ29tbW9uVW5pZm9ybXMgPSAobWF0ZXJpYWxzOiBNYXRlcmlhbFtdKSA9PiB7XG4gICAgY29uc3QgbWF0SWQyVGV4dHVyZXNJZCA9IG5ldyBJbnQzMkFycmF5KG1hdGVyaWFscy5sZW5ndGggKiA0KS5maWxsKC0xKTtcbiAgICBjb25zdCBiYXNlQ29sb3JGYWN0b3JzID0gbmV3IEZsb2F0MzJBcnJheShtYXRlcmlhbHMubGVuZ3RoICogNCkuZmlsbCgxKTtcbiAgICBjb25zdCBtZXRhbGxpY1JvdWdobmVzc0ZhY3Rvck5vcm1hbFNjYWxlTWF0ZXJpYWxUeXBlcyA9IG5ldyBGbG9hdDMyQXJyYXkobWF0ZXJpYWxzLmxlbmd0aCAqIDQpLmZpbGwoMSk7XG4gICAgY29uc3Qgc3BlY3VsYXJHbG9zc2luZXNzRmFjdG9ycyA9IG5ldyBGbG9hdDMyQXJyYXkobWF0ZXJpYWxzLmxlbmd0aCAqIDQpLmZpbGwoMSk7XG4gICAgY29uc3QgYmFzZUNvbG9yVGV4dHVyZXM6IFRleHR1cmVbXSA9IFtdO1xuICAgIGNvbnN0IG5vcm1hbFRleHR1cmVzOiBUZXh0dXJlW10gPSBbXTtcbiAgICBjb25zdCBtZXRhbFJvdWdoT3JTcGVjR2xvc3NUZXh0dXJlczogVGV4dHVyZVtdID0gW107XG5cbiAgICBtYXRlcmlhbHMuZm9yRWFjaCgobWF0LCBpbmRleCkgPT4ge1xuICAgICAgY29uc3QgdXNlR2xhc3MgPSBtYXQubWFyY29zWydVU0VfR0xBU1MnXTtcbiAgICAgIGNvbnN0IHVzZVNwZWNHbG9zcyA9IG1hdC5tYXJjb3NbJ1VTRV9TUEVDX0dMT1NTJ107XG4gICAgICBjb25zdCBiYXNlQ29sb3JGYWN0b3IgPSBtYXQuZ2V0VW5pZm9ybSgndV9iYXNlQ29sb3JGYWN0b3InKSBhcyBGbG9hdDMyQXJyYXk7XG4gICAgICBjb25zdCBtZXRhbGxpY0ZhY3RvciA9IG1hdC5nZXRVbmlmb3JtKCd1X21ldGFsbGljRmFjdG9yJykgYXMgRmxvYXQzMkFycmF5O1xuICAgICAgY29uc3Qgcm91Z2huZXNzRmFjdG9yID0gbWF0LmdldFVuaWZvcm0oJ3Vfcm91Z2huZXNzRmFjdG9yJykgYXMgRmxvYXQzMkFycmF5O1xuICAgICAgY29uc3Qgc3BlY3VsYXJGYWN0b3IgPSBtYXQuZ2V0VW5pZm9ybSgndV9zcGVjdWxhckZhY3RvcicpIGFzIEZsb2F0MzJBcnJheTtcbiAgICAgIGNvbnN0IGdsb3NzaW5lc3NGYWN0b3IgPSBtYXQuZ2V0VW5pZm9ybSgndV9nbG9zc2luZXNzRmFjdG9yJykgYXMgRmxvYXQzMkFycmF5O1xuICAgICAgY29uc3Qgbm9ybWFsU2NhbGUgPSBtYXQuZ2V0VW5pZm9ybSgndV9ub3JtYWxUZXh0dXJlU2NhbGUnKSBhcyBGbG9hdDMyQXJyYXk7XG4gICAgICBjb25zdCBiYXNlQ29sb3JUZXh0dXJlID0gbWF0LmdldFVuaWZvcm0oJ3VfYmFzZUNvbG9yVGV4dHVyZScpIGFzIFRleHR1cmU7XG4gICAgICBjb25zdCBub3JtYWxUZXh0dXJlID0gbWF0LmdldFVuaWZvcm0oJ3Vfbm9ybWFsVGV4dHVyZScpIGFzIFRleHR1cmU7XG4gICAgICBjb25zdCBtZXRhbGxpY1JvdWdobmVzc1RleHR1cmUgPSBtYXQuZ2V0VW5pZm9ybSgndV9tZXRhbGxpY1JvdWdobmVzc1RleHR1cmUnKSBhcyBUZXh0dXJlO1xuICAgICAgY29uc3Qgc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSA9IG1hdC5nZXRVbmlmb3JtKCd1X3NwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUnKSBhcyBUZXh0dXJlO1xuXG4gICAgICBjb25zdCBtaWQgPSBpbmRleCAqIDQ7XG4gICAgICBiYXNlQ29sb3JUZXh0dXJlICE9PSBidWlsZGluVGV4dHVyZXMuZW1wdHkgJiYgdGhpcy5fc2V0VGV4dHVyZXMobWlkLCBiYXNlQ29sb3JUZXh0dXJlcywgYmFzZUNvbG9yVGV4dHVyZSwgbWF0SWQyVGV4dHVyZXNJZCk7XG4gICAgICBub3JtYWxUZXh0dXJlICE9PSBidWlsZGluVGV4dHVyZXMuZW1wdHkgJiYgdGhpcy5fc2V0VGV4dHVyZXMobWlkICsgMSwgbm9ybWFsVGV4dHVyZXMsIG5vcm1hbFRleHR1cmUsIG1hdElkMlRleHR1cmVzSWQpO1xuICAgICAgYmFzZUNvbG9yRmFjdG9yICYmIGJhc2VDb2xvckZhY3RvcnMuc2V0KGJhc2VDb2xvckZhY3RvciwgaW5kZXggKiA0KTtcbiAgICAgIG5vcm1hbFNjYWxlICE9PSB1bmRlZmluZWQgJiYgbWV0YWxsaWNSb3VnaG5lc3NGYWN0b3JOb3JtYWxTY2FsZU1hdGVyaWFsVHlwZXMuc2V0KG5vcm1hbFNjYWxlLnNsaWNlKDAsIDEpLCBpbmRleCAqIDQgKyAyKTtcblxuICAgICAgaWYgKHVzZVNwZWNHbG9zcykge1xuICAgICAgICBzcGVjdWxhckZhY3RvciAhPT0gdW5kZWZpbmVkICYmIHNwZWN1bGFyR2xvc3NpbmVzc0ZhY3RvcnMuc2V0KHNwZWN1bGFyRmFjdG9yLnNsaWNlKDAsIDMpLCBpbmRleCAqIDQpO1xuICAgICAgICBnbG9zc2luZXNzRmFjdG9yICE9PSB1bmRlZmluZWQgJiYgc3BlY3VsYXJHbG9zc2luZXNzRmFjdG9ycy5zZXQoZ2xvc3NpbmVzc0ZhY3Rvci5zbGljZSgwLCAxKSwgaW5kZXggKiA0ICsgMyk7XG4gICAgICAgIHNwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUgIT09IGJ1aWxkaW5UZXh0dXJlcy5lbXB0eSAmJiB0aGlzLl9zZXRUZXh0dXJlcyhtaWQgKyAyLCBtZXRhbFJvdWdoT3JTcGVjR2xvc3NUZXh0dXJlcywgc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSwgbWF0SWQyVGV4dHVyZXNJZCk7XG4gICAgICAgIG1ldGFsbGljUm91Z2huZXNzRmFjdG9yTm9ybWFsU2NhbGVNYXRlcmlhbFR5cGVzLnNldChbdXNlR2xhc3MgPyBFUEJSTWF0ZXJpYWxUeXBlLkdMQVNTX1NQRUNfR0xPU1MgOiBFUEJSTWF0ZXJpYWxUeXBlLlNQRUNfR0xPU1NdLCBpbmRleCAqIDQgKyAzKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG1ldGFsbGljRmFjdG9yICE9PSB1bmRlZmluZWQgJiYgbWV0YWxsaWNSb3VnaG5lc3NGYWN0b3JOb3JtYWxTY2FsZU1hdGVyaWFsVHlwZXMuc2V0KG1ldGFsbGljRmFjdG9yLnNsaWNlKDAsIDEpLCBpbmRleCAqIDQpO1xuICAgICAgICByb3VnaG5lc3NGYWN0b3IgIT09IHVuZGVmaW5lZCAmJiBtZXRhbGxpY1JvdWdobmVzc0ZhY3Rvck5vcm1hbFNjYWxlTWF0ZXJpYWxUeXBlcy5zZXQocm91Z2huZXNzRmFjdG9yLnNsaWNlKDAsIDEpLCBpbmRleCAqIDQgKyAxKTtcbiAgICAgICAgbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlICE9PSBidWlsZGluVGV4dHVyZXMuZW1wdHkgJiYgdGhpcy5fc2V0VGV4dHVyZXMobWlkICsgMiwgbWV0YWxSb3VnaE9yU3BlY0dsb3NzVGV4dHVyZXMsIG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSwgbWF0SWQyVGV4dHVyZXNJZCk7XG4gICAgICAgIG1ldGFsbGljUm91Z2huZXNzRmFjdG9yTm9ybWFsU2NhbGVNYXRlcmlhbFR5cGVzLnNldChbdXNlR2xhc3MgPyBFUEJSTWF0ZXJpYWxUeXBlLkdMQVNTX01FVEFMX1JPVUdIIDogRVBCUk1hdGVyaWFsVHlwZS5NRVRBTF9ST1VHSF0sIGluZGV4ICogNCArIDMpO1xuICAgICAgfVxuICAgIH0pO1xuXG4gICAgdGhpcy5fY29tbW9uVW5pZm9ybXMgPSB7XG4gICAgICBtYXRJZDJUZXh0dXJlc0lkLFxuICAgICAgYmFzZUNvbG9yRmFjdG9ycyxcbiAgICAgIG1ldGFsbGljUm91Z2huZXNzRmFjdG9yTm9ybWFsU2NhbGVNYXRlcmlhbFR5cGVzLFxuICAgICAgc3BlY3VsYXJHbG9zc2luZXNzRmFjdG9ycyxcbiAgICAgIGJhc2VDb2xvclRleHR1cmVzOiB0aGlzLl9nZW5lcmF0ZVRleHR1cmVBcnJheShiYXNlQ29sb3JUZXh0dXJlcyksXG4gICAgICBub3JtYWxUZXh0dXJlczogdGhpcy5fZ2VuZXJhdGVUZXh0dXJlQXJyYXkobm9ybWFsVGV4dHVyZXMpLFxuICAgICAgbWV0YWxSb3VnaE9yU3BlY0dsb3NzVGV4dHVyZXM6IHRoaXMuX2dlbmVyYXRlVGV4dHVyZUFycmF5KG1ldGFsUm91Z2hPclNwZWNHbG9zc1RleHR1cmVzKVxuICAgIH07XG4gIH1cblxuICBwcm90ZWN0ZWQgX3NldFRleHR1cmVzKFxuICAgIG9mZnNldDogbnVtYmVyLCB0ZXh0dXJlczogVGV4dHVyZVtdLCB0ZXh0dXJlOiBUZXh0dXJlLFxuICAgIG1hdElkMlRleHR1cmVzSWQ6IEludDMyQXJyYXlcbiAgKSB7XG4gICAgaWYgKHRleHR1cmUpIHtcbiAgICAgIGxldCBpZHggPSB0ZXh0dXJlcy5pbmRleE9mKHRleHR1cmUpO1xuICAgICAgaWYgKGlkeCA8IDApIHtcbiAgICAgICAgdGV4dHVyZXMucHVzaCh0ZXh0dXJlKTtcbiAgICAgICAgaWR4ID0gdGV4dHVyZXMubGVuZ3RoIC0gMTtcbiAgICAgIH1cbiAgICAgIG1hdElkMlRleHR1cmVzSWRbb2Zmc2V0XSA9IGlkeDtcbiAgICB9XG4gIH1cblxuICBwcm90ZWN0ZWQgX2dlbmVyYXRlVGV4dHVyZUFycmF5KHRleHR1cmVzOiBUZXh0dXJlW10pOiBUZXh0dXJlIHtcbiAgICBpZiAoIXRleHR1cmVzLmxlbmd0aCkge1xuICAgICAgcmV0dXJuIGJ1aWxkaW5UZXh0dXJlcy5hcnJheTF3aGl0ZTtcbiAgICB9XG5cbiAgICBsZXQgd2lkdGg6IG51bWJlciA9IDA7XG4gICAgbGV0IGhlaWdodDogbnVtYmVyID0gMDtcblxuICAgIHRleHR1cmVzLmZvckVhY2godGV4ID0+IHtcbiAgICAgIHdpZHRoID0gTWF0aC5tYXgod2lkdGgsIHRleC53aWR0aCk7XG4gICAgICBoZWlnaHQgPSBNYXRoLm1heChoZWlnaHQsIHRleC5oZWlnaHQpO1xuICAgIH0pO1xuXG4gICAgY29uc3QgaW1hZ2VzID0gdGV4dHVyZXMubWFwKHRleCA9PiB7XG4gICAgICBpZiAodGV4LndpZHRoID09PSB3aWR0aCAmJiB0ZXguaGVpZ2h0ID09PSBoZWlnaHQpIHtcbiAgICAgICAgcmV0dXJuIHRleC5zb3VyY2UgYXMgVFRleHR1cmVTb3VyY2U7XG4gICAgICB9XG5cbiAgICAgIGlmICghKHRleC5zb3VyY2UgaW5zdGFuY2VvZiBJbWFnZUJpdG1hcCkpIHtcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdDYW4gb25seSByZXNpemUgaW1hZ2UgYml0bWFwIScpO1xuICAgICAgfVxuXG4gICAgICBpZiAoIVJheVRyYWNpbmdNYW5hZ2VyLlJFU0laRV9DQU5WQVMpIHtcbiAgICAgICAgUmF5VHJhY2luZ01hbmFnZXIuUkVTSVpFX0NBTlZBUyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2NhbnZhcycpO1xuICAgICAgICBSYXlUcmFjaW5nTWFuYWdlci5SRVNJWkVfQ0FOVkFTLndpZHRoID0gMjA0ODtcbiAgICAgICAgUmF5VHJhY2luZ01hbmFnZXIuUkVTSVpFX0NBTlZBUy5oZWlnaHQgPSAyMDQ4O1xuICAgICAgICBSYXlUcmFjaW5nTWFuYWdlci5SRVNJWkVfQ1RYID0gUmF5VHJhY2luZ01hbmFnZXIuUkVTSVpFX0NBTlZBUy5nZXRDb250ZXh0KCcyZCcpO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBjdHggPSBSYXlUcmFjaW5nTWFuYWdlci5SRVNJWkVfQ1RYO1xuICAgICAgY3R4LmRyYXdJbWFnZSh0ZXguc291cmNlIGFzIEltYWdlQml0bWFwLCAwLCAwLCB3aWR0aCwgaGVpZ2h0KTtcblxuICAgICAgcmV0dXJuIGN0eC5nZXRJbWFnZURhdGEoMCwgMCwgd2lkdGgsIGhlaWdodCkuZGF0YS5idWZmZXI7XG4gICAgfSlcblxuICAgIHJldHVybiBuZXcgVGV4dHVyZShcbiAgICAgIHdpZHRoLCBoZWlnaHQsXG4gICAgICBpbWFnZXMsXG4gICAgICB0ZXh0dXJlc1swXS5mb3JtYXRcbiAgICApO1xuICB9XG5cbiAgcHJvdGVjdGVkIF9idWlsZEdCdWZmZXJNZXNoID0gKCkgPT4ge1xuICAgIGNvbnN0IHsgX2F0dHJpYnV0ZXNJbmZvLCBfaW5kZXhJbmZvLCBfY29tbW9uVW5pZm9ybXMgfSA9IHRoaXM7XG5cbiAgICBjb25zdCBnZW9tZXRyeSA9IG5ldyBHZW9tZXRyeShcbiAgICAgIE9iamVjdC5rZXlzKF9hdHRyaWJ1dGVzSW5mbykubWFwKChuYW1lLCBpbmRleCkgPT4ge1xuICAgICAgICBjb25zdCB7IHZhbHVlLCBsZW5ndGgsIGZvcm1hdCB9ID0gKF9hdHRyaWJ1dGVzSW5mb1tuYW1lXSBhcyBhbnkpIGFzIElCVkhBdHRyaWJ1dGVWYWx1ZTtcblxuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgIGxheW91dDoge1xuICAgICAgICAgICAgYXJyYXlTdHJpZGU6IGxlbmd0aCAqIDQsXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBbe1xuICAgICAgICAgICAgICBuYW1lLCBvZmZzZXQ6IDAsIGZvcm1hdCwgc2hhZGVyTG9jYXRpb246IGluZGV4XG4gICAgICAgICAgICB9XVxuICAgICAgICAgIH0sXG4gICAgICAgICAgZGF0YTogdmFsdWUsXG4gICAgICAgICAgdXNhZ2U6IEdQVUJ1ZmZlclVzYWdlLlNUT1JBR0VcbiAgICAgICAgfVxuICAgICAgfSksXG4gICAgICBfaW5kZXhJbmZvLnZhbHVlLFxuICAgICAgX2luZGV4SW5mby52YWx1ZS5sZW5ndGhcbiAgICApO1xuXG4gICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoYnVpbGRpbkVmZmVjdHMuclJUR0J1ZmZlciwge1xuICAgICAgdV9tYXRJZDJUZXh0dXJlc0lkOiBfY29tbW9uVW5pZm9ybXMubWF0SWQyVGV4dHVyZXNJZCxcbiAgICAgIHVfYmFzZUNvbG9yRmFjdG9yczogX2NvbW1vblVuaWZvcm1zLmJhc2VDb2xvckZhY3RvcnMsXG4gICAgICB1X21ldGFsbGljUm91Z2huZXNzRmFjdG9yTm9ybWFsU2NhbGVNYXRlcmlhbFR5cGVzOiBfY29tbW9uVW5pZm9ybXMubWV0YWxsaWNSb3VnaG5lc3NGYWN0b3JOb3JtYWxTY2FsZU1hdGVyaWFsVHlwZXMsXG4gICAgICB1X3NwZWN1bGFyR2xvc3NpbmVzc0ZhY3RvcnM6IF9jb21tb25Vbmlmb3Jtcy5zcGVjdWxhckdsb3NzaW5lc3NGYWN0b3JzLFxuICAgICAgdV9iYXNlQ29sb3JUZXh0dXJlczogX2NvbW1vblVuaWZvcm1zLmJhc2VDb2xvclRleHR1cmVzLFxuICAgICAgdV9ub3JtYWxUZXh0dXJlczogX2NvbW1vblVuaWZvcm1zLm5vcm1hbFRleHR1cmVzLFxuICAgICAgdV9tZXRhbFJvdWdoT3JTcGVjR2xvc3NUZXh0dXJlczogX2NvbW1vblVuaWZvcm1zLm1ldGFsUm91Z2hPclNwZWNHbG9zc1RleHR1cmVzXG4gICAgfSk7XG5cbiAgICB0aGlzLl9nQnVmZmVyTWVzaCA9IG5ldyBNZXNoKGdlb21ldHJ5LCBtYXRlcmlhbCk7XG4gIH1cblxuICBwcm90ZWN0ZWQgX2J1aWxkUlRVbml0ID0gKG91dHB1dDogUmVuZGVyVGV4dHVyZSkgPT4ge1xuICAgIGNvbnN0IHsgX2dCdWZmZXJNZXNoLCBfY29tbW9uVW5pZm9ybXMsIF9idmggfSA9IHRoaXM7XG4gICAgY29uc3QgeyBnZW9tZXRyeSB9ID0gX2dCdWZmZXJNZXNoO1xuXG4gICAgdGhpcy5fcnRVbml0ID0gbmV3IENvbXB1dGVVbml0KFxuICAgICAgYnVpbGRpbkVmZmVjdHMuY1JUU1MsXG4gICAgICB7IHg6IE1hdGguY2VpbChyZW5kZXJFbnYud2lkdGggLyAxNiksIHk6IE1hdGguY2VpbChyZW5kZXJFbnYuaGVpZ2h0IC8gMTYpIH0sXG4gICAgICB7XG4gICAgICAgIHVfb3V0cHV0OiBvdXRwdXQsXG4gICAgICAgIHVfbWF0SWQyVGV4dHVyZXNJZDogX2NvbW1vblVuaWZvcm1zLm1hdElkMlRleHR1cmVzSWQsXG4gICAgICAgIHVfYmFzZUNvbG9yRmFjdG9yczogX2NvbW1vblVuaWZvcm1zLmJhc2VDb2xvckZhY3RvcnMsXG4gICAgICAgIHVfbWV0YWxsaWNSb3VnaG5lc3NGYWN0b3JOb3JtYWxTY2FsZU1hdGVyaWFsVHlwZXM6IF9jb21tb25Vbmlmb3Jtcy5tZXRhbGxpY1JvdWdobmVzc0ZhY3Rvck5vcm1hbFNjYWxlTWF0ZXJpYWxUeXBlcyxcbiAgICAgICAgdV9zcGVjdWxhckdsb3NzaW5lc3NGYWN0b3JzOiBfY29tbW9uVW5pZm9ybXMuc3BlY3VsYXJHbG9zc2luZXNzRmFjdG9ycyxcbiAgICAgICAgdV9iYXNlQ29sb3JUZXh0dXJlczogX2NvbW1vblVuaWZvcm1zLmJhc2VDb2xvclRleHR1cmVzLFxuICAgICAgICB1X25vcm1hbFRleHR1cmVzOiBfY29tbW9uVW5pZm9ybXMubm9ybWFsVGV4dHVyZXMsXG4gICAgICAgIHVfbWV0YWxSb3VnaE9yU3BlY0dsb3NzVGV4dHVyZXM6IF9jb21tb25Vbmlmb3Jtcy5tZXRhbFJvdWdoT3JTcGVjR2xvc3NUZXh0dXJlcyxcbiAgICAgICAgdV9idmg6IF9idmguYnVmZmVyLFxuICAgICAgfSxcbiAgICAgIHtCVkhfREVQVEg6IHRoaXMuX2J2aC5tYXhEZXB0aH1cbiAgICApO1xuXG4gICAgbGV0IHZhbHVlcyA9IGdlb21ldHJ5LmdldFZhbHVlcygncG9zaXRpb24nKTtcbiAgICB0aGlzLl9ydFVuaXQuc2V0VW5pZm9ybSgndV9wb3NpdGlvbnMnLCB2YWx1ZXMuY3B1IGFzIEZsb2F0MzJBcnJheSwgdmFsdWVzLmdwdSk7XG4gICAgdmFsdWVzID0gZ2VvbWV0cnkuZ2V0VmFsdWVzKCd0ZXhjb29yZF8wJyk7XG4gICAgdGhpcy5fcnRVbml0LnNldFVuaWZvcm0oJ3VfdXZzJywgdmFsdWVzLmNwdSBhcyBGbG9hdDMyQXJyYXksIHZhbHVlcy5ncHUpO1xuICAgIHZhbHVlcyA9IGdlb21ldHJ5LmdldFZhbHVlcygnbm9ybWFsJyk7XG4gICAgdGhpcy5fcnRVbml0LnNldFVuaWZvcm0oJ3Vfbm9ybWFscycsIHZhbHVlcy5jcHUgYXMgRmxvYXQzMkFycmF5LCB2YWx1ZXMuZ3B1KTtcbiAgICB2YWx1ZXMgPSBnZW9tZXRyeS5nZXRWYWx1ZXMoJ21lc2htYXRpbmRleCcpO1xuICAgIHRoaXMuX3J0VW5pdC5zZXRVbmlmb3JtKCd1X21lc2hNYXRJbmRleGVzJywgdmFsdWVzLmNwdSBhcyBVaW50MzJBcnJheSwgdmFsdWVzLmdwdSk7XG4gICAgY29uc29sZS5sb2codGhpcy5fbWF0ZXJpYWxzKVxuICB9XG59XG4iXX0=","\"use strict\";\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    Object.defineProperty(o, k2, { enumerable: true, get: function() { return m[k]; } });\n}) : (function(o, m, k, k2) {\n    if (k2 === undefined) k2 = k;\n    o[k2] = m[k];\n}));\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\n    for (var p in m) if (p !== \"default\" && !exports.hasOwnProperty(p)) __createBinding(exports, m, p);\n};\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.math = exports.init = void 0;\nvar renderEnv_1 = require(\"./core/renderEnv\");\nvar gl_matrix_1 = require(\"gl-matrix\");\nvar Scene_1 = require(\"./core/Scene\");\nObject.defineProperty(exports, \"Scene\", { enumerable: true, get: function () { return Scene_1.default; } });\nvar Node_1 = require(\"./core/Node\");\nObject.defineProperty(exports, \"Node\", { enumerable: true, get: function () { return Node_1.default; } });\nvar Camera_1 = require(\"./core/Camera\");\nObject.defineProperty(exports, \"Camera\", { enumerable: true, get: function () { return Camera_1.default; } });\nvar Light_1 = require(\"./core/Light\");\nObject.defineProperty(exports, \"Light\", { enumerable: true, get: function () { return Light_1.default; } });\nObject.defineProperty(exports, \"EAreaLightMode\", { enumerable: true, get: function () { return Light_1.EAreaLightMode; } });\nObject.defineProperty(exports, \"ELightType\", { enumerable: true, get: function () { return Light_1.ELightType; } });\nvar Geometry_1 = require(\"./core/Geometry\");\nObject.defineProperty(exports, \"Geometry\", { enumerable: true, get: function () { return Geometry_1.default; } });\nvar UBTemplate_1 = require(\"./core/UBTemplate\");\nObject.defineProperty(exports, \"UBTemplate\", { enumerable: true, get: function () { return UBTemplate_1.default; } });\nvar Effect_1 = require(\"./core/Effect\");\nObject.defineProperty(exports, \"Effect\", { enumerable: true, get: function () { return Effect_1.default; } });\nvar Material_1 = require(\"./core/Material\");\nObject.defineProperty(exports, \"Material\", { enumerable: true, get: function () { return Material_1.default; } });\nvar Mesh_1 = require(\"./core/Mesh\");\nObject.defineProperty(exports, \"Mesh\", { enumerable: true, get: function () { return Mesh_1.default; } });\nvar ImageMesh_1 = require(\"./core/ImageMesh\");\nObject.defineProperty(exports, \"ImageMesh\", { enumerable: true, get: function () { return ImageMesh_1.default; } });\nvar ComputeUnit_1 = require(\"./core/ComputeUnit\");\nObject.defineProperty(exports, \"ComputeUnit\", { enumerable: true, get: function () { return ComputeUnit_1.default; } });\nvar RenderTexture_1 = require(\"./core/RenderTexture\");\nObject.defineProperty(exports, \"RenderTexture\", { enumerable: true, get: function () { return RenderTexture_1.default; } });\nvar Texture_1 = require(\"./core/Texture\");\nObject.defineProperty(exports, \"Texture\", { enumerable: true, get: function () { return Texture_1.default; } });\nvar CubeTexture_1 = require(\"./core/CubeTexture\");\nObject.defineProperty(exports, \"CubeTexture\", { enumerable: true, get: function () { return CubeTexture_1.default; } });\nvar renderEnv_2 = require(\"./core/renderEnv\");\nObject.defineProperty(exports, \"renderEnv\", { enumerable: true, get: function () { return renderEnv_2.default; } });\nvar RayTracingManager_1 = require(\"./extension/RayTracingManager\");\nObject.defineProperty(exports, \"RayTracingManager\", { enumerable: true, get: function () { return RayTracingManager_1.default; } });\nvar BVH_1 = require(\"./extension/BVH\");\nObject.defineProperty(exports, \"BVH\", { enumerable: true, get: function () { return BVH_1.default; } });\nvar NodeControl_1 = require(\"./extension/NodeControl\");\nObject.defineProperty(exports, \"NodeControl\", { enumerable: true, get: function () { return NodeControl_1.default; } });\nvar resource_1 = require(\"./resource\");\nObject.defineProperty(exports, \"resource\", { enumerable: true, get: function () { return resource_1.default; } });\nObject.defineProperty(exports, \"Resource\", { enumerable: true, get: function () { return resource_1.Resource; } });\nvar TextureLoader_1 = require(\"./resource/TextureLoader\");\nObject.defineProperty(exports, \"TextureLoader\", { enumerable: true, get: function () { return TextureLoader_1.default; } });\nvar GlTFLoader_1 = require(\"./resource/GlTFLoader\");\nObject.defineProperty(exports, \"GlTFLoader\", { enumerable: true, get: function () { return GlTFLoader_1.default; } });\nvar buildin_1 = require(\"./buildin\");\n__exportStar(require(\"./buildin\"), exports);\nvar shared_1 = require(\"./core/shared\");\nObject.defineProperty(exports, \"createGPUBuffer\", { enumerable: true, get: function () { return shared_1.createGPUBuffer; } });\nObject.defineProperty(exports, \"createGPUBufferBySize\", { enumerable: true, get: function () { return shared_1.createGPUBufferBySize; } });\nfunction init(canvas) {\n    return __awaiter(this, void 0, void 0, function () {\n        return __generator(this, function (_a) {\n            switch (_a.label) {\n                case 0: return [4, renderEnv_1.default.init(canvas)];\n                case 1:\n                    _a.sent();\n                    return [4, buildin_1.init()];\n                case 2:\n                    _a.sent();\n                    return [4, renderEnv_1.default.createGlobal(buildin_1.buildinUBTemplates.global)];\n                case 3:\n                    _a.sent();\n                    return [2];\n            }\n        });\n    });\n}\nexports.init = init;\nexports.math = {\n    vec2: gl_matrix_1.vec2, vec3: gl_matrix_1.vec3, vec4: gl_matrix_1.vec4,\n    quat: gl_matrix_1.quat, quat2: gl_matrix_1.quat2,\n    mat2: gl_matrix_1.mat2, mat3: gl_matrix_1.mat3, mat4: gl_matrix_1.mat4\n};\nwindow['H'] = this;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUEsOENBQXlDO0FBQ3pDLHVDQUEwRTtBQUcxRSxzQ0FBOEM7QUFBdEMsOEZBQUEsT0FBTyxPQUFTO0FBQ3hCLG9DQUE0QztBQUFwQyw0RkFBQSxPQUFPLE9BQVE7QUFDdkIsd0NBQWdEO0FBQXhDLGdHQUFBLE9BQU8sT0FBVTtBQUN6QixzQ0FBdUg7QUFBL0csOEZBQUEsT0FBTyxPQUFTO0FBQStDLHVHQUFBLGNBQWMsT0FBQTtBQUFFLG1HQUFBLFVBQVUsT0FBQTtBQUNqRyw0Q0FBb0Q7QUFBNUMsb0dBQUEsT0FBTyxPQUFZO0FBQzNCLGdEQUEyRztBQUFuRyx3R0FBQSxPQUFPLE9BQWM7QUFDN0Isd0NBQWdFO0FBQXhELGdHQUFBLE9BQU8sT0FBVTtBQUN6Qiw0Q0FBb0Q7QUFBNUMsb0dBQUEsT0FBTyxPQUFZO0FBQzNCLG9DQUE0QztBQUFwQyw0RkFBQSxPQUFPLE9BQVE7QUFDdkIsOENBQXNEO0FBQTlDLHNHQUFBLE9BQU8sT0FBYTtBQUM1QixrREFBMEQ7QUFBbEQsMEdBQUEsT0FBTyxPQUFlO0FBQzlCLHNEQUE4RDtBQUF0RCw4R0FBQSxPQUFPLE9BQWlCO0FBQ2hDLDBDQUFrRDtBQUExQyxrR0FBQSxPQUFPLE9BQVc7QUFDMUIsa0RBQTBEO0FBQWxELDBHQUFBLE9BQU8sT0FBZTtBQUM5Qiw4Q0FBc0Q7QUFBOUMsc0dBQUEsT0FBTyxPQUFhO0FBQzVCLG1FQUEyRTtBQUFuRSxzSEFBQSxPQUFPLE9BQXFCO0FBQ3BDLHVDQUErQztBQUF2QywwRkFBQSxPQUFPLE9BQU87QUFDdEIsdURBQStEO0FBQXZELDBHQUFBLE9BQU8sT0FBZTtBQUU5Qix1Q0FBeUQ7QUFBakQsb0dBQUEsT0FBTyxPQUFZO0FBQUUsb0dBQUEsUUFBUSxPQUFBO0FBQ3JDLDBEQUF5RjtBQUFqRiw4R0FBQSxPQUFPLE9BQWlCO0FBQ2hDLG9EQUErRjtBQUF2Rix3R0FBQSxPQUFPLE9BQWM7QUFFN0IscUNBQWtFO0FBQ2xFLDRDQUEwQjtBQUUxQix3Q0FBcUU7QUFBN0QseUdBQUEsZUFBZSxPQUFBO0FBQUUsK0dBQUEscUJBQXFCLE9BQUE7QUFFOUMsU0FBc0IsSUFBSSxDQUFDLE1BQXlCOzs7O3dCQUNsRCxXQUFNLG1CQUFTLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxFQUFBOztvQkFBNUIsU0FBNEIsQ0FBQztvQkFDN0IsV0FBTSxjQUFXLEVBQUUsRUFBQTs7b0JBQW5CLFNBQW1CLENBQUM7b0JBQ3BCLFdBQU0sbUJBQVMsQ0FBQyxZQUFZLENBQUMsNEJBQWtCLENBQUMsTUFBTSxDQUFDLEVBQUE7O29CQUF2RCxTQUF1RCxDQUFDOzs7OztDQUN6RDtBQUpELG9CQUlDO0FBRVksUUFBQSxJQUFJLEdBQUc7SUFDbEIsSUFBSSxrQkFBQSxFQUFFLElBQUksa0JBQUEsRUFBRSxJQUFJLGtCQUFBO0lBQ2hCLElBQUksa0JBQUEsRUFBRSxLQUFLLG1CQUFBO0lBQ1gsSUFBSSxrQkFBQSxFQUFFLElBQUksa0JBQUEsRUFBRSxJQUFJLGtCQUFBO0NBQ2pCLENBQUE7QUFHRCxNQUFNLENBQUMsR0FBRyxDQUFDLEdBQUcsSUFBSSxDQUFDIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBARmlsZSAgIDogaW5kZXgudHNcbiAqIEBBdXRob3IgOiBkdHlza3kgKGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBMaW5rICAgOiBkdHlza3kubW9lXG4gKiBARGF0ZSAgIDogMjAyMS82LzXkuIvljYgyOjQ0OjA2XG4gKi9cbmltcG9ydCByZW5kZXJFbnYgZnJvbSAnLi9jb3JlL3JlbmRlckVudic7XG5pbXBvcnQge3ZlYzIsIHZlYzMsIHZlYzQsIHF1YXQsIHF1YXQyLCBtYXQyLCBtYXQzLCBtYXQ0fSBmcm9tICdnbC1tYXRyaXgnO1xuXG5leHBvcnQge1RUeXBlZEFycmF5fSBmcm9tICcuL2NvcmUvc2hhcmVkJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBTY2VuZX0gZnJvbSAnLi9jb3JlL1NjZW5lJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBOb2RlfSBmcm9tICcuL2NvcmUvTm9kZSc7XG5leHBvcnQge2RlZmF1bHQgYXMgQ2FtZXJhfSBmcm9tICcuL2NvcmUvQ2FtZXJhJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBMaWdodCwgSUFyZWFMaWdodE9wdGlvbnMsIElEaXJlY3Rpb25hbExpZ2h0T3B0aW9ucywgRUFyZWFMaWdodE1vZGUsIEVMaWdodFR5cGV9IGZyb20gJy4vY29yZS9MaWdodCc7XG5leHBvcnQge2RlZmF1bHQgYXMgR2VvbWV0cnl9IGZyb20gJy4vY29yZS9HZW9tZXRyeSc7XG5leHBvcnQge2RlZmF1bHQgYXMgVUJUZW1wbGF0ZSwgSVVuaWZvcm1CbG9jaywgSVVuaWZvcm1zRGVzY3JpcHRvciwgVFVuaWZvcm1WYWx1ZX0gZnJvbSAnLi9jb3JlL1VCVGVtcGxhdGUnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIEVmZmVjdCwgVEVmZmVjdE9wdGlvbnN9IGZyb20gJy4vY29yZS9FZmZlY3QnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIE1hdGVyaWFsfSBmcm9tICcuL2NvcmUvTWF0ZXJpYWwnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIE1lc2h9IGZyb20gJy4vY29yZS9NZXNoJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBJbWFnZU1lc2h9IGZyb20gJy4vY29yZS9JbWFnZU1lc2gnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIENvbXB1dGVVbml0fSBmcm9tICcuL2NvcmUvQ29tcHV0ZVVuaXQnO1xuZXhwb3J0IHtkZWZhdWx0IGFzIFJlbmRlclRleHR1cmV9IGZyb20gJy4vY29yZS9SZW5kZXJUZXh0dXJlJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBUZXh0dXJlfSBmcm9tICcuL2NvcmUvVGV4dHVyZSc7XG5leHBvcnQge2RlZmF1bHQgYXMgQ3ViZVRleHR1cmV9IGZyb20gJy4vY29yZS9DdWJlVGV4dHVyZSc7XG5leHBvcnQge2RlZmF1bHQgYXMgcmVuZGVyRW52fSBmcm9tICcuL2NvcmUvcmVuZGVyRW52JztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBSYXlUcmFjaW5nTWFuYWdlcn0gZnJvbSAnLi9leHRlbnNpb24vUmF5VHJhY2luZ01hbmFnZXInO1xuZXhwb3J0IHtkZWZhdWx0IGFzIEJWSH0gZnJvbSAnLi9leHRlbnNpb24vQlZIJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBOb2RlQ29udHJvbH0gZnJvbSAnLi9leHRlbnNpb24vTm9kZUNvbnRyb2wnO1xuXG5leHBvcnQge2RlZmF1bHQgYXMgcmVzb3VyY2UsIFJlc291cmNlfSBmcm9tICcuL3Jlc291cmNlJztcbmV4cG9ydCB7ZGVmYXVsdCBhcyBUZXh0dXJlTG9hZGVyLCBJVGV4dHVyZUxvYWRlck9wdGlvbnN9IGZyb20gJy4vcmVzb3VyY2UvVGV4dHVyZUxvYWRlcic7XG5leHBvcnQge2RlZmF1bHQgYXMgR2xURkxvYWRlciwgSUdsVEZSZXNvdXJjZSwgSUdsVEZMb2FkZXJPcHRpb25zfSBmcm9tICcuL3Jlc291cmNlL0dsVEZMb2FkZXInO1xuXG5pbXBvcnQge2J1aWxkaW5VQlRlbXBsYXRlcywgaW5pdCBhcyBpbml0QnVpbGRpbn0gZnJvbSAnLi9idWlsZGluJztcbmV4cG9ydCAqIGZyb20gJy4vYnVpbGRpbic7XG5cbmV4cG9ydCB7Y3JlYXRlR1BVQnVmZmVyLCBjcmVhdGVHUFVCdWZmZXJCeVNpemV9IGZyb20gJy4vY29yZS9zaGFyZWQnO1xuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gaW5pdChjYW52YXM6IEhUTUxDYW52YXNFbGVtZW50KSB7XG4gIGF3YWl0IHJlbmRlckVudi5pbml0KGNhbnZhcyk7XG4gIGF3YWl0IGluaXRCdWlsZGluKCk7XG4gIGF3YWl0IHJlbmRlckVudi5jcmVhdGVHbG9iYWwoYnVpbGRpblVCVGVtcGxhdGVzLmdsb2JhbCk7XG59XG5cbmV4cG9ydCBjb25zdCBtYXRoID0ge1xuICB2ZWMyLCB2ZWMzLCB2ZWM0LFxuICBxdWF0LCBxdWF0MixcbiAgbWF0MiwgbWF0MywgbWF0NFxufVxuXG4vL0B0cy1pZ25vcmVcbndpbmRvd1snSCddID0gdGhpcztcbiJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar buildin_1 = require(\"../buildin\");\nvar Node_1 = require(\"../core/Node\");\nvar Camera_1 = require(\"../core/Camera\");\nvar Geometry_1 = require(\"../core/Geometry\");\nvar Material_1 = require(\"../core/Material\");\nvar Mesh_1 = require(\"../core/Mesh\");\nvar Texture_1 = require(\"../core/Texture\");\nvar Loader_1 = require(\"./Loader\");\nvar Light_1 = require(\"../core/Light\");\nvar CubeTexture_1 = require(\"../core/CubeTexture\");\nvar GlTFLoader = (function (_super) {\n    __extends(GlTFLoader, _super);\n    function GlTFLoader() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isGlTFLoader = true;\n        _this._buffers = [];\n        return _this;\n    }\n    GlTFLoader.prototype.load = function (src, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var tmp, _a;\n            return __generator(this, function (_b) {\n                switch (_b.label) {\n                    case 0:\n                        tmp = src.split('/');\n                        tmp.pop();\n                        this._baseUri = tmp.join('/');\n                        _a = this;\n                        return [4, this.request(src, 'json')];\n                    case 1:\n                        _a._json = _b.sent();\n                        return [4, this._loadBuffers()];\n                    case 2:\n                        _b.sent();\n                        this._res = {\n                            rootNode: new Node_1.default(),\n                            nodes: [],\n                            meshes: [],\n                            images: [],\n                            textures: [],\n                            cubeTextures: [],\n                            materials: [],\n                            cameras: [],\n                            lights: []\n                        };\n                        return [4, this._loadImages()];\n                    case 3:\n                        _b.sent();\n                        return [4, this._loadTextures()];\n                    case 4:\n                        _b.sent();\n                        return [4, this._loadCubeTextures()];\n                    case 5:\n                        _b.sent();\n                        return [4, this._loadMaterials()];\n                    case 6:\n                        _b.sent();\n                        return [4, this._loadMeshes()];\n                    case 7:\n                        _b.sent();\n                        return [4, this._loadCameras()];\n                    case 8:\n                        _b.sent();\n                        return [4, this._loadLights()];\n                    case 9:\n                        _b.sent();\n                        return [4, this._loadNodes()];\n                    case 10:\n                        _b.sent();\n                        return [2, this._res];\n                }\n            });\n        });\n    };\n    GlTFLoader.prototype._loadBuffers = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var buffers, _i, buffers_1, uri, _a, _b;\n            return __generator(this, function (_c) {\n                switch (_c.label) {\n                    case 0:\n                        buffers = this._json.buffers;\n                        _i = 0, buffers_1 = buffers;\n                        _c.label = 1;\n                    case 1:\n                        if (!(_i < buffers_1.length)) return [3, 4];\n                        uri = buffers_1[_i].uri;\n                        _b = (_a = this._buffers).push;\n                        return [4, this.request(this._baseUri + '/' + uri, 'buffer')];\n                    case 2:\n                        _b.apply(_a, [_c.sent()]);\n                        _c.label = 3;\n                    case 3:\n                        _i++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    GlTFLoader.prototype._loadImages = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var imagesSrc, images, _i, imagesSrc_1, uri, image, bitmap;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        imagesSrc = this._json.images;\n                        images = this._res.images;\n                        if (!imagesSrc) {\n                            return [2];\n                        }\n                        _i = 0, imagesSrc_1 = imagesSrc;\n                        _a.label = 1;\n                    case 1:\n                        if (!(_i < imagesSrc_1.length)) return [3, 5];\n                        uri = imagesSrc_1[_i].uri;\n                        return [4, this._loadImage(this._baseUri + '/' + uri)];\n                    case 2:\n                        image = _a.sent();\n                        return [4, createImageBitmap(image)];\n                    case 3:\n                        bitmap = _a.sent();\n                        images.push(bitmap);\n                        _a.label = 4;\n                    case 4:\n                        _i++;\n                        return [3, 1];\n                    case 5: return [2];\n                }\n            });\n        });\n    };\n    GlTFLoader.prototype._loadTextures = function () {\n        var _a, _b, _c;\n        return __awaiter(this, void 0, void 0, function () {\n            var _d, texturesSrc, imagesSrc, _e, images, textures, _i, texturesSrc_1, source, image, texture, isRGBD, isNormal;\n            return __generator(this, function (_f) {\n                _d = this._json, texturesSrc = _d.textures, imagesSrc = _d.images;\n                _e = this._res, images = _e.images, textures = _e.textures;\n                if (!texturesSrc) {\n                    return [2];\n                }\n                for (_i = 0, texturesSrc_1 = texturesSrc; _i < texturesSrc_1.length; _i++) {\n                    source = texturesSrc_1[_i].source;\n                    image = images[source];\n                    texture = new Texture_1.default(image.width, image.height, image);\n                    isRGBD = ((_a = imagesSrc.extras) === null || _a === void 0 ? void 0 : _a.type) === 'HDR' && ((_b = imagesSrc.extras) === null || _b === void 0 ? void 0 : _b.format) === 'RGBD';\n                    isNormal = !!((_c = imagesSrc.extras) === null || _c === void 0 ? void 0 : _c.isNormalMap);\n                    textures.push(texture);\n                }\n                return [2];\n            });\n        });\n    };\n    GlTFLoader.prototype._loadCubeTextures = function () {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var cubeTexturesSrc, _c, images, cubeTextures, _i, cubeTexturesSrc_1, imageIds, tasks, bms, cubeTexture;\n            return __generator(this, function (_d) {\n                switch (_d.label) {\n                    case 0:\n                        cubeTexturesSrc = (_b = (_a = this._json.extensions) === null || _a === void 0 ? void 0 : _a.Sein_cubeTexture) === null || _b === void 0 ? void 0 : _b.textures;\n                        _c = this._res, images = _c.images, cubeTextures = _c.cubeTextures;\n                        if (!cubeTexturesSrc) {\n                            return [2];\n                        }\n                        _i = 0, cubeTexturesSrc_1 = cubeTexturesSrc;\n                        _d.label = 1;\n                    case 1:\n                        if (!(_i < cubeTexturesSrc_1.length)) return [3, 4];\n                        imageIds = cubeTexturesSrc_1[_i].images;\n                        tasks = Promise.all(imageIds.map(function (imageId) {\n                            return createImageBitmap(images[imageId]);\n                        }));\n                        return [4, tasks];\n                    case 2:\n                        bms = _d.sent();\n                        cubeTexture = new CubeTexture_1.default(bms[0].width, bms[1].width, bms);\n                        bms.forEach(function (bm) { return bm.close(); });\n                        cubeTextures.push(cubeTexture);\n                        _d.label = 3;\n                    case 3:\n                        _i++;\n                        return [3, 1];\n                    case 4: return [2];\n                }\n            });\n        });\n    };\n    GlTFLoader.prototype._loadMaterials = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _buffers, materialsSrc, _a, materials, textures, _i, materialsSrc_1, _b, name_1, pbrMetallicRoughness, normalTexture, alphaMode, extensions, effect, uniforms, marcos, baseColorTexture, metallicFactor, baseColorFactor, roughnessFactor, metallicRoughnessTexture, _c, diffuseFactor, diffuseTexture, specularFactor, glossinessFactor, specularGlossinessTexture, material;\n            return __generator(this, function (_d) {\n                _buffers = this._buffers;\n                materialsSrc = this._json.materials;\n                _a = this._res, materials = _a.materials, textures = _a.textures;\n                for (_i = 0, materialsSrc_1 = materialsSrc; _i < materialsSrc_1.length; _i++) {\n                    _b = materialsSrc_1[_i], name_1 = _b.name, pbrMetallicRoughness = _b.pbrMetallicRoughness, normalTexture = _b.normalTexture, alphaMode = _b.alphaMode, extensions = _b.extensions;\n                    effect = buildin_1.buildinEffects.rPBR;\n                    uniforms = {};\n                    marcos = {};\n                    if (normalTexture) {\n                        uniforms['u_normalTexture'] = textures[normalTexture.index];\n                        uniforms['u_normalTextureScale'] = normalTexture.scale;\n                    }\n                    if (pbrMetallicRoughness) {\n                        baseColorTexture = pbrMetallicRoughness.baseColorTexture, metallicFactor = pbrMetallicRoughness.metallicFactor, baseColorFactor = pbrMetallicRoughness.baseColorFactor, roughnessFactor = pbrMetallicRoughness.roughnessFactor, metallicRoughnessTexture = pbrMetallicRoughness.metallicRoughnessTexture;\n                        if (baseColorTexture) {\n                            uniforms['u_baseColorTexture'] = textures[baseColorTexture.index];\n                        }\n                        if (metallicRoughnessTexture) {\n                            uniforms['u_metallicRoughnessTexture'] = textures[metallicRoughnessTexture.index];\n                        }\n                        uniforms['u_baseColorFactor'] = baseColorFactor;\n                        uniforms['u_metallicFactor'] = metallicFactor;\n                        uniforms['u_roughnessFactor'] = roughnessFactor;\n                    }\n                    if (extensions === null || extensions === void 0 ? void 0 : extensions.KHR_materials_pbrSpecularGlossiness) {\n                        _c = extensions === null || extensions === void 0 ? void 0 : extensions.KHR_materials_pbrSpecularGlossiness, diffuseFactor = _c.diffuseFactor, diffuseTexture = _c.diffuseTexture, specularFactor = _c.specularFactor, glossinessFactor = _c.glossinessFactor, specularGlossinessTexture = _c.specularGlossinessTexture;\n                        marcos['USE_SPEC_GLOSS'] = true;\n                        if (diffuseTexture) {\n                            uniforms['u_baseColorTexture'] = textures[diffuseTexture.index];\n                        }\n                        if (specularGlossinessTexture) {\n                            uniforms['u_specularGlossinessTexture'] = textures[specularGlossinessTexture.index];\n                        }\n                        uniforms['u_baseColorFactor'] = diffuseFactor;\n                        uniforms['u_specularFactor'] = specularFactor;\n                        uniforms['u_glossinessFactor'] = glossinessFactor;\n                    }\n                    if (alphaMode === 'BLEND') {\n                        marcos['USE_GLASS'] = true;\n                    }\n                    material = new Material_1.default(effect, uniforms, marcos);\n                    material.name = name_1;\n                    materials.push(material);\n                }\n                return [2];\n            });\n        });\n    };\n    GlTFLoader.prototype._loadMeshes = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var meshesSrc, meshes, _i, meshesSrc_1, _a, primitives, name_2, mesh, node, _b, primitives_1, prim, _c, _d;\n            return __generator(this, function (_e) {\n                switch (_e.label) {\n                    case 0:\n                        meshesSrc = this._json.meshes;\n                        meshes = this._res.meshes;\n                        _i = 0, meshesSrc_1 = meshesSrc;\n                        _e.label = 1;\n                    case 1:\n                        if (!(_i < meshesSrc_1.length)) return [3, 9];\n                        _a = meshesSrc_1[_i], primitives = _a.primitives, name_2 = _a.name;\n                        if (!(primitives.length === 1)) return [3, 3];\n                        return [4, this._createMesh(primitives[0])];\n                    case 2:\n                        mesh = _e.sent();\n                        mesh.name = name_2;\n                        meshes.push(mesh);\n                        return [3, 8];\n                    case 3:\n                        node = new Node_1.default();\n                        node.name = name_2;\n                        _b = 0, primitives_1 = primitives;\n                        _e.label = 4;\n                    case 4:\n                        if (!(_b < primitives_1.length)) return [3, 7];\n                        prim = primitives_1[_b];\n                        _d = (_c = node).addChild;\n                        return [4, this._createMesh(prim)];\n                    case 5:\n                        _d.apply(_c, [_e.sent()]);\n                        _e.label = 6;\n                    case 6:\n                        _b++;\n                        return [3, 4];\n                    case 7:\n                        meshes.push(node);\n                        _e.label = 8;\n                    case 8:\n                        _i++;\n                        return [3, 1];\n                    case 9: return [2];\n                }\n            });\n        });\n    };\n    GlTFLoader.prototype._loadCameras = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var camerasSrc, _a, cameras, cubeTextures, _i, camerasSrc_1, _b, perspective, orthographic, type, name_3, extensions, camera, skybox, skyboxMat;\n            return __generator(this, function (_c) {\n                camerasSrc = this._json.cameras;\n                _a = this._res, cameras = _a.cameras, cubeTextures = _a.cubeTextures;\n                if (!camerasSrc) {\n                    return [2];\n                }\n                for (_i = 0, camerasSrc_1 = camerasSrc; _i < camerasSrc_1.length; _i++) {\n                    _b = camerasSrc_1[_i], perspective = _b.perspective, orthographic = _b.orthographic, type = _b.type, name_3 = _b.name, extensions = _b.extensions;\n                    camera = void 0;\n                    if (type === 'perspective') {\n                        camera = new Camera_1.default({}, {\n                            near: perspective.znear,\n                            far: perspective.zfar,\n                            fov: 1 / perspective.yfov\n                        });\n                    }\n                    else {\n                        camera = new Camera_1.default({}, {\n                            isOrth: true,\n                            near: orthographic.znear,\n                            far: orthographic.zfar,\n                            sizeX: orthographic.xmag,\n                            sizeY: orthographic.ymag\n                        });\n                    }\n                    camera.name = name_3;\n                    skybox = extensions && extensions.Sein_skybox;\n                    if (skybox) {\n                        if (skybox.type !== 'Cube') {\n                            console.warn('Only support cube texture skybox now!');\n                        }\n                        else {\n                            skyboxMat = new Material_1.default(buildin_1.buildinEffects.rSkybox, {\n                                u_factor: new Float32Array([skybox.factor]),\n                                u_color: new Float32Array(skybox.color),\n                                u_cubeTexture: cubeTextures[skybox.texture.index],\n                                u_rotation: new Float32Array([skybox.rotation]),\n                                u_exposure: new Float32Array([skybox.exposure])\n                            });\n                            camera.skyboxMat = skyboxMat;\n                        }\n                    }\n                    cameras.push(camera);\n                }\n                return [2];\n            });\n        });\n    };\n    GlTFLoader.prototype._loadLights = function () {\n        var _a, _b;\n        return __awaiter(this, void 0, void 0, function () {\n            var lightsSrc, lights, _loop_1, _i, lightsSrc_1, _c, name_4, type, intensity, color, mode, size;\n            return __generator(this, function (_d) {\n                if (!this._json.extensions) {\n                    return [2];\n                }\n                lightsSrc = (_b = (_a = this._json.extensions) === null || _a === void 0 ? void 0 : _a.KHR_lights_punctual) === null || _b === void 0 ? void 0 : _b.lights;\n                lights = this._res.lights;\n                if (lightsSrc) {\n                    _loop_1 = function (name_4, type, intensity, color, mode, size) {\n                        if (type !== 'directional' && type !== 'area') {\n                            throw new Error('Only support directional and area light now!');\n                        }\n                        var light = new Light_1.default(type === 'directional' ? Light_1.ELightType.Directional : Light_1.ELightType.Area, color.map(function (c) { return c * intensity; }), type === 'directional' ? {} : { mode: mode === 'rect' ? Light_1.EAreaLightMode.Rect : Light_1.EAreaLightMode.Disc, size: size });\n                        light.name = name_4;\n                        lights.push(light);\n                    };\n                    for (_i = 0, lightsSrc_1 = lightsSrc; _i < lightsSrc_1.length; _i++) {\n                        _c = lightsSrc_1[_i], name_4 = _c.name, type = _c.type, intensity = _c.intensity, color = _c.color, mode = _c.mode, size = _c.size;\n                        _loop_1(name_4, type, intensity, color, mode, size);\n                    }\n                }\n                return [2];\n            });\n        });\n    };\n    GlTFLoader.prototype._loadNodes = function () {\n        return __awaiter(this, void 0, void 0, function () {\n            var _a, nodesSrc, scenes, _b, rootNode, nodes, meshes, cameras, lights, _i, nodesSrc_1, _c, matrix, name_5, extensions, meshId, cameraId, node, index, _d, nodes_1, node, children, _e, children_1, childId, _f, _g, nodeId;\n            return __generator(this, function (_h) {\n                _a = this._json, nodesSrc = _a.nodes, scenes = _a.scenes;\n                _b = this._res, rootNode = _b.rootNode, nodes = _b.nodes, meshes = _b.meshes, cameras = _b.cameras, lights = _b.lights;\n                for (_i = 0, nodesSrc_1 = nodesSrc; _i < nodesSrc_1.length; _i++) {\n                    _c = nodesSrc_1[_i], matrix = _c.matrix, name_5 = _c.name, extensions = _c.extensions, meshId = _c.mesh, cameraId = _c.camera;\n                    node = void 0;\n                    if (meshId !== undefined) {\n                        node = meshes[meshId].clone();\n                    }\n                    else if (cameraId !== undefined) {\n                        node = cameras[cameraId];\n                    }\n                    else if (extensions === null || extensions === void 0 ? void 0 : extensions.KHR_lights_punctual) {\n                        node = lights[extensions.KHR_lights_punctual.light];\n                    }\n                    else {\n                        node = new Node_1.default();\n                    }\n                    node.name = name_5;\n                    if (matrix) {\n                        node.setLocalMat(matrix);\n                    }\n                    nodes.push(node);\n                }\n                index = 0;\n                for (_d = 0, nodes_1 = nodes; _d < nodes_1.length; _d++) {\n                    node = nodes_1[_d];\n                    children = nodesSrc[index].children;\n                    if (children) {\n                        for (_e = 0, children_1 = children; _e < children_1.length; _e++) {\n                            childId = children_1[_e];\n                            node.addChild(nodes[childId]);\n                        }\n                    }\n                    index += 1;\n                }\n                for (_f = 0, _g = scenes[0].nodes; _f < _g.length; _f++) {\n                    nodeId = _g[_f];\n                    rootNode.addChild(nodes[nodeId]);\n                }\n                return [2];\n            });\n        });\n    };\n    GlTFLoader.prototype._createMesh = function (prim) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _buffers, _a, accessors, bufferViews, materials, attributes, arrayStride, id, vertexData, boundingBox, attrName, _b, bufferView, byteOffset, componentType, type, max, min, view, _c, format, byteLength, idxInfo, idxView, indexBuffer, geometry, material;\n            return __generator(this, function (_d) {\n                _buffers = this._buffers;\n                _a = this._json, accessors = _a.accessors, bufferViews = _a.bufferViews;\n                materials = this._res.materials;\n                attributes = [];\n                arrayStride = 0;\n                id = 0;\n                for (attrName in prim.attributes) {\n                    _b = accessors[prim.attributes[attrName]], bufferView = _b.bufferView, byteOffset = _b.byteOffset, componentType = _b.componentType, type = _b.type, max = _b.max, min = _b.min;\n                    view = bufferViews[bufferView];\n                    _c = this._convertVertexFormat(type, componentType), format = _c[0], byteLength = _c[1];\n                    arrayStride += byteLength;\n                    vertexData = vertexData || new Float32Array(_buffers[view.buffer], view.byteOffset || 0, view.byteLength / 4);\n                    if (attrName === 'POSITION' && (max === null || max === void 0 ? void 0 : max.length) === 3 && (min === null || min === void 0 ? void 0 : min.length) === 3) {\n                        boundingBox = this._getBoundingBox(max, min);\n                    }\n                    attributes.push({\n                        name: attrName.toLowerCase(),\n                        format: format,\n                        offset: byteOffset || 0,\n                        shaderLocation: id\n                    });\n                    id += 1;\n                }\n                idxInfo = accessors[prim.indices];\n                idxView = bufferViews[idxInfo.bufferView];\n                indexBuffer = new Uint16Array(_buffers[idxView.buffer], idxView.byteOffset, idxView.byteLength / 2);\n                geometry = new Geometry_1.default([{\n                        layout: { arrayStride: arrayStride, attributes: attributes },\n                        data: vertexData\n                    }], indexBuffer, idxInfo.count, boundingBox);\n                material = materials[prim.material];\n                return [2, new Mesh_1.default(geometry, material)];\n            });\n        });\n    };\n    GlTFLoader.prototype._convertVertexFormat = function (type, componentType) {\n        if (componentType !== 5126) {\n            throw new Error('Only support componentType float!');\n        }\n        switch (type) {\n            case 'SCALE':\n                return ['float32', 4];\n            case 'VEC2':\n                return ['float32x2', 8];\n            case 'VEC3':\n                return ['float32x3', 12];\n            case 'VEC4':\n                return ['float32x4', 16];\n        }\n        throw new Error(\"Not support type \" + type + \"!\");\n    };\n    GlTFLoader.prototype._getBoundingBox = function (max, min) {\n        return {\n            start: min,\n            center: max.map(function (mx, index) { return (mx + min[index]) / 2; }),\n            size: max.map(function (mx, index) { return (mx - min[index]); })\n        };\n    };\n    GlTFLoader.prototype._loadImage = function (uri) {\n        return __awaiter(this, void 0, void 0, function () {\n            var img;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        img = document.createElement('img');\n                        img.src = uri;\n                        return [4, img.decode()];\n                    case 1:\n                        _a.sent();\n                        return [2, img];\n                }\n            });\n        });\n    };\n    GlTFLoader.CLASS_NAME = 'GlTFLoader';\n    return GlTFLoader;\n}(Loader_1.default));\nexports.default = GlTFLoader;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiR2xURkxvYWRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIkdsVEZMb2FkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUEsc0NBQTBDO0FBQzFDLHFDQUFnQztBQUNoQyx5Q0FBb0M7QUFDcEMsNkNBQXdEO0FBQ3hELDZDQUF3QztBQUN4QyxxQ0FBZ0M7QUFDaEMsMkNBQXNDO0FBQ3RDLG1DQUE4QjtBQUU5Qix1Q0FBa0U7QUFDbEUsbURBQThDO0FBbUI5QztJQUF3Qyw4QkFBeUM7SUFBakY7UUFBQSxxRUF1WUM7UUFyWVEsa0JBQVksR0FBWSxJQUFJLENBQUM7UUFJNUIsY0FBUSxHQUFrQixFQUFFLENBQUM7O0lBaVl2QyxDQUFDO0lBOVhjLHlCQUFJLEdBQWpCLFVBQWtCLEdBQVcsRUFBRSxPQUEyQjs7Ozs7O3dCQUNsRCxHQUFHLEdBQUcsR0FBRyxDQUFDLEtBQUssQ0FBQyxHQUFHLENBQUMsQ0FBQzt3QkFDM0IsR0FBRyxDQUFDLEdBQUcsRUFBRSxDQUFDO3dCQUNWLElBQUksQ0FBQyxRQUFRLEdBQUcsR0FBRyxDQUFDLElBQUksQ0FBQyxHQUFHLENBQUMsQ0FBQzt3QkFDOUIsS0FBQSxJQUFJLENBQUE7d0JBQVMsV0FBTSxJQUFJLENBQUMsT0FBTyxDQUFDLEdBQUcsRUFBRSxNQUFNLENBQUMsRUFBQTs7d0JBQTVDLEdBQUssS0FBSyxHQUFHLFNBQStCLENBQUM7d0JBQzdDLFdBQU0sSUFBSSxDQUFDLFlBQVksRUFBRSxFQUFBOzt3QkFBekIsU0FBeUIsQ0FBQzt3QkFFMUIsSUFBSSxDQUFDLElBQUksR0FBRzs0QkFDVixRQUFRLEVBQUUsSUFBSSxjQUFJLEVBQUU7NEJBQ3BCLEtBQUssRUFBRSxFQUFFOzRCQUNULE1BQU0sRUFBRSxFQUFFOzRCQUNWLE1BQU0sRUFBRSxFQUFFOzRCQUNWLFFBQVEsRUFBRSxFQUFFOzRCQUNaLFlBQVks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QUMsR0FBRyxHQUFHLEdBQUcsQ0FBQzt3QkFDZCxXQUFNLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBQTs7d0JBQWxCLFNBQWtCLENBQUM7d0JBRW5CLFdBQU8sR0FBRyxFQUFDOzs7O0tBQ1o7SUFyWWEscUJBQVUsR0FBVyxZQUFZLENBQUM7SUFzWWxELGlCQUFDO0NBQUEsQUF2WUQsQ0FBd0MsZ0JBQU0sR0F1WTdDO2tCQXZZb0IsVUFBVSIsInNvdXJjZXNDb250ZW50IjpbIi8qKlxuICogR2xURkxvYWRlci50c1xuICogXG4gKiBAQXV0aG9yICA6ZHR5c2t5KGR0eXNreUBvdXRsb29rLmNvbSlcbiAqIEBEYXRlICAgIDogNi85LzIwMjEsIDY6MjQ6MTUgUE1cbiovXG5pbXBvcnQge2J1aWxkaW5FZmZlY3RzfSBmcm9tIFwiLi4vYnVpbGRpblwiO1xuaW1wb3J0IE5vZGUgZnJvbSBcIi4uL2NvcmUvTm9kZVwiO1xuaW1wb3J0IENhbWVyYSBmcm9tIFwiLi4vY29yZS9DYW1lcmFcIjtcbmltcG9ydCBHZW9tZXRyeSwge0lCb3VuZGluZ0JveH0gZnJvbSBcIi4uL2NvcmUvR2VvbWV0cnlcIjtcbmltcG9ydCBNYXRlcmlhbCBmcm9tIFwiLi4vY29yZS9NYXRlcmlhbFwiO1xuaW1wb3J0IE1lc2ggZnJvbSBcIi4uL2NvcmUvTWVzaFwiO1xuaW1wb3J0IFRleHR1cmUgZnJvbSBcIi4uL2NvcmUvVGV4dHVyZVwiO1xuaW1wb3J0IExvYWRlciBmcm9tIFwiLi9Mb2FkZXJcIjtcbmltcG9ydCB7VFVuaWZvcm1WYWx1ZX0gZnJvbSBcIi4uL2NvcmUvVUJUZW1wbGF0ZVwiO1xuaW1wb3J0IExpZ2h0LCB7IEVBcmVhTGlnaHRNb2RlLCBFTGlnaHRUeXBlIH0gZnJvbSBcIi4uL2NvcmUvTGlnaHRcIjtcbmltcG9ydCBDdWJlVGV4dHVyZSBmcm9tIFwiLi4vY29yZS9DdWJlVGV4dHVyZVwiO1xuXG5leHBvcnQgaW50ZXJmYWNlIElHbFRGTG9hZGVyT3B0aW9ucyB7XG5cbn1cblxuZXhwb3J0IGludGVyZmFjZSBJR2xURlJlc291cmNlIHtcbiAgcm9vdE5vZGU6IE5vZGU7XG4gIG5vZGVzOiBOb2RlW107XG4gIG1lc2hlczogKE1lc2ggfCBOb2RlKVtdO1xuICBpbWFnZXM6IEltYWdlQml0bWFwW107XG4gIHRleHR1cmVzOiBUZXh0dXJlW107XG4gIGN1YmVUZXh0dXJlczogQ3ViZVRleHR1cmVbXTtcbiAgbWF0ZXJpYWxzOiBNYXRlcmlhbFtdO1xuICAvLyBzYW1wbGVyczogR1BVU2FtcGxlckRlc2NyaXB0b3JbXTtcbiAgY2FtZXJhczogQ2FtZXJhW107XG4gIGxpZ2h0czogTGlnaHRbXTtcbn1cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgR2xURkxvYWRlciBleHRlbmRzIExvYWRlcjxJR2xURkxvYWRlck9wdGlvbnMsIElHbFRGUmVzb3VyY2U+IHtcbiAgcHVibGljIHN0YXRpYyBDTEFTU19OQU1FOiBzdHJpbmcgPSAnR2xURkxvYWRlcic7XG4gIHB1YmxpYyBpc0dsVEZMb2FkZXI6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHByaXZhdGUgX2Jhc2VVcmk6IHN0cmluZztcbiAgcHJpdmF0ZSBfanNvbjogYW55O1xuICBwcml2YXRlIF9idWZmZXJzOiBBcnJheUJ1ZmZlcltdID0gW107XG4gIHByaXZhdGUgX3JlczogSUdsVEZSZXNvdXJjZTtcbiAgXG4gIHB1YmxpYyBhc3luYyBsb2FkKHNyYzogc3RyaW5nLCBvcHRpb25zOiBJR2xURkxvYWRlck9wdGlvbnMpOiBQcm9taXNlPElHbFRGUmVzb3VyY2U+IHtcbiAgICBjb25zdCB0bXAgPSBzcmMuc3BsaXQoJy8nKTtcbiAgICB0bXAucG9wKCk7XG4gICAgdGhpcy5fYmFzZVVyaSA9IHRtcC5qb2luKCcvJyk7XG4gICAgdGhpcy5fanNvbiA9IGF3YWl0IHRoaXMucmVxdWVzdChzcmMsICdqc29uJyk7XG4gICAgYXdhaXQgdGhpcy5fbG9hZEJ1ZmZlcnMoKTtcblxuICAgIHRoaXMuX3JlcyA9IHtcbiAgICAgIHJvb3ROb2RlOiBuZXcgTm9kZSgpLFxuICAgICAgbm9kZXM6IFtdLFxuICAgICAgbWVzaGVzOiBbXSxcbiAgICAgIGltYWdlczogW10sXG4gICAgICB0ZXh0dXJlczogW10sXG4gICAgICBjdWJlVGV4dHVyZXM6IFtdLFxuICAgICAgbWF0ZXJpYWxzOiBbXSxcbiAgICAgIC8vIHNhbXBsZXJzOiBbXSxcbiAgICAgIGNhbWVyYXM6IFtdLFxuICAgICAgbGlnaHRzOiBbXVxuICAgIH1cblxuICAgIGF3YWl0IHRoaXMuX2xvYWRJbWFnZXMoKTtcbiAgICBhd2FpdCB0aGlzLl9sb2FkVGV4dHVyZXMoKTtcbiAgICBhd2FpdCB0aGlzLl9sb2FkQ3ViZVRleHR1cmVzKCk7XG4gICAgYXdhaXQgdGhpcy5fbG9hZE1hdGVyaWFscygpO1xuICAgIGF3YWl0IHRoaXMuX2xvYWRNZXNoZXMoKTtcbiAgICBhd2FpdCB0aGlzLl9sb2FkQ2FtZXJhcygpO1xuICAgIGF3YWl0IHRoaXMuX2xvYWRMaWdodHMoKTtcbiAgICBhd2FpdCB0aGlzLl9sb2FkTm9kZXMoKTtcblxuICAgIHJldHVybiB0aGlzLl9yZXM7XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9sb2FkQnVmZmVycygpIHtcbiAgICBjb25zdCB7YnVmZmVyc30gPSB0aGlzLl9qc29uO1xuXG4gICAgZm9yIChjb25zdCB7dXJpfSBvZiBidWZmZXJzKSB7XG4gICAgICB0aGlzLl9idWZmZXJzLnB1c2goYXdhaXQgdGhpcy5yZXF1ZXN0KHRoaXMuX2Jhc2VVcmkgKyAnLycgKyB1cmksICdidWZmZXInKSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfbG9hZEltYWdlcygpIHtcbiAgICBjb25zdCB7aW1hZ2VzOiBpbWFnZXNTcmN9ID0gdGhpcy5fanNvbjtcbiAgICBjb25zdCB7aW1hZ2VzfSA9IHRoaXMuX3JlcztcblxuICAgIGlmICghaW1hZ2VzU3JjKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB7dXJpfSBvZiBpbWFnZXNTcmMpIHtcbiAgICAgIGNvbnN0IGltYWdlID0gYXdhaXQgdGhpcy5fbG9hZEltYWdlKHRoaXMuX2Jhc2VVcmkgKyAnLycgKyB1cmkpO1xuICAgICAgY29uc3QgYml0bWFwID0gYXdhaXQgY3JlYXRlSW1hZ2VCaXRtYXAoaW1hZ2UpO1xuICAgICAgaW1hZ2VzLnB1c2goYml0bWFwKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9sb2FkVGV4dHVyZXMoKSB7XG4gICAgY29uc3Qge3RleHR1cmVzOiB0ZXh0dXJlc1NyYywgaW1hZ2VzOiBpbWFnZXNTcmN9ID0gdGhpcy5fanNvbjtcbiAgICBjb25zdCB7aW1hZ2VzLCB0ZXh0dXJlc30gPSB0aGlzLl9yZXM7XG5cbiAgICBpZiAoIXRleHR1cmVzU3JjKSB7XG4gICAgICByZXR1cm47XG4gICAgfVxuXG4gICAgZm9yIChjb25zdCB7c291cmNlfSBvZiB0ZXh0dXJlc1NyYykge1xuICAgICAgY29uc3QgaW1hZ2UgPSBpbWFnZXNbc291cmNlXTtcblxuICAgICAgY29uc3QgdGV4dHVyZSA9IG5ldyBUZXh0dXJlKGltYWdlLndpZHRoLCBpbWFnZS5oZWlnaHQsIGltYWdlKTtcbiAgICAgIFxuICAgICAgY29uc3QgaXNSR0JEOiBib29sZWFuID0gaW1hZ2VzU3JjLmV4dHJhcz8udHlwZSA9PT0gJ0hEUicgJiYgaW1hZ2VzU3JjLmV4dHJhcz8uZm9ybWF0ID09PSAnUkdCRCc7XG4gICAgICBjb25zdCBpc05vcm1hbDogYm9vbGVhbiA9ICEhaW1hZ2VzU3JjLmV4dHJhcz8uaXNOb3JtYWxNYXA7XG4gICAgICBcbiAgICAgIHRleHR1cmVzLnB1c2godGV4dHVyZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfbG9hZEN1YmVUZXh0dXJlcygpIHtcbiAgICBjb25zdCBjdWJlVGV4dHVyZXNTcmMgPSB0aGlzLl9qc29uLmV4dGVuc2lvbnM/LlNlaW5fY3ViZVRleHR1cmU/LnRleHR1cmVzO1xuICAgIGNvbnN0IHtpbWFnZXMsIGN1YmVUZXh0dXJlc30gPSB0aGlzLl9yZXM7XG5cbiAgICBpZiAoIWN1YmVUZXh0dXJlc1NyYykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qge2ltYWdlczogaW1hZ2VJZHN9IG9mIGN1YmVUZXh0dXJlc1NyYykge1xuICAgICAgY29uc3QgdGFza3MgPSBQcm9taXNlLmFsbDxJbWFnZUJpdG1hcD4oaW1hZ2VJZHMubWFwKChpbWFnZUlkOiBudW1iZXIpID0+IHtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZUltYWdlQml0bWFwKGltYWdlc1tpbWFnZUlkXSk7XG4gICAgICB9KSk7XG5cbiAgICAgIGNvbnN0IGJtcyA9IGF3YWl0IHRhc2tzO1xuICAgICAgY29uc3QgY3ViZVRleHR1cmUgPSBuZXcgQ3ViZVRleHR1cmUoYm1zWzBdLndpZHRoLCBibXNbMV0ud2lkdGgsIGJtcyk7XG4gICAgICBibXMuZm9yRWFjaChibSA9PiBibS5jbG9zZSgpKTtcblxuICAgICAgY3ViZVRleHR1cmVzLnB1c2goY3ViZVRleHR1cmUpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2xvYWRNYXRlcmlhbHMoKSB7XG4gICAgY29uc3Qge19idWZmZXJzfSA9IHRoaXM7XG4gICAgY29uc3Qge21hdGVyaWFsczogbWF0ZXJpYWxzU3JjfSA9IHRoaXMuX2pzb247XG4gICAgY29uc3Qge21hdGVyaWFscywgdGV4dHVyZXN9ID0gdGhpcy5fcmVzO1xuXG4gICAgZm9yIChjb25zdCB7bmFtZSwgcGJyTWV0YWxsaWNSb3VnaG5lc3MsIG5vcm1hbFRleHR1cmUsIGFscGhhTW9kZSwgZXh0ZW5zaW9uc30gb2YgbWF0ZXJpYWxzU3JjKSB7XG4gICAgICBjb25zdCBlZmZlY3QgPSBidWlsZGluRWZmZWN0cy5yUEJSO1xuICAgICAgY29uc3QgdW5pZm9ybXM6IHtba2V5OiBzdHJpbmddOiBUVW5pZm9ybVZhbHVlfSA9IHt9O1xuICAgICAgY29uc3QgbWFyY29zOiB7W2tleTogc3RyaW5nXTogYm9vbGVhbn0gPSB7fTtcblxuICAgICAgaWYgKG5vcm1hbFRleHR1cmUpIHtcbiAgICAgICAgdW5pZm9ybXNbJ3Vfbm9ybWFsVGV4dHVyZSddID0gdGV4dHVyZXNbbm9ybWFsVGV4dHVyZS5pbmRleF1cbiAgICAgICAgdW5pZm9ybXNbJ3Vfbm9ybWFsVGV4dHVyZVNjYWxlJ10gPSBub3JtYWxUZXh0dXJlLnNjYWxlO1xuICAgICAgfVxuXG4gICAgICBpZiAocGJyTWV0YWxsaWNSb3VnaG5lc3MpIHtcbiAgICAgICAgY29uc3Qge1xuICAgICAgICAgIGJhc2VDb2xvclRleHR1cmUsIG1ldGFsbGljRmFjdG9yLCBiYXNlQ29sb3JGYWN0b3IsIHJvdWdobmVzc0ZhY3RvciwgbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlXG4gICAgICAgIH0gPSBwYnJNZXRhbGxpY1JvdWdobmVzcztcblxuICAgICAgICBpZiAoYmFzZUNvbG9yVGV4dHVyZSkge1xuICAgICAgICAgIHVuaWZvcm1zWyd1X2Jhc2VDb2xvclRleHR1cmUnXSA9IHRleHR1cmVzW2Jhc2VDb2xvclRleHR1cmUuaW5kZXhdXG4gICAgICAgIH1cbiAgICAgICAgaWYgKG1ldGFsbGljUm91Z2huZXNzVGV4dHVyZSkge1xuICAgICAgICAgIHVuaWZvcm1zWyd1X21ldGFsbGljUm91Z2huZXNzVGV4dHVyZSddID0gdGV4dHVyZXNbbWV0YWxsaWNSb3VnaG5lc3NUZXh0dXJlLmluZGV4XVxuICAgICAgICB9XG5cbiAgICAgICAgdW5pZm9ybXNbJ3VfYmFzZUNvbG9yRmFjdG9yJ10gPSBiYXNlQ29sb3JGYWN0b3I7XG4gICAgICAgIHVuaWZvcm1zWyd1X21ldGFsbGljRmFjdG9yJ10gPSBtZXRhbGxpY0ZhY3RvcjtcbiAgICAgICAgdW5pZm9ybXNbJ3Vfcm91Z2huZXNzRmFjdG9yJ10gPSByb3VnaG5lc3NGYWN0b3I7XG4gICAgICB9XG5cbiAgICAgIGlmIChleHRlbnNpb25zPy5LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcykge1xuICAgICAgICBjb25zdCB7XG4gICAgICAgICAgZGlmZnVzZUZhY3RvciwgZGlmZnVzZVRleHR1cmUsIHNwZWN1bGFyRmFjdG9yLCBnbG9zc2luZXNzRmFjdG9yLCBzcGVjdWxhckdsb3NzaW5lc3NUZXh0dXJlXG4gICAgICAgIH0gPSBleHRlbnNpb25zPy5LSFJfbWF0ZXJpYWxzX3BiclNwZWN1bGFyR2xvc3NpbmVzcztcbiAgICAgICAgbWFyY29zWydVU0VfU1BFQ19HTE9TUyddID0gdHJ1ZTtcblxuICAgICAgICBpZiAoZGlmZnVzZVRleHR1cmUpIHtcbiAgICAgICAgICB1bmlmb3Jtc1sndV9iYXNlQ29sb3JUZXh0dXJlJ10gPSB0ZXh0dXJlc1tkaWZmdXNlVGV4dHVyZS5pbmRleF1cbiAgICAgICAgfVxuICAgICAgICBpZiAoc3BlY3VsYXJHbG9zc2luZXNzVGV4dHVyZSkge1xuICAgICAgICAgIHVuaWZvcm1zWyd1X3NwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUnXSA9IHRleHR1cmVzW3NwZWN1bGFyR2xvc3NpbmVzc1RleHR1cmUuaW5kZXhdXG4gICAgICAgIH1cblxuICAgICAgICB1bmlmb3Jtc1sndV9iYXNlQ29sb3JGYWN0b3InXSA9IGRpZmZ1c2VGYWN0b3I7XG4gICAgICAgIHVuaWZvcm1zWyd1X3NwZWN1bGFyRmFjdG9yJ10gPSBzcGVjdWxhckZhY3RvcjtcbiAgICAgICAgdW5pZm9ybXNbJ3VfZ2xvc3NpbmVzc0ZhY3RvciddID0gZ2xvc3NpbmVzc0ZhY3RvcjtcbiAgICAgIH1cblxuICAgICAgaWYgKGFscGhhTW9kZSA9PT0gJ0JMRU5EJykge1xuICAgICAgICBtYXJjb3NbJ1VTRV9HTEFTUyddID0gdHJ1ZTtcbiAgICAgIH1cblxuICAgICAgY29uc3QgbWF0ZXJpYWwgPSBuZXcgTWF0ZXJpYWwoZWZmZWN0LCB1bmlmb3JtcywgbWFyY29zKTtcbiAgICAgIG1hdGVyaWFsLm5hbWUgPSBuYW1lO1xuICAgICAgbWF0ZXJpYWxzLnB1c2gobWF0ZXJpYWwpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2xvYWRNZXNoZXMoKSB7XG4gICAgY29uc3Qge21lc2hlczogbWVzaGVzU3JjfSA9IHRoaXMuX2pzb247XG4gICAgY29uc3Qge21lc2hlc30gPSB0aGlzLl9yZXM7XG5cbiAgICBmb3IgKGNvbnN0IHtwcmltaXRpdmVzLCBuYW1lfSBvZiBtZXNoZXNTcmMpIHtcbiAgICAgIGlmIChwcmltaXRpdmVzLmxlbmd0aCA9PT0gMSkge1xuICAgICAgICBjb25zdCBtZXNoID0gYXdhaXQgdGhpcy5fY3JlYXRlTWVzaChwcmltaXRpdmVzWzBdKTtcbiAgICAgICAgbWVzaC5uYW1lID0gbmFtZTtcbiAgICAgICAgbWVzaGVzLnB1c2gobWVzaCk7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICBjb25zdCBub2RlID0gbmV3IE5vZGUoKTtcbiAgICAgIG5vZGUubmFtZSA9IG5hbWU7XG4gICAgICBmb3IgKGxldCBwcmltIG9mIHByaW1pdGl2ZXMpIHtcbiAgICAgICAgbm9kZS5hZGRDaGlsZChhd2FpdCB0aGlzLl9jcmVhdGVNZXNoKHByaW0pKTtcbiAgICAgIH1cblxuICAgICAgbWVzaGVzLnB1c2gobm9kZSk7XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfbG9hZENhbWVyYXMoKSB7XG4gICAgY29uc3Qge2NhbWVyYXM6IGNhbWVyYXNTcmN9ID0gdGhpcy5fanNvbjtcbiAgICBjb25zdCB7Y2FtZXJhcywgY3ViZVRleHR1cmVzfSA9IHRoaXMuX3JlcztcblxuICAgIGlmICghY2FtZXJhc1NyYykge1xuICAgICAgcmV0dXJuO1xuICAgIH1cblxuICAgIGZvciAoY29uc3Qge3BlcnNwZWN0aXZlLCBvcnRob2dyYXBoaWMsIHR5cGUsIG5hbWUsIGV4dGVuc2lvbnN9IG9mIGNhbWVyYXNTcmMpIHtcbiAgICAgIGxldCBjYW1lcmE6IENhbWVyYTtcblxuICAgICAgaWYgKHR5cGUgPT09ICdwZXJzcGVjdGl2ZScpIHtcbiAgICAgICAgY2FtZXJhID0gbmV3IENhbWVyYSh7fSwge1xuICAgICAgICAgIG5lYXI6IHBlcnNwZWN0aXZlLnpuZWFyLFxuICAgICAgICAgIGZhcjogcGVyc3BlY3RpdmUuemZhcixcbiAgICAgICAgICBmb3Y6IDEgLyBwZXJzcGVjdGl2ZS55Zm92XG4gICAgICAgIH0pO1xuICAgICAgfSBlbHNlIHtcbiAgICAgICAgY2FtZXJhID0gbmV3IENhbWVyYSh7fSwge1xuICAgICAgICAgIGlzT3J0aDogdHJ1ZSxcbiAgICAgICAgICBuZWFyOiBvcnRob2dyYXBoaWMuem5lYXIsXG4gICAgICAgICAgZmFyOiBvcnRob2dyYXBoaWMuemZhcixcbiAgICAgICAgICBzaXplWDogb3J0aG9ncmFwaGljLnhtYWcsXG4gICAgICAgICAgc2l6ZVk6IG9ydGhvZ3JhcGhpYy55bWFnXG4gICAgICAgIH0pXG4gICAgICB9XG5cbiAgICAgIGNhbWVyYS5uYW1lID0gbmFtZTtcblxuICAgICAgY29uc3Qgc2t5Ym94ID0gZXh0ZW5zaW9ucyAmJiBleHRlbnNpb25zLlNlaW5fc2t5Ym94O1xuXG4gICAgICBpZiAoc2t5Ym94KSB7XG4gICAgICAgIGlmIChza3lib3gudHlwZSAhPT0gJ0N1YmUnKSB7XG4gICAgICAgICAgY29uc29sZS53YXJuKCdPbmx5IHN1cHBvcnQgY3ViZSB0ZXh0dXJlIHNreWJveCBub3chJyk7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgY29uc3Qgc2t5Ym94TWF0ID0gbmV3IE1hdGVyaWFsKGJ1aWxkaW5FZmZlY3RzLnJTa3lib3gsIHtcbiAgICAgICAgICAgIHVfZmFjdG9yOiBuZXcgRmxvYXQzMkFycmF5KFtza3lib3guZmFjdG9yXSksXG4gICAgICAgICAgICB1X2NvbG9yOiBuZXcgRmxvYXQzMkFycmF5KHNreWJveC5jb2xvciksXG4gICAgICAgICAgICB1X2N1YmVUZXh0dXJlOiBjdWJlVGV4dHVyZXNbc2t5Ym94LnRleHR1cmUuaW5kZXhdLFxuICAgICAgICAgICAgdV9yb3RhdGlvbjogbmV3IEZsb2F0MzJBcnJheShbc2t5Ym94LnJvdGF0aW9uXSksXG4gICAgICAgICAgICB1X2V4cG9zdXJlOiBuZXcgRmxvYXQzMkFycmF5KFtza3lib3guZXhwb3N1cmVdKVxuICAgICAgICAgIH0pO1xuICBcbiAgICAgICAgICBjYW1lcmEuc2t5Ym94TWF0ID0gc2t5Ym94TWF0O1xuICAgICAgICB9XG4gICAgICB9XG5cbiAgICAgIGNhbWVyYXMucHVzaChjYW1lcmEpO1xuICAgIH1cbiAgfVxuXG4gIHByaXZhdGUgYXN5bmMgX2xvYWRMaWdodHMoKSB7XG4gICAgaWYgKCF0aGlzLl9qc29uLmV4dGVuc2lvbnMpIHtcbiAgICAgIHJldHVybjtcbiAgICB9XG5cbiAgICBjb25zdCBsaWdodHNTcmMgPSB0aGlzLl9qc29uLmV4dGVuc2lvbnM/LktIUl9saWdodHNfcHVuY3R1YWw/LmxpZ2h0cztcbiAgICBjb25zdCB7bGlnaHRzfSA9IHRoaXMuX3JlcztcblxuICAgIGlmIChsaWdodHNTcmMpIHtcbiAgICAgIGZvciAoY29uc3Qge25hbWUsIHR5cGUsIGludGVuc2l0eSwgY29sb3IsIG1vZGUsIHNpemV9IG9mIGxpZ2h0c1NyYykge1xuICAgICAgICBpZiAodHlwZSAhPT0gJ2RpcmVjdGlvbmFsJyAmJiB0eXBlICE9PSAnYXJlYScpIHtcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ09ubHkgc3VwcG9ydCBkaXJlY3Rpb25hbCBhbmQgYXJlYSBsaWdodCBub3chJyk7XG4gICAgICAgIH1cbiAgXG4gICAgICAgIGNvbnN0IGxpZ2h0ID0gbmV3IExpZ2h0KFxuICAgICAgICAgIHR5cGUgPT09ICdkaXJlY3Rpb25hbCcgPyBFTGlnaHRUeXBlLkRpcmVjdGlvbmFsIDogRUxpZ2h0VHlwZS5BcmVhLFxuICAgICAgICAgIGNvbG9yLm1hcChjID0+IGMgKiBpbnRlbnNpdHkpLFxuICAgICAgICAgIHR5cGUgPT09ICdkaXJlY3Rpb25hbCcgPyB7fSA6IHttb2RlOiBtb2RlID09PSAncmVjdCcgPyBFQXJlYUxpZ2h0TW9kZS5SZWN0IDogRUFyZWFMaWdodE1vZGUuRGlzYywgc2l6ZX1cbiAgICAgICAgKTtcbiAgICAgICAgbGlnaHQubmFtZSA9IG5hbWU7XG4gIFxuICAgICAgICBsaWdodHMucHVzaChsaWdodCk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgcHJpdmF0ZSBhc3luYyBfbG9hZE5vZGVzKCkge1xuICAgIGNvbnN0IHtub2Rlczogbm9kZXNTcmMsIHNjZW5lc30gPSB0aGlzLl9qc29uO1xuICAgIGNvbnN0IHtyb290Tm9kZSwgbm9kZXMsIG1lc2hlcywgY2FtZXJhcywgbGlnaHRzfSA9IHRoaXMuX3JlcztcblxuICAgIGZvciAoY29uc3Qge21hdHJpeCwgbmFtZSwgZXh0ZW5zaW9ucywgbWVzaDogbWVzaElkLCBjYW1lcmE6IGNhbWVyYUlkfSBvZiBub2Rlc1NyYykge1xuICAgICAgbGV0IG5vZGU6IE5vZGU7XG5cbiAgICAgIGlmIChtZXNoSWQgIT09IHVuZGVmaW5lZCkge1xuICAgICAgICBub2RlID0gKG1lc2hlc1ttZXNoSWRdIGFzIE1lc2gpLmNsb25lKCk7XG4gICAgICB9IGVsc2UgaWYgKGNhbWVyYUlkICE9PSB1bmRlZmluZWQpIHtcbiAgICAgICAgbm9kZSA9IGNhbWVyYXNbY2FtZXJhSWRdO1xuICAgICAgfSBlbHNlIGlmIChleHRlbnNpb25zPy5LSFJfbGlnaHRzX3B1bmN0dWFsKSB7XG4gICAgICAgIG5vZGUgPSBsaWdodHNbZXh0ZW5zaW9ucy5LSFJfbGlnaHRzX3B1bmN0dWFsLmxpZ2h0XTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIG5vZGUgPSBuZXcgTm9kZSgpO1xuICAgICAgfVxuICAgICAgbm9kZS5uYW1lID0gbmFtZTtcblxuICAgICAgaWYgKG1hdHJpeCkge1xuICAgICAgICBub2RlLnNldExvY2FsTWF0KG1hdHJpeCk7XG4gICAgICB9XG5cbiAgICAgIG5vZGVzLnB1c2gobm9kZSk7XG4gICAgfVxuXG4gICAgbGV0IGluZGV4ID0gMDtcbiAgICBmb3IgKGNvbnN0IG5vZGUgb2Ygbm9kZXMpIHtcbiAgICAgIGNvbnN0IHtjaGlsZHJlbn0gPSBub2Rlc1NyY1tpbmRleF07XG5cbiAgICAgIGlmIChjaGlsZHJlbikge1xuICAgICAgICBmb3IgKGNvbnN0IGNoaWxkSWQgb2YgY2hpbGRyZW4pIHtcbiAgICAgICAgICBub2RlLmFkZENoaWxkKG5vZGVzW2NoaWxkSWRdKTtcbiAgICAgICAgfVxuICAgICAgfVxuICAgICAgaW5kZXggKz0gMTtcbiAgICB9XG5cbiAgICBmb3IgKGxldCBub2RlSWQgb2Ygc2NlbmVzWzBdLm5vZGVzKSB7XG4gICAgICByb290Tm9kZS5hZGRDaGlsZChub2Rlc1tub2RlSWRdKTtcbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9jcmVhdGVNZXNoKHByaW06IHthdHRyaWJ1dGVzOiBhbnksIGluZGljZXM6IG51bWJlciwgbWF0ZXJpYWw6IG51bWJlcn0pOiBQcm9taXNlPE1lc2g+IHtcbiAgICBjb25zdCB7X2J1ZmZlcnN9ID0gdGhpcztcbiAgICBjb25zdCB7YWNjZXNzb3JzLCBidWZmZXJWaWV3c30gPSB0aGlzLl9qc29uO1xuICAgIGNvbnN0IHttYXRlcmlhbHN9ID0gdGhpcy5fcmVzO1xuXG4gICAgY29uc3QgYXR0cmlidXRlczogKEdQVVZlcnRleEF0dHJpYnV0ZSAmIHtuYW1lOiBzdHJpbmd9KVtdID0gW107XG4gICAgbGV0IGFycmF5U3RyaWRlOiBudW1iZXIgPSAwO1xuICAgIGxldCBpZDogbnVtYmVyID0gMDtcbiAgICBsZXQgdmVydGV4RGF0YTogRmxvYXQzMkFycmF5O1xuXG4gICAgbGV0IGJvdW5kaW5nQm94OiBJQm91bmRpbmdCb3g7XG5cbiAgICBmb3IgKGNvbnN0IGF0dHJOYW1lIGluIHByaW0uYXR0cmlidXRlcykge1xuICAgICAgY29uc3Qge2J1ZmZlclZpZXcsIGJ5dGVPZmZzZXQsIGNvbXBvbmVudFR5cGUsIHR5cGUsIG1heCwgbWlufSA9IGFjY2Vzc29yc1twcmltLmF0dHJpYnV0ZXNbYXR0ck5hbWVdXTtcbiAgICAgIGNvbnN0IHZpZXcgPSBidWZmZXJWaWV3c1tidWZmZXJWaWV3XTtcbiAgICAgIGNvbnN0IFtmb3JtYXQsIGJ5dGVMZW5ndGhdID0gdGhpcy5fY29udmVydFZlcnRleEZvcm1hdCh0eXBlLCBjb21wb25lbnRUeXBlKTtcbiAgICAgIGFycmF5U3RyaWRlICs9IGJ5dGVMZW5ndGg7XG4gICAgICB2ZXJ0ZXhEYXRhID0gdmVydGV4RGF0YSB8fCBuZXcgRmxvYXQzMkFycmF5KF9idWZmZXJzW3ZpZXcuYnVmZmVyXSwgdmlldy5ieXRlT2Zmc2V0IHx8IDAsIHZpZXcuYnl0ZUxlbmd0aCAvIDQpO1xuXG4gICAgICBpZiAoYXR0ck5hbWUgPT09ICdQT1NJVElPTicgJiYgbWF4Py5sZW5ndGggPT09IDMgJiYgbWluPy5sZW5ndGggPT09IDMpIHtcbiAgICAgICAgYm91bmRpbmdCb3ggPSB0aGlzLl9nZXRCb3VuZGluZ0JveChtYXgsIG1pbik7XG4gICAgICB9XG5cbiAgICAgIGF0dHJpYnV0ZXMucHVzaCh7XG4gICAgICAgIG5hbWU6IGF0dHJOYW1lLnRvTG93ZXJDYXNlKCksXG4gICAgICAgIGZvcm1hdCxcbiAgICAgICAgb2Zmc2V0OiBieXRlT2Zmc2V0IHx8IDAsXG4gICAgICAgIHNoYWRlckxvY2F0aW9uOiBpZFxuICAgICAgfSk7XG5cbiAgICAgIGlkICs9IDE7XG4gICAgfVxuXG4gICAgY29uc3QgaWR4SW5mbyA9IGFjY2Vzc29yc1twcmltLmluZGljZXNdO1xuICAgIGNvbnN0IGlkeFZpZXcgPSBidWZmZXJWaWV3c1tpZHhJbmZvLmJ1ZmZlclZpZXddO1xuICAgIGNvbnN0IGluZGV4QnVmZmVyID0gbmV3IFVpbnQxNkFycmF5KF9idWZmZXJzW2lkeFZpZXcuYnVmZmVyXSwgaWR4Vmlldy5ieXRlT2Zmc2V0LCBpZHhWaWV3LmJ5dGVMZW5ndGggLyAyKTtcblxuICAgIGNvbnN0IGdlb21ldHJ5ID0gbmV3IEdlb21ldHJ5KFxuICAgICAgW3tcbiAgICAgICAgbGF5b3V0OiB7YXJyYXlTdHJpZGUsIGF0dHJpYnV0ZXN9LCBkYXRhOiB2ZXJ0ZXhEYXRhXG4gICAgICB9XSxcbiAgICAgIGluZGV4QnVmZmVyLCBpZHhJbmZvLmNvdW50LCBib3VuZGluZ0JveFxuICAgICk7XG4gICAgY29uc3QgbWF0ZXJpYWwgPSBtYXRlcmlhbHNbcHJpbS5tYXRlcmlhbF07XG5cbiAgICByZXR1cm4gbmV3IE1lc2goZ2VvbWV0cnksIG1hdGVyaWFsKTtcbiAgfVxuXG4gIHByaXZhdGUgX2NvbnZlcnRWZXJ0ZXhGb3JtYXQodHlwZTogJ1NDQUxFJyB8ICdWRUMyJyB8ICdWRUMzJyB8ICdWRUM0JywgY29tcG9uZW50VHlwZTogR0xlbnVtKTogW0dQVVZlcnRleEZvcm1hdCwgbnVtYmVyXSB7XG4gICAgaWYgKGNvbXBvbmVudFR5cGUgIT09IDUxMjYpIHtcbiAgICAgIHRocm93IG5ldyBFcnJvcignT25seSBzdXBwb3J0IGNvbXBvbmVudFR5cGUgZmxvYXQhJyk7XG4gICAgfVxuXG4gICAgc3dpdGNoICh0eXBlKSB7XG4gICAgICBjYXNlICdTQ0FMRSc6XG4gICAgICAgIHJldHVybiBbJ2Zsb2F0MzInLCA0XTtcbiAgICAgIGNhc2UgJ1ZFQzInOlxuICAgICAgICByZXR1cm4gWydmbG9hdDMyeDInLCA4XTtcbiAgICAgIGNhc2UgJ1ZFQzMnOlxuICAgICAgICByZXR1cm4gWydmbG9hdDMyeDMnLCAxMl07XG4gICAgICBjYXNlICdWRUM0JzpcbiAgICAgICAgcmV0dXJuIFsnZmxvYXQzMng0JywgMTZdO1xuICAgIH1cblxuICAgIHRocm93IG5ldyBFcnJvcihgTm90IHN1cHBvcnQgdHlwZSAke3R5cGV9IWApXG4gIH1cblxuICBwcm90ZWN0ZWQgX2dldEJvdW5kaW5nQm94KFxuICAgIG1heDogW251bWJlciwgbnVtYmVyLCBudW1iZXJdLFxuICAgIG1pbjogW251bWJlciwgbnVtYmVyLCBudW1iZXJdXG4gICkge1xuICAgIHJldHVybiB7XG4gICAgICBzdGFydDogbWluLFxuICAgICAgY2VudGVyOiBtYXgubWFwKChteCwgaW5kZXgpID0+IChteCArIG1pbltpbmRleF0pIC8gMikgYXMgIFtudW1iZXIsIG51bWJlciwgbnVtYmVyXSxcbiAgICAgIHNpemU6IG1heC5tYXAoKG14LCBpbmRleCkgPT4gKG14IC0gbWluW2luZGV4XSkpIGFzICBbbnVtYmVyLCBudW1iZXIsIG51bWJlcl1cbiAgICB9XG4gIH1cblxuICBwcml2YXRlIGFzeW5jIF9sb2FkSW1hZ2UodXJpOiBzdHJpbmcpOiBQcm9taXNlPEhUTUxJbWFnZUVsZW1lbnQ+IHtcbiAgICBjb25zdCBpbWcgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpbWcnKTtcbiAgICBpbWcuc3JjID0gdXJpO1xuICAgIGF3YWl0IGltZy5kZWNvZGUoKTtcblxuICAgIHJldHVybiBpbWc7XG4gIH1cbn1cbiJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar HObject_1 = require(\"../core/HObject\");\nvar Loader = (function (_super) {\n    __extends(Loader, _super);\n    function Loader() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isLoader = true;\n        return _this;\n    }\n    Loader.prototype.request = function (src, type) {\n        return __awaiter(this, void 0, void 0, function () {\n            return __generator(this, function (_a) {\n                return [2, new Promise(function (resolve, reject) {\n                        var xhr = new XMLHttpRequest();\n                        xhr.onload = function () {\n                            if (xhr.status < 200 || xhr.status >= 300) {\n                                reject(new TypeError(\"Network request failed for \" + xhr.status));\n                                return;\n                            }\n                            var result = 'response' in xhr ? xhr.response : xhr.responseText;\n                            if (type === 'json') {\n                                try {\n                                    result = JSON.parse(result);\n                                }\n                                catch (err) {\n                                    reject(new TypeError('JSON.parse error' + err));\n                                    return;\n                                }\n                            }\n                            resolve(result);\n                        };\n                        xhr.onerror = function () {\n                            reject(new TypeError('Network request failed'));\n                        };\n                        xhr.ontimeout = function () {\n                            reject(new TypeError('Network request timed out'));\n                        };\n                        xhr.open('GET', src, true);\n                        if (type === 'buffer') {\n                            xhr.responseType = 'arraybuffer';\n                        }\n                        xhr.send();\n                    })];\n            });\n        });\n    };\n    Loader.CLASS_NAME = 'Loader';\n    return Loader;\n}(HObject_1.default));\nexports.default = Loader;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiTG9hZGVyLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiTG9hZGVyLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQU9BLDJDQUFzQztBQUV0QztJQUFrRSwwQkFBTztJQUF6RTtRQUFBLHFFQWdEQztRQTlDUSxjQUFRLEdBQVksSUFBSSxDQUFDOztJQThDbEMsQ0FBQztJQXpDYyx3QkFBTyxHQUFwQixVQUFxQixHQUFXLEVBQUUsSUFBd0I7OztnQkFDeEQsV0FBTyxJQUFJLE9BQU8sQ0FBQyxVQUFDLE9BQU8sRUFBRSxNQUFNO3dCQUNqQyxJQUFNLEdBQUcsR0FBRyxJQUFJLGNBQWMsRUFBRSxDQUFDO3dCQUVqQyxHQUFHLENBQUMsTUFBTSxHQUFHOzRCQUNYLElBQUksR0FBRyxDQUFDLE1BQU0sR0FBRyxHQUFHLElBQUksR0FBRyxDQUFDLE1BQU0sSUFBSSxHQUFHLEVBQUU7Z0NBQ3pDLE1BQU0sQ0FBQyxJQUFJLFNBQVMsQ0FBQyxnQ0FBOEIsR0FBRyxDQUFDLE1BQVEsQ0FBQyxDQUFDLENBQUM7Z0NBQ2xFLE9BQU87NkJBQ1I7NEJBR0QsSUFBSSxNQUFNLEdBQUcsVUFBVSxJQUFJLEdBQUcsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFFBQVEsQ0FBQyxDQUFDLENBQUMsR0FBRyxDQUFDLFlBQVksQ0FBQzs0QkFFakUsSUFBSSxJQUFJLEtBQUssTUFBTSxFQUFFO2dDQUNuQixJQUFJO29DQUNGLE1BQU0sR0FBRyxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sQ0FBQyxDQUFDO2lDQUM3QjtnQ0FBQyxPQUFPLEdBQUcsRUFBRTtvQ0FDWixNQUFNLENBQUMsSUFBSSxTQUFTLENBQUMsa0JBQWtCLEdBQUcsR0FBRyxDQUFDLENBQUMsQ0FBQztvQ0FDaEQsT0FBTztpQ0FDUjs2QkFDRjs0QkFDRCxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUM7d0JBQ2xCLENBQUMsQ0FBQzt3QkFFRixHQUFHLENBQUMsT0FBTyxHQUFHOzRCQUNaLE1BQU0sQ0FBQyxJQUFJLFNBQVMsQ0FBQyx3QkFBd0IsQ0FBQyxDQUFDLENBQUM7d0JBQ2xELENBQUMsQ0FBQzt3QkFFRixHQUFHLENBQUMsU0FBUyxHQUFHOzRCQUNkLE1BQU0sQ0FBQyxJQUFJLFNBQVMsQ0FBQywyQkFBMkIsQ0FBQyxDQUFDLENBQUM7d0JBQ3JELENBQUMsQ0FBQzt3QkFFRixHQUFHLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRSxHQUFHLEVBQUUsSUFBSSxDQUFDLENBQUM7d0JBRTNCLElBQUksSUFBSSxLQUFLLFFBQVEsRUFBRTs0QkFDckIsR0FBRyxDQUFDLFlBQVksR0FBRyxhQUFhLENBQUM7eUJBQ2xDO3dCQUVELEdBQUcsQ0FBQyxJQUFJLEVBQUUsQ0FBQztvQkFDYixDQUFDLENBQUMsRUFBQzs7O0tBQ0o7SUE5Q2EsaUJBQVUsR0FBVyxRQUFRLENBQUM7SUErQzlDLGFBQUM7Q0FBQSxBQWhERCxDQUFrRSxpQkFBTyxHQWdEeEU7a0JBaEQ2QixNQUFNIiwic291cmNlc0NvbnRlbnQiOlsiLyoqXG4gKiBMb2FkZXIudHNcbiAqIFxuICogQEF1dGhvciAgOmR0eXNreShkdHlza3lAb3V0bG9vay5jb20pXG4gKiBARGF0ZSAgICA6IDYvOS8yMDIxLCA2OjI1OjUxIFBNXG4qL1xuXG5pbXBvcnQgSE9iamVjdCBmcm9tIFwiLi4vY29yZS9IT2JqZWN0XCI7XG5cbmV4cG9ydCBkZWZhdWx0IGFic3RyYWN0IGNsYXNzIExvYWRlcjxJT3B0aW9ucywgSVJlc291cmNlPiBleHRlbmRzIEhPYmplY3Qge1xuICBwdWJsaWMgc3RhdGljIENMQVNTX05BTUU6IHN0cmluZyA9ICdMb2FkZXInO1xuICBwdWJsaWMgaXNMb2FkZXI6IGJvb2xlYW4gPSB0cnVlO1xuICBwdWJsaWMgdHlwZTogeyBvcHRpb25zOiBJT3B0aW9ucywgcmVzb3VyY2U6IElSZXNvdXJjZSB9O1xuXG4gIHB1YmxpYyBhYnN0cmFjdCBsb2FkKHNyYzogc3RyaW5nLCBvcHRpb25zOiBJT3B0aW9ucyk6IFByb21pc2U8SVJlc291cmNlPjtcblxuICBwdWJsaWMgYXN5bmMgcmVxdWVzdChzcmM6IHN0cmluZywgdHlwZT86ICdqc29uJyB8ICdidWZmZXInKTogUHJvbWlzZTxhbnk+IHtcbiAgICByZXR1cm4gbmV3IFByb21pc2UoKHJlc29sdmUsIHJlamVjdCkgPT4ge1xuICAgICAgY29uc3QgeGhyID0gbmV3IFhNTEh0dHBSZXF1ZXN0KCk7XG5cbiAgICAgIHhoci5vbmxvYWQgPSAoKSA9PiB7XG4gICAgICAgIGlmICh4aHIuc3RhdHVzIDwgMjAwIHx8IHhoci5zdGF0dXMgPj0gMzAwKSB7XG4gICAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoYE5ldHdvcmsgcmVxdWVzdCBmYWlsZWQgZm9yICR7eGhyLnN0YXR1c31gKSk7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy9AdHMtaWdub3JlXG4gICAgICAgIGxldCByZXN1bHQgPSAncmVzcG9uc2UnIGluIHhociA/IHhoci5yZXNwb25zZSA6IHhoci5yZXNwb25zZVRleHQ7XG5cbiAgICAgICAgaWYgKHR5cGUgPT09ICdqc29uJykge1xuICAgICAgICAgIHRyeSB7XG4gICAgICAgICAgICByZXN1bHQgPSBKU09OLnBhcnNlKHJlc3VsdCk7XG4gICAgICAgICAgfSBjYXRjaCAoZXJyKSB7XG4gICAgICAgICAgICByZWplY3QobmV3IFR5cGVFcnJvcignSlNPTi5wYXJzZSBlcnJvcicgKyBlcnIpKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmVzb2x2ZShyZXN1bHQpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9uZXJyb3IgPSAoKSA9PiB7XG4gICAgICAgIHJlamVjdChuZXcgVHlwZUVycm9yKCdOZXR3b3JrIHJlcXVlc3QgZmFpbGVkJykpO1xuICAgICAgfTtcblxuICAgICAgeGhyLm9udGltZW91dCA9ICgpID0+IHtcbiAgICAgICAgcmVqZWN0KG5ldyBUeXBlRXJyb3IoJ05ldHdvcmsgcmVxdWVzdCB0aW1lZCBvdXQnKSk7XG4gICAgICB9O1xuXG4gICAgICB4aHIub3BlbignR0VUJywgc3JjLCB0cnVlKTtcblxuICAgICAgaWYgKHR5cGUgPT09ICdidWZmZXInKSB7XG4gICAgICAgIHhoci5yZXNwb25zZVR5cGUgPSAnYXJyYXlidWZmZXInO1xuICAgICAgfVxuXG4gICAgICB4aHIuc2VuZCgpO1xuICAgIH0pO1xuICB9XG59Il19","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nvar Texture_1 = require(\"../core/Texture\");\nvar Loader_1 = require(\"./Loader\");\nvar TextureLoader = (function (_super) {\n    __extends(TextureLoader, _super);\n    function TextureLoader() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isTextureLoader = true;\n        return _this;\n    }\n    TextureLoader.prototype.load = function (src, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var img, bitmap, res;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0:\n                        img = document.createElement('img');\n                        img.src = src;\n                        return [4, img.decode()];\n                    case 1:\n                        _a.sent();\n                        return [4, createImageBitmap(img)];\n                    case 2:\n                        bitmap = _a.sent();\n                        res = new Texture_1.default(img.naturalHeight, img.naturalHeight, bitmap);\n                        return [2, res];\n                }\n            });\n        });\n    };\n    TextureLoader.CLASS_NAME = 'TextureLoader';\n    return TextureLoader;\n}(Loader_1.default));\nexports.default = TextureLoader;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiVGV4dHVyZUxvYWRlci5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIlRleHR1cmVMb2FkZXIudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBTUEsMkNBQXNDO0FBQ3RDLG1DQUE4QjtBQU05QjtJQUEyQyxpQ0FBc0M7SUFBakY7UUFBQSxxRUFlQztRQWJRLHFCQUFlLEdBQVksSUFBSSxDQUFDOztJQWF6QyxDQUFDO0lBWGMsNEJBQUksR0FBakIsVUFBa0IsR0FBVyxFQUFFLE9BQThCOzs7Ozs7d0JBQ3JELEdBQUcsR0FBRyxRQUFRLENBQUMsYUFBYSxDQUFDLEtBQUssQ0FBQyxDQUFDO3dCQUMxQyxHQUFHLENBQUMsR0FBRyxHQUFHLEdBQUcsQ0FBQzt3QkFFZCxXQUFNLEdBQUcsQ0FBQyxNQUFNLEVBQUUsRUFBQTs7d0JBQWxCLFNBQWtCLENBQUM7d0JBRUosV0FBTSxpQkFBaUIsQ0FBQyxHQUFHLENBQUMsRUFBQTs7d0JBQXJDLE1BQU0sR0FBRyxTQUE0Qjt3QkFDckMsR0FBRyxHQUFHLElBQUksaUJBQU8sQ0FBQyxHQUFHLENBQUMsYUFBYSxFQUFFLEdBQUcsQ0FBQyxhQUFhLEVBQUUsTUFBTSxDQUFDLENBQUM7d0JBRXRFLFdBQU8sR0FBRyxFQUFDOzs7O0tBQ1o7SUFiYSx3QkFBVSxHQUFXLGVBQWUsQ0FBQztJQWNyRCxvQkFBQztDQUFBLEFBZkQsQ0FBMkMsZ0JBQU0sR0FlaEQ7a0JBZm9CLGFBQWEiLCJzb3VyY2VzQ29udGVudCI6WyIvKipcbiAqIFRleHR1cmVMb2FkZXIudHNcbiAqIFxuICogQEF1dGhvciAgOmR0eXNreShkdHlza3lAb3V0bG9vay5jb20pXG4gKiBARGF0ZSAgICA6IDYvOS8yMDIxLCA2OjI0OjAyIFBNXG4gKi9cbmltcG9ydCBUZXh0dXJlIGZyb20gXCIuLi9jb3JlL1RleHR1cmVcIjtcbmltcG9ydCBMb2FkZXIgZnJvbSBcIi4vTG9hZGVyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVRleHR1cmVMb2FkZXJPcHRpb25zIHtcblxufVxuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBUZXh0dXJlTG9hZGVyIGV4dGVuZHMgTG9hZGVyPElUZXh0dXJlTG9hZGVyT3B0aW9ucywgVGV4dHVyZT4ge1xuICBwdWJsaWMgc3RhdGljIENMQVNTX05BTUU6IHN0cmluZyA9ICdUZXh0dXJlTG9hZGVyJztcbiAgcHVibGljIGlzVGV4dHVyZUxvYWRlcjogYm9vbGVhbiA9IHRydWU7XG5cbiAgcHVibGljIGFzeW5jIGxvYWQoc3JjOiBzdHJpbmcsIG9wdGlvbnM6IElUZXh0dXJlTG9hZGVyT3B0aW9ucyk6IFByb21pc2U8VGV4dHVyZT4ge1xuICAgIGNvbnN0IGltZyA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoJ2ltZycpO1xuICAgIGltZy5zcmMgPSBzcmM7XG5cbiAgICBhd2FpdCBpbWcuZGVjb2RlKCk7XG5cbiAgICBjb25zdCBiaXRtYXAgPSBhd2FpdCBjcmVhdGVJbWFnZUJpdG1hcChpbWcpO1xuICAgIGNvbnN0IHJlcyA9IG5ldyBUZXh0dXJlKGltZy5uYXR1cmFsSGVpZ2h0LCBpbWcubmF0dXJhbEhlaWdodCwgYml0bWFwKTtcblxuICAgIHJldHVybiByZXM7XG4gIH1cbn1cbiJdfQ==","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Resource = void 0;\nvar HObject_1 = require(\"../core/HObject\");\nvar TextureLoader_1 = require(\"./TextureLoader\");\nvar GlTFLoader_1 = require(\"./GlTFLoader\");\nvar Resource = (function (_super) {\n    __extends(Resource, _super);\n    function Resource() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.isResource = true;\n        _this._loaders = {};\n        _this._resources = {};\n        return _this;\n    }\n    Resource.prototype.register = function (type, loader) {\n        this._loaders[type] = loader;\n    };\n    Resource.prototype.load = function (info, options) {\n        return __awaiter(this, void 0, void 0, function () {\n            var _this = this;\n            return __generator(this, function (_a) {\n                if (this._resources[info.name]) {\n                    return [2, this._resources[info.name]];\n                }\n                return [2, this._loaders[info.type].load(info.src, options || {})\n                        .then(function (res) {\n                        _this._resources[info.name] = res;\n                        return res;\n                    })];\n            });\n        });\n    };\n    Resource.prototype.get = function (name) {\n        return this._resources[name];\n    };\n    Resource.CLASS_NAME = 'Resource';\n    return Resource;\n}(HObject_1.default));\nexports.Resource = Resource;\nvar resource = new Resource();\nresource.register('texture', new TextureLoader_1.default());\nresource.register('gltf', new GlTFLoader_1.default());\nexports.default = resource;\n//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kZXguanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyJpbmRleC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7O0FBT0EsMkNBQXNDO0FBRXRDLGlEQUE0QztBQUM1QywyQ0FBc0M7QUFPdEM7SUFBOEIsNEJBQU87SUFBckM7UUFBQSxxRUFpQ0M7UUEvQlEsZ0JBQVUsR0FBWSxJQUFJLENBQUM7UUFFMUIsY0FBUSxHQUF1QyxFQUFFLENBQUM7UUFDbEQsZ0JBQVUsR0FBMEIsRUFBRSxDQUFDOztJQTRCakQsQ0FBQztJQTFCUSwyQkFBUSxHQUFmLFVBQ0UsSUFBVyxFQUFFLE1BQThCO1FBRTNDLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLEdBQUcsTUFBTSxDQUFDO0lBQy9CLENBQUM7SUFFWSx1QkFBSSxHQUFqQixVQUNFLElBQThDLEVBQzlDLE9BQW1EOzs7O2dCQUVuRCxJQUFJLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO29CQUM5QixXQUFPLElBQUksQ0FBQyxVQUFVLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFDO2lCQUNuQztnQkFFRCxXQUFPLElBQUksQ0FBQyxRQUFRLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxDQUFDLElBQUksQ0FBQyxJQUFJLENBQUMsR0FBRyxFQUFFLE9BQU8sSUFBSSxFQUFFLENBQUM7eUJBQzFELElBQUksQ0FBQyxVQUFBLEdBQUc7d0JBQ1AsS0FBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsSUFBSSxDQUFDLEdBQUcsR0FBRyxDQUFDO3dCQUNqQyxPQUFPLEdBQUcsQ0FBQztvQkFDYixDQUFDLENBQUMsRUFBQzs7O0tBQ047SUFFTSxzQkFBRyxHQUFWLFVBQ0UsSUFBWTtRQUVaLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQyxJQUFJLENBQUMsQ0FBQztJQUMvQixDQUFDO0lBL0JhLG1CQUFVLEdBQVcsVUFBVSxDQUFDO0lBZ0NoRCxlQUFDO0NBQUEsQUFqQ0QsQ0FBOEIsaUJBQU8sR0FpQ3BDO0FBakNZLDRCQUFRO0FBbUNyQixJQUFNLFFBQVEsR0FBRyxJQUFJLFFBQVEsRUFBRSxDQUFDO0FBQ2hDLFFBQVEsQ0FBQyxRQUFRLENBQUMsU0FBUyxFQUFFLElBQUksdUJBQWEsRUFBRSxDQUFDLENBQUM7QUFDbEQsUUFBUSxDQUFDLFFBQVEsQ0FBQyxNQUFNLEVBQUUsSUFBSSxvQkFBVSxFQUFFLENBQUMsQ0FBQztBQUU1QyxrQkFBZSxRQUFRLENBQUMiLCJzb3VyY2VzQ29udGVudCI6WyJcbi8qKlxuICogaW5kZXgudHNcbiAqIFxuICogQEF1dGhvciAgOmR0eXNreShkdHlza3lAb3V0bG9vay5jb20pXG4gKiBARGF0ZSAgICA6IDYvOS8yMDIxLCA2OjIzOjMzIFBNXG4gKi9cbmltcG9ydCBIT2JqZWN0IGZyb20gXCIuLi9jb3JlL0hPYmplY3RcIjtcbmltcG9ydCBMb2FkZXIgZnJvbSBcIi4vTG9hZGVyXCI7XG5pbXBvcnQgVGV4dHVyZUxvYWRlciBmcm9tIFwiLi9UZXh0dXJlTG9hZGVyXCI7XG5pbXBvcnQgR2xURkxvYWRlciBmcm9tIFwiLi9HbFRGTG9hZGVyXCI7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSVJlc291cmNlTG9hZGVyIHtcbiAgdGV4dHVyZTogVGV4dHVyZUxvYWRlcjtcbiAgZ2x0ZjogR2xURkxvYWRlcjtcbn1cblxuZXhwb3J0IGNsYXNzIFJlc291cmNlIGV4dGVuZHMgSE9iamVjdCB7XG4gIHB1YmxpYyBzdGF0aWMgQ0xBU1NfTkFNRTogc3RyaW5nID0gJ1Jlc291cmNlJztcbiAgcHVibGljIGlzUmVzb3VyY2U6IGJvb2xlYW4gPSB0cnVlO1xuXG4gIHByaXZhdGUgX2xvYWRlcnM6IHtbdHlwZTogc3RyaW5nXTogTG9hZGVyPGFueSwgYW55Pn0gPSB7fTtcbiAgcHJpdmF0ZSBfcmVzb3VyY2VzOiB7W25hbWU6IHN0cmluZ106IGFueX0gPSB7fTtcblxuICBwdWJsaWMgcmVnaXN0ZXI8VFR5cGUgZXh0ZW5kcyBrZXlvZiBJUmVzb3VyY2VMb2FkZXI+KFxuICAgIHR5cGU6IFRUeXBlLCBsb2FkZXI6IElSZXNvdXJjZUxvYWRlcltUVHlwZV1cbiAgKSB7XG4gICAgdGhpcy5fbG9hZGVyc1t0eXBlXSA9IGxvYWRlcjtcbiAgfVxuXG4gIHB1YmxpYyBhc3luYyBsb2FkPFRUeXBlIGV4dGVuZHMga2V5b2YgSVJlc291cmNlTG9hZGVyPihcbiAgICBpbmZvOiB7dHlwZTogVFR5cGUsIG5hbWU6IHN0cmluZywgc3JjOiBzdHJpbmd9LFxuICAgIG9wdGlvbnM/OiBJUmVzb3VyY2VMb2FkZXJbVFR5cGVdWyd0eXBlJ11bJ29wdGlvbnMnXVxuICApOiBQcm9taXNlPElSZXNvdXJjZUxvYWRlcltUVHlwZV1bJ3R5cGUnXVsncmVzb3VyY2UnXT4ge1xuICAgIGlmICh0aGlzLl9yZXNvdXJjZXNbaW5mby5uYW1lXSkge1xuICAgICAgcmV0dXJuIHRoaXMuX3Jlc291cmNlc1tpbmZvLm5hbWVdO1xuICAgIH1cblxuICAgIHJldHVybiB0aGlzLl9sb2FkZXJzW2luZm8udHlwZV0ubG9hZChpbmZvLnNyYywgb3B0aW9ucyB8fCB7fSlcbiAgICAgIC50aGVuKHJlcyA9PiB7XG4gICAgICAgIHRoaXMuX3Jlc291cmNlc1tpbmZvLm5hbWVdID0gcmVzO1xuICAgICAgICByZXR1cm4gcmVzO1xuICAgICAgfSk7XG4gIH1cblxuICBwdWJsaWMgZ2V0PFRUeXBlIGV4dGVuZHMga2V5b2YgSVJlc291cmNlTG9hZGVyPihcbiAgICBuYW1lOiBzdHJpbmdcbiAgKTogSVJlc291cmNlTG9hZGVyW1RUeXBlXVsndHlwZSddWydyZXNvdXJjZSddIHwgbnVsbCB7XG4gICAgcmV0dXJuIHRoaXMuX3Jlc291cmNlc1tuYW1lXTtcbiAgfVxufVxuXG5jb25zdCByZXNvdXJjZSA9IG5ldyBSZXNvdXJjZSgpO1xucmVzb3VyY2UucmVnaXN0ZXIoJ3RleHR1cmUnLCBuZXcgVGV4dHVyZUxvYWRlcigpKTtcbnJlc291cmNlLnJlZ2lzdGVyKCdnbHRmJywgbmV3IEdsVEZMb2FkZXIoKSk7XG5cbmV4cG9ydCBkZWZhdWx0IHJlc291cmNlO1xuIl19","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\n'use strict';\n\nvar punycode = require('punycode');\nvar util = require('./util');\n\nexports.parse = urlParse;\nexports.resolve = urlResolve;\nexports.resolveObject = urlResolveObject;\nexports.format = urlFormat;\n\nexports.Url = Url;\n\nfunction Url() {\n  this.protocol = null;\n  this.slashes = null;\n  this.auth = null;\n  this.host = null;\n  this.port = null;\n  this.hostname = null;\n  this.hash = null;\n  this.search = null;\n  this.query = null;\n  this.pathname = null;\n  this.path = null;\n  this.href = null;\n}\n\n// Reference: RFC 3986, RFC 1808, RFC 2396\n\n// define these here so at least they only have to be\n// compiled once on the first module load.\nvar protocolPattern = /^([a-z0-9.+-]+:)/i,\n    portPattern = /:[0-9]*$/,\n\n    // Special case for a simple path URL\n    simplePathPattern = /^(\\/\\/?(?!\\/)[^\\?\\s]*)(\\?[^\\s]*)?$/,\n\n    // RFC 2396: characters reserved for delimiting URLs.\n    // We actually just auto-escape these.\n    delims = ['<', '>', '\"', '`', ' ', '\\r', '\\n', '\\t'],\n\n    // RFC 2396: characters not allowed for various reasons.\n    unwise = ['{', '}', '|', '\\\\', '^', '`'].concat(delims),\n\n    // Allowed by RFCs, but cause of XSS attacks.  Always escape these.\n    autoEscape = ['\\''].concat(unwise),\n    // Characters that are never ever allowed in a hostname.\n    // Note that any invalid chars are also handled, but these\n    // are the ones that are *expected* to be seen, so we fast-path\n    // them.\n    nonHostChars = ['%', '/', '?', ';', '#'].concat(autoEscape),\n    hostEndingChars = ['/', '?', '#'],\n    hostnameMaxLen = 255,\n    hostnamePartPattern = /^[+a-z0-9A-Z_-]{0,63}$/,\n    hostnamePartStart = /^([+a-z0-9A-Z_-]{0,63})(.*)$/,\n    // protocols that can allow \"unsafe\" and \"unwise\" chars.\n    unsafeProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that never have a hostname.\n    hostlessProtocol = {\n      'javascript': true,\n      'javascript:': true\n    },\n    // protocols that always contain a // bit.\n    slashedProtocol = {\n      'http': true,\n      'https': true,\n      'ftp': true,\n      'gopher': true,\n      'file': true,\n      'http:': true,\n      'https:': true,\n      'ftp:': true,\n      'gopher:': true,\n      'file:': true\n    },\n    querystring = require('querystring');\n\nfunction urlParse(url, parseQueryString, slashesDenoteHost) {\n  if (url && util.isObject(url) && url instanceof Url) return url;\n\n  var u = new Url;\n  u.parse(url, parseQueryString, slashesDenoteHost);\n  return u;\n}\n\nUrl.prototype.parse = function(url, parseQueryString, slashesDenoteHost) {\n  if (!util.isString(url)) {\n    throw new TypeError(\"Parameter 'url' must be a string, not \" + typeof url);\n  }\n\n  // Copy chrome, IE, opera backslash-handling behavior.\n  // Back slashes before the query string get converted to forward slashes\n  // See: https://code.google.com/p/chromium/issues/detail?id=25916\n  var queryIndex = url.indexOf('?'),\n      splitter =\n          (queryIndex !== -1 && queryIndex < url.indexOf('#')) ? '?' : '#',\n      uSplit = url.split(splitter),\n      slashRegex = /\\\\/g;\n  uSplit[0] = uSplit[0].replace(slashRegex, '/');\n  url = uSplit.join(splitter);\n\n  var rest = url;\n\n  // trim before proceeding.\n  // This is to support parse stuff like \"  http://foo.com  \\n\"\n  rest = rest.trim();\n\n  if (!slashesDenoteHost && url.split('#').length === 1) {\n    // Try fast path regexp\n    var simplePath = simplePathPattern.exec(rest);\n    if (simplePath) {\n      this.path = rest;\n      this.href = rest;\n      this.pathname = simplePath[1];\n      if (simplePath[2]) {\n        this.search = simplePath[2];\n        if (parseQueryString) {\n          this.query = querystring.parse(this.search.substr(1));\n        } else {\n          this.query = this.search.substr(1);\n        }\n      } else if (parseQueryString) {\n        this.search = '';\n        this.query = {};\n      }\n      return this;\n    }\n  }\n\n  var proto = protocolPattern.exec(rest);\n  if (proto) {\n    proto = proto[0];\n    var lowerProto = proto.toLowerCase();\n    this.protocol = lowerProto;\n    rest = rest.substr(proto.length);\n  }\n\n  // figure out if it's got a host\n  // user@server is *always* interpreted as a hostname, and url\n  // resolution will treat //foo/bar as host=foo,path=bar because that's\n  // how the browser resolves relative URLs.\n  if (slashesDenoteHost || proto || rest.match(/^\\/\\/[^@\\/]+@[^@\\/]+/)) {\n    var slashes = rest.substr(0, 2) === '//';\n    if (slashes && !(proto && hostlessProtocol[proto])) {\n      rest = rest.substr(2);\n      this.slashes = true;\n    }\n  }\n\n  if (!hostlessProtocol[proto] &&\n      (slashes || (proto && !slashedProtocol[proto]))) {\n\n    // there's a hostname.\n    // the first instance of /, ?, ;, or # ends the host.\n    //\n    // If there is an @ in the hostname, then non-host chars *are* allowed\n    // to the left of the last @ sign, unless some host-ending character\n    // comes *before* the @-sign.\n    // URLs are obnoxious.\n    //\n    // ex:\n    // http://a@b@c/ => user:a@b host:c\n    // http://a@b?@c => user:a host:c path:/?@c\n\n    // v0.12 TODO(isaacs): This is not quite how Chrome does things.\n    // Review our test case against browsers more comprehensively.\n\n    // find the first instance of any hostEndingChars\n    var hostEnd = -1;\n    for (var i = 0; i < hostEndingChars.length; i++) {\n      var hec = rest.indexOf(hostEndingChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n\n    // at this point, either we have an explicit point where the\n    // auth portion cannot go past, or the last @ char is the decider.\n    var auth, atSign;\n    if (hostEnd === -1) {\n      // atSign can be anywhere.\n      atSign = rest.lastIndexOf('@');\n    } else {\n      // atSign must be in auth portion.\n      // http://a@b/c@d => host:b auth:a path:/c@d\n      atSign = rest.lastIndexOf('@', hostEnd);\n    }\n\n    // Now we have a portion which is definitely the auth.\n    // Pull that off.\n    if (atSign !== -1) {\n      auth = rest.slice(0, atSign);\n      rest = rest.slice(atSign + 1);\n      this.auth = decodeURIComponent(auth);\n    }\n\n    // the host is the remaining to the left of the first non-host char\n    hostEnd = -1;\n    for (var i = 0; i < nonHostChars.length; i++) {\n      var hec = rest.indexOf(nonHostChars[i]);\n      if (hec !== -1 && (hostEnd === -1 || hec < hostEnd))\n        hostEnd = hec;\n    }\n    // if we still have not hit it, then the entire thing is a host.\n    if (hostEnd === -1)\n      hostEnd = rest.length;\n\n    this.host = rest.slice(0, hostEnd);\n    rest = rest.slice(hostEnd);\n\n    // pull out port.\n    this.parseHost();\n\n    // we've indicated that there is a hostname,\n    // so even if it's empty, it has to be present.\n    this.hostname = this.hostname || '';\n\n    // if hostname begins with [ and ends with ]\n    // assume that it's an IPv6 address.\n    var ipv6Hostname = this.hostname[0] === '[' &&\n        this.hostname[this.hostname.length - 1] === ']';\n\n    // validate a little.\n    if (!ipv6Hostname) {\n      var hostparts = this.hostname.split(/\\./);\n      for (var i = 0, l = hostparts.length; i < l; i++) {\n        var part = hostparts[i];\n        if (!part) continue;\n        if (!part.match(hostnamePartPattern)) {\n          var newpart = '';\n          for (var j = 0, k = part.length; j < k; j++) {\n            if (part.charCodeAt(j) > 127) {\n              // we replace non-ASCII char with a temporary placeholder\n              // we need this to make sure size of hostname is not\n              // broken by replacing non-ASCII by nothing\n              newpart += 'x';\n            } else {\n              newpart += part[j];\n            }\n          }\n          // we test again with ASCII char only\n          if (!newpart.match(hostnamePartPattern)) {\n            var validParts = hostparts.slice(0, i);\n            var notHost = hostparts.slice(i + 1);\n            var bit = part.match(hostnamePartStart);\n            if (bit) {\n              validParts.push(bit[1]);\n              notHost.unshift(bit[2]);\n            }\n            if (notHost.length) {\n              rest = '/' + notHost.join('.') + rest;\n            }\n            this.hostname = validParts.join('.');\n            break;\n          }\n        }\n      }\n    }\n\n    if (this.hostname.length > hostnameMaxLen) {\n      this.hostname = '';\n    } else {\n      // hostnames are always lower case.\n      this.hostname = this.hostname.toLowerCase();\n    }\n\n    if (!ipv6Hostname) {\n      // IDNA Support: Returns a punycoded representation of \"domain\".\n      // It only converts parts of the domain name that\n      // have non-ASCII characters, i.e. it doesn't matter if\n      // you call it with a domain that already is ASCII-only.\n      this.hostname = punycode.toASCII(this.hostname);\n    }\n\n    var p = this.port ? ':' + this.port : '';\n    var h = this.hostname || '';\n    this.host = h + p;\n    this.href += this.host;\n\n    // strip [ and ] from the hostname\n    // the host field still retains them, though\n    if (ipv6Hostname) {\n      this.hostname = this.hostname.substr(1, this.hostname.length - 2);\n      if (rest[0] !== '/') {\n        rest = '/' + rest;\n      }\n    }\n  }\n\n  // now rest is set to the post-host stuff.\n  // chop off any delim chars.\n  if (!unsafeProtocol[lowerProto]) {\n\n    // First, make 100% sure that any \"autoEscape\" chars get\n    // escaped, even if encodeURIComponent doesn't think they\n    // need to be.\n    for (var i = 0, l = autoEscape.length; i < l; i++) {\n      var ae = autoEscape[i];\n      if (rest.indexOf(ae) === -1)\n        continue;\n      var esc = encodeURIComponent(ae);\n      if (esc === ae) {\n        esc = escape(ae);\n      }\n      rest = rest.split(ae).join(esc);\n    }\n  }\n\n\n  // chop off from the tail first.\n  var hash = rest.indexOf('#');\n  if (hash !== -1) {\n    // got a fragment string.\n    this.hash = rest.substr(hash);\n    rest = rest.slice(0, hash);\n  }\n  var qm = rest.indexOf('?');\n  if (qm !== -1) {\n    this.search = rest.substr(qm);\n    this.query = rest.substr(qm + 1);\n    if (parseQueryString) {\n      this.query = querystring.parse(this.query);\n    }\n    rest = rest.slice(0, qm);\n  } else if (parseQueryString) {\n    // no query string, but parseQueryString still requested\n    this.search = '';\n    this.query = {};\n  }\n  if (rest) this.pathname = rest;\n  if (slashedProtocol[lowerProto] &&\n      this.hostname && !this.pathname) {\n    this.pathname = '/';\n  }\n\n  //to support http.request\n  if (this.pathname || this.search) {\n    var p = this.pathname || '';\n    var s = this.search || '';\n    this.path = p + s;\n  }\n\n  // finally, reconstruct the href based on what has been validated.\n  this.href = this.format();\n  return this;\n};\n\n// format a parsed object into a url string\nfunction urlFormat(obj) {\n  // ensure it's an object, and not a string url.\n  // If it's an obj, this is a no-op.\n  // this way, you can call url_format() on strings\n  // to clean up potentially wonky urls.\n  if (util.isString(obj)) obj = urlParse(obj);\n  if (!(obj instanceof Url)) return Url.prototype.format.call(obj);\n  return obj.format();\n}\n\nUrl.prototype.format = function() {\n  var auth = this.auth || '';\n  if (auth) {\n    auth = encodeURIComponent(auth);\n    auth = auth.replace(/%3A/i, ':');\n    auth += '@';\n  }\n\n  var protocol = this.protocol || '',\n      pathname = this.pathname || '',\n      hash = this.hash || '',\n      host = false,\n      query = '';\n\n  if (this.host) {\n    host = auth + this.host;\n  } else if (this.hostname) {\n    host = auth + (this.hostname.indexOf(':') === -1 ?\n        this.hostname :\n        '[' + this.hostname + ']');\n    if (this.port) {\n      host += ':' + this.port;\n    }\n  }\n\n  if (this.query &&\n      util.isObject(this.query) &&\n      Object.keys(this.query).length) {\n    query = querystring.stringify(this.query);\n  }\n\n  var search = this.search || (query && ('?' + query)) || '';\n\n  if (protocol && protocol.substr(-1) !== ':') protocol += ':';\n\n  // only the slashedProtocols get the //.  Not mailto:, xmpp:, etc.\n  // unless they had them to begin with.\n  if (this.slashes ||\n      (!protocol || slashedProtocol[protocol]) && host !== false) {\n    host = '//' + (host || '');\n    if (pathname && pathname.charAt(0) !== '/') pathname = '/' + pathname;\n  } else if (!host) {\n    host = '';\n  }\n\n  if (hash && hash.charAt(0) !== '#') hash = '#' + hash;\n  if (search && search.charAt(0) !== '?') search = '?' + search;\n\n  pathname = pathname.replace(/[?#]/g, function(match) {\n    return encodeURIComponent(match);\n  });\n  search = search.replace('#', '%23');\n\n  return protocol + host + pathname + search + hash;\n};\n\nfunction urlResolve(source, relative) {\n  return urlParse(source, false, true).resolve(relative);\n}\n\nUrl.prototype.resolve = function(relative) {\n  return this.resolveObject(urlParse(relative, false, true)).format();\n};\n\nfunction urlResolveObject(source, relative) {\n  if (!source) return relative;\n  return urlParse(source, false, true).resolveObject(relative);\n}\n\nUrl.prototype.resolveObject = function(relative) {\n  if (util.isString(relative)) {\n    var rel = new Url();\n    rel.parse(relative, false, true);\n    relative = rel;\n  }\n\n  var result = new Url();\n  var tkeys = Object.keys(this);\n  for (var tk = 0; tk < tkeys.length; tk++) {\n    var tkey = tkeys[tk];\n    result[tkey] = this[tkey];\n  }\n\n  // hash is always overridden, no matter what.\n  // even href=\"\" will remove it.\n  result.hash = relative.hash;\n\n  // if the relative url is empty, then there's nothing left to do here.\n  if (relative.href === '') {\n    result.href = result.format();\n    return result;\n  }\n\n  // hrefs like //foo/bar always cut to the protocol.\n  if (relative.slashes && !relative.protocol) {\n    // take everything except the protocol from relative\n    var rkeys = Object.keys(relative);\n    for (var rk = 0; rk < rkeys.length; rk++) {\n      var rkey = rkeys[rk];\n      if (rkey !== 'protocol')\n        result[rkey] = relative[rkey];\n    }\n\n    //urlParse appends trailing / to urls like http://www.example.com\n    if (slashedProtocol[result.protocol] &&\n        result.hostname && !result.pathname) {\n      result.path = result.pathname = '/';\n    }\n\n    result.href = result.format();\n    return result;\n  }\n\n  if (relative.protocol && relative.protocol !== result.protocol) {\n    // if it's a known url protocol, then changing\n    // the protocol does weird things\n    // first, if it's not file:, then we MUST have a host,\n    // and if there was a path\n    // to begin with, then we MUST have a path.\n    // if it is file:, then the host is dropped,\n    // because that's known to be hostless.\n    // anything else is assumed to be absolute.\n    if (!slashedProtocol[relative.protocol]) {\n      var keys = Object.keys(relative);\n      for (var v = 0; v < keys.length; v++) {\n        var k = keys[v];\n        result[k] = relative[k];\n      }\n      result.href = result.format();\n      return result;\n    }\n\n    result.protocol = relative.protocol;\n    if (!relative.host && !hostlessProtocol[relative.protocol]) {\n      var relPath = (relative.pathname || '').split('/');\n      while (relPath.length && !(relative.host = relPath.shift()));\n      if (!relative.host) relative.host = '';\n      if (!relative.hostname) relative.hostname = '';\n      if (relPath[0] !== '') relPath.unshift('');\n      if (relPath.length < 2) relPath.unshift('');\n      result.pathname = relPath.join('/');\n    } else {\n      result.pathname = relative.pathname;\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    result.host = relative.host || '';\n    result.auth = relative.auth;\n    result.hostname = relative.hostname || relative.host;\n    result.port = relative.port;\n    // to support http.request\n    if (result.pathname || result.search) {\n      var p = result.pathname || '';\n      var s = result.search || '';\n      result.path = p + s;\n    }\n    result.slashes = result.slashes || relative.slashes;\n    result.href = result.format();\n    return result;\n  }\n\n  var isSourceAbs = (result.pathname && result.pathname.charAt(0) === '/'),\n      isRelAbs = (\n          relative.host ||\n          relative.pathname && relative.pathname.charAt(0) === '/'\n      ),\n      mustEndAbs = (isRelAbs || isSourceAbs ||\n                    (result.host && relative.pathname)),\n      removeAllDots = mustEndAbs,\n      srcPath = result.pathname && result.pathname.split('/') || [],\n      relPath = relative.pathname && relative.pathname.split('/') || [],\n      psychotic = result.protocol && !slashedProtocol[result.protocol];\n\n  // if the url is a non-slashed url, then relative\n  // links like ../.. should be able\n  // to crawl up to the hostname, as well.  This is strange.\n  // result.protocol has already been set by now.\n  // Later on, put the first path part into the host field.\n  if (psychotic) {\n    result.hostname = '';\n    result.port = null;\n    if (result.host) {\n      if (srcPath[0] === '') srcPath[0] = result.host;\n      else srcPath.unshift(result.host);\n    }\n    result.host = '';\n    if (relative.protocol) {\n      relative.hostname = null;\n      relative.port = null;\n      if (relative.host) {\n        if (relPath[0] === '') relPath[0] = relative.host;\n        else relPath.unshift(relative.host);\n      }\n      relative.host = null;\n    }\n    mustEndAbs = mustEndAbs && (relPath[0] === '' || srcPath[0] === '');\n  }\n\n  if (isRelAbs) {\n    // it's absolute.\n    result.host = (relative.host || relative.host === '') ?\n                  relative.host : result.host;\n    result.hostname = (relative.hostname || relative.hostname === '') ?\n                      relative.hostname : result.hostname;\n    result.search = relative.search;\n    result.query = relative.query;\n    srcPath = relPath;\n    // fall through to the dot-handling below.\n  } else if (relPath.length) {\n    // it's relative\n    // throw away the existing file, and take the new path instead.\n    if (!srcPath) srcPath = [];\n    srcPath.pop();\n    srcPath = srcPath.concat(relPath);\n    result.search = relative.search;\n    result.query = relative.query;\n  } else if (!util.isNullOrUndefined(relative.search)) {\n    // just pull out the search.\n    // like href='?foo'.\n    // Put this after the other two cases because it simplifies the booleans\n    if (psychotic) {\n      result.hostname = result.host = srcPath.shift();\n      //occationaly the auth can get stuck only in host\n      //this especially happens in cases like\n      //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n      var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                       result.host.split('@') : false;\n      if (authInHost) {\n        result.auth = authInHost.shift();\n        result.host = result.hostname = authInHost.shift();\n      }\n    }\n    result.search = relative.search;\n    result.query = relative.query;\n    //to support http.request\n    if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n      result.path = (result.pathname ? result.pathname : '') +\n                    (result.search ? result.search : '');\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  if (!srcPath.length) {\n    // no path at all.  easy.\n    // we've already handled the other stuff above.\n    result.pathname = null;\n    //to support http.request\n    if (result.search) {\n      result.path = '/' + result.search;\n    } else {\n      result.path = null;\n    }\n    result.href = result.format();\n    return result;\n  }\n\n  // if a url ENDs in . or .., then it must get a trailing slash.\n  // however, if it ends in anything else non-slashy,\n  // then it must NOT get a trailing slash.\n  var last = srcPath.slice(-1)[0];\n  var hasTrailingSlash = (\n      (result.host || relative.host || srcPath.length > 1) &&\n      (last === '.' || last === '..') || last === '');\n\n  // strip single dots, resolve double dots to parent dir\n  // if the path tries to go above the root, `up` ends up > 0\n  var up = 0;\n  for (var i = srcPath.length; i >= 0; i--) {\n    last = srcPath[i];\n    if (last === '.') {\n      srcPath.splice(i, 1);\n    } else if (last === '..') {\n      srcPath.splice(i, 1);\n      up++;\n    } else if (up) {\n      srcPath.splice(i, 1);\n      up--;\n    }\n  }\n\n  // if the path is allowed to go above the root, restore leading ..s\n  if (!mustEndAbs && !removeAllDots) {\n    for (; up--; up) {\n      srcPath.unshift('..');\n    }\n  }\n\n  if (mustEndAbs && srcPath[0] !== '' &&\n      (!srcPath[0] || srcPath[0].charAt(0) !== '/')) {\n    srcPath.unshift('');\n  }\n\n  if (hasTrailingSlash && (srcPath.join('/').substr(-1) !== '/')) {\n    srcPath.push('');\n  }\n\n  var isAbsolute = srcPath[0] === '' ||\n      (srcPath[0] && srcPath[0].charAt(0) === '/');\n\n  // put the host back\n  if (psychotic) {\n    result.hostname = result.host = isAbsolute ? '' :\n                                    srcPath.length ? srcPath.shift() : '';\n    //occationaly the auth can get stuck only in host\n    //this especially happens in cases like\n    //url.resolveObject('mailto:local1@domain1', 'local2@domain2')\n    var authInHost = result.host && result.host.indexOf('@') > 0 ?\n                     result.host.split('@') : false;\n    if (authInHost) {\n      result.auth = authInHost.shift();\n      result.host = result.hostname = authInHost.shift();\n    }\n  }\n\n  mustEndAbs = mustEndAbs || (result.host && srcPath.length);\n\n  if (mustEndAbs && !isAbsolute) {\n    srcPath.unshift('');\n  }\n\n  if (!srcPath.length) {\n    result.pathname = null;\n    result.path = null;\n  } else {\n    result.pathname = srcPath.join('/');\n  }\n\n  //to support request.http\n  if (!util.isNull(result.pathname) || !util.isNull(result.search)) {\n    result.path = (result.pathname ? result.pathname : '') +\n                  (result.search ? result.search : '');\n  }\n  result.auth = relative.auth || result.auth;\n  result.slashes = result.slashes || relative.slashes;\n  result.href = result.format();\n  return result;\n};\n\nUrl.prototype.parseHost = function() {\n  var host = this.host;\n  var port = portPattern.exec(host);\n  if (port) {\n    port = port[0];\n    if (port !== ':') {\n      this.port = port.substr(1);\n    }\n    host = host.substr(0, host.length - port.length);\n  }\n  if (host) this.hostname = host;\n};\n","'use strict';\n\nmodule.exports = {\n  isString: function(arg) {\n    return typeof(arg) === 'string';\n  },\n  isObject: function(arg) {\n    return typeof(arg) === 'object' && arg !== null;\n  },\n  isNull: function(arg) {\n    return arg === null;\n  },\n  isNullOrUndefined: function(arg) {\n    return arg == null;\n  }\n};\n","'use strict';\n/* eslint-disable\n  no-unused-vars\n*/\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nmodule.exports = /*#__PURE__*/function () {\n  function BaseClient() {\n    _classCallCheck(this, BaseClient);\n  }\n\n  _createClass(BaseClient, null, [{\n    key: \"getClientPath\",\n    value: function getClientPath(options) {\n      throw new Error('Client needs implementation');\n    }\n  }]);\n\n  return BaseClient;\n}();","'use strict';\n/* eslint-disable\n  no-unused-vars\n*/\n\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; if (typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\") { _typeof = function _typeof(obj) { return typeof obj; }; } else { _typeof = function _typeof(obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }; } return _typeof(obj); }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); return Constructor; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); if (superClass) _setPrototypeOf(subClass, superClass); }\n\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf || function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\n\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\n\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } return _assertThisInitialized(self); }\n\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\n\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Date.prototype.toString.call(Reflect.construct(Date, [], function () {})); return true; } catch (e) { return false; } }\n\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\n\nvar SockJS = require('sockjs-client/dist/sockjs');\n\nvar BaseClient = require('./BaseClient');\n\nmodule.exports = /*#__PURE__*/function (_BaseClient) {\n  _inherits(SockJSClient, _BaseClient);\n\n  var _super = _createSuper(SockJSClient);\n\n  function SockJSClient(url) {\n    var _this;\n\n    _classCallCheck(this, SockJSClient);\n\n    _this = _super.call(this);\n    _this.sock = new SockJS(url);\n\n    _this.sock.onerror = function (err) {// TODO: use logger to log the error event once client and client-src\n      // are reorganized to have the same directory structure\n    };\n\n    return _this;\n  }\n\n  _createClass(SockJSClient, [{\n    key: \"onOpen\",\n    value: function onOpen(f) {\n      this.sock.onopen = f;\n    }\n  }, {\n    key: \"onClose\",\n    value: function onClose(f) {\n      this.sock.onclose = f;\n    } // call f with the message string as the first argument\n\n  }, {\n    key: \"onMessage\",\n    value: function onMessage(f) {\n      this.sock.onmessage = function (e) {\n        f(e.data);\n      };\n    }\n  }], [{\n    key: \"getClientPath\",\n    value: function getClientPath(options) {\n      return require.resolve('./SockJSClient');\n    }\n  }]);\n\n  return SockJSClient;\n}(BaseClient);","'use strict';\n/* global __resourceQuery WorkerGlobalScope self */\n\n/* eslint prefer-destructuring: off */\n\nvar stripAnsi = require('strip-ansi');\n\nvar socket = require('./socket');\n\nvar overlay = require('./overlay');\n\nvar _require = require('./utils/log'),\n    log = _require.log,\n    setLogLevel = _require.setLogLevel;\n\nvar sendMessage = require('./utils/sendMessage');\n\nvar reloadApp = require('./utils/reloadApp');\n\nvar createSocketUrl = require('./utils/createSocketUrl');\n\nvar status = {\n  isUnloading: false,\n  currentHash: ''\n};\nvar options = {\n  hot: false,\n  hotReload: true,\n  liveReload: false,\n  initial: true,\n  useWarningOverlay: false,\n  useErrorOverlay: false,\n  useProgress: false\n};\nvar socketUrl = createSocketUrl(__resourceQuery);\nself.addEventListener('beforeunload', function () {\n  status.isUnloading = true;\n});\n\nif (typeof window !== 'undefined') {\n  var qs = window.location.search.toLowerCase();\n  options.hotReload = qs.indexOf('hotreload=false') === -1;\n}\n\nvar onSocketMessage = {\n  hot: function hot() {\n    options.hot = true;\n    log.info('[WDS] Hot Module Replacement enabled.');\n  },\n  liveReload: function liveReload() {\n    options.liveReload = true;\n    log.info('[WDS] Live Reloading enabled.');\n  },\n  invalid: function invalid() {\n    log.info('[WDS] App updated. Recompiling...'); // fixes #1042. overlay doesn't clear if errors are fixed but warnings remain.\n\n    if (options.useWarningOverlay || options.useErrorOverlay) {\n      overlay.clear();\n    }\n\n    sendMessage('Invalid');\n  },\n  hash: function hash(_hash) {\n    status.currentHash = _hash;\n  },\n  'still-ok': function stillOk() {\n    log.info('[WDS] Nothing changed.');\n\n    if (options.useWarningOverlay || options.useErrorOverlay) {\n      overlay.clear();\n    }\n\n    sendMessage('StillOk');\n  },\n  'log-level': function logLevel(level) {\n    var hotCtx = require.context('webpack/hot', false, /^\\.\\/log$/);\n\n    if (hotCtx.keys().indexOf('./log') !== -1) {\n      hotCtx('./log').setLogLevel(level);\n    }\n\n    setLogLevel(level);\n  },\n  overlay: function overlay(value) {\n    if (typeof document !== 'undefined') {\n      if (typeof value === 'boolean') {\n        options.useWarningOverlay = false;\n        options.useErrorOverlay = value;\n      } else if (value) {\n        options.useWarningOverlay = value.warnings;\n        options.useErrorOverlay = value.errors;\n      }\n    }\n  },\n  progress: function progress(_progress) {\n    if (typeof document !== 'undefined') {\n      options.useProgress = _progress;\n    }\n  },\n  'progress-update': function progressUpdate(data) {\n    if (options.useProgress) {\n      log.info(\"[WDS] \".concat(data.percent, \"% - \").concat(data.msg, \".\"));\n    }\n\n    sendMessage('Progress', data);\n  },\n  ok: function ok() {\n    sendMessage('Ok');\n\n    if (options.useWarningOverlay || options.useErrorOverlay) {\n      overlay.clear();\n    }\n\n    if (options.initial) {\n      return options.initial = false;\n    } // eslint-disable-line no-return-assign\n\n\n    reloadApp(options, status);\n  },\n  'content-changed': function contentChanged() {\n    log.info('[WDS] Content base changed. Reloading...');\n    self.location.reload();\n  },\n  warnings: function warnings(_warnings) {\n    log.warn('[WDS] Warnings while compiling.');\n\n    var strippedWarnings = _warnings.map(function (warning) {\n      return stripAnsi(warning);\n    });\n\n    sendMessage('Warnings', strippedWarnings);\n\n    for (var i = 0; i < strippedWarnings.length; i++) {\n      log.warn(strippedWarnings[i]);\n    }\n\n    if (options.useWarningOverlay) {\n      overlay.showMessage(_warnings);\n    }\n\n    if (options.initial) {\n      return options.initial = false;\n    } // eslint-disable-line no-return-assign\n\n\n    reloadApp(options, status);\n  },\n  errors: function errors(_errors) {\n    log.error('[WDS] Errors while compiling. Reload prevented.');\n\n    var strippedErrors = _errors.map(function (error) {\n      return stripAnsi(error);\n    });\n\n    sendMessage('Errors', strippedErrors);\n\n    for (var i = 0; i < strippedErrors.length; i++) {\n      log.error(strippedErrors[i]);\n    }\n\n    if (options.useErrorOverlay) {\n      overlay.showMessage(_errors);\n    }\n\n    options.initial = false;\n  },\n  error: function error(_error) {\n    log.error(_error);\n  },\n  close: function close() {\n    log.error('[WDS] Disconnected!');\n    sendMessage('Close');\n  }\n};\nsocket(socketUrl, onSocketMessage);","'use strict'; // The error overlay is inspired (and mostly copied) from Create React App (https://github.com/facebookincubator/create-react-app)\n// They, in turn, got inspired by webpack-hot-middleware (https://github.com/glenjamin/webpack-hot-middleware).\n\nvar ansiHTML = require('ansi-html-community');\n\nvar _require = require('html-entities'),\n    AllHtmlEntities = _require.AllHtmlEntities;\n\nvar entities = new AllHtmlEntities();\nvar colors = {\n  reset: ['transparent', 'transparent'],\n  black: '181818',\n  red: 'E36049',\n  green: 'B3CB74',\n  yellow: 'FFD080',\n  blue: '7CAFC2',\n  magenta: '7FACCA',\n  cyan: 'C3C2EF',\n  lightgrey: 'EBE7E3',\n  darkgrey: '6D7891'\n};\nvar overlayIframe = null;\nvar overlayDiv = null;\nvar lastOnOverlayDivReady = null;\nansiHTML.setColors(colors);\n\nfunction createOverlayIframe(onIframeLoad) {\n  var iframe = document.createElement('iframe');\n  iframe.id = 'webpack-dev-server-client-overlay';\n  iframe.src = 'about:blank';\n  iframe.style.position = 'fixed';\n  iframe.style.left = 0;\n  iframe.style.top = 0;\n  iframe.style.right = 0;\n  iframe.style.bottom = 0;\n  iframe.style.width = '100vw';\n  iframe.style.height = '100vh';\n  iframe.style.border = 'none';\n  iframe.style.zIndex = 9999999999;\n  iframe.onload = onIframeLoad;\n  return iframe;\n}\n\nfunction addOverlayDivTo(iframe) {\n  var div = iframe.contentDocument.createElement('div');\n  div.id = 'webpack-dev-server-client-overlay-div';\n  div.style.position = 'fixed';\n  div.style.boxSizing = 'border-box';\n  div.style.left = 0;\n  div.style.top = 0;\n  div.style.right = 0;\n  div.style.bottom = 0;\n  div.style.width = '100vw';\n  div.style.height = '100vh';\n  div.style.backgroundColor = 'rgba(0, 0, 0, 0.85)';\n  div.style.color = '#E8E8E8';\n  div.style.fontFamily = 'Menlo, Consolas, monospace';\n  div.style.fontSize = 'large';\n  div.style.padding = '2rem';\n  div.style.lineHeight = '1.2';\n  div.style.whiteSpace = 'pre-wrap';\n  div.style.overflow = 'auto';\n  iframe.contentDocument.body.appendChild(div);\n  return div;\n}\n\nfunction ensureOverlayDivExists(onOverlayDivReady) {\n  if (overlayDiv) {\n    // Everything is ready, call the callback right away.\n    onOverlayDivReady(overlayDiv);\n    return;\n  } // Creating an iframe may be asynchronous so we'll schedule the callback.\n  // In case of multiple calls, last callback wins.\n\n\n  lastOnOverlayDivReady = onOverlayDivReady;\n\n  if (overlayIframe) {\n    // We've already created it.\n    return;\n  } // Create iframe and, when it is ready, a div inside it.\n\n\n  overlayIframe = createOverlayIframe(function () {\n    overlayDiv = addOverlayDivTo(overlayIframe); // Now we can talk!\n\n    lastOnOverlayDivReady(overlayDiv);\n  }); // Zalgo alert: onIframeLoad() will be called either synchronously\n  // or asynchronously depending on the browser.\n  // We delay adding it so `overlayIframe` is set when `onIframeLoad` fires.\n\n  document.body.appendChild(overlayIframe);\n} // Successful compilation.\n\n\nfunction clear() {\n  if (!overlayDiv) {\n    // It is not there in the first place.\n    return;\n  } // Clean up and reset internal state.\n\n\n  document.body.removeChild(overlayIframe);\n  overlayDiv = null;\n  overlayIframe = null;\n  lastOnOverlayDivReady = null;\n} // Compilation with errors (e.g. syntax error or missing modules).\n\n\nfunction showMessage(messages) {\n  ensureOverlayDivExists(function (div) {\n    // Make it look similar to our terminal.\n    div.innerHTML = \"<span style=\\\"color: #\".concat(colors.red, \"\\\">Failed to compile.</span><br><br>\").concat(ansiHTML(entities.encode(messages[0])));\n  });\n}\n\nmodule.exports = {\n  clear: clear,\n  showMessage: showMessage\n};","'use strict';\n/* global __webpack_dev_server_client__ */\n\n/* eslint-disable\n  camelcase\n*/\n// this SockJSClient is here as a default fallback, in case inline mode\n// is off or the client is not injected. This will be switched to\n// WebsocketClient when it becomes the default\n// important: the path to SockJSClient here is made to work in the 'client'\n// directory, but is updated via the webpack compilation when compiled from\n// the 'client-src' directory\n\nvar Client = typeof __webpack_dev_server_client__ !== 'undefined' ? __webpack_dev_server_client__ : // eslint-disable-next-line import/no-unresolved\nrequire('./clients/SockJSClient');\nvar retries = 0;\nvar client = null;\n\nvar socket = function initSocket(url, handlers) {\n  client = new Client(url);\n  client.onOpen(function () {\n    retries = 0;\n  });\n  client.onClose(function () {\n    if (retries === 0) {\n      handlers.close();\n    } // Try to reconnect.\n\n\n    client = null; // After 10 retries stop trying, to prevent logspam.\n\n    if (retries <= 10) {\n      // Exponentially increase timeout to reconnect.\n      // Respectfully copied from the package `got`.\n      // eslint-disable-next-line no-mixed-operators, no-restricted-properties\n      var retryInMs = 1000 * Math.pow(2, retries) + Math.random() * 100;\n      retries += 1;\n      setTimeout(function () {\n        socket(url, handlers);\n      }, retryInMs);\n    }\n  });\n  client.onMessage(function (data) {\n    var msg = JSON.parse(data);\n\n    if (handlers[msg.type]) {\n      handlers[msg.type](msg.data);\n    }\n  });\n};\n\nmodule.exports = socket;","'use strict';\n/* global self */\n\nvar url = require('url');\n\nvar getCurrentScriptSource = require('./getCurrentScriptSource');\n\nfunction createSocketUrl(resourceQuery, currentLocation) {\n  var urlParts;\n\n  if (typeof resourceQuery === 'string' && resourceQuery !== '') {\n    // If this bundle is inlined, use the resource query to get the correct url.\n    // format is like `?http://0.0.0.0:8096&sockPort=8097&sockHost=localhost`\n    urlParts = url.parse(resourceQuery // strip leading `?` from query string to get a valid URL\n    .substr(1) // replace first `&` with `?` to have a valid query string\n    .replace('&', '?'), true);\n  } else {\n    // Else, get the url from the <script> this file was called with.\n    var scriptHost = getCurrentScriptSource();\n    urlParts = url.parse(scriptHost || '/', true, true);\n  } // Use parameter to allow passing location in unit tests\n\n\n  if (typeof currentLocation === 'string' && currentLocation !== '') {\n    currentLocation = url.parse(currentLocation);\n  } else {\n    currentLocation = self.location;\n  }\n\n  return getSocketUrl(urlParts, currentLocation);\n}\n/*\n * Gets socket URL based on Script Source/Location\n * (scriptSrc: URL, location: URL) -> URL\n */\n\n\nfunction getSocketUrl(urlParts, loc) {\n  var auth = urlParts.auth,\n      query = urlParts.query;\n  var hostname = urlParts.hostname,\n      protocol = urlParts.protocol,\n      port = urlParts.port;\n\n  if (!port || port === '0') {\n    port = loc.port;\n  } // check ipv4 and ipv6 `all hostname`\n  // why do we need this check?\n  // hostname n/a for file protocol (example, when using electron, ionic)\n  // see: https://github.com/webpack/webpack-dev-server/pull/384\n\n\n  if ((hostname === '0.0.0.0' || hostname === '::') && loc.hostname && loc.protocol.indexOf('http') === 0) {\n    hostname = loc.hostname;\n  } // `hostname` can be empty when the script path is relative. In that case, specifying\n  // a protocol would result in an invalid URL.\n  // When https is used in the app, secure websockets are always necessary\n  // because the browser doesn't accept non-secure websockets.\n\n\n  if (hostname && hostname !== '127.0.0.1' && (loc.protocol === 'https:' || urlParts.hostname === '0.0.0.0')) {\n    protocol = loc.protocol;\n  } // all of these sock url params are optionally passed in through\n  // resourceQuery, so we need to fall back to the default if\n  // they are not provided\n\n\n  var sockHost = query.sockHost || hostname;\n  var sockPath = query.sockPath || '/sockjs-node';\n  var sockPort = query.sockPort || port;\n\n  if (sockPort === 'location') {\n    sockPort = loc.port;\n  }\n\n  return url.format({\n    protocol: protocol,\n    auth: auth,\n    hostname: sockHost,\n    port: sockPort,\n    // If sockPath is provided it'll be passed in via the resourceQuery as a\n    // query param so it has to be parsed out of the querystring in order for the\n    // client to open the socket to the correct location.\n    pathname: sockPath\n  });\n}\n\nmodule.exports = createSocketUrl;","'use strict';\n\nfunction getCurrentScriptSource() {\n  // `document.currentScript` is the most accurate way to find the current script,\n  // but is not supported in all browsers.\n  if (document.currentScript) {\n    return document.currentScript.getAttribute('src');\n  } // Fall back to getting all scripts in the document.\n\n\n  var scriptElements = document.scripts || [];\n  var currentScript = scriptElements[scriptElements.length - 1];\n\n  if (currentScript) {\n    return currentScript.getAttribute('src');\n  } // Fail as there was no script to use.\n\n\n  throw new Error('[WDS] Failed to get current script source.');\n}\n\nmodule.exports = getCurrentScriptSource;","'use strict';\n\nvar log = require('loglevel').getLogger('webpack-dev-server');\n\nvar INFO = 'info';\nvar WARN = 'warn';\nvar ERROR = 'error';\nvar DEBUG = 'debug';\nvar TRACE = 'trace';\nvar SILENT = 'silent'; // deprecated\n// TODO: remove these at major released\n// https://github.com/webpack/webpack-dev-server/pull/1825\n\nvar WARNING = 'warning';\nvar NONE = 'none'; // Set the default log level\n\nlog.setDefaultLevel(INFO);\n\nfunction setLogLevel(level) {\n  switch (level) {\n    case INFO:\n    case WARN:\n    case ERROR:\n    case DEBUG:\n    case TRACE:\n      log.setLevel(level);\n      break;\n    // deprecated\n\n    case WARNING:\n      // loglevel's warning name is different from webpack's\n      log.setLevel('warn');\n      break;\n    // deprecated\n\n    case NONE:\n    case SILENT:\n      log.disableAll();\n      break;\n\n    default:\n      log.error(\"[WDS] Unknown clientLogLevel '\".concat(level, \"'\"));\n  }\n}\n\nmodule.exports = {\n  log: log,\n  setLogLevel: setLogLevel\n};","'use strict';\n/* global WorkerGlobalScope self */\n\nvar _require = require('./log'),\n    log = _require.log;\n\nfunction reloadApp(_ref, _ref2) {\n  var hotReload = _ref.hotReload,\n      hot = _ref.hot,\n      liveReload = _ref.liveReload;\n  var isUnloading = _ref2.isUnloading,\n      currentHash = _ref2.currentHash;\n\n  if (isUnloading || !hotReload) {\n    return;\n  }\n\n  if (hot) {\n    log.info('[WDS] App hot update...');\n\n    var hotEmitter = require('webpack/hot/emitter');\n\n    hotEmitter.emit('webpackHotUpdate', currentHash);\n\n    if (typeof self !== 'undefined' && self.window) {\n      // broadcast update to window\n      self.postMessage(\"webpackHotUpdate\".concat(currentHash), '*');\n    }\n  } // allow refreshing the page only if liveReload isn't disabled\n  else if (liveReload) {\n      var rootWindow = self; // use parent window for reload (in case we're in an iframe with no valid src)\n\n      var intervalId = self.setInterval(function () {\n        if (rootWindow.location.protocol !== 'about:') {\n          // reload immediately if protocol is valid\n          applyReload(rootWindow, intervalId);\n        } else {\n          rootWindow = rootWindow.parent;\n\n          if (rootWindow.parent === rootWindow) {\n            // if parent equals current window we've reached the root which would continue forever, so trigger a reload anyways\n            applyReload(rootWindow, intervalId);\n          }\n        }\n      });\n    }\n\n  function applyReload(rootWindow, intervalId) {\n    clearInterval(intervalId);\n    log.info('[WDS] App updated. Reloading...');\n    rootWindow.location.reload();\n  }\n}\n\nmodule.exports = reloadApp;","'use strict';\n/* global __resourceQuery WorkerGlobalScope self */\n// Send messages to the outside, so plugins can consume it.\n\nfunction sendMsg(type, data) {\n  if (typeof self !== 'undefined' && (typeof WorkerGlobalScope === 'undefined' || !(self instanceof WorkerGlobalScope))) {\n    self.postMessage({\n      type: \"webpack\".concat(type),\n      data: data\n    }, '*');\n  }\n}\n\nmodule.exports = sendMsg;","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\n/* globals __webpack_hash__ */\nif (module.hot) {\n\tvar lastHash;\n\tvar upToDate = function upToDate() {\n\t\treturn lastHash.indexOf(__webpack_hash__) >= 0;\n\t};\n\tvar log = require(\"./log\");\n\tvar check = function check() {\n\t\tmodule.hot\n\t\t\t.check(true)\n\t\t\t.then(function (updatedModules) {\n\t\t\t\tif (!updatedModules) {\n\t\t\t\t\tlog(\"warning\", \"[HMR] Cannot find update. Need to do a full reload!\");\n\t\t\t\t\tlog(\n\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\"[HMR] (Probably because of restarting the webpack-dev-server)\"\n\t\t\t\t\t);\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (!upToDate()) {\n\t\t\t\t\tcheck();\n\t\t\t\t}\n\n\t\t\t\trequire(\"./log-apply-result\")(updatedModules, updatedModules);\n\n\t\t\t\tif (upToDate()) {\n\t\t\t\t\tlog(\"info\", \"[HMR] App is up to date.\");\n\t\t\t\t}\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tvar status = module.hot.status();\n\t\t\t\tif ([\"abort\", \"fail\"].indexOf(status) >= 0) {\n\t\t\t\t\tlog(\n\t\t\t\t\t\t\"warning\",\n\t\t\t\t\t\t\"[HMR] Cannot apply update. Need to do a full reload!\"\n\t\t\t\t\t);\n\t\t\t\t\tlog(\"warning\", \"[HMR] \" + log.formatError(err));\n\t\t\t\t\twindow.location.reload();\n\t\t\t\t} else {\n\t\t\t\t\tlog(\"warning\", \"[HMR] Update failed: \" + log.formatError(err));\n\t\t\t\t}\n\t\t\t});\n\t};\n\tvar hotEmitter = require(\"./emitter\");\n\thotEmitter.on(\"webpackHotUpdate\", function (currentHash) {\n\t\tlastHash = currentHash;\n\t\tif (!upToDate() && module.hot.status() === \"idle\") {\n\t\t\tlog(\"info\", \"[HMR] Checking for updates on the server...\");\n\t\t\tcheck();\n\t\t}\n\t});\n\tlog(\"info\", \"[HMR] Waiting for update signal from WDS...\");\n} else {\n\tthrow new Error(\"[HMR] Hot Module Replacement is disabled.\");\n}\n","var EventEmitter = require(\"events\");\nmodule.exports = new EventEmitter();\n","/*\n\tMIT License http://www.opensource.org/licenses/mit-license.php\n\tAuthor Tobias Koppers @sokra\n*/\nmodule.exports = function (updatedModules, renewedModules) {\n\tvar unacceptedModules = updatedModules.filter(function (moduleId) {\n\t\treturn renewedModules && renewedModules.indexOf(moduleId) < 0;\n\t});\n\tvar log = require(\"./log\");\n\n\tif (unacceptedModules.length > 0) {\n\t\tlog(\n\t\t\t\"warning\",\n\t\t\t\"[HMR] The following modules couldn't be hot updated: (They would need a full reload!)\"\n\t\t);\n\t\tunacceptedModules.forEach(function (moduleId) {\n\t\t\tlog(\"warning\", \"[HMR]  - \" + moduleId);\n\t\t});\n\t}\n\n\tif (!renewedModules || renewedModules.length === 0) {\n\t\tlog(\"info\", \"[HMR] Nothing hot updated.\");\n\t} else {\n\t\tlog(\"info\", \"[HMR] Updated modules:\");\n\t\trenewedModules.forEach(function (moduleId) {\n\t\t\tif (typeof moduleId === \"string\" && moduleId.indexOf(\"!\") !== -1) {\n\t\t\t\tvar parts = moduleId.split(\"!\");\n\t\t\t\tlog.groupCollapsed(\"info\", \"[HMR]  - \" + parts.pop());\n\t\t\t\tlog(\"info\", \"[HMR]  - \" + moduleId);\n\t\t\t\tlog.groupEnd(\"info\");\n\t\t\t} else {\n\t\t\t\tlog(\"info\", \"[HMR]  - \" + moduleId);\n\t\t\t}\n\t\t});\n\t\tvar numberIds = renewedModules.every(function (moduleId) {\n\t\t\treturn typeof moduleId === \"number\";\n\t\t});\n\t\tif (numberIds)\n\t\t\tlog(\n\t\t\t\t\"info\",\n\t\t\t\t'[HMR] Consider using the optimization.moduleIds: \"named\" for module names.'\n\t\t\t);\n\t}\n};\n","var logLevel = \"info\";\n\nfunction dummy() {}\n\nfunction shouldLog(level) {\n\tvar shouldLog =\n\t\t(logLevel === \"info\" && level === \"info\") ||\n\t\t([\"info\", \"warning\"].indexOf(logLevel) >= 0 && level === \"warning\") ||\n\t\t([\"info\", \"warning\", \"error\"].indexOf(logLevel) >= 0 && level === \"error\");\n\treturn shouldLog;\n}\n\nfunction logGroup(logFn) {\n\treturn function (level, msg) {\n\t\tif (shouldLog(level)) {\n\t\t\tlogFn(msg);\n\t\t}\n\t};\n}\n\nmodule.exports = function (level, msg) {\n\tif (shouldLog(level)) {\n\t\tif (level === \"info\") {\n\t\t\tconsole.log(msg);\n\t\t} else if (level === \"warning\") {\n\t\t\tconsole.warn(msg);\n\t\t} else if (level === \"error\") {\n\t\t\tconsole.error(msg);\n\t\t}\n\t}\n};\n\n/* eslint-disable node/no-unsupported-features/node-builtins */\nvar group = console.group || dummy;\nvar groupCollapsed = console.groupCollapsed || dummy;\nvar groupEnd = console.groupEnd || dummy;\n/* eslint-enable node/no-unsupported-features/node-builtins */\n\nmodule.exports.group = logGroup(group);\n\nmodule.exports.groupCollapsed = logGroup(groupCollapsed);\n\nmodule.exports.groupEnd = logGroup(groupEnd);\n\nmodule.exports.setLogLevel = function (level) {\n\tlogLevel = level;\n};\n\nmodule.exports.formatError = function (err) {\n\tvar message = err.message;\n\tvar stack = err.stack;\n\tif (!stack) {\n\t\treturn message;\n\t} else if (stack.indexOf(message) < 0) {\n\t\treturn message + \"\\n\" + stack;\n\t} else {\n\t\treturn stack;\n\t}\n};\n","var map = {\n\t\"./log\": \"./node_modules/_webpack@5.64.3@webpack/hot/log.js\"\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = \"./node_modules/webpack/hot sync ^\\\\.\\\\/log$\";","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\tif (cachedModule.error !== undefined) throw cachedModule.error;\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\tid: moduleId,\n\t\tloaded: false,\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\ttry {\n\t\tvar execOptions = { id: moduleId, module: module, factory: __webpack_modules__[moduleId], require: __webpack_require__ };\n\t\t__webpack_require__.i.forEach(function(handler) { handler(execOptions); });\n\t\tmodule = execOptions.module;\n\t\texecOptions.factory.call(module.exports, module, module.exports, execOptions.require);\n\t} catch(e) {\n\t\tmodule.error = e;\n\t\tthrow e;\n\t}\n\n\t// Flag the module as loaded\n\tmodule.loaded = true;\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n// expose the modules object (__webpack_modules__)\n__webpack_require__.m = __webpack_modules__;\n\n// expose the module cache\n__webpack_require__.c = __webpack_module_cache__;\n\n// expose the module execution interceptor\n__webpack_require__.i = [];\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","// This function allow to reference all chunks\n__webpack_require__.hu = (chunkId) => {\n\t// return url for filenames based on template\n\treturn \"\" + chunkId + \".\" + __webpack_require__.h() + \".hot-update.js\";\n};","__webpack_require__.hmrF = () => (\"main.\" + __webpack_require__.h() + \".hot-update.json\");","__webpack_require__.h = () => (\"f0e8a0cca2c8e5b3f6aa\")","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","var inProgress = {};\nvar dataWebpackPrefix = \"ray-tracing-webgpu:\";\n// loadScript function to load a script via script tag\n__webpack_require__.l = (url, done, key, chunkId) => {\n\tif(inProgress[url]) { inProgress[url].push(done); return; }\n\tvar script, needAttach;\n\tif(key !== undefined) {\n\t\tvar scripts = document.getElementsByTagName(\"script\");\n\t\tfor(var i = 0; i < scripts.length; i++) {\n\t\t\tvar s = scripts[i];\n\t\t\tif(s.getAttribute(\"src\") == url || s.getAttribute(\"data-webpack\") == dataWebpackPrefix + key) { script = s; break; }\n\t\t}\n\t}\n\tif(!script) {\n\t\tneedAttach = true;\n\t\tscript = document.createElement('script');\n\n\t\tscript.charset = 'utf-8';\n\t\tscript.timeout = 120;\n\t\tif (__webpack_require__.nc) {\n\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n\t\t}\n\t\tscript.setAttribute(\"data-webpack\", dataWebpackPrefix + key);\n\t\tscript.src = url;\n\t}\n\tinProgress[url] = [done];\n\tvar onScriptComplete = (prev, event) => {\n\t\t// avoid mem leaks in IE.\n\t\tscript.onerror = script.onload = null;\n\t\tclearTimeout(timeout);\n\t\tvar doneFns = inProgress[url];\n\t\tdelete inProgress[url];\n\t\tscript.parentNode && script.parentNode.removeChild(script);\n\t\tdoneFns && doneFns.forEach((fn) => (fn(event)));\n\t\tif(prev) return prev(event);\n\t}\n\t;\n\tvar timeout = setTimeout(onScriptComplete.bind(null, undefined, { type: 'timeout', target: script }), 120000);\n\tscript.onerror = onScriptComplete.bind(null, script.onerror);\n\tscript.onload = onScriptComplete.bind(null, script.onload);\n\tneedAttach && document.head.appendChild(script);\n};","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","__webpack_require__.nmd = (module) => {\n\tmodule.paths = [];\n\tif (!module.children) module.children = [];\n\treturn module;\n};","var currentModuleData = {};\nvar installedModules = __webpack_require__.c;\n\n// module and require creation\nvar currentChildModule;\nvar currentParents = [];\n\n// status\nvar registeredStatusHandlers = [];\nvar currentStatus = \"idle\";\n\n// while downloading\nvar blockingPromises;\n\n// The update info\nvar currentUpdateApplyHandlers;\nvar queuedInvalidatedModules;\n\n// eslint-disable-next-line no-unused-vars\n__webpack_require__.hmrD = currentModuleData;\n\n__webpack_require__.i.push(function (options) {\n\tvar module = options.module;\n\tvar require = createRequire(options.require, options.id);\n\tmodule.hot = createModuleHotObject(options.id, module);\n\tmodule.parents = currentParents;\n\tmodule.children = [];\n\tcurrentParents = [];\n\toptions.require = require;\n});\n\n__webpack_require__.hmrC = {};\n__webpack_require__.hmrI = {};\n\nfunction createRequire(require, moduleId) {\n\tvar me = installedModules[moduleId];\n\tif (!me) return require;\n\tvar fn = function (request) {\n\t\tif (me.hot.active) {\n\t\t\tif (installedModules[request]) {\n\t\t\t\tvar parents = installedModules[request].parents;\n\t\t\t\tif (parents.indexOf(moduleId) === -1) {\n\t\t\t\t\tparents.push(moduleId);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tcurrentParents = [moduleId];\n\t\t\t\tcurrentChildModule = request;\n\t\t\t}\n\t\t\tif (me.children.indexOf(request) === -1) {\n\t\t\t\tme.children.push(request);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(\n\t\t\t\t\"[HMR] unexpected require(\" +\n\t\t\t\t\trequest +\n\t\t\t\t\t\") from disposed module \" +\n\t\t\t\t\tmoduleId\n\t\t\t);\n\t\t\tcurrentParents = [];\n\t\t}\n\t\treturn require(request);\n\t};\n\tvar createPropertyDescriptor = function (name) {\n\t\treturn {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn require[name];\n\t\t\t},\n\t\t\tset: function (value) {\n\t\t\t\trequire[name] = value;\n\t\t\t}\n\t\t};\n\t};\n\tfor (var name in require) {\n\t\tif (Object.prototype.hasOwnProperty.call(require, name) && name !== \"e\") {\n\t\t\tObject.defineProperty(fn, name, createPropertyDescriptor(name));\n\t\t}\n\t}\n\tfn.e = function (chunkId) {\n\t\treturn trackBlockingPromise(require.e(chunkId));\n\t};\n\treturn fn;\n}\n\nfunction createModuleHotObject(moduleId, me) {\n\tvar _main = currentChildModule !== moduleId;\n\tvar hot = {\n\t\t// private stuff\n\t\t_acceptedDependencies: {},\n\t\t_acceptedErrorHandlers: {},\n\t\t_declinedDependencies: {},\n\t\t_selfAccepted: false,\n\t\t_selfDeclined: false,\n\t\t_selfInvalidated: false,\n\t\t_disposeHandlers: [],\n\t\t_main: _main,\n\t\t_requireSelf: function () {\n\t\t\tcurrentParents = me.parents.slice();\n\t\t\tcurrentChildModule = _main ? undefined : moduleId;\n\t\t\t__webpack_require__(moduleId);\n\t\t},\n\n\t\t// Module API\n\t\tactive: true,\n\t\taccept: function (dep, callback, errorHandler) {\n\t\t\tif (dep === undefined) hot._selfAccepted = true;\n\t\t\telse if (typeof dep === \"function\") hot._selfAccepted = dep;\n\t\t\telse if (typeof dep === \"object\" && dep !== null) {\n\t\t\t\tfor (var i = 0; i < dep.length; i++) {\n\t\t\t\t\thot._acceptedDependencies[dep[i]] = callback || function () {};\n\t\t\t\t\thot._acceptedErrorHandlers[dep[i]] = errorHandler;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\thot._acceptedDependencies[dep] = callback || function () {};\n\t\t\t\thot._acceptedErrorHandlers[dep] = errorHandler;\n\t\t\t}\n\t\t},\n\t\tdecline: function (dep) {\n\t\t\tif (dep === undefined) hot._selfDeclined = true;\n\t\t\telse if (typeof dep === \"object\" && dep !== null)\n\t\t\t\tfor (var i = 0; i < dep.length; i++)\n\t\t\t\t\thot._declinedDependencies[dep[i]] = true;\n\t\t\telse hot._declinedDependencies[dep] = true;\n\t\t},\n\t\tdispose: function (callback) {\n\t\t\thot._disposeHandlers.push(callback);\n\t\t},\n\t\taddDisposeHandler: function (callback) {\n\t\t\thot._disposeHandlers.push(callback);\n\t\t},\n\t\tremoveDisposeHandler: function (callback) {\n\t\t\tvar idx = hot._disposeHandlers.indexOf(callback);\n\t\t\tif (idx >= 0) hot._disposeHandlers.splice(idx, 1);\n\t\t},\n\t\tinvalidate: function () {\n\t\t\tthis._selfInvalidated = true;\n\t\t\tswitch (currentStatus) {\n\t\t\t\tcase \"idle\":\n\t\t\t\t\tcurrentUpdateApplyHandlers = [];\n\t\t\t\t\tObject.keys(__webpack_require__.hmrI).forEach(function (key) {\n\t\t\t\t\t\t__webpack_require__.hmrI[key](\n\t\t\t\t\t\t\tmoduleId,\n\t\t\t\t\t\t\tcurrentUpdateApplyHandlers\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tsetStatus(\"ready\");\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"ready\":\n\t\t\t\t\tObject.keys(__webpack_require__.hmrI).forEach(function (key) {\n\t\t\t\t\t\t__webpack_require__.hmrI[key](\n\t\t\t\t\t\t\tmoduleId,\n\t\t\t\t\t\t\tcurrentUpdateApplyHandlers\n\t\t\t\t\t\t);\n\t\t\t\t\t});\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"prepare\":\n\t\t\t\tcase \"check\":\n\t\t\t\tcase \"dispose\":\n\t\t\t\tcase \"apply\":\n\t\t\t\t\t(queuedInvalidatedModules = queuedInvalidatedModules || []).push(\n\t\t\t\t\t\tmoduleId\n\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// ignore requests in error states\n\t\t\t\t\tbreak;\n\t\t\t}\n\t\t},\n\n\t\t// Management API\n\t\tcheck: hotCheck,\n\t\tapply: hotApply,\n\t\tstatus: function (l) {\n\t\t\tif (!l) return currentStatus;\n\t\t\tregisteredStatusHandlers.push(l);\n\t\t},\n\t\taddStatusHandler: function (l) {\n\t\t\tregisteredStatusHandlers.push(l);\n\t\t},\n\t\tremoveStatusHandler: function (l) {\n\t\t\tvar idx = registeredStatusHandlers.indexOf(l);\n\t\t\tif (idx >= 0) registeredStatusHandlers.splice(idx, 1);\n\t\t},\n\n\t\t//inherit from previous dispose call\n\t\tdata: currentModuleData[moduleId]\n\t};\n\tcurrentChildModule = undefined;\n\treturn hot;\n}\n\nfunction setStatus(newStatus) {\n\tcurrentStatus = newStatus;\n\tvar results = [];\n\n\tfor (var i = 0; i < registeredStatusHandlers.length; i++)\n\t\tresults[i] = registeredStatusHandlers[i].call(null, newStatus);\n\n\treturn Promise.all(results);\n}\n\nfunction trackBlockingPromise(promise) {\n\tswitch (currentStatus) {\n\t\tcase \"ready\":\n\t\t\tsetStatus(\"prepare\");\n\t\t\tblockingPromises.push(promise);\n\t\t\twaitForBlockingPromises(function () {\n\t\t\t\treturn setStatus(\"ready\");\n\t\t\t});\n\t\t\treturn promise;\n\t\tcase \"prepare\":\n\t\t\tblockingPromises.push(promise);\n\t\t\treturn promise;\n\t\tdefault:\n\t\t\treturn promise;\n\t}\n}\n\nfunction waitForBlockingPromises(fn) {\n\tif (blockingPromises.length === 0) return fn();\n\tvar blocker = blockingPromises;\n\tblockingPromises = [];\n\treturn Promise.all(blocker).then(function () {\n\t\treturn waitForBlockingPromises(fn);\n\t});\n}\n\nfunction hotCheck(applyOnUpdate) {\n\tif (currentStatus !== \"idle\") {\n\t\tthrow new Error(\"check() is only allowed in idle status\");\n\t}\n\treturn setStatus(\"check\")\n\t\t.then(__webpack_require__.hmrM)\n\t\t.then(function (update) {\n\t\t\tif (!update) {\n\t\t\t\treturn setStatus(applyInvalidatedModules() ? \"ready\" : \"idle\").then(\n\t\t\t\t\tfunction () {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t);\n\t\t\t}\n\n\t\t\treturn setStatus(\"prepare\").then(function () {\n\t\t\t\tvar updatedModules = [];\n\t\t\t\tblockingPromises = [];\n\t\t\t\tcurrentUpdateApplyHandlers = [];\n\n\t\t\t\treturn Promise.all(\n\t\t\t\t\tObject.keys(__webpack_require__.hmrC).reduce(function (\n\t\t\t\t\t\tpromises,\n\t\t\t\t\t\tkey\n\t\t\t\t\t) {\n\t\t\t\t\t\t__webpack_require__.hmrC[key](\n\t\t\t\t\t\t\tupdate.c,\n\t\t\t\t\t\t\tupdate.r,\n\t\t\t\t\t\t\tupdate.m,\n\t\t\t\t\t\t\tpromises,\n\t\t\t\t\t\t\tcurrentUpdateApplyHandlers,\n\t\t\t\t\t\t\tupdatedModules\n\t\t\t\t\t\t);\n\t\t\t\t\t\treturn promises;\n\t\t\t\t\t},\n\t\t\t\t\t[])\n\t\t\t\t).then(function () {\n\t\t\t\t\treturn waitForBlockingPromises(function () {\n\t\t\t\t\t\tif (applyOnUpdate) {\n\t\t\t\t\t\t\treturn internalApply(applyOnUpdate);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn setStatus(\"ready\").then(function () {\n\t\t\t\t\t\t\t\treturn updatedModules;\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t});\n\t\t});\n}\n\nfunction hotApply(options) {\n\tif (currentStatus !== \"ready\") {\n\t\treturn Promise.resolve().then(function () {\n\t\t\tthrow new Error(\"apply() is only allowed in ready status\");\n\t\t});\n\t}\n\treturn internalApply(options);\n}\n\nfunction internalApply(options) {\n\toptions = options || {};\n\n\tapplyInvalidatedModules();\n\n\tvar results = currentUpdateApplyHandlers.map(function (handler) {\n\t\treturn handler(options);\n\t});\n\tcurrentUpdateApplyHandlers = undefined;\n\n\tvar errors = results\n\t\t.map(function (r) {\n\t\t\treturn r.error;\n\t\t})\n\t\t.filter(Boolean);\n\n\tif (errors.length > 0) {\n\t\treturn setStatus(\"abort\").then(function () {\n\t\t\tthrow errors[0];\n\t\t});\n\t}\n\n\t// Now in \"dispose\" phase\n\tvar disposePromise = setStatus(\"dispose\");\n\n\tresults.forEach(function (result) {\n\t\tif (result.dispose) result.dispose();\n\t});\n\n\t// Now in \"apply\" phase\n\tvar applyPromise = setStatus(\"apply\");\n\n\tvar error;\n\tvar reportError = function (err) {\n\t\tif (!error) error = err;\n\t};\n\n\tvar outdatedModules = [];\n\tresults.forEach(function (result) {\n\t\tif (result.apply) {\n\t\t\tvar modules = result.apply(reportError);\n\t\t\tif (modules) {\n\t\t\t\tfor (var i = 0; i < modules.length; i++) {\n\t\t\t\t\toutdatedModules.push(modules[i]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t});\n\n\treturn Promise.all([disposePromise, applyPromise]).then(function () {\n\t\t// handle errors in accept handlers and self accepted module load\n\t\tif (error) {\n\t\t\treturn setStatus(\"fail\").then(function () {\n\t\t\t\tthrow error;\n\t\t\t});\n\t\t}\n\n\t\tif (queuedInvalidatedModules) {\n\t\t\treturn internalApply(options).then(function (list) {\n\t\t\t\toutdatedModules.forEach(function (moduleId) {\n\t\t\t\t\tif (list.indexOf(moduleId) < 0) list.push(moduleId);\n\t\t\t\t});\n\t\t\t\treturn list;\n\t\t\t});\n\t\t}\n\n\t\treturn setStatus(\"idle\").then(function () {\n\t\t\treturn outdatedModules;\n\t\t});\n\t});\n}\n\nfunction applyInvalidatedModules() {\n\tif (queuedInvalidatedModules) {\n\t\tif (!currentUpdateApplyHandlers) currentUpdateApplyHandlers = [];\n\t\tObject.keys(__webpack_require__.hmrI).forEach(function (key) {\n\t\t\tqueuedInvalidatedModules.forEach(function (moduleId) {\n\t\t\t\t__webpack_require__.hmrI[key](\n\t\t\t\t\tmoduleId,\n\t\t\t\t\tcurrentUpdateApplyHandlers\n\t\t\t\t);\n\t\t\t});\n\t\t});\n\t\tqueuedInvalidatedModules = undefined;\n\t\treturn true;\n\t}\n}","__webpack_require__.p = \"/\";","// no baseURI\n\n// object to store loaded and loading chunks\n// undefined = chunk not loaded, null = chunk preloaded/prefetched\n// [resolve, reject, Promise] = chunk loading, 0 = chunk loaded\nvar installedChunks = __webpack_require__.hmrS_jsonp = __webpack_require__.hmrS_jsonp || {\n\t\"main\": 0\n};\n\n// no chunk on demand loading\n\n// no prefetching\n\n// no preloaded\n\nvar currentUpdatedModulesList;\nvar waitingUpdateResolves = {};\nfunction loadUpdateChunk(chunkId) {\n\treturn new Promise((resolve, reject) => {\n\t\twaitingUpdateResolves[chunkId] = resolve;\n\t\t// start update chunk loading\n\t\tvar url = __webpack_require__.p + __webpack_require__.hu(chunkId);\n\t\t// create error before stack unwound to get useful stacktrace later\n\t\tvar error = new Error();\n\t\tvar loadingEnded = (event) => {\n\t\t\tif(waitingUpdateResolves[chunkId]) {\n\t\t\t\twaitingUpdateResolves[chunkId] = undefined\n\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n\t\t\t\tvar realSrc = event && event.target && event.target.src;\n\t\t\t\terror.message = 'Loading hot update chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n\t\t\t\terror.name = 'ChunkLoadError';\n\t\t\t\terror.type = errorType;\n\t\t\t\terror.request = realSrc;\n\t\t\t\treject(error);\n\t\t\t}\n\t\t};\n\t\t__webpack_require__.l(url, loadingEnded);\n\t});\n}\n\nself[\"webpackHotUpdateray_tracing_webgpu\"] = (chunkId, moreModules, runtime) => {\n\tfor(var moduleId in moreModules) {\n\t\tif(__webpack_require__.o(moreModules, moduleId)) {\n\t\t\tcurrentUpdate[moduleId] = moreModules[moduleId];\n\t\t\tif(currentUpdatedModulesList) currentUpdatedModulesList.push(moduleId);\n\t\t}\n\t}\n\tif(runtime) currentUpdateRuntime.push(runtime);\n\tif(waitingUpdateResolves[chunkId]) {\n\t\twaitingUpdateResolves[chunkId]();\n\t\twaitingUpdateResolves[chunkId] = undefined;\n\t}\n};\n\nvar currentUpdateChunks;\nvar currentUpdate;\nvar currentUpdateRemovedChunks;\nvar currentUpdateRuntime;\nfunction applyHandler(options) {\n\tif (__webpack_require__.f) delete __webpack_require__.f.jsonpHmr;\n\tcurrentUpdateChunks = undefined;\n\tfunction getAffectedModuleEffects(updateModuleId) {\n\t\tvar outdatedModules = [updateModuleId];\n\t\tvar outdatedDependencies = {};\n\n\t\tvar queue = outdatedModules.map(function (id) {\n\t\t\treturn {\n\t\t\t\tchain: [id],\n\t\t\t\tid: id\n\t\t\t};\n\t\t});\n\t\twhile (queue.length > 0) {\n\t\t\tvar queueItem = queue.pop();\n\t\t\tvar moduleId = queueItem.id;\n\t\t\tvar chain = queueItem.chain;\n\t\t\tvar module = __webpack_require__.c[moduleId];\n\t\t\tif (\n\t\t\t\t!module ||\n\t\t\t\t(module.hot._selfAccepted && !module.hot._selfInvalidated)\n\t\t\t)\n\t\t\t\tcontinue;\n\t\t\tif (module.hot._selfDeclined) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"self-declined\",\n\t\t\t\t\tchain: chain,\n\t\t\t\t\tmoduleId: moduleId\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (module.hot._main) {\n\t\t\t\treturn {\n\t\t\t\t\ttype: \"unaccepted\",\n\t\t\t\t\tchain: chain,\n\t\t\t\t\tmoduleId: moduleId\n\t\t\t\t};\n\t\t\t}\n\t\t\tfor (var i = 0; i < module.parents.length; i++) {\n\t\t\t\tvar parentId = module.parents[i];\n\t\t\t\tvar parent = __webpack_require__.c[parentId];\n\t\t\t\tif (!parent) continue;\n\t\t\t\tif (parent.hot._declinedDependencies[moduleId]) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\ttype: \"declined\",\n\t\t\t\t\t\tchain: chain.concat([parentId]),\n\t\t\t\t\t\tmoduleId: moduleId,\n\t\t\t\t\t\tparentId: parentId\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tif (outdatedModules.indexOf(parentId) !== -1) continue;\n\t\t\t\tif (parent.hot._acceptedDependencies[moduleId]) {\n\t\t\t\t\tif (!outdatedDependencies[parentId])\n\t\t\t\t\t\toutdatedDependencies[parentId] = [];\n\t\t\t\t\taddAllToSet(outdatedDependencies[parentId], [moduleId]);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\t\t\t\tdelete outdatedDependencies[parentId];\n\t\t\t\toutdatedModules.push(parentId);\n\t\t\t\tqueue.push({\n\t\t\t\t\tchain: chain.concat([parentId]),\n\t\t\t\t\tid: parentId\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\ttype: \"accepted\",\n\t\t\tmoduleId: updateModuleId,\n\t\t\toutdatedModules: outdatedModules,\n\t\t\toutdatedDependencies: outdatedDependencies\n\t\t};\n\t}\n\n\tfunction addAllToSet(a, b) {\n\t\tfor (var i = 0; i < b.length; i++) {\n\t\t\tvar item = b[i];\n\t\t\tif (a.indexOf(item) === -1) a.push(item);\n\t\t}\n\t}\n\n\t// at begin all updates modules are outdated\n\t// the \"outdated\" status can propagate to parents if they don't accept the children\n\tvar outdatedDependencies = {};\n\tvar outdatedModules = [];\n\tvar appliedUpdate = {};\n\n\tvar warnUnexpectedRequire = function warnUnexpectedRequire(module) {\n\t\tconsole.warn(\n\t\t\t\"[HMR] unexpected require(\" + module.id + \") to disposed module\"\n\t\t);\n\t};\n\n\tfor (var moduleId in currentUpdate) {\n\t\tif (__webpack_require__.o(currentUpdate, moduleId)) {\n\t\t\tvar newModuleFactory = currentUpdate[moduleId];\n\t\t\t/** @type {TODO} */\n\t\t\tvar result;\n\t\t\tif (newModuleFactory) {\n\t\t\t\tresult = getAffectedModuleEffects(moduleId);\n\t\t\t} else {\n\t\t\t\tresult = {\n\t\t\t\t\ttype: \"disposed\",\n\t\t\t\t\tmoduleId: moduleId\n\t\t\t\t};\n\t\t\t}\n\t\t\t/** @type {Error|false} */\n\t\t\tvar abortError = false;\n\t\t\tvar doApply = false;\n\t\t\tvar doDispose = false;\n\t\t\tvar chainInfo = \"\";\n\t\t\tif (result.chain) {\n\t\t\t\tchainInfo = \"\\nUpdate propagation: \" + result.chain.join(\" -> \");\n\t\t\t}\n\t\t\tswitch (result.type) {\n\t\t\t\tcase \"self-declined\":\n\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n\t\t\t\t\tif (!options.ignoreDeclined)\n\t\t\t\t\t\tabortError = new Error(\n\t\t\t\t\t\t\t\"Aborted because of self decline: \" +\n\t\t\t\t\t\t\t\tresult.moduleId +\n\t\t\t\t\t\t\t\tchainInfo\n\t\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"declined\":\n\t\t\t\t\tif (options.onDeclined) options.onDeclined(result);\n\t\t\t\t\tif (!options.ignoreDeclined)\n\t\t\t\t\t\tabortError = new Error(\n\t\t\t\t\t\t\t\"Aborted because of declined dependency: \" +\n\t\t\t\t\t\t\t\tresult.moduleId +\n\t\t\t\t\t\t\t\t\" in \" +\n\t\t\t\t\t\t\t\tresult.parentId +\n\t\t\t\t\t\t\t\tchainInfo\n\t\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"unaccepted\":\n\t\t\t\t\tif (options.onUnaccepted) options.onUnaccepted(result);\n\t\t\t\t\tif (!options.ignoreUnaccepted)\n\t\t\t\t\t\tabortError = new Error(\n\t\t\t\t\t\t\t\"Aborted because \" + moduleId + \" is not accepted\" + chainInfo\n\t\t\t\t\t\t);\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"accepted\":\n\t\t\t\t\tif (options.onAccepted) options.onAccepted(result);\n\t\t\t\t\tdoApply = true;\n\t\t\t\t\tbreak;\n\t\t\t\tcase \"disposed\":\n\t\t\t\t\tif (options.onDisposed) options.onDisposed(result);\n\t\t\t\t\tdoDispose = true;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthrow new Error(\"Unexception type \" + result.type);\n\t\t\t}\n\t\t\tif (abortError) {\n\t\t\t\treturn {\n\t\t\t\t\terror: abortError\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (doApply) {\n\t\t\t\tappliedUpdate[moduleId] = newModuleFactory;\n\t\t\t\taddAllToSet(outdatedModules, result.outdatedModules);\n\t\t\t\tfor (moduleId in result.outdatedDependencies) {\n\t\t\t\t\tif (__webpack_require__.o(result.outdatedDependencies, moduleId)) {\n\t\t\t\t\t\tif (!outdatedDependencies[moduleId])\n\t\t\t\t\t\t\toutdatedDependencies[moduleId] = [];\n\t\t\t\t\t\taddAllToSet(\n\t\t\t\t\t\t\toutdatedDependencies[moduleId],\n\t\t\t\t\t\t\tresult.outdatedDependencies[moduleId]\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (doDispose) {\n\t\t\t\taddAllToSet(outdatedModules, [result.moduleId]);\n\t\t\t\tappliedUpdate[moduleId] = warnUnexpectedRequire;\n\t\t\t}\n\t\t}\n\t}\n\tcurrentUpdate = undefined;\n\n\t// Store self accepted outdated modules to require them later by the module system\n\tvar outdatedSelfAcceptedModules = [];\n\tfor (var j = 0; j < outdatedModules.length; j++) {\n\t\tvar outdatedModuleId = outdatedModules[j];\n\t\tvar module = __webpack_require__.c[outdatedModuleId];\n\t\tif (\n\t\t\tmodule &&\n\t\t\t(module.hot._selfAccepted || module.hot._main) &&\n\t\t\t// removed self-accepted modules should not be required\n\t\t\tappliedUpdate[outdatedModuleId] !== warnUnexpectedRequire &&\n\t\t\t// when called invalidate self-accepting is not possible\n\t\t\t!module.hot._selfInvalidated\n\t\t) {\n\t\t\toutdatedSelfAcceptedModules.push({\n\t\t\t\tmodule: outdatedModuleId,\n\t\t\t\trequire: module.hot._requireSelf,\n\t\t\t\terrorHandler: module.hot._selfAccepted\n\t\t\t});\n\t\t}\n\t}\n\n\tvar moduleOutdatedDependencies;\n\n\treturn {\n\t\tdispose: function () {\n\t\t\tcurrentUpdateRemovedChunks.forEach(function (chunkId) {\n\t\t\t\tdelete installedChunks[chunkId];\n\t\t\t});\n\t\t\tcurrentUpdateRemovedChunks = undefined;\n\n\t\t\tvar idx;\n\t\t\tvar queue = outdatedModules.slice();\n\t\t\twhile (queue.length > 0) {\n\t\t\t\tvar moduleId = queue.pop();\n\t\t\t\tvar module = __webpack_require__.c[moduleId];\n\t\t\t\tif (!module) continue;\n\n\t\t\t\tvar data = {};\n\n\t\t\t\t// Call dispose handlers\n\t\t\t\tvar disposeHandlers = module.hot._disposeHandlers;\n\t\t\t\tfor (j = 0; j < disposeHandlers.length; j++) {\n\t\t\t\t\tdisposeHandlers[j].call(null, data);\n\t\t\t\t}\n\t\t\t\t__webpack_require__.hmrD[moduleId] = data;\n\n\t\t\t\t// disable module (this disables requires from this module)\n\t\t\t\tmodule.hot.active = false;\n\n\t\t\t\t// remove module from cache\n\t\t\t\tdelete __webpack_require__.c[moduleId];\n\n\t\t\t\t// when disposing there is no need to call dispose handler\n\t\t\t\tdelete outdatedDependencies[moduleId];\n\n\t\t\t\t// remove \"parents\" references from all children\n\t\t\t\tfor (j = 0; j < module.children.length; j++) {\n\t\t\t\t\tvar child = __webpack_require__.c[module.children[j]];\n\t\t\t\t\tif (!child) continue;\n\t\t\t\t\tidx = child.parents.indexOf(moduleId);\n\t\t\t\t\tif (idx >= 0) {\n\t\t\t\t\t\tchild.parents.splice(idx, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// remove outdated dependency from module children\n\t\t\tvar dependency;\n\t\t\tfor (var outdatedModuleId in outdatedDependencies) {\n\t\t\t\tif (__webpack_require__.o(outdatedDependencies, outdatedModuleId)) {\n\t\t\t\t\tmodule = __webpack_require__.c[outdatedModuleId];\n\t\t\t\t\tif (module) {\n\t\t\t\t\t\tmoduleOutdatedDependencies =\n\t\t\t\t\t\t\toutdatedDependencies[outdatedModuleId];\n\t\t\t\t\t\tfor (j = 0; j < moduleOutdatedDependencies.length; j++) {\n\t\t\t\t\t\t\tdependency = moduleOutdatedDependencies[j];\n\t\t\t\t\t\t\tidx = module.children.indexOf(dependency);\n\t\t\t\t\t\t\tif (idx >= 0) module.children.splice(idx, 1);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t},\n\t\tapply: function (reportError) {\n\t\t\t// insert new code\n\t\t\tfor (var updateModuleId in appliedUpdate) {\n\t\t\t\tif (__webpack_require__.o(appliedUpdate, updateModuleId)) {\n\t\t\t\t\t__webpack_require__.m[updateModuleId] = appliedUpdate[updateModuleId];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// run new runtime modules\n\t\t\tfor (var i = 0; i < currentUpdateRuntime.length; i++) {\n\t\t\t\tcurrentUpdateRuntime[i](__webpack_require__);\n\t\t\t}\n\n\t\t\t// call accept handlers\n\t\t\tfor (var outdatedModuleId in outdatedDependencies) {\n\t\t\t\tif (__webpack_require__.o(outdatedDependencies, outdatedModuleId)) {\n\t\t\t\t\tvar module = __webpack_require__.c[outdatedModuleId];\n\t\t\t\t\tif (module) {\n\t\t\t\t\t\tmoduleOutdatedDependencies =\n\t\t\t\t\t\t\toutdatedDependencies[outdatedModuleId];\n\t\t\t\t\t\tvar callbacks = [];\n\t\t\t\t\t\tvar errorHandlers = [];\n\t\t\t\t\t\tvar dependenciesForCallbacks = [];\n\t\t\t\t\t\tfor (var j = 0; j < moduleOutdatedDependencies.length; j++) {\n\t\t\t\t\t\t\tvar dependency = moduleOutdatedDependencies[j];\n\t\t\t\t\t\t\tvar acceptCallback =\n\t\t\t\t\t\t\t\tmodule.hot._acceptedDependencies[dependency];\n\t\t\t\t\t\t\tvar errorHandler =\n\t\t\t\t\t\t\t\tmodule.hot._acceptedErrorHandlers[dependency];\n\t\t\t\t\t\t\tif (acceptCallback) {\n\t\t\t\t\t\t\t\tif (callbacks.indexOf(acceptCallback) !== -1) continue;\n\t\t\t\t\t\t\t\tcallbacks.push(acceptCallback);\n\t\t\t\t\t\t\t\terrorHandlers.push(errorHandler);\n\t\t\t\t\t\t\t\tdependenciesForCallbacks.push(dependency);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\tfor (var k = 0; k < callbacks.length; k++) {\n\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\tcallbacks[k].call(null, moduleOutdatedDependencies);\n\t\t\t\t\t\t\t} catch (err) {\n\t\t\t\t\t\t\t\tif (typeof errorHandlers[k] === \"function\") {\n\t\t\t\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\t\t\t\terrorHandlers[k](err, {\n\t\t\t\t\t\t\t\t\t\t\tmoduleId: outdatedModuleId,\n\t\t\t\t\t\t\t\t\t\t\tdependencyId: dependenciesForCallbacks[k]\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t} catch (err2) {\n\t\t\t\t\t\t\t\t\t\tif (options.onErrored) {\n\t\t\t\t\t\t\t\t\t\t\toptions.onErrored({\n\t\t\t\t\t\t\t\t\t\t\t\ttype: \"accept-error-handler-errored\",\n\t\t\t\t\t\t\t\t\t\t\t\tmoduleId: outdatedModuleId,\n\t\t\t\t\t\t\t\t\t\t\t\tdependencyId: dependenciesForCallbacks[k],\n\t\t\t\t\t\t\t\t\t\t\t\terror: err2,\n\t\t\t\t\t\t\t\t\t\t\t\toriginalError: err\n\t\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\tif (!options.ignoreErrored) {\n\t\t\t\t\t\t\t\t\t\t\treportError(err2);\n\t\t\t\t\t\t\t\t\t\t\treportError(err);\n\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t\t\tif (options.onErrored) {\n\t\t\t\t\t\t\t\t\t\toptions.onErrored({\n\t\t\t\t\t\t\t\t\t\t\ttype: \"accept-errored\",\n\t\t\t\t\t\t\t\t\t\t\tmoduleId: outdatedModuleId,\n\t\t\t\t\t\t\t\t\t\t\tdependencyId: dependenciesForCallbacks[k],\n\t\t\t\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tif (!options.ignoreErrored) {\n\t\t\t\t\t\t\t\t\t\treportError(err);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Load self accepted modules\n\t\t\tfor (var o = 0; o < outdatedSelfAcceptedModules.length; o++) {\n\t\t\t\tvar item = outdatedSelfAcceptedModules[o];\n\t\t\t\tvar moduleId = item.module;\n\t\t\t\ttry {\n\t\t\t\t\titem.require(moduleId);\n\t\t\t\t} catch (err) {\n\t\t\t\t\tif (typeof item.errorHandler === \"function\") {\n\t\t\t\t\t\ttry {\n\t\t\t\t\t\t\titem.errorHandler(err, {\n\t\t\t\t\t\t\t\tmoduleId: moduleId,\n\t\t\t\t\t\t\t\tmodule: __webpack_require__.c[moduleId]\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t} catch (err2) {\n\t\t\t\t\t\t\tif (options.onErrored) {\n\t\t\t\t\t\t\t\toptions.onErrored({\n\t\t\t\t\t\t\t\t\ttype: \"self-accept-error-handler-errored\",\n\t\t\t\t\t\t\t\t\tmoduleId: moduleId,\n\t\t\t\t\t\t\t\t\terror: err2,\n\t\t\t\t\t\t\t\t\toriginalError: err\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tif (!options.ignoreErrored) {\n\t\t\t\t\t\t\t\treportError(err2);\n\t\t\t\t\t\t\t\treportError(err);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (options.onErrored) {\n\t\t\t\t\t\t\toptions.onErrored({\n\t\t\t\t\t\t\t\ttype: \"self-accept-errored\",\n\t\t\t\t\t\t\t\tmoduleId: moduleId,\n\t\t\t\t\t\t\t\terror: err\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t}\n\t\t\t\t\t\tif (!options.ignoreErrored) {\n\t\t\t\t\t\t\treportError(err);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\treturn outdatedModules;\n\t\t}\n\t};\n}\n__webpack_require__.hmrI.jsonp = function (moduleId, applyHandlers) {\n\tif (!currentUpdate) {\n\t\tcurrentUpdate = {};\n\t\tcurrentUpdateRuntime = [];\n\t\tcurrentUpdateRemovedChunks = [];\n\t\tapplyHandlers.push(applyHandler);\n\t}\n\tif (!__webpack_require__.o(currentUpdate, moduleId)) {\n\t\tcurrentUpdate[moduleId] = __webpack_require__.m[moduleId];\n\t}\n};\n__webpack_require__.hmrC.jsonp = function (\n\tchunkIds,\n\tremovedChunks,\n\tremovedModules,\n\tpromises,\n\tapplyHandlers,\n\tupdatedModulesList\n) {\n\tapplyHandlers.push(applyHandler);\n\tcurrentUpdateChunks = {};\n\tcurrentUpdateRemovedChunks = removedChunks;\n\tcurrentUpdate = removedModules.reduce(function (obj, key) {\n\t\tobj[key] = false;\n\t\treturn obj;\n\t}, {});\n\tcurrentUpdateRuntime = [];\n\tchunkIds.forEach(function (chunkId) {\n\t\tif (\n\t\t\t__webpack_require__.o(installedChunks, chunkId) &&\n\t\t\tinstalledChunks[chunkId] !== undefined\n\t\t) {\n\t\t\tpromises.push(loadUpdateChunk(chunkId, updatedModulesList));\n\t\t\tcurrentUpdateChunks[chunkId] = true;\n\t\t}\n\t});\n\tif (__webpack_require__.f) {\n\t\t__webpack_require__.f.jsonpHmr = function (chunkId, promises) {\n\t\t\tif (\n\t\t\t\tcurrentUpdateChunks &&\n\t\t\t\t!__webpack_require__.o(currentUpdateChunks, chunkId) &&\n\t\t\t\t__webpack_require__.o(installedChunks, chunkId) &&\n\t\t\t\tinstalledChunks[chunkId] !== undefined\n\t\t\t) {\n\t\t\t\tpromises.push(loadUpdateChunk(chunkId));\n\t\t\t\tcurrentUpdateChunks[chunkId] = true;\n\t\t\t}\n\t\t};\n\t}\n};\n\n__webpack_require__.hmrM = () => {\n\tif (typeof fetch === \"undefined\") throw new Error(\"No browser support: need fetch API\");\n\treturn fetch(__webpack_require__.p + __webpack_require__.hmrF()).then((response) => {\n\t\tif(response.status === 404) return; // no update available\n\t\tif(!response.ok) throw new Error(\"Failed to fetch update manifest \" + response.statusText);\n\t\treturn response.json();\n\t});\n};\n\n// no on chunks loaded\n\n// no jsonp function","","// module cache are used so entry inlining is disabled\n// startup\n// Load entry module and return exports\n__webpack_require__(\"/Users/indeex/Downloads/webgpu-renderer-main/node_modules/_webpack-dev-server@3.11.3@webpack-dev-server/client/index.js?/\");\n__webpack_require__(\"./node_modules/_webpack@5.64.3@webpack/hot/dev-server.js\");\nvar __webpack_exports__ = __webpack_require__(\"./demo/index.ts\");\n",""],"names":[],"sourceRoot":""}